"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6663],{64672:function(e,s,t){var n=t(52322),i=t(2784),a=t(55216),r=t(49097);s.Z=e=>{let{commands:s}=e;return(0,n.jsx)("div",{className:"space-y-4",children:s.map((e,s)=>(0,n.jsx)(Command,{item:e},"command-".concat(s)))})};let Command=e=>{let{item:s}=e,[t,l]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("span",{className:"font-mono text-sm text-foreground-lighter",children:"> ".concat(s.comment)}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("div",{className:"flex gap-2 font-mono text-sm font-normal text-foreground",children:[(0,n.jsx)("span",{className:"text-foreground-lighter",children:"$"}),(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{className:"",children:[s.jsx?s.jsx():null," "]}),(0,n.jsx)("button",{type:"button",className:"text-foreground-lighter hover:text-foreground",onClick:()=>{var e;e=s.command,l(!0),navigator.clipboard.writeText(e).then(),setTimeout(function(){l(!1)},3e3)},children:t?(0,n.jsx)("div",{className:"text-brand",children:(0,n.jsx)(a.Z,{size:14,strokeWidth:3})}):(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:"block",children:(0,n.jsx)(r.Z,{size:14})})})})]})]})})]})}},35104:function(e,s,t){t.d(s,{Hk:function(){return EdgeFunctionDetails_EdgeFunctionDetails},vI:function(){return Functions_EdgeFunctionsListItem},Zv:function(){return Functions_FunctionsEmptyState},ds:function(){return Functions_TerminalInstructions}});var n=t(52322),i=t(24990),a=t(59491),r=t(6277),l=t(60674),o=t(28879),c=t.n(o),d=t(39097),u=t.n(d),x=t(5632),m=t(2784),h=t(57463),p=t(31915),f=t(49730),j=t(94580),g=t(63157),v=t(77105),b=t(84837),N=t(35530),y=t(73205),w=t(1681),F=t(26861),E=t(12744),k=t(25544),C=t(13813),Z=t(41868),A=t(55830),_=t(62350),S=t(62202),D=t(3218),z=t(46732),T=t(74645);async function deleteEdgeFunction(e){let{projectRef:s,slug:t}=e;if(!s)throw Error("projectRef is required");let n=await (0,D.$v)("".concat(z.Q2,"/projects/").concat(s,"/functions/").concat(t),{});if(n.error)throw n.error;return n}let useEdgeFunctionDeleteMutation=function(){let{onSuccess:e,onError:s,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,A.NL)();return(0,_.D)(e=>deleteEdgeFunction(e),{async onSuccess(s,t,i){let{projectRef:a}=t;await n.invalidateQueries(T.f.list(a),{refetchType:"all"}),await (null==e?void 0:e(s,t,i))},async onError(e,t,n){void 0===s?S.Am.error("Failed to delete edge function: ".concat(e.message)):s(e,t,n)},...t})};async function updateEdgeFunction(e){let{projectRef:s,slug:t,payload:n}=e;if(!s)throw Error("projectRef is required");let i=await (0,D.r$)("".concat(z.Q2,"/projects/").concat(s,"/functions/").concat(t),n);if(i.error)throw i.error;return i}let useEdgeFunctionUpdateMutation=function(){let{onSuccess:e,onError:s,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,A.NL)();return(0,_.D)(e=>updateEdgeFunction(e),{async onSuccess(s,t,i){let{projectRef:a,slug:r}=t;await n.invalidateQueries(T.f.detail(a,r)),await (null==e?void 0:e(s,t,i))},async onError(e,t,n){void 0===s?S.Am.error("Failed to update edge function: ".concat(e.message)):s(e,t,n)},...t})};var Y=t(89465),M=t(64672);let generateCLICommands=(e,s,t)=>{let i=[{command:"supabase functions deploy ".concat(null==e?void 0:e.slug),description:"This will overwrite the deployed function with your new function",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," functions deploy"," ",null==e?void 0:e.slug]}),comment:"Deploy a new version"},{command:"supabase functions delete ".concat(null==e?void 0:e.slug),description:"This will remove the function and all the logs associated with it",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," functions delete"," ",null==e?void 0:e.slug]}),comment:"Delete the function"}],a=[{command:"curl -L -X POST '".concat(s,"' -H 'Authorization: Bearer ").concat(null!=t?t:"[YOUR ANON KEY]",'\' --data \'{"name":"Functions"}\''),description:"Invokes the hello function",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"curl"})," -L -X POST '",s,"' -H 'Authorization: Bearer [YOUR ANON KEY]' ",'--data \'{"name":"Functions"}\'']}),comment:"Invoke your function"}];return{managementCommands:i,secretCommands:[{command:"supabase secrets list",description:"This will list all the secrets for your project",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," secrets list"]}),comment:"View all secrets"},{command:"supabase secrets set NAME1=VALUE1 NAME2=VALUE2",description:"This will set secrets for your project",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," secrets set NAME1=VALUE1 NAME2=VALUE2"]}),comment:"Set secrets for your project"},{command:"supabase secrets unset NAME1 NAME2 ",description:"This will delete secrets for your project",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," secrets unset NAME1 NAME2"]}),comment:"Unset secrets for your project"}],invokeCommands:a}};var EdgeFunctionDetails_EdgeFunctionDetails=()=>{var e,s;let t=(0,x.useRouter)(),{ui:o}=(0,Y.oR)(),{ref:d,functionSlug:A}=(0,l.UO)(),[_,S]=(0,m.useState)(!1),[D,z]=(0,m.useState)(!1),{data:T}=(0,k.q)({projectRef:d}),{data:R}=(0,C.z)({projectRef:d}),{data:L}=(0,Z.J)({projectRef:d,slug:A}),{mutateAsync:U,isLoading:O}=useEdgeFunctionUpdateMutation(),{mutate:I,isLoading:P}=useEdgeFunctionDeleteMutation({onSuccess:()=>{o.setNotification({category:"success",message:'Successfully deleted "'.concat(null==L?void 0:L.name,'"')}),t.push("/project/".concat(d,"/functions"))}}),W="edge-function-update-form",H=(0,Y.Xo)(a.KA.FUNCTIONS_WRITE,"*"),Q=null==T?void 0:T.autoApiService,V=(null==Q?void 0:Q.service_api_keys.find(e=>"anon key"===e.name))?Q.defaultApiKey:"[YOUR ANON KEY]",q=null!==(s=null==Q?void 0:Q.app_config.endpoint)&&void 0!==s?s:"",K=(null==R?void 0:null===(e=R.customDomain)||void 0===e?void 0:e.status)==="active"?"".concat(null==Q?void 0:Q.protocol,"://").concat(R.customDomain.hostname,"/functions/v1/").concat(null==L?void 0:L.slug):"".concat(null==Q?void 0:Q.protocol,"://").concat(q,"/functions/v1/").concat(null==L?void 0:L.slug),{managementCommands:B,secretCommands:J,invokeCommands:X}=generateCLICommands(L,K,V),onUpdateFunction=async(e,s)=>{let{resetForm:t}=s;if(!d)return console.error("Project ref is required");if(void 0===L)return console.error("No edge function selected");try{await U({projectRef:d,slug:L.slug,payload:e}),t({values:e,initialValues:e}),o.setNotification({category:"success",message:"Successfully updated edge function"})}catch(e){}},onConfirmDelete=async()=>d?void 0===L?console.error("No edge function selected"):void I({projectRef:d,slug:L.slug}):console.error("Project ref is required"),$=(0,m.useMemo)(()=>(null==L?void 0:L.import_map)||(null==L?void 0:L.import_map_path),[L]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-4 pb-16",children:[(0,n.jsx)(h.Z,{id:W,initialValues:{},onSubmit:onUpdateFunction,children:e=>{var s,t,i;let{handleReset:a,values:l,initialValues:o,resetForm:d}=e,x=JSON.stringify(l)!==JSON.stringify(o);return(0,m.useEffect)(()=>{if(void 0!==L){let e={name:null==L?void 0:L.name,verify_jwt:null==L?void 0:L.verify_jwt};d({values:e,initialValues:e})}},[L]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(F.by,{disabled:!H,footer:(0,n.jsx)("div",{className:"flex py-4 px-8",children:(0,n.jsx)(F.iN,{form:W,isSubmitting:O,hasChanges:x,handleReset:a,helper:H?void 0:"You need additional permissions to update this function"})}),children:[(0,n.jsx)(F.hj,{header:(0,n.jsx)(F.S0,{children:"Function Details"}),children:(0,n.jsxs)(F.B4,{loading:void 0===L,children:[(0,n.jsx)(p.Z,{id:"name",name:"name",label:"Name"}),(0,n.jsx)(p.Z,{disabled:!0,id:"slug",name:"slug",label:"Slug",value:null==L?void 0:L.slug}),(0,n.jsx)(p.Z,{disabled:!0,copy:!0,label:"Endpoint URL",value:K}),(0,n.jsx)(p.Z,{disabled:!0,label:"Region",value:"All functions are deployed globally"}),(0,n.jsx)(p.Z,{disabled:!0,label:"Created at",value:c()(null!==(s=null==L?void 0:L.created_at)&&void 0!==s?s:0).format("dddd, MMMM D, YYYY h:mm A")}),(0,n.jsx)(p.Z,{disabled:!0,label:"Last updated at",value:c()(null!==(t=null==L?void 0:L.updated_at)&&void 0!==t?t:0).format("dddd, MMMM D, YYYY h:mm A")}),(0,n.jsx)(p.Z,{disabled:!0,label:"Deployments",value:null!==(i=null==L?void 0:L.version)&&void 0!==i?i:0})]})}),(0,n.jsx)(F.hj,{header:(0,n.jsx)(F.S0,{children:"Function Configuration"}),children:(0,n.jsxs)(F.B4,{loading:void 0===L,children:[(0,n.jsx)(f.Z,{id:"verify_jwt",name:"verify_jwt",label:"Enforce JWT Verification",descriptionText:"Require a valid JWT in the authorization header when invoking the function"}),(0,n.jsxs)("div",{className:"space-y-1 border rounded border-default bg-surface-200 px-4 py-4",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsxs)("p",{className:"text-sm",children:["Import maps are"," ",(0,n.jsx)("span",{className:(0,r.default)($?"text-brand":"text-amber-900"),children:$?"used":"not used"})," ","for this function"]})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Import maps allow the use of bare specifiers in functions instead of explicit import URLs"}),(0,n.jsx)("div",{className:"!mt-4",children:(0,n.jsx)(j.z,{asChild:!0,type:"default",icon:(0,n.jsx)(g.Z,{strokeWidth:1.5}),children:(0,n.jsx)(u(),{href:"https://supabase.com/docs/guides/functions/import-maps",target:"_blank",rel:"noreferrer",children:"More about import maps"})})})]})]})})]})})}}),(0,n.jsxs)("div",{className:"space-y-6 rounded border bg-surface-100 px-6 py-4 drop-shadow-sm transition-all overflow-hidden",style:{maxHeight:D?800:66},children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded border bg-foreground p-2 text-background",children:(0,n.jsx)(v.Z,{strokeWidth:2})}),(0,n.jsx)("h4",{children:"Command line access"})]}),(0,n.jsx)("div",{className:"cursor-pointer",onClick:()=>z(!D),children:D?(0,n.jsx)(b.Z,{size:14,strokeWidth:1.5}):(0,n.jsx)(N.Z,{size:14,strokeWidth:1.5})})]}),(0,n.jsx)("h5",{className:"text-base",children:"Deployment management"}),(0,n.jsx)(M.Z,{commands:B}),(0,n.jsx)("h5",{className:"text-base",children:"Invoke "}),(0,n.jsx)(M.Z,{commands:X}),(0,n.jsx)("h5",{className:"text-base",children:"Secrets management"}),(0,n.jsx)(M.Z,{commands:J})]}),(0,n.jsxs)("div",{className:"!mt-8",children:[(0,n.jsx)(F.ph,{title:"Delete Edge Function",description:""}),(0,n.jsx)(E.Z,{children:(0,n.jsx)(E.Z.Content,{children:(0,n.jsxs)(y.b,{withIcon:!0,variant:"danger",title:"Once your function is deleted, it can no longer be restored",children:[(0,n.jsx)("p",{className:"mb-3",children:"Make sure you have made a backup if you want to restore your edge function"}),(0,n.jsxs)(i.fC,{delayDuration:0,children:[(0,n.jsx)(i.xz,{asChild:!0,children:(0,n.jsx)(j.z,{type:"danger",disabled:!H,loading:(null==L?void 0:L.id)===void 0,onClick:()=>S(!0),children:"Delete edge function"})}),!H&&(0,n.jsx)(i.h_,{children:(0,n.jsxs)(i.VY,{side:"bottom",children:[(0,n.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete an edge function"})})]})})]})]})})})]})]}),(0,n.jsx)(w.C,{size:"small",alignFooter:"right",header:(0,n.jsxs)("h3",{children:["Confirm to delete ",null==L?void 0:L.name]}),visible:_,loading:P,onCancel:()=>S(!1),onConfirm:onConfirmDelete,children:(0,n.jsx)("div",{className:"py-6",children:(0,n.jsx)(w.C.Content,{children:(0,n.jsx)(y.b,{withIcon:!0,variant:"warning",title:"This action cannot be undone",children:"Ensure that you have made a backup if you want to restore your edge function"})})})})]})},R=t(55216),L=t(49097),U=t(73872),O=t(2755),I=t(44171),Functions_EdgeFunctionsListItem=e=>{var s;let{function:t}=e,a=(0,x.useRouter)(),{ref:r}=(0,U.UO)(),{project:l}=(0,O.d2)(),[o,d]=(0,m.useState)(!1),{data:u}=(0,C.z)({projectRef:r}),h=null==l?void 0:l.restUrl,p=void 0!==h?new URL(h).hostname.split(".").pop():"co",f="https://".concat(r,".supabase.").concat(p,"/functions/v1/").concat(t.slug),j=(null==u?void 0:null===(s=u.customDomain)||void 0===s?void 0:s.status)==="active"?"https://".concat(u.customDomain.hostname,"/functions/v1/").concat(t.slug):f;return(0,n.jsxs)(I.Z.tr,{onClick:()=>{a.push("/project/".concat(r,"/functions/").concat(t.slug,"/details"))},children:[(0,n.jsx)(I.Z.td,{className:"",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("p",{className:"text-sm text-foreground",children:t.name})})}),(0,n.jsx)(I.Z.td,{className:"",children:(0,n.jsxs)("div",{className:"text-xs text-foreground-light flex gap-2 items-center truncate",children:[(0,n.jsx)("p",{className:"font-mono truncate hidden md:inline",children:j}),(0,n.jsx)("button",{type:"button",className:"text-foreground-lighter hover:text-foreground transition",onClick:e=>{e.stopPropagation(),d(!0),navigator.clipboard.writeText(j).then(),setTimeout(function(){d(!1)},3e3)},children:o?(0,n.jsx)("div",{className:"text-brand",children:(0,n.jsx)(R.Z,{size:14,strokeWidth:3})}):(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:"block",children:(0,n.jsx)(L.Z,{size:14,strokeWidth:1.5})})})})]})}),(0,n.jsx)(I.Z.td,{className:"hidden 2xl:table-cell",children:(0,n.jsx)("p",{className:"text-foreground-light",children:c()(t.created_at).format("DD MMM, YYYY HH:mm")})}),(0,n.jsx)(I.Z.td,{className:"lg:table-cell",children:(0,n.jsxs)(i.fC,{delayDuration:0,children:[(0,n.jsx)(i.xz,{children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:c()(t.updated_at).fromNow()})})}),(0,n.jsx)(i.h_,{children:(0,n.jsxs)(i.VY,{side:"bottom",children:[(0,n.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsxs)("span",{className:"text-xs text-foreground",children:["Last updated on ",c()(t.updated_at).format("DD MMM, YYYY HH:mm")]})})]})})]})}),(0,n.jsx)(I.Z.td,{className:"lg:table-cell",children:(0,n.jsx)("p",{className:"text-foreground-light",children:t.version})})]},t.id)},P=t(78796),W=t(47742),H=t(62186),Functions_TerminalInstructions=e=>{var s,t;let{closable:i=!1,removeBorder:a=!1}=e,r=(0,x.useRouter)(),{ref:l}=(0,U.UO)(),[o,c]=(0,m.useState)(!i),{data:d}=(0,H.h)(),{data:h}=(0,k.q)({projectRef:l}),{data:p}=(0,C.z)({projectRef:l}),f=null==h?void 0:h.autoApiService,g=(null==f?void 0:f.service_api_keys.find(e=>"anon key"===e.name))?f.defaultApiKey:"[YOUR ANON KEY]",y=null!==(t=null==h?void 0:h.autoApiService.app_config.endpoint)&&void 0!==t?t:"",w=(null==p?void 0:null===(s=p.customDomain)||void 0===s?void 0:s.status)==="active"?"https://".concat(p.customDomain.hostname,"/functions/v1"):"https://".concat(y,"/functions/v1"),F=null==h?void 0:h.autoApiService.restUrl,E=F?new URL(F).hostname.split(".").pop():"co",Z=[{command:"supabase functions new hello-world",description:" creates a function stub at ./functions/hello-world/index.ts",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," functions new hello-world"]}),comment:"Create a function"},{command:"supabase functions deploy hello-world --project-ref ".concat(l),description:"Deploys function at ./functions/hello-world/index.ts",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"supabase"})," functions deploy hello-world --project-ref ",l]}),comment:"Deploy your function"},{command:"curl -L -X POST 'https://".concat(l,".supabase.").concat(E,"/functions/v1/hello-world' -H 'Authorization: Bearer ").concat(null!=g?g:"[YOUR ANON KEY]",'\' --data \'{"name":"Functions"}\''),description:"Invokes the hello-world function",jsx:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-brand-600",children:"curl"})," -L -X POST '",w,"/hello-world' -H 'Authorization: Bearer [YOUR ANON KEY]'"," ",'--data \'{"name":"Functions"}\'']}),comment:"Invoke your function"}];return(0,n.jsxs)("div",{className:"col-span-7 overflow-hidden transition-all rounded bg-surface-100 ".concat(a?"":"border shadow"),style:{maxHeight:o?500:80},children:[(0,n.jsxs)("div",{className:"px-8 py-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-8 h-8 p-2 border rounded bg-alternative",children:(0,n.jsx)(v.Z,{strokeWidth:2})}),(0,n.jsx)("h4",{children:"Create your first Edge Function via the CLI"})]}),i&&(0,n.jsx)("div",{className:"cursor-pointer",onClick:()=>c(!o),children:o?(0,n.jsx)(b.Z,{size:14,strokeWidth:1.5}):(0,n.jsx)(N.Z,{size:14,strokeWidth:1.5})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(M.Z,{commands:Z})})]}),d&&0===d.length?(0,n.jsxs)("div",{className:"px-8 py-6 space-y-3 border-t",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-base text-foreground",children:"You may need to create an access token"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You can create a secure access token in your account section"})]}),(0,n.jsx)(j.z,{type:"default",onClick:()=>r.push("/account/tokens"),children:"Access tokens"})]}):(0,n.jsxs)("div",{className:"px-8 py-6 space-y-3 border-t",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-base text-foreground",children:"Need help?"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Read the documentation, or browse some sample code."})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(j.z,{asChild:!0,type:"default",iconRight:(0,n.jsx)(P.Z,{}),children:(0,n.jsx)(u(),{href:"https://supabase.com/docs/guides/functions",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,n.jsx)(j.z,{asChild:!0,type:"default",iconRight:(0,n.jsx)(W.Z,{}),children:(0,n.jsx)(u(),{href:"https://github.com/supabase/supabase/tree/master/examples/edge-functions/supabase/functions",target:"_blank",rel:"noreferrer",children:"Examples"})})]})]})]})},Functions_FunctionsEmptyState=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid max-w-7xl gap-y-12 py-12 lg:grid-cols-12 lg:gap-x-16",children:[(0,n.jsxs)("div",{className:"col-span-5 space-y-4",children:[(0,n.jsx)("p",{className:"max-w-lg text-base text-foreground",children:"Scalable functions to run your code with no server management."}),(0,n.jsx)("p",{className:"max-w-lg text-sm text-foreground-light",children:"Edge Functions are server-side Typescript functions, distributed globally at the edge - close to your users. They can be used for listening to webhooks or integrating your Supabase project with third-parties."}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(j.z,{asChild:!0,type:"default",iconRight:(0,n.jsx)(P.Z,{}),children:(0,n.jsx)(u(),{href:"https://supabase.com/docs/guides/functions",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,n.jsx)(j.z,{asChild:!0,type:"default",iconRight:(0,n.jsx)(W.Z,{}),children:(0,n.jsx)(u(),{href:"https://github.com/supabase/supabase/tree/master/examples/edge-functions/supabase/functions",target:"_blank",rel:"noreferrer",children:"Examples"})})]})]}),(0,n.jsx)(Functions_TerminalInstructions,{})]})})},76623:function(e,s,t){t.d(s,{Z:function(){return N}});var n=t(52322),i=t(59491),a=t(60674),r=t(46776),l=t(39097),o=t.n(l),c=t(47742),d=t(94580),u=t(63157),x=t(55691),m=t(22404),h=t(97131),p=t(41868),f=t(62046),j=t(89465),g=t(40599),v=t(5632),Functions_FunctionsNav=e=>{let{item:s}=e,t=(0,v.useRouter)(),i=t.pathname.split("/")[5],{ref:a}=t.query;return(0,n.jsxs)(g.Z,{defaultActiveId:"1",type:"underlined",size:"medium",activeId:i||"metrics",onChange:e=>t.push("/project/".concat(a,"/functions/").concat(s.slug,"/").concat("metrics"===e?"":e)),children:[(0,n.jsx)(g.Z.Panel,{id:"details",label:"Details"}),(0,n.jsx)(g.Z.Panel,{id:"metrics",label:"Metrics"}),(0,n.jsx)(g.Z.Panel,{id:"invocations",label:"Invocations"}),(0,n.jsx)(g.Z.Panel,{id:"logs",label:"Logs"})]})},b=t(51373),N=(0,j.QO)((0,r.Pi)(e=>{let{title:s,children:t}=e,{functionSlug:r,ref:l}=(0,a.UO)(),g=(0,x.cg)(),{data:v,isLoading:N}=(0,f.I)({projectRef:l}),{data:y}=(0,p.J)({projectRef:l,slug:r}),w=(0,j.Xo)(i.KA.FUNCTIONS_READ,"*");if(!w)return(0,n.jsx)(b.ZP,{title:s||"Edge Functions",product:"Edge Functions",children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,n.jsx)(h.Z,{isFullPage:!0,resourceText:"access your project's edge functions"})})});let F=(null==y?void 0:y.name)||"",E=(null!=v?v:[]).length>0;return(0,n.jsx)(b.ZP,{isLoading:N,title:s||"Edge Functions",product:"Edge Functions",children:E?(0,n.jsxs)("div",{className:"flex h-full flex-grow flex-col py-6",children:[(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col transition-all 1xl:px-28 gap-4 px-5 lg:px-16 xl:px-24 2xl:px-32",children:[(0,n.jsx)("div",{className:"item-center flex flex-col justify-between gap-y-4 xl:flex-row",children:(0,n.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,n.jsx)("div",{className:"h-6 w-6 rounded border border-brand-600 bg-brand-300 flex items-center justify-center text-brand",children:(0,n.jsx)(c.Z,{size:14,strokeWidth:3})}),(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(o(),{href:"/project/".concat(l,"/functions"),children:(0,n.jsx)("h1",{className:"cursor-pointer text-2xl text-foreground transition-colors hover:text-foreground-light",children:"Edge Functions"})}),F&&(0,n.jsxs)("div",{className:"mt-1.5 flex items-center space-x-4",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,n.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,n.jsx)("h5",{className:"text-lg text-foreground",children:F})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(d.z,{asChild:!0,type:"default",children:(0,n.jsx)(o(),{href:"/project/".concat(l,"/settings/functions"),children:"Manage secrets"})}),g&&(0,n.jsx)(m.Z,{section:void 0!==r?["edge-functions",r]:["edge-functions"]}),(0,n.jsx)(d.z,{asChild:!0,type:"default",className:"translate-y-[1px]",icon:(0,n.jsx)(u.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)(o(),{href:"https://supabase.com/docs/guides/functions",target:"_link",children:"Documentation"})})]})]})]})}),void 0!==r&&(0,n.jsx)(Functions_FunctionsNav,{item:y})]}),(0,n.jsx)("div",{className:"mx-auto flex h-full w-full flex-grow flex-col transition-all 1xl:px-28 gap-4 px-5 lg:px-16 xl:px-24 2xl:px-32",children:t})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mx-auto max-w-5xl py-24 px-5",children:[(0,n.jsx)("div",{className:"item-center flex flex-col justify-between gap-y-4 xl:flex-row",children:(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)("h1",{className:"text-2xl text-foreground",children:"Edge Functions"})})})}),t]})})})}))},26861:function(e,s,t){t.d(s,{iN:function(){return FormActions},ph:function(){return FormHeader},by:function(){return FormPanel},hj:function(){return FormSection},B4:function(){return FormSectionContent},S0:function(){return FormSectionLabel},ld:function(){return FormsContainer}});var n=t(52322);function FormsContainer(e){return(0,n.jsxs)("div",{className:"mx-auto max-w-4xl px-5 pt-12 pb-20",children:[e.header&&(0,n.jsx)("h1",{className:"text-foreground mb-8 text-3xl",children:e.header}),(0,n.jsx)("div",{className:"space-y-20",children:e.children})]})}var i=t(39097),a=t.n(i),r=t(29071),l=t(94580),o=t(63157);let FormHeader=e=>{let{title:s,description:t,docsUrl:i}=e;return(0,n.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h3",{className:"text-foreground text-xl",children:(0,n.jsx)(r.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:s})}),t&&(0,n.jsx)("div",{className:"text-foreground-lighter text-sm",children:(0,n.jsx)(r.D,{children:t})})]}),void 0!==i&&(0,n.jsx)(l.z,{asChild:!0,type:"default",icon:(0,n.jsx)(o.Z,{}),children:(0,n.jsx)(a(),{href:i,target:"_blank",rel:"noreferrer",children:"Documentation"})})]})};var c=t(2784);let FormSection=e=>{let{children:s,id:t,header:i,disabled:a,className:r}=e;return(0,n.jsxs)("div",{id:t,className:["grid grid-cols-12 gap-6 px-8 py-8","".concat(a?" opacity-30":" opacity-100"),"".concat(r)].join(" "),children:[i,s]})},FormSectionLabel=e=>{let{children:s,className:t="",description:i}=e;return void 0!==i?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(t),children:[(0,n.jsx)("label",{className:"text-foreground text-sm",children:s}),i]}):(0,n.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(t),children:s})},Shimmer=()=>(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,n.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,n.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,n.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),FormSectionContent=e=>{let{children:s,loading:t=!0,fullWidth:i,className:a}=e;return(0,n.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(i&&"!col-span-12","\n        ").concat(a,"\n      "),children:t?c.Children.map(s,()=>(0,n.jsx)(Shimmer,{})):s})},FormPanel=e=>{let{children:s,header:t,footer:i}=e;return(0,n.jsxs)("div",{className:" bg-surface-100 border-default overflow-hidden  rounded-md border shadow",children:[t&&(0,n.jsx)("div",{className:"border-default border-b px-8 py-4",children:t}),(0,n.jsx)("div",{className:"divide-border flex flex-col gap-0 divide-y",children:s}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-default border-t"}),i]})]})},FormActions=e=>{let{form:s,hasChanges:t,handleReset:i,helper:a,disabled:r=!1,isSubmitting:o,submitText:c="Save"}=e,d=o||r||!t&&void 0!==t;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",a?"justify-between":"justify-end"].join(" "),children:[a&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:a}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.z,{disabled:d,type:"default",htmlType:"reset",onClick:()=>i(),children:"Cancel"}),(0,n.jsx)(l.z,{form:s,type:"primary",htmlType:"submit",disabled:d,loading:o,children:c})]})]})}},62186:function(e,s,t){t.d(s,{h:function(){return useAccessTokensQuery}});var n=t(58943),i=t(3218),a=t(46732),r=t(37588);async function getAccessTokens(e){let s=await (0,i.U2)("".concat(a.T5,"/profile/access-tokens"),{signal:e});if(!(0,i.d8)(s))throw s.error;return s}let useAccessTokensQuery=function(){let{enabled:e=!0,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.a)(r.C.list(),e=>{let{signal:s}=e;return getAccessTokens(s)},s)}},37588:function(e,s,t){t.d(s,{C:function(){return n}});let n={list:()=>["access-tokens"]}},41868:function(e,s,t){t.d(s,{J:function(){return useEdgeFunctionQuery}});var n=t(58943),i=t(3218),a=t(46732),r=t(74645);async function getEdgeFunction(e,s){let{projectRef:t,slug:n}=e;if(!t)throw Error("projectRef is required");if(!n)throw Error("slug is required");let r=await (0,i.U2)("".concat(a.Q2,"/projects/").concat(t,"/functions/").concat(n),{signal:s});if(r.error)throw r.error;return r}let useEdgeFunctionQuery=function(e){let{projectRef:s,slug:t}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.f.detail(s,t),e=>{let{signal:n}=e;return getEdgeFunction({projectRef:s,slug:t},n)},{enabled:a.Qy&&i&&void 0!==s&&void 0!==t,...l})}}}]);