(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2580],{31403:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor/[id]",function(){return n(34206)}])},51343:function(e,t,n){"use strict";n.d(t,{Z:function(){return TableGridEditor_DeleteConfirmationDialogs}});var i=n(52322),o=n(55830),r=n(39097),a=n.n(r),l=n(62202),s=n(1681),c=n(44593),d=n(73205),u=n(94580),m=n(63157),f=n(99902),p=n(2755),h=n(98050),g=n(27924),v=n(74596),b=n(62350),y=n(90507),w=n(70481),x=n(74915),j=n(11033),D=n(77565);async function deleteAllTableRow(e){let{projectRef:t,connectionString:n,table:i,filters:o,impersonatedRole:r}=e,a=(0,x.Jh)(function(e){var t;let{table:n,filters:i}=e,o=new y.AE().from(n.name,null!==(t=n.schema)&&void 0!==t?t:void 0).delete();return i.filter(e=>e.value&&""!==e.value).forEach(e=>{let t=(0,D.q)(n,e);o=o.filter(e.column,e.operator,t)}),o.toSql()}({table:i,filters:o}),{projectRef:t,role:r}),{result:l}=await (0,w.Rj)({projectRef:t,connectionString:n,sql:a,isRoleImpersonationEnabled:(0,j.Gm)(r)});return l}let useTableRowDeleteAllMutation=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,o.NL)();return(0,b.D)(e=>deleteAllTableRow(e),{async onSuccess(t,n,o){let{projectRef:r,table:a}=n;await i.invalidateQueries(v.M.query(r,[a.schema,a.name])),await (null==e?void 0:e(t,n,o))},async onError(e,n,i){void 0===t?l.Am.error("Failed to delete all table rows: ".concat(e.message)):t(e,n,i)},...n})};async function deleteTableRow(e){let{projectRef:t,connectionString:n,table:i,rows:o,impersonatedRole:r}=e,a=(0,x.Jh)(function(e){var t;let{table:n,rows:i}=e,{primaryKeys:o,error:r}=(0,D.h)({table:n});if(r)throw r;let a=new y.AE().from(n.name,null!==(t=n.schema)&&void 0!==t?t:void 0).delete();return o.forEach(e=>{let t=i.map(t=>t[e]);a=a.filter(e,"in",t)}),a.toSql()}({table:i,rows:o}),{projectRef:t,role:r}),{result:l}=await (0,w.Rj)({projectRef:t,connectionString:n,sql:a,isRoleImpersonationEnabled:(0,j.Gm)(r)});return l}let useTableRowDeleteMutation=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,o.NL)();return(0,b.D)(e=>deleteTableRow(e),{async onSuccess(t,n,o){let{projectRef:r,table:a}=n;await i.invalidateQueries(v.M.query(r,[a.schema,a.name])),await (null==e?void 0:e(t,n,o))},async onError(e,n,i){void 0===t?l.Am.error("Failed to delete table row: ".concat(e.message)):t(e,n,i)},...n})};async function truncateTableRow(e){let{projectRef:t,connectionString:n,table:i,impersonatedRole:o}=e,r=(0,x.Jh)(function(e){var t;let{table:n}=e;return new y.AE().from(n.name,null!==(t=n.schema)&&void 0!==t?t:void 0).truncate().toSql()}({table:i}),{projectRef:t,role:o}),{result:a}=await (0,w.Rj)({projectRef:t,connectionString:n,sql:r,isRoleImpersonationEnabled:(0,j.Gm)(o)});return a}let useTableRowTruncateMutation=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,o.NL)();return(0,b.D)(e=>truncateTableRow(e),{async onSuccess(t,n,o){let{projectRef:r,table:a}=n;await i.invalidateQueries(v.M.query(r,[a.schema,a.name])),await (null==e?void 0:e(t,n,o))},async onError(e,n,i){void 0===t?l.Am.error("Failed to truncate table row: ".concat(e.message)):t(e,n,i)},...n})};var T=n(33039),C=n(93969),S=n(666),N=n(89465),E=n(47095),_=n(44389),TableGridEditor_DeleteConfirmationDialogs=e=>{var t,n,r,b,y,w,x,D,R;let{projectRef:z,selectedTable:Z,onAfterDeleteTable:k=E.ZT}=e,{meta:A,ui:q}=(0,N.oR)(),I=(0,o.NL)(),{project:P}=(0,p.d2)(),F=(0,_._2)(),[{filter:L},Q]=(0,N.x3)({arrayKeys:["filter","sort"]}),M=(0,f.Yb)(L),O=(0,C.AF)({projectRef:null==P?void 0:P.ref,connectionString:null==P?void 0:P.connectionString}),{mutate:W}=useTableRowDeleteMutation({onSuccess:()=>{var e,t,n;(null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(t=(n=F.confirmationDialog).callback)||void 0===t||t.call(n)),l.ZP.success("Successfully deleted selected row(s)"),F.closeConfirmationDialog()},onError:e=>{l.ZP.error("Failed to delete row: ".concat(e.message)),F.closeConfirmationDialog()}}),{mutateAsync:V}=useTableRowDeleteAllMutation({onSuccess:()=>{var e,t,n;(null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(t=(n=F.confirmationDialog).callback)||void 0===t||t.call(n)),l.ZP.success("Successfully deleted selected rows"),F.closeConfirmationDialog()},onError:e=>{l.ZP.error("Failed to delete rows: ".concat(e.message)),F.closeConfirmationDialog()}}),{mutateAsync:B}=useTableRowTruncateMutation({onSuccess:()=>{var e,t,n;(null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(t=(n=F.confirmationDialog).callback)||void 0===t||t.call(n)),l.ZP.success("Successfully deleted all rows from table"),F.closeConfirmationDialog()},onError:e=>{l.ZP.error("Failed to delete rows: ".concat(e.message)),F.closeConfirmationDialog()}}),U=(null===(t=F.confirmationDialog)||void 0===t?void 0:t.type)==="row"&&F.confirmationDialog.allRowsSelected,G=(null===(n=F.confirmationDialog)||void 0===n?void 0:n.type)==="row"?F.confirmationDialog.allRowsSelected?null!==(R=F.confirmationDialog.numRows)&&void 0!==R?R:0:F.confirmationDialog.rows.length:0,removeDeletedColumnFromFiltersAndSorts=e=>{Q(t=>{var n,i;let o=null!==(n=null==t?void 0:t.filter)&&void 0!==n?n:[],r=null!==(i=null==t?void 0:t.sort)&&void 0!==i?i:[];return{...t,filter:o.filter(t=>{let[n]=t.split(":");if(n!==e)return t}),sort:r.filter(t=>{let[n]=t.split(":");if(n!==e)return t})}})},H=((null===(r=F.confirmationDialog)||void 0===r?void 0:r.type)==="column"||(null===(b=F.confirmationDialog)||void 0===b?void 0:b.type)==="table")&&F.confirmationDialog.isDeleteWithCascade,onConfirmDeleteColumn=async()=>{var e;if((null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)!=="column")return;let t=F.confirmationDialog.column;try{if(void 0===t)return;let e=await A.columns.del(t.id,H);if(e.error)throw e.error;removeDeletedColumnFromFiltersAndSorts(t.name),q.setNotification({category:"success",message:'Successfully deleted column "'.concat(t.name,'"')}),await Promise.all([I.invalidateQueries(v.M.query(null==P?void 0:P.ref,["foreign-key-constraints"])),I.invalidateQueries(T.W.table(null==P?void 0:P.ref,t.table_id)),I.invalidateQueries(v.M.query(null==P?void 0:P.ref,[Z.schema,Z.name])),I.invalidateQueries(v.M.query(null==P?void 0:P.ref,["table-definition",Z.schema,Z.name])),I.invalidateQueries(g.C.list(z)),F.selectedSchemaName?I.invalidateQueries(S.N.listBySchema(z,F.selectedSchemaName)):null,I.invalidateQueries(S.N.view(z,null==Z?void 0:Z.id))])}catch(e){q.setNotification({category:"error",message:"Failed to delete ".concat(t.name,": ").concat(e.message)})}finally{F.closeConfirmationDialog()}},onConfirmDeleteTable=async()=>{var e;if((null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)==="table")try{if(void 0===Z)return;let e=await A.tables.del(Z.id,H);if(e.error)throw e.error;let t=await O(F.selectedSchemaName);await Promise.all([I.invalidateQueries(g.C.list(z)),F.selectedSchemaName?I.invalidateQueries(S.N.listBySchema(z,F.selectedSchemaName)):null,I.invalidateQueries(S.N.view(z,null==Z?void 0:Z.id))]),k(t),q.setNotification({category:"success",message:'Successfully deleted table "'.concat(Z.name,'"')})}catch(e){q.setNotification({error:e,category:"error",message:"Failed to delete ".concat(null==Z?void 0:Z.name,": ").concat(e.message)})}finally{F.closeConfirmationDialog()}},J=(0,j.z6)(),onConfirmDeleteRow=async()=>{var e;if(!P)return console.error("Project ref is required");if(!Z)return console.error("Selected table required");if((null===(e=F.confirmationDialog)||void 0===e?void 0:e.type)!=="row")return;let t=F.confirmationDialog.rows;F.confirmationDialog.allRowsSelected?0===M.length?B({projectRef:P.ref,connectionString:P.connectionString,table:Z,impersonatedRole:J()}):V({projectRef:P.ref,connectionString:P.connectionString,table:Z,filters:M,impersonatedRole:J()}):W({projectRef:P.ref,connectionString:P.connectionString,table:Z,rows:t,impersonatedRole:J()})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{danger:!0,size:"small",visible:(null===(y=F.confirmationDialog)||void 0===y?void 0:y.type)==="column",header:'Confirm deletion of column "'.concat((null===(w=F.confirmationDialog)||void 0===w?void 0:w.type)==="column"&&F.confirmationDialog.column.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:()=>{F.closeConfirmationDialog()},onSelectConfirm:onConfirmDeleteColumn,children:(0,i.jsx)(s.C.Content,{children:(0,i.jsxs)("div",{className:"py-4 space-y-4",children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected column? This action cannot be undone."}),(0,i.jsx)(c.Z,{label:"Drop column with cascade?",description:"Deletes the column and its dependent objects",checked:H,onChange:()=>F.toggleConfirmationIsWithCascade()}),H&&(0,i.jsxs)(d.b,{withIcon:!0,variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,i.jsx)("p",{className:"mb-4",children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,i.jsx)(u.z,{asChild:!0,size:"tiny",type:"default",icon:(0,i.jsx)(m.Z,{}),children:(0,i.jsx)(a(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})]})]})})}),(0,i.jsx)(h.Z,{danger:!0,size:"small",visible:(null===(x=F.confirmationDialog)||void 0===x?void 0:x.type)==="table",header:(0,i.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null==Z?void 0:Z.name,'"')}),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:()=>{F.closeConfirmationDialog()},onSelectConfirm:onConfirmDeleteTable,children:(0,i.jsx)(s.C.Content,{children:(0,i.jsxs)("div",{className:"py-4 space-y-4",children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected table? This action cannot be undone."}),(0,i.jsx)(c.Z,{label:"Drop table with cascade?",description:"Deletes the table and its dependent objects",checked:H,onChange:()=>F.toggleConfirmationIsWithCascade(!H)}),H&&(0,i.jsxs)(d.b,{withIcon:!0,variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,i.jsx)("p",{className:"mb-4",children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,i.jsx)(u.z,{asChild:!0,size:"tiny",type:"default",icon:(0,i.jsx)(m.Z,{}),children:(0,i.jsx)(a(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})]})]})})}),(0,i.jsx)(h.Z,{danger:!0,size:"small",visible:(null===(D=F.confirmationDialog)||void 0===D?void 0:D.type)==="row",header:(0,i.jsxs)("span",{className:"break-words",children:["Confirm to delete the selected row",G>1&&"s"]}),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:()=>F.closeConfirmationDialog(),onSelectConfirm:()=>onConfirmDeleteRow(),children:(0,i.jsx)(s.C.Content,{children:(0,i.jsx)("div",{className:"py-4 space-y-4",children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to delete ",U?"all":"the selected"," ",G>1&&"".concat(G," "),"row",G>1&&"s","? This action cannot be undone."]})})})})]})}},11539:function(e,t,n){"use strict";var i=n(52322),o=n(34291),r=n.n(o),a=n(2784),l=n(94580);t.Z=e=>{let{loading:t=!1,disableApply:n=!1,hideApply:o=!1,children:s,applyButtonLabel:c="Apply",backButtonLabel:d="Back",applyFunction:u,closePanel:m=r(),formId:f}=e,[p,h]=(0,a.useState)(!1),applyCallback=()=>new Promise(e=>u(e)),onSelectApply=async()=>{h(!0),await applyCallback(),h(!1)};return(0,i.jsxs)("div",{className:"flex w-full justify-end space-x-3 border-t border-default px-3 py-4",children:[(0,i.jsx)(l.z,{size:"small",type:"default",htmlType:"button",onClick:m,disabled:p||t,children:d}),s,void 0!==u?(0,i.jsx)(l.z,{size:"small",onClick:onSelectApply,disabled:n||p||t,loading:p||t,children:c}):o?(0,i.jsx)("div",{}):(0,i.jsx)(l.z,{size:"small",disabled:t||n,loading:t,htmlType:"submit",form:f,children:c})]})}},40127:function(e,t,n){"use strict";n.d(t,{Z:function(){return ColumnEditor_ColumnType}});var i=n(52322),o=n(34291),r=n.n(o),a=n(39097),l=n.n(a),s=n(31915),c=n(29245),d=n(27087);n(2784);var u=n(26445),m=n(97265),IconType_IconType=function(e){return(0,i.jsx)(m.Z,{icon:u.Z,...e})},f=n(99311),IconToggleRight_IconToggleRight=function(e){return(0,i.jsx)(m.Z,{icon:f.Z,...e})},p=n(60240),h=n(73205),g=n(94580),v=n(63157),b=n(75685),y=n(34876),ColumnEditor_ColumnType=e=>{let{value:t,enumTypes:n=[],className:o,size:a="medium",layout:u,error:m,disabled:f=!1,showLabel:w=!0,description:x,showRecommendation:j=!1,onOptionSelect:D=r()}=e,T=b.DL.concat(n.map(e=>e.name)),C=!t||T.includes(t),S=b.VP[t];if(!C)return(0,i.jsx)(s.Z,{readOnly:!0,disabled:!0,label:w?"Type":"",layout:w?"horizontal":void 0,className:"md:gap-x-0",size:"small",value:t,descriptionText:w?"Custom non-native psql data types cannot currently be changed to a different data type via Supabase Studio":""});let inferIcon=e=>{switch(e){case"number":return(0,i.jsx)(c.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"time":return(0,i.jsx)(d.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"text":return(0,i.jsx)(IconType_IconType,{size:16,className:"text-foreground",strokeWidth:1.5});case"json":return(0,i.jsx)("div",{className:"text-foreground",style:{padding:"0px 1px"},children:"{ }"});case"bool":return(0,i.jsx)(IconToggleRight_IconToggleRight,{size:16,className:"text-foreground",strokeWidth:1.5});default:return(0,i.jsx)("div",{})}};return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(p.Z,{label:w?"Type":"",layout:u||(w?"horizontal":"vertical"),value:t,size:a,error:m,disabled:f,descriptionText:x,className:"".concat(o," ").concat(f?"column-type-disabled":""," rounded-md"),onChange:e=>D(e),optionsWidth:480,children:[(0,i.jsx)(p.Z.Option,{value:"",label:"---",children:"---"},"empty"),n.length>0?(0,i.jsx)(p.Z.Option,{disabled:!0,value:"header-1",label:"header-1",children:"Other Data Types"},"header-1"):(0,i.jsx)(i.Fragment,{}),n.length>0?n.map(e=>(0,i.jsx)(p.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>(0,i.jsx)(y.Z,{size:16,className:"text-foreground",strokeWidth:1.5}),children:(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("p",{className:"text-foreground",children:e.name}),void 0!==e.comment&&(0,i.jsx)("p",{className:"text-foreground-lighter",children:e.comment})]})},e.name)):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(p.Z.Option,{disabled:!0,value:"header-2",label:"header-2",children:"PostgreSQL Data Types"}),b.N0.map(e=>(0,i.jsx)(p.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>inferIcon(e.type),children:(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("span",{className:"text-foreground",children:e.name}),(0,i.jsx)("span",{className:"text-foreground-lighter",children:e.description})]})},e.name))]}),j&&void 0!==S&&(0,i.jsxs)(h.b,{withIcon:!0,variant:"warning",title:(0,i.jsxs)(i.Fragment,{children:["It is recommended to use ",(0,i.jsx)("code",{className:"text-xs",children:S.alternative})," ","instead"]}),children:[(0,i.jsxs)("p",{children:["Postgres recommends against using the data type ",(0,i.jsx)("code",{className:"text-xs",children:t})," ","unless you have a very specific use case."]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,i.jsx)(g.z,{asChild:!0,type:"default",icon:(0,i.jsx)(v.Z,{}),children:(0,i.jsx)(l(),{href:S.reference,target:"_blank",rel:"noreferrer",children:"Read more"})}),(0,i.jsxs)(g.z,{type:"primary",onClick:()=>D(S.alternative),children:["Use ",S.alternative]})]})]})]})}},75685:function(e,t,n){"use strict";n.d(t,{BB:function(){return s},DL:function(){return f},Ks:function(){return c},N0:function(){return h},VP:function(){return p},XO:function(){return u},YF:function(){return l},lb:function(){return d},nA:function(){return m}});var i=n(829),o=n.n(i),r=n(22487),a=n.n(r);let l=["json","jsonb"],s=["text","varchar"],c=["timestamp","timestamptz"],d=["date"],u=["time","timetz"],m=a()(c,d,u),f=o()(a()(["int2","int4","int8","float4","float8","numeric","double precision"],l,s,m,["uuid","bool","vector"])),p={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},h=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"}]},49889:function(e,t,n){"use strict";n.d(t,{dU:function(){return o.dU},mM:function(){return i.ZP},uW:function(){return o.uW}});var i=n(48271),o=n(30310)},86323:function(e,t,n){"use strict";n.d(t,{z:function(){return useDatabasePublicationsQuery}});var i=n(58943),o=n(9402),r=n(37248);async function getDatabasePublications(e,t){let{projectRef:n,connectionString:i}=e;if(!n)throw Error("projectRef is required");let r=new Headers;i&&r.set("x-connection-encrypted",i);let{data:a,error:l}=await (0,o.U2)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":i},path:{ref:n}},headers:r,signal:t});if(l)throw l;return a}let useDatabasePublicationsQuery=function(e){let{projectRef:t,connectionString:n}=e,{enabled:o=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(r.z.list(t),e=>{let{signal:i}=e;return getDatabasePublications({projectRef:t,connectionString:n},i)},{enabled:o&&void 0!==t,...a})}},59600:function(e,t,n){"use strict";n.d(t,{u:function(){return useDatabasePublicationUpdateMutation}});var i=n(55830),o=n(62350),r=n(62202),a=n(9402),l=n(37248);async function updateDatabasePublication(e){let{projectRef:t,connectionString:n,id:i,tables:o,publish_insert:r,publish_update:l,publish_delete:s,publish_truncate:c}=e,d=new Headers;n&&d.set("x-connection-encrypted",n);let u={id:i};void 0!==o&&(u.tables=o),void 0!==r&&(u.publish_insert=r),void 0!==l&&(u.publish_update=l),void 0!==s&&(u.publish_delete=s),void 0!==c&&(u.publish_truncate=c);let{data:m,error:f}=await (0,a.r$)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":n},path:{ref:t},query:{id:i}},body:u,headers:d});if(f)throw f;return m}let useDatabasePublicationUpdateMutation=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,i.NL)();return(0,o.D)(e=>updateDatabasePublication(e),{async onSuccess(t,n,i){let{projectRef:o}=n;await a.invalidateQueries(l.z.list(o)),await (null==e?void 0:e(t,n,i))},async onError(e,n,i){void 0===t?r.Am.error("Failed to update database publication: ".concat(e.message)):t(e,n,i)},...n})}},37248:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});let i={list:e=>["projects",e,"database-publications"]}},666:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});let i={list:e=>["projects",e,"views"],listBySchema:(e,t)=>[...i.list(e),t],view:(e,t)=>[...i.list(e),t]}},96286:function(e,t,n){"use strict";n.d(t,{Z:function(){return misc_useTable}});var i=n(2755),o=n(5835),r=n(58943),a=n(3218),l=n(46732);async function getForeignTable(e,t){let{id:n,projectRef:i,connectionString:o}=e;if(!i)throw Error("projectRef is required");if(!n)throw Error("id is required");let r=new Headers;o&&r.set("x-connection-encrypted",o);let s=await (0,a.U2)("".concat(l.T5,"/pg-meta/").concat(i,"/foreign-tables?id=").concat(n),{headers:Object.fromEntries(r),signal:t});if("error"in s)throw s.error;return s}let useForeignTableQuery=function(e){let{projectRef:t,connectionString:n,id:i}=e,{enabled:o=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(["projects",t,"foreignTables",i],e=>{let{signal:o}=e;return getForeignTable({projectRef:t,connectionString:n,id:i},o)},{enabled:o&&void 0!==t&&void 0!==i,...a})};async function getMaterializedView(e,t){let{id:n,projectRef:i,connectionString:o}=e;if(!i)throw Error("projectRef is required");if(!n)throw Error("id is required");let r=new Headers;o&&r.set("x-connection-encrypted",o);let s=await (0,a.U2)("".concat(l.T5,"/pg-meta/").concat(i,"/materialized-views?id=").concat(n),{headers:Object.fromEntries(r),signal:t});if("error"in s)throw s.error;return s}let useMaterializedViewQuery=function(e){let{projectRef:t,connectionString:n,id:i}=e,{enabled:o=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(["projects",t,"materializedViews",i],e=>{let{signal:o}=e;return getMaterializedView({projectRef:t,connectionString:n,id:i},o)},{enabled:o&&void 0!==t&&void 0!==i,...a})};var s=n(90948),c=n(666);async function getView(e,t){let{id:n,projectRef:i,connectionString:o}=e;if(!i)throw Error("projectRef is required");if(!n)throw Error("id is required");let r=new Headers;o&&r.set("x-connection-encrypted",o);let s=await (0,a.U2)("".concat(l.T5,"/pg-meta/").concat(i,"/views?id=").concat(n),{headers:Object.fromEntries(r),signal:t});if("error"in s)throw s.error;return s}let useViewQuery=function(e){let{projectRef:t,connectionString:n,id:i}=e,{enabled:o=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(c.N.view(t,i),e=>{let{signal:o}=e;return getView({projectRef:t,connectionString:n,id:i},o)},{enabled:o&&void 0!==t&&void 0!==i,...a})};var d=n(16323),misc_useTable=function(e){let{project:t}=(0,i.d2)(),n=(0,d.Z)(e),r=(0,s.yp)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===o.l.TABLE}),a=useViewQuery({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===o.l.VIEW}),l=useMaterializedViewQuery({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===o.l.MATERIALIZED_VIEW}),c=useForeignTableQuery({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===o.l.FOREIGN_TABLE});switch(null==n?void 0:n.type){case o.l.TABLE:return r;case o.l.VIEW:return a;case o.l.MATERIALIZED_VIEW:return l;case o.l.FOREIGN_TABLE:return c;default:return r}}},34206:function(e,t,n){"use strict";n.r(t);var i=n(52322),o=n(38617),r=n(73872),a=n(49889),l=n(51343),s=n(51373),c=n(2755),d=n(96286),u=n(5632);let TableEditorPage=()=>{let e=(0,u.useRouter)(),{resolvedTheme:t}=(0,o.F)(),{id:n,ref:s}=(0,r.UO)(),c=n?Number(n):void 0,{data:m,isLoading:f}=(0,d.Z)(c);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.mM,{isLoadingSelectedTable:f,selectedTable:m,theme:(null==t?void 0:t.includes("dark"))?"dark":"light"}),(0,i.jsx)(l.Z,{projectRef:s,selectedTable:m,onAfterDeleteTable:t=>{t.length>0?e.push("/project/".concat(s,"/editor/").concat(t[0].id)):e.push("/project/".concat(s,"/editor/"))}})]})};TableEditorPage.getLayout=e=>(0,i.jsx)(c.C,{children:(0,i.jsx)(s.lz,{children:e})}),t.default=TableEditorPage},59343:function(e,t,n){"use strict";var i=n(52322);n(2784);var o=n(48869),r=n(97265);t.Z=function(e){return(0,i.jsx)(r.Z,{icon:o.Z,...e})}},29245:function(e,t,n){"use strict";var i=n(52322);n(2784);var o=n(83178),r=n(97265);t.Z=function(e){return(0,i.jsx)(r.Z,{icon:o.Z,...e})}}},function(e){e.O(0,[6139,1715,1187,6653,3844,8421,9362,4796,806,2591,3958,5413,4019,1971,3614,6782,4345,1915,4079,4964,8211,452,8108,3313,8271,310,9774,2888,179],function(){return e(e.s=31403)}),_N_E=e.O()}]);