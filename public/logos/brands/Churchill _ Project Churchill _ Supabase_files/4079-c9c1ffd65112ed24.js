"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4079],{83094:function(e,r,n){var t=n(52322),a=n(2784),s=n(62202),l=n(4220),o=n(56469),i=n(94580),d=n(43502),c=n(50671),f=n(50575),u=n(89465),m=n(46732);r.Z=e=>{var r,n,x;let{organizationIntegrationId:p,foreignProjects:g,supabaseProjects:h,onCreateConnections:j,installedConnections:v=[],isLoading:N,integrationIcon:w,getForeignProjectIcon:b,choosePrompt:y="Choose a project",onSkip:S,loadingForeignProjects:C,loadingSupabaseProjects:k,defaultSupabaseProjectRef:R,defaultForeignProjectId:Y}=e,[z,L]=(0,a.useState)(!1),[_,Z]=(0,a.useState)(!1),P=(0,a.useRef)(null),I=(0,a.useRef)(null),W=(0,u.lL)(),[E,G]=(0,a.useState)(R);(0,a.useEffect)(()=>{void 0!==R&&void 0===E&&G(R)},[R,E]);let[O,F]=(0,a.useState)(Y);(0,a.useEffect)(()=>{void 0!==Y&&void 0===O&&F(Y)},[Y,O]);let q=new Set(v.map(e=>e.foreign_project_id)),A=E?h.find(e=>{var r;return(null===(r=e.ref)||void 0===r?void 0:r.toLowerCase())===(null==E?void 0:E.toLowerCase())}):void 0,D=O?g.find(e=>{var r;return(null===(r=e.id)||void 0===r?void 0:r.toLowerCase())===(null==O?void 0:O.toLowerCase())}):void 0,Panel=e=>{let{children:r,className:n,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col grow gap-6 px-5 mx-auto w-full justify-center items-center",n),...a,children:r})},J=0===h.length,T=0===g.length,U=J?"Supabase":"Vercel";return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"relative border rounded-lg p-12 bg shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-grid-black/5 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-white/5 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]",style:{backgroundPosition:"10px 10px"}}),C||k?(0,t.jsxs)("div",{className:"w-1/2 mx-auto space-y-2 py-4",children:[(0,t.jsx)("p",{className:"text-foreground text-center",children:"Loading projects"}),(0,t.jsx)(f.Z,{active:!0})]}):J||T?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("h5",{className:"text-foreground",children:["No ",U," Projects found"]}),(0,t.jsxs)("p",{className:"text-foreground-light text-sm",children:["You will need to create a ",U," Project to link to a ",J?"Vercel":"Supabase"," ","Project.",(0,t.jsx)("br",{}),"You can skip this and create a Project Connection later."]})]}):(0,t.jsxs)("div",{className:"flex gap-0 w-full relative",children:[(0,t.jsxs)(Panel,{children:[(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-12 h-12 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(m.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-6"})}),(0,t.jsxs)(o.J2,{open:z,onOpenChange:L,children:[(0,t.jsx)(o.xo,{asChild:!0,children:(0,t.jsx)(i.z,{ref:P,type:"default",size:"medium",block:!0,disabled:void 0!==R||k,loading:k,className:"justify-start",icon:(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(m.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),iconRight:void 0===R?(0,t.jsx)("span",{className:"grow flex justify-end",children:(0,t.jsx)(d.Z,{className:""})}):null,children:A?A.name:"Choose Supabase Project"})}),(0,t.jsx)(o.yk,{className:"p-0 w-full",side:"bottom",align:"center",style:{width:null===(r=P.current)||void 0===r?void 0:r.offsetWidth},children:(0,t.jsxs)(c.mY,{children:[(0,t.jsx)(c.sZ,{placeholder:"Search for a project"}),(0,t.jsxs)(c.e8,{className:"!max-h-[170px]",children:[(0,t.jsx)(c.rb,{children:"No results found."}),(0,t.jsx)(c.fu,{children:h.map((e,r)=>(0,t.jsxs)(c.di,{value:"".concat(e.name,"-").concat(r),className:"flex gap-2 items-center",onSelect:()=>{e.ref&&G(e.ref),L(!1)},children:[(0,t.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,t.jsx)("img",{src:"".concat(m.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),(0,t.jsx)("span",{children:e.name})]},e.ref))})]})]})})]})]}),(0,t.jsx)("div",{className:"border border-foreground-lighter h-px w-16 border-dashed self-end mb-5"}),(0,t.jsxs)(Panel,{children:[(0,t.jsx)("div",{className:"bg-black shadow rounded p-1 w-12 h-12 flex justify-center items-center",children:w}),(0,t.jsxs)(o.J2,{open:_,onOpenChange:Z,children:[(0,t.jsx)(o.xo,{asChild:!0,children:(0,t.jsx)(i.z,{ref:I,type:"default",size:"medium",block:!0,disabled:C,loading:C,className:"justify-start",icon:D?null==b?void 0:b(D):w,iconRight:(0,t.jsx)("span",{className:"grow flex justify-end",children:(0,t.jsx)(d.Z,{className:""})}),children:null!==(x=D&&D.name)&&void 0!==x?x:y})}),(0,t.jsx)(o.yk,{className:"p-0 w-full",side:"bottom",align:"center",style:{width:null===(n=I.current)||void 0===n?void 0:n.offsetWidth},children:(0,t.jsxs)(c.mY,{children:[(0,t.jsx)(c.sZ,{placeholder:"Search for a project"}),(0,t.jsxs)(c.e8,{className:"!max-h-[170px]",children:[(0,t.jsx)(c.rb,{children:"No results found."}),(0,t.jsx)(c.fu,{children:g.map((e,r)=>{var n;return(0,t.jsxs)(c.di,{value:"".concat(e.name,"-").concat(r),className:"flex gap-2 items-center",onSelect:()=>{e.id&&F(e.id),Z(!1)},children:[null!==(n=null==b?void 0:b(e))&&void 0!==n?n:w,(0,t.jsx)("span",{children:e.name})]},e.id)})})]})]})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex w-full justify-end gap-2",children:[void 0!==S&&(0,t.jsx)(i.z,{size:"medium",type:"default",onClick:()=>{S()},children:"Skip"}),(0,t.jsx)(i.z,{size:"medium",className:"self-end",onClick:function(){if(!p)return console.error("No integration ID set");if(!(null==D?void 0:D.id))return console.error("No Foreign project ID set");if(!(null==A?void 0:A.ref))return console.error("No Supabase project ref set");let e=q.has(null!=O?O:"");if(e)return s.Am.error("Unable to connect to ".concat(D.name,": Selected repository already has an installed connection to a project"));j({organizationIntegrationId:p,connection:{foreign_project_id:null==D?void 0:D.id,supabase_project_ref:null==A?void 0:A.ref,metadata:{...D}},orgSlug:null==W?void 0:W.slug})},loading:N,disabled:C||k||N||!A||!D,children:"Connect project"})]})]})}},34278:function(e,r,n){n.d(r,{CG:function(){return m},I7:function(){return f},Lc:function(){return p},Wv:function(){return h},_S:function(){return c},g$:function(){return x},gW:function(){return v},jX:function(){return u},q7:function(){return d},tM:function(){return g},tU:function(){return i},ur:function(){return j}});var t=n(52322),a=n(2784),s=n(4220);let l="mx-auto w-full max-w-[1600px]",o="px-6 lg:px-14 xl:px-28 2xl:px-32",i=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("header",{...a,ref:r,className:(0,s.cn)("w-full","flex-col gap-3",n)})}),d=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("h1",{ref:r,...a,className:(0,s.cn)("text-3xl pt-6 pb-4",n)})}),c=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)(l,o,n)})}),f=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("w-full h-px bg-muted",n)})}),u=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-col gap-3 py-6","lg:grid md:grid-cols-12 lg:py-12",n)})}),m=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),x=a.forwardRef((e,r)=>{let{className:n,children:a,title:l,...o}=e;return(0,t.jsxs)("div",{ref:r,...o,className:(0,s.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[l&&(0,t.jsx)("h2",{children:l}),a]})}),p=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),g=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-col gap-3 items-center",n)})}),h=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex w-full items-center",n)})}),j=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-row gap-3",n)})}),v=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)(l,o,"my-8 flex flex-col gap-8",n)})});i.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",c.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",u.displayName="ScaffoldSection",m.displayName="ScaffoldColumn",x.displayName="ScaffoldSectionDetail",p.displayName="ScaffoldSectionContent",g.displayName="ScaffoldFilterAndContent",h.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",v.displayName="ScaffoldContainerLegacy"},50575:function(e,r,n){var t=n(52322);r.Z=e=>{let{active:r}=e;return r?(0,t.jsx)("div",{className:"logs-shimmering-loader w-full h-0.5"}):null}},138:function(e,r,n){n.d(r,{T:function(){return useOrgIntegrationsQuery}});var t=n(58943),a=n(3218),s=n(46732),l=n(97184);async function getIntegrations(e,r){let{orgSlug:n}=e;if(!n)throw Error("orgSlug is required");let t=await (0,a.U2)("".concat(s.T5,"/integrations/").concat(n,"?expand=true"),{signal:r});if(t.error)throw t.error;return t}let useOrgIntegrationsQuery=function(e){let{orgSlug:r}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,t.a)(l.F.integrationsListWithOrg(r),e=>{let{signal:n}=e;return getIntegrations({orgSlug:r},n)},{enabled:n&&void 0!==r,...a})}},97184:function(e,r,n){n.d(r,{F:function(){return t}});let t={integrationsListWithOrg:e=>["organizations",e,"integrations"],integrationsList:()=>["organizations","integrations"],vercelProjectList:e=>["organizations",e,"vercel-projects"],githubRepoList:e=>["organizations",e,"github-repos"],vercelConnectionsList:e=>["organizations",e,"vercel-connections"],githubBranch:(e,r,n,t)=>["organizations",e,"branches",r,n,t],githubBranchesList:(e,r,n)=>["organizations",e,"branches",r,n],githubPullRequestsList:(e,r,n)=>["organizations",e,"pull-requests",r,n],githubConnectionsList:e=>["organizations",e,"github-connections"]}},11980:function(e,r,n){var t=n(52322);n(2784);var a=n(27068),s=n(97265);r.Z=function(e){return(0,t.jsx)(s.Z,{icon:a.Z,...e})}},43502:function(e,r,n){var t=n(52322);n(2784);var a=n(95271),s=n(97265);r.Z=function(e){return(0,t.jsx)(s.Z,{icon:a.Z,...e})}},50671:function(e,r,n){n.d(r,{di:function(){return x},e8:function(){return c},fu:function(){return u},mY:function(){return i},rb:function(){return f},sZ:function(){return d}});var t=n(52322),a=n(2784),s=n(41187),l=n(38880),o=n(4220);let i=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY,{ref:r,className:(0,o.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-overlay text-foreground-light",n),...a})});i.displayName=s.mY.displayName;let d=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(s.mY.Input,{ref:r,className:(0,o.cn)("flex h-9 w-full rounded-md bg-transparent py-3 text-xs text outline-none placeholder:text-muted disabled:cursor-not-allowed disabled:opacity-50 border-none focus:ring-0",n),...a})]})});d.displayName=s.mY.Input.displayName;let c=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY.List,{ref:r,className:(0,o.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...a})});c.displayName=s.mY.List.displayName;let f=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY.Empty,{ref:r,className:(0,o.cn)("py-6 text-center text-xs",n),...a})});f.displayName=s.mY.Empty.displayName;let u=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY.Group,{ref:r,className:(0,o.cn)("overflow-hidden p-1 text-foreground-light [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-foreground-muted",n),...a})});u.displayName=s.mY.Group.displayName;let m=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY.Separator,{ref:r,className:(0,o.cn)("-mx-1 h-px bg-border",n),...a})});m.displayName=s.mY.Separator.displayName;let x=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,t.jsx)(s.mY.Item,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none aria-selected:bg-overlay-hover aria-selected:text-strong data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a})});x.displayName=s.mY.Item.displayName},56469:function(e,r,n){n.d(r,{J2:function(){return o},xo:function(){return i},yk:function(){return d}});var t=n(52322),a=n(2784),s=n(13844),l=n(4220);let o=s.fC,i=s.xz,d=a.forwardRef((e,r)=>{let{className:n,align:o="center",sideOffset:i=4,portal:d=!1,...c}=e,f=d?s.h_:a.Fragment;return(0,t.jsx)(f,{children:(0,t.jsx)(s.VY,{ref:r,align:o,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-overlay p-4 text-popover-foreground shadow-md outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...c})})});d.displayName="PopoverContent"}}]);