"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8108],{99902:function(e,t,s){s.d(t,{NK:function(){return parseSupaTable},Tf:function(){return o},Yb:function(){return formatFilterURLParams},cc:function(){return cleanupProps},rg:function(){return formatSortURLParams},uk:function(){return initTable}});var n=s(79147),a=s(25076),i=s(33181),r=s(3889);function defaultErrorHandler(e){console.error("Supabase grid error: ",e)}function cleanupProps(e){let{editable:t}=e;return t?e:{...e,onAddColumn:void 0,onAddRow:void 0,onEditColumn:void 0,onDeleteColumn:void 0,onEditRow:void 0}}function formatSortURLParams(e){return Array.isArray(e)?e.map(e=>{let[t,s]=e.split(":");if(t&&s)return{column:t,ascending:"asc"===s}}).filter(e=>void 0!==e):[]}function formatFilterURLParams(e){return Array.isArray(e)?e.map(e=>{let[t,s,...n]=e.split(":"),a=n.join(":"),i=r.o.find(e=>e.abbrev===s);if(t&&s&&i)return{column:t,operator:i.value,value:a||""}}).filter(e=>void 0!==e):[]}async function initTable(e,t,s,n,r){var o,l;let c=e.storageRef?function(e,t,s){let n=getStorageKey(a.E_,e),i=localStorage.getItem(n);if(!i)return;let r=JSON.parse(i),o=s&&"public"!=s?"".concat(s,".").concat(t):t;return r[o]}(e.storageRef,e.table.name,e.table.schema):void 0;if(!t.isInitialComplete&&void 0===n&&void 0===r&&((null==c?void 0:c.sorts)||(null==c?void 0:c.filters)))return{savedState:{sorts:c.sorts,filters:c.filters}};let d=(0,i.cv)(e.table,{editable:e.editable,defaultWidth:null===(o=e.gridProps)||void 0===o?void 0:o.defaultColumnWidth,onAddColumn:e.editable?e.onAddColumn:void 0,onExpandJSONEditor:e.onExpandJSONEditor});return s({type:"INIT_TABLE",payload:{table:e.table,gridProps:e.gridProps,gridColumns:d,savedState:c,editable:e.editable,onSqlQuery:e.onSqlQuery,onError:null!==(l=e.onError)&&void 0!==l?l:defaultErrorHandler}}),{savedState:{}}}function parseSupaTable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{table:s,columns:n,primaryKeys:a,relationships:i}=e,r=n.map(e=>{let s={position:e.ordinal_position,name:e.name,defaultValue:e.default_value,dataType:e.data_type,format:e.format,isPrimaryKey:!1,isIdentity:e.is_identity,isGeneratable:"BY DEFAULT"==e.identity_generation,isNullable:e.is_nullable,isUpdatable:e.is_updatable,isEncrypted:t.includes(e.name),enum:e.enums,comment:e.comment,foreignKey:{targetTableSchema:null,targetTableName:null,targetColumnName:null,deletionAction:void 0}},n=a.find(t=>t.name==e.name);s.isPrimaryKey=!!n;let r=i.find(t=>t.source_schema===e.schema&&t.source_table_name===e.table&&t.source_column_name===e.name);return r&&(s.foreignKey.targetTableSchema=r.target_table_schema,s.foreignKey.targetTableName=r.target_table_name,s.foreignKey.targetColumnName=r.target_column_name,s.foreignKey.deletionAction=r.deletion_action),s});return{name:s.name,comment:s.comment,schema:s.schema,columns:r}}let o=(0,n.Z)(function(e,t,s,n){let i;if(!e.table)return;let r={gridColumns:e.gridColumns,...void 0!==s&&{sorts:s},...void 0!==n&&{filters:n}},o=getStorageKey(a.E_,t),l=localStorage.getItem(o),{name:c,schema:d}=e.table,u=d&&"public"!=d?"".concat(d,".").concat(c):c;i=l?{...i=JSON.parse(l),[u]:r}:{[u]:r},localStorage.setItem(o,JSON.stringify(i))},500);function getStorageKey(e,t){return"".concat(e,"_").concat(t)}},98580:function(e,t,s){s.d(t,{O:function(){return EmptyValue}});var n=s(52322);let EmptyValue=()=>(0,n.jsx)("span",{className:"sb-grid-empty-value opacity-50",children:"EMPTY"})},67146:function(e,t,s){s.d(t,{rc:function(){return BlockKeys},Fy:function(){return DropdownControl},OX:function(){return d.O},rE:function(){return MonacoEditor},q2:function(){return NullValue},fQ:function(){return Shortcuts}});var n=s(52322),a=s(89465),i=s(2784);let BlockKeys=e=>{let{value:t,children:s,onEscape:r,onEnter:o}=e,l=(0,i.useRef)(null),c=(0,a.nN)(l),d=(0,i.useCallback)(e=>{switch(e.key){case"Escape":e.stopPropagation(),r&&r(t);break;case"Enter":e.stopPropagation(),!e.shiftKey&&o&&(e.preventDefault(),o(t))}},[t]);return(0,i.useEffect)(()=>{c&&void 0!==o&&o(t)},[c]),(0,n.jsx)("div",{ref:l,onKeyDown:d,children:s})};var r=s(97036);let DropdownControl=e=>{let{children:t,side:s,align:a,options:i,onSelect:o}=e;return(0,n.jsxs)(r.h_,{children:[(0,n.jsx)(r.$F,{children:t}),(0,n.jsx)(r.AW,{side:s,align:a,children:(0,n.jsxs)("div",{className:"dropdown-control",style:{maxHeight:"30vh"},children:[0===i.length&&(0,n.jsx)("p",{className:"dropdown-control__empty-text",children:"No more items"}),i.map(e=>(0,n.jsx)(r.Xi,{onClick:()=>o(e.value),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e.preLabel&&(0,n.jsx)("span",{className:"grow text-foreground-lighter",children:e.preLabel}),(0,n.jsx)("span",{children:e.label}),e.postLabel&&(0,n.jsx)("span",{className:"text-foreground-lighter",children:e.postLabel})]})},e.value))]})})]})};var o=s(79534);let MonacoEditor=e=>{let{width:t,height:s,value:a,language:i,readOnly:r=!1,onChange:l,onMount:c}=e;return(0,n.jsx)(o.default,{width:t,height:s||"200px",theme:"supabase",wrapperProps:{className:"grid-monaco-editor-container"},className:"grid-monaco-editor",defaultLanguage:i||"plaintext",defaultValue:a,onChange:l,onMount:function(e){e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})});let t=e.getModel(),s=t.getPositionAt(null==a?void 0:a.length);e.setPosition(s),setTimeout(()=>{null==e||e.focus()},0),c&&c(e)},options:{readOnly:r,tabSize:2,fontSize:13,minimap:{enabled:!1},glyphMargin:!1,folding:!1,lineNumbers:"off",lineNumbersMinChars:0,scrollBeyondLastLine:!1,wordWrap:"on"}})},NullValue=()=>(0,n.jsx)("span",{className:"null-value opacity-50",children:"NULL"});function includes(e,t){return e.indexOf(t)>=0}var l=s(4690),c=s(74386);function Shortcuts(e){let{gridRef:t}=e,s=(0,l.Qq)(),{rows:n,gridColumns:a,selectedCellPosition:r}=s,[o,d]=i.useState("Command");return i.useEffect(()=>{var e,t;let s="windows"==((null===(e=navigator)||void 0===e?void 0:e.appVersion.indexOf("Win"))!==-1?"windows":(null===(t=navigator)||void 0===t?void 0:t.appVersion.indexOf("Mac"))!==-1?"macos":"unknown")?"Control":"Command";d(s)},[]),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[n,a]=i.useState(),handleKeydown=n=>{if(!e||includes(t,n.target.nodeName)||includes(s,n.target.className))return;let i=n.metaKey&&n.shiftKey?"Command+Shift+".concat(n.key):n.metaKey?"Command+".concat(n.key):n.shiftKey&&"Enter"===n.key?"Shift+".concat(n.key):n.ctrlKey&&n.key?"Control+".concat(n.key):n.key;e[i]&&(i.includes("+")?(n.preventDefault(),e[i](n),a(null)):(a(n.key),n.preventDefault()))},handleKeyup=t=>{e&&e[t.key]&&n===t.key&&(t.preventDefault(),e[t.key](t),a(null))};i.useEffect(()=>(window.addEventListener("keydown",handleKeydown),window.addEventListener("keyup",handleKeyup),()=>{window.removeEventListener("keydown",handleKeydown),window.removeEventListener("keyup",handleKeyup)}))}({["".concat(o,"+ArrowUp")]:e=>{if(e.stopPropagation(),r){var s;let e={idx:null!==(s=null==r?void 0:r.idx)&&void 0!==s?s:0,rowIdx:0};t.current.selectCell(e)}else t.current.scrollToCell({rowIdx:Number(0)})},["".concat(o,"+ArrowDown")]:e=>{if(e.stopPropagation(),r){var s;let e={idx:null!==(s=null==r?void 0:r.idx)&&void 0!==s?s:0,rowIdx:n.length>1?n.length-1:0};t.current.selectCell(e)}else t.current.scrollToCell({rowIdx:Number(n.length)})},["".concat(o,"+ArrowLeft")]:e=>{var s;e.stopPropagation();let n=a.filter(e=>e.frozen),i={idx:n.length,rowIdx:null!==(s=null==r?void 0:r.rowIdx)&&void 0!==s?s:0};t.current.selectCell(i)},["".concat(o,"+ArrowRight")]:e=>{var s,n;e.stopPropagation(),null===(s=t.current)||void 0===s||s.selectCell({idx:a.length-1,rowIdx:null!==(n=null==r?void 0:r.rowIdx)&&void 0!==n?n:0})},["".concat(o,"+c")]:e=>{if(e.stopPropagation(),r){let{idx:e,rowIdx:i}=r;if(e>0){var t,s;let r=a[e].key,o=null!==(s=null===(t=n[i])||void 0===t?void 0:t[r])&&void 0!==s?s:"",l=(0,c.Lw)(o);(0,c.vQ)(l)}}}},["INPUT","TEXTAREA","SELECT"]),null}var d=s(98580)},28321:function(e,t,s){s.d(t,{SJ:function(){return BooleanFormatter},k3:function(){return DefaultFormatter},_O:function(){return ForeignKeyFormatter},$3:function(){return JsonFormatter}});var n=s(52322),a=s(67146);let BooleanFormatter=e=>{let t=e.row[e.column.key];return null===t?(0,n.jsx)(a.q2,{}):(0,n.jsx)(n.Fragment,{children:t?"TRUE":"FALSE"})};s(2784);var i=s(98580);let DefaultFormatter=e=>{let t=e.row[e.column.key];return null===t?(0,n.jsx)(a.q2,{}):""===t?(0,n.jsx)(i.O,{}):(("object"==typeof t||Array.isArray(t))&&(t=JSON.stringify(t)),(0,n.jsx)(n.Fragment,{children:t}))};var r=s(24990),o=s(39097),l=s.n(o),c=s(73872),d=s(2755),u=s(90948),m=s(93969),p=s(94580),h=s(83150);let ForeignKeyFormatter=e=>{var t;let{project:s}=(0,d.d2)(),{ref:i,id:o}=(0,c.UO)(),g=o?Number(o):void 0,{row:x,column:f}=e,{data:y}=(0,u.yp)({projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString,id:g}),j=(null!==(t=null==y?void 0:y.relationships)&&void 0!==t?t:[]).find(e=>e.source_schema===(null==y?void 0:y.schema)&&e.source_table_name===(null==y?void 0:y.name)&&e.source_column_name===f.name),{data:v}=(0,m.Bj)({projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString,schema:null==j?void 0:j.target_table_schema}),b=null==v?void 0:v.find(e=>e.schema===(null==j?void 0:j.target_table_schema)&&e.name===j.target_table_name),w=x[f.key];return(0,n.jsxs)("div",{className:"sb-grid-foreign-key-formatter flex justify-between",children:[(0,n.jsx)("span",{className:"sb-grid-foreign-key-formatter__text",children:null===w?(0,n.jsx)(a.q2,{}):w}),void 0!==j&&void 0!==b&&null!==w&&(0,n.jsxs)(r.fC,{delayDuration:0,children:[(0,n.jsx)(r.xz,{asChild:!0,children:(0,n.jsx)(p.z,{type:"default",size:"tiny",className:"translate-y-[2px]",onClick:()=>{},style:{padding:"3px"},asChild:!0,children:(0,n.jsx)(l(),{href:"/project/".concat(i,"/editor/").concat(null==b?void 0:b.id,"?filter=").concat(null==j?void 0:j.target_column_name,"%3Aeq%3A").concat(w),children:(0,n.jsx)(h.Z,{size:"tiny"})})})}),(0,n.jsx)(r.h_,{children:(0,n.jsx)(r.h_,{children:(0,n.jsxs)(r.VY,{side:"bottom",children:[(0,n.jsx)(r.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"View referencing record"})})]})})})]})]})},JsonFormatter=e=>{let t=e.row[e.column.key];if(null===t)return(0,n.jsx)(a.q2,{});if(""===t)return(0,n.jsx)(a.OX,{});try{t=JSON.stringify(t)}catch(e){}return(0,n.jsx)(n.Fragment,{children:t})}},91852:function(e,t,s){s.d(t,{Lx:function(){return A},x8:function(){return ColumnHeader},rj:function(){return k},F_:function(){return P}});var n=s(52322),a=s(24990),i=s(1114),r=s(79312),o=s(2784),l=s(92843),c=s(20103),d=s(41154),u=s(96143),m=s(92508),p=s(83150),h=s(4690),g=s(90175);function ColumnHeader(e){let{column:t,columnType:s,isPrimaryKey:x,isEncrypted:f,format:y,foreignKey:j}=e,v=o.useRef(null),b=(0,h.I0)(),w=t.idx,N=t.key,S="array"==s?"".concat(y.replace("_",""),"[]"):y,C=(0,h.Qq)(),k=t.name;(0,o.useEffect)(()=>{C.gridColumns[w].key!=N&&b({type:"UPDATE_COLUMN_IDX",payload:{columnKey:N,columnIdx:w}})},[N,w,C.gridColumns]);let[{isDragging:_},E]=(0,l.c)({type:"column-header",item:()=>({key:N,index:w}),canDrag:()=>!t.frozen,collect:e=>({isDragging:e.isDragging()})}),[{handlerId:P},I]=(0,c.L)({accept:"column-header",collect:e=>({handlerId:e.getHandlerId()}),hover(e,s){var n;if(!v.current||t.frozen)return;let a=e.index,i=e.key;if(a===w)return;let r=null===(n=v.current)||void 0===n?void 0:n.getBoundingClientRect(),o=(r.right-r.left)/2,l=s.getClientOffset(),c=l.x-r.left;a<w&&c<o||a>w&&c>o||(moveColumn(i,N),e.index=w)}}),moveColumn=(e,t)=>{e!=t&&b({type:"MOVE_COLUMN",payload:{fromKey:e,toKey:t}})},L=t.frozen?"sb-grid-column-header--cursor":"";return E(I(v)),(0,n.jsx)("div",{ref:v,"data-handler-id":P,style:{opacity:_?0:1},className:"w-full",children:(0,n.jsxs)("div",{className:"sb-grid-column-header ".concat(L),children:[(0,n.jsxs)("div",{className:"sb-grid-column-header__inner",children:[function(e,t){let{name:s,foreignKey:o}=t;return"foreign_key"===e?(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{children:(0,n.jsx)(m.Z,{size:"tiny",strokeWidth:2})}),(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Foreign key relation:"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("p",{className:"text-xs text-foreground",children:s}),(0,n.jsx)(p.Z,{size:"tiny",strokeWidth:1.5}),(0,n.jsxs)("p",{className:"text-xs text-foreground",children:[null==o?void 0:o.targetTableSchema,".",null==o?void 0:o.targetTableName,".",null==o?void 0:o.targetColumnName]})]}),(null==o?void 0:o.deletionAction)!==r.NO.NO_ACTION&&(0,n.jsxs)("p",{className:"text-xs text-foreground mt-1",children:["On delete: ",(0,i.s8)(null==o?void 0:o.deletionAction)]})]})})]})})]}):null}(s,{name:t.name,foreignKey:j}),x&&(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{children:(0,n.jsx)("div",{className:"sb-grid-column-header__inner__primary-key",children:(0,n.jsx)(d.Z,{size:"tiny",strokeWidth:2})})}),(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Primary key"})})]})})]}),(0,n.jsx)("span",{className:"sb-grid-column-header__inner__name",title:k,children:t.name}),(0,n.jsx)("span",{className:"sb-grid-column-header__inner__format",children:S}),f&&(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{children:(0,n.jsx)(u.Z,{size:"tiny",strokeWidth:2})}),(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Encrypted column"})})]})})]})]}),(0,n.jsx)(g.ov,{column:t,isEncrypted:f})]})})}s(55711);var x=s(47370),f=s(79147),y=s(64018),j=s(2755),v=s(7503),b=s(20775),w=s(11781),N=s(94580),S=s(71623);function RowRenderer(e,t){let{show:s}=(0,S.av)();return(0,n.jsx)(x.X2,{...t,onContextMenu:function(e){let n=g.hh.ROW_CONTEXT_MENU_ID;s(e,{id:n,props:{rowIdx:t.rowIdx}})}},e)}let rowKeyGetter=e=>{var t;return null!==(t=null==e?void 0:e.idx)&&void 0!==t?t:-1},C=(0,f.Z)((e,t,s)=>{s({type:"UPDATE_COLUMN_SIZE",payload:{index:e,width:Math.round(t)}})},500),k=(0,y.X$)((0,o.forwardRef)((e,t)=>{var s;let{width:a,height:i,containerClass:r,gridClass:o,rowClass:l,rows:c,error:d,isLoading:u,isSuccess:m,isError:p,filters:g,setParams:f,updateRow:y,onAddRow:S,onImportData:k,onEditForeignKeyColumnValue:_}=e,E=(0,h.I0)(),P=(0,h.Qq)();async function onRowsChange(e,t){let s=e[t.indexes[0]],n=c.find(e=>e.idx==s.idx),a=Object.keys(s).find(e=>s[e]!==n[e]);a&&y(n,{[a]:s[a]})}let I=P.table,{project:L}=(0,j.d2)(),{data:A}=(0,w.X)({projectRef:null==L?void 0:L.ref,connectionString:null==L?void 0:L.connectionString,schema:null!==(s=null==I?void 0:I.schema)&&void 0!==s?s:void 0}),removeAllFilters=()=>{f(e=>({...e,filter:[]}))};return(0,n.jsx)("div",{className:"".concat(r," flex flex-col"),style:{width:a||"100%",height:i||"50vh"},children:(0,n.jsx)(x.ZP,{ref:t,className:"".concat(o," flex-grow"),rowClass:l,columns:P.gridColumns,rows:null!=c?c:[],renderers:{renderRow:RowRenderer,noRowsFallback:(0,n.jsxs)("div",{style:{width:"calc(100vw - 255px - 55px)"},children:[u&&(0,n.jsx)("div",{className:"p-2 col-span-full",children:(0,n.jsx)(b.A,{})}),p&&(0,n.jsx)("div",{className:"p-2 col-span-full",children:(0,n.jsx)(v.Z,{error:d,subject:"Failed to retrieve rows from table"})}),m&&(0,n.jsx)(n.Fragment,{children:0===(null!=g?g:[]).length?(0,n.jsxs)("div",{style:{height:"calc(100% - 35px)"},className:"flex flex-col items-center justify-center col-span-full",children:[(0,n.jsx)("p",{className:"text-sm text-light",children:"This table is empty"}),void 0!==S&&void 0!==k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm text-light mt-1",children:"Add rows to your table to get started."}),(0,n.jsx)("div",{className:"flex items-center space-x-2 mt-4",children:void 0!==S&&void 0!==k&&(0,n.jsx)(N.z,{type:"default",onClick:k,children:"Import data via CSV"})})]})]}):(0,n.jsxs)("div",{style:{height:"calc(100% - 35px)"},className:"flex flex-col items-center justify-center col-span-full",children:[(0,n.jsx)("p",{className:"text-sm text-light",children:"The filters applied has returned no results from this table"}),(0,n.jsx)("div",{className:"flex items-center space-x-2 mt-4",children:(0,n.jsx)(N.z,{type:"default",onClick:()=>removeAllFilters(),children:"Remove all filters"})})]})})]})},rowKeyGetter:rowKeyGetter,selectedRows:P.selectedRows,onColumnResize:function(e,t){C(e,t,E)},onRowsChange:onRowsChange,onSelectedCellChange:function(e){E({type:"SELECTED_CELL_CHANGE",payload:{position:{idx:e.column.idx,rowIdx:e.rowIdx}}})},onSelectedRowsChange:function(e){E({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:e}})},onCellDoubleClick:e=>(function(e,t){let s=function(e){var t,s;let{targetTableSchema:n,targetTableName:a,targetColumnName:i}=null!==(s=null==I?void 0:null===(t=I.columns.find(t=>t.name==e))||void 0===t?void 0:t.foreignKey)&&void 0!==s?s:{};return null==A?void 0:A.find(e=>e.target_schema==n&&e.target_table==a&&e.target_columns==i)}(t.name);s&&_({foreignKey:s,row:e,column:t})})(e.row,e.column)})})}));var _=s(35530),E=s(25076);let P={key:E.W,name:"",idx:0,width:65,maxWidth:65,resizable:!1,sortable:!1,frozen:!0,isLastFrozenColumn:!1,renderHeaderCell:e=>{let[t,s]=(0,x.Gt)();return(0,n.jsx)(SelectCellHeader,{"aria-label":"Select All",tabIndex:e.tabIndex,value:t,onChange:e=>s({type:"HEADER",checked:e})})},renderCell:e=>{let[t,s]=(0,x.Gt)();return(0,n.jsx)(SelectCellFormatter,{"aria-label":"Select",tabIndex:e.tabIndex,value:t,row:e.row,onChange:(t,n)=>{s({type:"ROW",row:e.row,checked:t,isShiftClick:n})},onClick:stopPropagation})},renderGroupCell:e=>{let[t,s]=(0,x.Gt)();return(0,n.jsx)(SelectCellFormatter,{"aria-label":"Select Group",tabIndex:e.tabIndex,value:t,onChange:t=>{s({type:"ROW",row:e.row,checked:t,isShiftClick:!1})},onClick:stopPropagation})},parent:void 0,level:0,minWidth:0,draggable:!1};function stopPropagation(e){e.stopPropagation()}function SelectCellFormatter(e){let{row:t,value:s,tabIndex:a,disabled:i,onClick:r,onChange:o,"aria-label":l,"aria-labelledby":c}=e,d=(0,h.Qq)(),{onEditRow:u}=d;return(0,n.jsxs)("div",{className:"sb-grid-select-cell__formatter",children:[(0,n.jsx)("input",{"aria-label":l,"aria-labelledby":c,tabIndex:a,type:"checkbox",className:"rdg-row__select-column__select-action",disabled:i,checked:s,onChange:function(e){o(e.target.checked,e.nativeEvent.shiftKey)},onClick:r}),u&&t&&(0,n.jsx)(N.z,{type:"text",size:"tiny",className:"rdg-row__select-column__edit-action",icon:(0,n.jsx)(_.Z,{size:"tiny"}),onClick:function(e){e.stopPropagation(),u&&t&&u(t)},style:{padding:"3px"}})]})}function SelectCellHeader(e){let{disabled:t,tabIndex:s,value:a,onChange:i,onClick:r,"aria-label":o,"aria-labelledby":l}=e;return(0,n.jsx)("div",{className:"sb-grid-select-cell__header",children:(0,n.jsx)("input",{"aria-label":o,"aria-labelledby":l,tabIndex:s,type:"checkbox",className:"sb-grid-select-cell__header__input",disabled:t,checked:a,onChange:function(e){i(e.target.checked,e.nativeEvent.shiftKey)},onClick:r})})}var I=s(88058),L=s(28321);let A={key:E.uZ,name:"",idx:999,width:100,maxWidth:100,resizable:!1,sortable:!1,frozen:!1,isLastFrozenColumn:!1,renderHeaderCell:()=>(0,n.jsx)(AddColumnHeader,{"aria-label":"Add New Row"}),renderCell:L.k3,parent:void 0,level:0,minWidth:0,draggable:!1},AddColumnHeader=e=>{let{}=e,t=(0,h.Qq)(),{onAddColumn:s}=t;return(0,n.jsx)("div",{className:"sb-grid-add-column",children:(0,n.jsx)(N.z,{block:!0,type:"text",onClick:s,icon:(0,n.jsx)(I.Z,{})})})}},60471:function(e,t,s){var n=s(52322),a=s(55830),i=s(73872),r=s(74596),o=s(2784),l=s(94580),c=s(72275),d=s(55216),u=s(25076);t.Z=e=>{let{table:t,isRefetching:s}=e,{ref:m}=(0,i.UO)(),p=(0,a.NL)(),h=r.M.query(m,[t.schema,t.name]),[g,x]=(0,o.useState)();async function onClick(){await p.invalidateQueries(h)}return(0,o.useEffect)(()=>{let e,t=!0;return u.Cx.on("active",()=>{e&&clearTimeout(e),t&&x("saving")}),u.Cx.on("idle",()=>{e&&clearTimeout(e),e=window.setTimeout(()=>x(void 0),2e3),t&&x("saved")}),()=>{t=!1,e&&clearTimeout(e)}},[]),(0,n.jsx)(l.z,{type:"text",icon:g?"saved"===g?(0,n.jsx)(d.Z,{className:"text-brand",strokeWidth:3}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(c.Z,{className:"text-foreground-light",strokeWidth:1.5}),onClick:()=>{g||onClick()},loading:s||"saving"===g,children:g?"saved"===g?"Changes saved":"Saving changes":"Refresh"})}},3889:function(e,t,s){s.d(t,{o:function(){return g},Z:function(){return header_filter}});var n=s(52322),a=s(14819),i=s.n(a),r=s(18149),o=s.n(r),l=s(2784),c=s(694),d=s(94580),u=s(7738),m=s(97265),IconFilter_IconFilter=function(e){return(0,n.jsx)(m.Z,{icon:u.Z,...e})},p=s(88058),h=s(99902);let g=[{value:"=",label:"equals",preLabel:"[ = ]",abbrev:"eq"},{value:"<>",label:"not equal",preLabel:"[ <> ]",abbrev:"neq"},{value:">",label:"greater than",preLabel:"[ > ]",abbrev:"gt"},{value:"<",label:"less than",preLabel:"[ < ]",abbrev:"lt"},{value:">=",label:"greater than or equal",preLabel:"[ >= ]",abbrev:"gte"},{value:"<=",label:"less than or equal",preLabel:"[ <= ]",abbrev:"lte"},{value:"~~",label:"like operator",preLabel:"[ ~~ ]",abbrev:"like"},{value:"~~*",label:"ilike operator",preLabel:"[ ~~* ]",abbrev:"ilike"},{value:"in",label:"one of a list of values",preLabel:"[ in ]",abbrev:"in"},{value:"is",label:"checking for (null,not null,true,false)",preLabel:"[ is ]",abbrev:"is"}];var x=s(43502),f=s(31915),y=s(88979),j=s(67146),v=(0,l.memo)(e=>{var t,s;let{table:a,filter:i,filterIdx:r,onChange:o,onDelete:l,onKeyDown:c}=e,u=a.columns.find(e=>e.name===i.column),m=(null===(t=a.columns)||void 0===t?void 0:t.map(e=>({value:e.name,label:e.name,postLabel:e.dataType})))||[],p=(null==u?void 0:u.format)==="timestamptz"?"yyyy-mm-dd hh:mm:ss+zz":(null==u?void 0:u.format)==="timestamp"?"yyyy-mm-dd hh:mm:ss":"Enter a value";return(0,n.jsxs)("div",{className:"sb-grid-filter-row px-3",children:[(0,n.jsx)(j.Fy,{align:"start",options:m,onSelect:e=>o(r,{...i,column:e}),children:(0,n.jsx)(d.z,{asChild:!0,type:"outline",icon:(0,n.jsx)("div",{className:"text-foreground-lighter",children:(0,n.jsx)(x.Z,{strokeWidth:1.5,size:14})}),className:"w-32",children:(0,n.jsx)("span",{children:null!==(s=null==u?void 0:u.name)&&void 0!==s?s:""})})}),(0,n.jsx)(j.Fy,{align:"start",options:g,onSelect:e=>o(r,{...i,operator:e}),children:(0,n.jsx)(d.z,{asChild:!0,type:"outline",icon:(0,n.jsx)("div",{className:"text-foreground-lighter",children:(0,n.jsx)(x.Z,{strokeWidth:1.5,size:14})}),children:(0,n.jsx)("span",{children:i.operator})})}),(0,n.jsx)(f.Z,{size:"tiny",className:"w-full",placeholder:p,value:i.value,onChange:e=>o(r,{...i,value:e.target.value}),onKeyDown:c}),(0,n.jsx)(d.z,{icon:(0,n.jsx)(y.Z,{strokeWidth:1.5,size:14}),size:"tiny",type:"text",onClick:()=>l(r)})]})});let FilterOverlay=e=>{let{table:t,filters:s,setParams:a}=e,r=(0,l.useMemo)(()=>(0,h.Yb)(null!=s?s:[]),[s]),[u,m]=(0,l.useState)(r),x=(0,l.useCallback)((e,t)=>{m(s=>i()(s,{[e]:{$set:t}}))},[]),f=(0,l.useCallback)(e=>{m(t=>i()(t,{$splice:[[e,1]]}))},[]);function onApplyFilter(){a(e=>({...e,filter:u.map(e=>{let t=g.find(t=>t.value===e.operator);return"".concat(e.column,":").concat(null==t?void 0:t.abbrev,":").concat(e.value)})}))}function handleEnterKeyDown(e){"Enter"===e.key&&onApplyFilter()}return(0,n.jsxs)("div",{className:"space-y-2 py-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[u.map((e,s)=>(0,n.jsx)(v,{table:t,filter:e,filterIdx:s,onChange:x,onDelete:f,onKeyDown:handleEnterKeyDown},"filter-".concat(e.column,"-").concat([s]))),0==u.length&&(0,n.jsxs)("div",{className:"space-y-1 px-3",children:[(0,n.jsx)("h5",{className:"text-sm text-foreground-light",children:"No filters applied to this view"}),(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Add a column below to filter the view"})]})]}),(0,n.jsx)(c.Z.Separator,{}),(0,n.jsxs)("div",{className:"px-3 flex flex-row justify-between",children:[(0,n.jsx)(d.z,{icon:(0,n.jsx)(p.Z,{}),type:"text",onClick:function(){var e;let s=null===(e=t.columns[0])||void 0===e?void 0:e.name;s&&m([...u,{column:s,operator:"=",value:""}])},children:"Add filter"}),(0,n.jsx)(d.z,{disabled:o()(u,r),type:"default",onClick:onApplyFilter,children:"Apply filter"})]})]})};var header_filter=e=>{let{table:t,filters:s,setParams:a}=e,i=(s||[]).length>0?"Filtered by ".concat(s.length," rule").concat(s.length>1?"s":""):"Filter";return(0,n.jsx)(c.Z,{size:"large",align:"start",className:"sb-grid-filter-popover",overlay:(0,n.jsx)(FilterOverlay,{table:t,filters:s,setParams:a}),children:(0,n.jsx)(d.z,{asChild:!0,type:(s||[]).length>0?"link":"text",icon:(0,n.jsx)("div",{className:"text-foreground-light",children:(0,n.jsx)(IconFilter_IconFilter,{strokeWidth:1.5})}),children:(0,n.jsx)("span",{children:i})})})}},17833:function(e,t,s){s.d(t,{Z:function(){return sort}});var n=s(52322),a=s(14819),i=s.n(a),r=s(18149),o=s.n(r),l=s(2784),c=s(694),d=s(94580),u=s(8809),m=s(43502),p=s(67146),h=s(99902),g=s(92843),x=s(20103),f=s(49764),y=s(49730),j=s(88979),v=(0,l.memo)(e=>{let{table:t,index:s,columnName:a,sort:i,onDelete:r,onToggle:o,onDrag:c}=e,u=t.columns.find(e=>e.name===a),m=(0,l.useRef)(null),[{isDragging:p},h]=(0,g.c)({type:"sort-row",item:()=>({key:a,index:s}),collect:e=>({isDragging:e.isDragging()})}),[{handlerId:v},b]=(0,x.L)({accept:"sort-row",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var n;if(!m.current)return;let a=e.index;if(a===s)return;let i=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect(),r=(i.bottom-i.top)/2,o=t.getClientOffset(),l=o.y-i.top;a<s&&l<r||a>s&&l>r||(moveSort(a,s),e.index=s)}}),moveSort=(e,t)=>{e!=t&&c(e,t)};return(h(b(m)),u)?(0,n.jsxs)("div",{className:"flex items-center gap-3 px-3",ref:m,style:{opacity:p?0:1},"data-handler-id":v,children:[(0,n.jsx)("span",{className:"transition-color text-foreground-lighter hover:text-foreground-light",children:(0,n.jsx)(f.Z,{strokeWidth:2,size:16})}),(0,n.jsx)("div",{className:"grow",children:(0,n.jsxs)("span",{className:"flex grow items-center gap-1 truncate text-sm text-foreground",children:[(0,n.jsx)("span",{className:"text-xs text-foreground-lighter",children:s>0?"then by":"sort by"}),u.name]})}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("label",{className:"text-xs text-foreground-lighter",children:"ascending:"}),(0,n.jsx)(y.Z,{size:"tiny",layout:"flex",defaultChecked:i.ascending,onChange:e=>o(a,e)})]}),(0,n.jsx)(d.z,{icon:(0,n.jsx)(j.Z,{strokeWidth:1.5,size:14}),size:"tiny",type:"text",onClick:()=>r(a)})]}):null});let SortOverlay=e=>{let{table:t,sorts:s,setParams:a}=e,r=(0,l.useMemo)(()=>(0,h.rg)(null!=s?s:[]),[s]),[u,g]=(0,l.useState)(r),x=t.columns.filter(e=>{let t=u.find(t=>t.column==e.name);return!t}),f=(null==x?void 0:x.map(e=>({value:e.name,label:e.name})))||[],y=(0,l.useCallback)(e=>{g(t=>t.filter(t=>t.column!==e))},[]),j=(0,l.useCallback)((e,t)=>{g(s=>{let n=s.findIndex(t=>t.column===e);return i()(s,{[n]:{$merge:{ascending:t}}})})},[]),b=(0,l.useCallback)((e,t)=>{g(s=>i()(s,{$splice:[[e,1],[t,0,s[e]]]}))},[]);return(0,n.jsxs)("div",{className:"space-y-2 py-2",children:[u.map((e,s)=>(0,n.jsx)(v,{table:t,index:s,columnName:e.column,sort:e,onDelete:y,onToggle:j,onDrag:b},e.column)),0===u.length&&(0,n.jsxs)("div",{className:"space-y-1 px-3",children:[(0,n.jsx)("h5",{className:"text-sm text-foreground-light",children:"No sorts applied to this view"}),(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Add a column below to sort the view"})]}),(0,n.jsx)(c.Z.Separator,{}),(0,n.jsxs)("div",{className:"px-3 flex flex-row justify-between",children:[x&&x.length>0?(0,n.jsx)(p.Fy,{options:f,onSelect:function(e){g([...u,{column:e,ascending:!0}])},side:"bottom",align:"start",children:(0,n.jsx)(d.z,{asChild:!0,type:"text",iconRight:(0,n.jsx)(m.Z,{}),className:"sb-grid-dropdown__item-trigger",children:(0,n.jsx)("span",{children:"Pick ".concat(u.length>1?"another":"a"," column to sort by")})})}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"All columns have been added"}),(0,n.jsx)(d.z,{disabled:o()(u,r),type:"default",onClick:function(){a(e=>({...e,sort:u.map(e=>"".concat(e.column,":").concat(e.ascending?"asc":"desc"))}))},children:"Apply sorting"})]})]})};var sort=e=>{let{table:t,sorts:s,setParams:a}=e,i=(s||[]).length>0?"Sorted by ".concat(s.length," rule").concat(s.length>1?"s":""):"Sort";return(0,n.jsx)(c.Z,{size:"large",align:"start",className:"sb-grid-sort-popover",overlay:(0,n.jsx)(SortOverlay,{table:t,sorts:s,setParams:a}),children:(0,n.jsx)(d.z,{asChild:!0,type:(s||[]).length>0?"link":"text",icon:(0,n.jsx)("div",{className:"text-foreground-light",children:(0,n.jsx)(u.Z,{strokeWidth:1.5})}),children:(0,n.jsx)("span",{children:i})})})}},90175:function(e,t,s){s.d(t,{ov:function(){return menu_ColumnMenu},hh:function(){return j},q4:function(){return menu_RowContextMenu}});var n=s(52322),a=s(24990),i=s(97036),r=s(22354),o=s(26700),l=s(96143),c=s(2784);function Divider(e){let{children:t,className:s,light:a=!1,orientation:i="center",style:r,type:o="horizontal"}=e;return(0,n.jsx)("div",{role:"separator",style:r,children:t&&(0,n.jsx)("span",{children:t})})}var d=s(5099),u=s(94580),m=s(43502),p=s(4690),menu_ColumnMenu=e=>{let{column:t,isEncrypted:s}=e,c=(0,p.Qq)(),h=(0,p.I0)(),{onEditColumn:g,onDeleteColumn:x}=c,f=t.key;function onEditColumn(){g&&g(f)}function onDeleteColumn(){x&&x(f)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.h_,{children:[(0,n.jsx)(i.$F,{asChild:!0,children:(0,n.jsx)(u.z,{className:"opacity-50 flex",type:"text",style:{padding:"3px"},children:(0,n.jsx)(m.Z,{})})}),(0,n.jsx)(i.AW,{align:"end",side:"bottom",children:(0,n.jsxs)(n.Fragment,{children:[c.editable&&void 0!==onEditColumn&&(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{asChild:!0,className:"".concat(s?"opacity-50":""),children:(0,n.jsxs)(i.Xi,{className:"space-x-2",onClick:onEditColumn,disabled:s,children:[(0,n.jsx)(r.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Edit column"})]})}),s&&(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Encrypted columns cannot be edited"})})]})})]}),(0,n.jsx)(i.Xi,{className:"space-x-2",onClick:t.frozen?function(){h({type:"UNFREEZE_COLUMN",payload:{columnKey:f}})}:function(){h({type:"FREEZE_COLUMN",payload:{columnKey:f}})},children:t.frozen?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Unfreeze column"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Freeze column"})]})}),c.editable&&void 0!==onDeleteColumn&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Divider,{light:!0}),(0,n.jsxs)(i.Xi,{className:"space-x-2",onClick:onDeleteColumn,children:[(0,n.jsx)(d.Z,{size:"tiny",stroke:"red"}),(0,n.jsx)("p",{children:"Delete column"})]})]})]})})]})})},h=s(71623),g=s(49097),x=s(44389),f=s(74386);let y="row-context-menu-id";var menu_RowContextMenu=e=>{let{rows:t}=e,s=(0,p.Qq)(),a=(0,x._2)();function isItemHidden(e){let{data:t}=e;return"edit"===t?void 0==s.onEditRow:"delete"===t&&!s.editable}let i=(0,c.useCallback)(e=>{var n;let{props:a}=e;if(!s.selectedCellPosition||!a)return;let{rowIdx:i}=a,r=t[i],o=s.gridColumns[null===(n=s.selectedCellPosition)||void 0===n?void 0:n.idx].key,l=r[o],c=(0,f.Lw)(l);(0,f.vQ)(c)},[t,s.gridColumns,s.selectedCellPosition]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.v2,{id:y,animation:!1,children:[(0,n.jsxs)(h.ck,{onClick:i,children:[(0,n.jsx)(g.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Copy cell content"})]}),(0,n.jsxs)(h.ck,{onClick:function(e){let{props:n}=e,{rowIdx:a}=n,i=t[a];s.onEditRow&&s.onEditRow(i)},hidden:isItemHidden,data:"edit",children:[(0,n.jsx)(r.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Edit row"})]}),s.editable&&(0,n.jsx)(h.Z0,{}),(0,n.jsxs)(h.ck,{onClick:function(e){let{props:s}=e,{rowIdx:n}=s,i=t[n];i&&a.onDeleteRows([i])},hidden:isItemHidden,data:"delete",children:[(0,n.jsx)(d.Z,{size:"tiny",stroke:"red"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Delete row"})]})]})})};let j={ROW_CONTEXT_MENU_ID:y}},25076:function(e,t,s){s.d(t,{Cx:function(){return a},E_:function(){return r},Vz:function(){return o},W:function(){return c},Z6:function(){return rlsAcknowledgedKey},ZR:function(){return l},jg:function(){return u},mr:function(){return i},uZ:function(){return d}});var n=s(10978);let a=new n.Z({concurrency:1}),i=100,r="supabase_grid",o=-1,l=-2,c="supabase-grid-select-row",d="supabase-grid-add-column",u="Please add a primary key column to your table to update or delete rows",rlsAcknowledgedKey=e=>"".concat("supabase-acknowledge-rls-warning","-").concat(String(e))},90507:function(e,t,s){s.d(t,{AE:function(){return et.Z},zB:function(){return SupabaseGrid},NK:function(){return p.NK}});var n=s(52322),a=s(2784),i=s(28846),r=s(52797),o=s(28316),l=s(2755),c=s(48256),d=s(89465),u=s(11033),m=s(44389),p=s(99902),h=s(67146),g=s(98050),x=s(74915),f=s(70481),y=s(77565);let getTableRowsCountSqlQuery=e=>{var t;let{table:s,filters:n=[]}=e,a=new et.Z;if(!s)return"";let i=a.from(s.name,null!==(t=s.schema)&&void 0!==t?t:void 0).count();n.filter(e=>e.value&&""!=e.value).forEach(e=>{let t=(0,y.q)(s,e);i=i.filter(e.column,e.operator,t)});let r=i.toSql();return r},useTableRowsCountQuery=function(e){let{projectRef:t,connectionString:s,queryKey:n,table:a,impersonatedRole:i,...r}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,u.Zp)();return(0,f.cp)({projectRef:t,connectionString:s,sql:(0,x.Jh)(getTableRowsCountSqlQuery({table:a,...r}),{projectRef:null!=t?t:"ref",role:i}),queryKey:[...null!=n?n:[],{table:{name:null==a?void 0:a.name,schema:null==a?void 0:a.schema},impersonatedRole:i,...r}],isRoleImpersonationEnabled:l},{select:e=>({count:e.result[0].count}),enabled:void 0!==t&&void 0!==a,...o})};var j=s(94580),v=s(35500),b=s(68706),w=s(83150),N=s(13781),S=s(1681),C=s(4690);let k=[{value:100,label:"100 rows"},{value:500,label:"500 rows"},{value:1e3,label:"1000 rows"}];var pagination=e=>{var t,s,i;let{isLoading:r=!1}=e,o=(0,C.Qq)(),c=(0,C.I0)(),x=(0,m._2)(),f=x.page,[{filter:y}]=(0,d.x3)({arrayKeys:["filter"]}),_=(0,p.Yb)(y),E=null!==(t=o.table)&&void 0!==t?t:void 0,P=(0,u.fN)(),{project:I}=(0,l.d2)(),{data:L,isLoading:A,isSuccess:T,isError:R}=useTableRowsCountQuery({queryKey:[null==E?void 0:E.schema,null==E?void 0:E.name,"count"],projectRef:null==I?void 0:I.ref,connectionString:null==I?void 0:I.connectionString,table:E,filters:_,impersonatedRole:P.role},{keepPreviousData:!0,onSuccess(e){c({type:"SET_ROWS_COUNT",payload:e.count})}}),D=Math.ceil((null!==(s=null==L?void 0:L.count)&&void 0!==s?s:0)/x.rowsPerPage),z=(null!==(i=null==L?void 0:L.count)&&void 0!==i?i:0)>0?D:1;(0,a.useEffect)(()=>{f&&f>z&&x.setPage(z)},[f,z]),(0,a.useEffect)(()=>{},[o.selectedRows]);let[Z,F]=(0,a.useState)(!1),onConfirmPreviousPage=()=>{goToPreviousPage(),c({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})},[O,U]=(0,a.useState)(!1),onConfirmNextPage=()=>{goToNextPage(),c({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})},goToPreviousPage=()=>{let e=f-1;x.setPage(e)},goToNextPage=()=>{let e=f+1;x.setPage(e)};return(0,n.jsxs)("div",{className:"sb-grid-pagination",children:[A&&(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Loading records count..."}),T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.z,{icon:(0,n.jsx)(v.Z,{}),type:"outline",disabled:f<=1||A,onClick:()=>{f>1&&(o.selectedRows.size>=1?F(!0):goToPreviousPage())},style:{padding:"3px 10px"}}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Page"}),(0,n.jsx)("div",{className:"sb-grid-pagination-input-container",children:(0,n.jsx)(b.Z,{value:f,onChange:function(e){let t=e.target.value,s=Number(t)>D?D:Number(t);x.setPage(s||1)},size:"tiny",style:{width:"3rem"},max:D,min:1})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"of ".concat(z)}),(0,n.jsx)(j.z,{icon:(0,n.jsx)(w.Z,{}),type:"outline",disabled:f>=D||A,onClick:()=>{f<D&&(o.selectedRows.size>=1?U(!0):goToNextPage())},style:{padding:"3px 10px"}}),(0,n.jsx)(h.Fy,{options:k,onSelect:function(e){let t=Number(e);x.setRowsPerPage(isNaN(t)?100:t)},side:"top",align:"start",children:(0,n.jsx)(j.z,{asChild:!0,type:"outline",style:{padding:"3px 10px"},children:(0,n.jsx)("span",{children:"".concat(x.rowsPerPage," rows")})})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"".concat(L.count.toLocaleString()," ").concat(0===L.count||L.count>1?"records":"record")}),r&&(0,n.jsx)(N.Z,{size:14,className:"animate-spin"}),(0,n.jsx)(g.Z,{visible:Z,header:"Confirm moving to previous page",buttonLabel:"Confirm",onSelectCancel:()=>F(!1),onSelectConfirm:()=>{onConfirmPreviousPage()},children:(0,n.jsx)(S.C.Content,{children:(0,n.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"The currently selected lines will be deselected, do you want to proceed?"})})}),(0,n.jsx)(g.Z,{visible:O,header:"Confirm moving to next page",buttonLabel:"Confirm",onSelectCancel:()=>U(!1),onSelectConfirm:()=>{onConfirmNextPage()},children:(0,n.jsx)(S.C.Content,{children:(0,n.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"The currently selected lines will be deselected, do you want to proceed?"})})})]}),R&&(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Error fetching records count. Please refresh the page."})]})},footer=e=>{let{isLoading:t}=e;return(0,n.jsx)("div",{className:"sb-grid-footer",children:(0,n.jsx)("div",{className:"sb-grid-footer__inner",children:(0,n.jsx)(pagination,{isLoading:t})})})},_=s(91852),E=s(59491),P=s(6277),I=s(46782),L=s.n(I),A=s(90286),T=s.n(A),R=s(97036),D=s(43502),z=s(4220),Z=s(11205),F=s(56770),O=s(88979),U=s(46469),M=s(5099),B=s(39097),q=s.n(B),W=s(73872),H=s(25076),G=s(10024),V=s(5835),Q=s(90948),K=s(16323),Y=s(39195);function RLSBannerWarning(){var e,t;let{project:s}=(0,l.d2)(),{ref:i,id:r}=(0,W.UO)(),o=r?Number(r):void 0,c=(0,H.Z6)(o),d=(null===(e=localStorage)||void 0===e?void 0:e.getItem(c))==="true",[u,m]=(0,a.useState)(!1),p=(0,K.Z)(o),{data:h}=(0,Q.yp)({projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString,id:o},{enabled:(null==p?void 0:p.type)===V.l.TABLE}),x=null==h?void 0:h.rls_enabled,f=(null==h?void 0:h.schema)==="public",y=(0,a.useCallback)(()=>{new BroadcastChannel(c).postMessage({type:"dismiss"}),localStorage.setItem(c,"true"),m(!1)},[c]);return(0,n.jsx)(n.Fragment,{children:d||x||!f?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-center bg-amber-500 text-amber-1100 text-xs py-2.5 flex items-center justify-center relative",children:[(0,n.jsx)(Y.Z,{size:16,strokeWidth:2}),(0,n.jsx)("span",{className:"uppercase font-bold ml-2",children:"Warning"}),": You are allowing anonymous access to your table."," ",(0,n.jsx)(q(),{href:"/project/".concat(i,"/auth/policies?search=").concat(o),className:"underline ml-2 opacity-80 hover:opacity-100 transition",children:"Enable Row Level Security"}),(0,n.jsx)("div",{className:"ml-20 absolute right-2",children:(0,n.jsx)(j.z,{type:"outline",className:"hover:text-foreground text-amber-900 border border-amber-800",onClick:()=>m(!0),children:"Dismiss"})})]}),(0,n.jsx)(g.Z,{visible:u,header:"Turn off Row Level Security",buttonLabel:"Confirm",size:"medium",onSelectCancel:()=>m(!1),onSelectConfirm:y,children:(0,n.jsx)(S.C.Content,{children:(0,n.jsx)(G.Z,{})})})]})})}var J=s(60471),X=s(3889),$=s(17833);let DefaultHeader=e=>{let{table:t,isRefetching:s,onAddColumn:a,onAddRow:i,onImportData:r}=e,o=(0,d.Xo)(E.KA.TENANT_SQL_ADMIN_WRITE,"columns"),[{filter:l,sort:c},u]=(0,d.x3)({arrayKeys:["sort","filter"]});return(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(J.Z,{table:t,isRefetching:s}),(0,n.jsx)(X.Z,{table:t,filters:l,setParams:u}),(0,n.jsx)($.Z,{table:t,sorts:c,setParams:u})]}),(void 0!==i||void 0!==a)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-[20px] w-px border-r border-control"}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:o&&(0,n.jsxs)(R.h_,{children:[(0,n.jsx)(R.$F,{asChild:!0,children:(0,n.jsx)(j.z,{type:"primary",size:"tiny",icon:(0,n.jsx)(D.Z,{size:14,strokeWidth:1.5}),children:"Insert"})}),(0,n.jsx)(R.AW,{side:"bottom",align:"start",children:[...void 0!==i?[(0,n.jsxs)(R.Xi,{className:"group space-x-2",onClick:i,children:[(0,n.jsxs)("div",{className:"-mt-2 pr-1.5",children:[(0,n.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px]"}),(0,n.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px] my-[2px]"}),(0,n.jsx)("div",{className:(0,z.cn)(["border border-foreground-light w-[15px] h-[4px] translate-x-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-x-0"])})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Insert row"}),(0,n.jsxs)("p",{className:"text-foreground-light",children:["Insert a new row into ",t.name]})]})]},"add-row")]:[],...void 0!==a?[(0,n.jsxs)(R.Xi,{className:"group space-x-2",onClick:a,children:[(0,n.jsxs)("div",{className:"flex -mt-2 pr-1.5",children:[(0,n.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px]"}),(0,n.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px] mx-[2px]"}),(0,n.jsx)("div",{className:(0,z.cn)(["border border-foreground-light w-[4px] h-[15px] -translate-y-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-y-0"])})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Insert column"}),(0,n.jsxs)("p",{className:"text-foreground-light",children:["Insert a new column into ",t.name]})]})]},"add-column")]:[],...void 0!==r?[(0,n.jsxs)(R.Xi,{className:"group space-x-2",onClick:r,children:[(0,n.jsxs)("div",{className:"relative -mt-2",children:[(0,n.jsx)(Z.Z,{className:"-translate-x-[2px]"}),(0,n.jsx)(F.Z,{className:(0,P.default)("transition duration-200 absolute bottom-0 right-0 translate-y-1 opacity-0 bg-brand-400 rounded-full","group-data-[highlighted]:translate-y-0 group-data-[highlighted]:text-brand group-data-[highlighted]:opacity-100"),strokeWidth:3,size:12})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Import data from CSV"}),(0,n.jsx)("p",{className:"text-foreground-light",children:"Insert new rows from a CSV"})]})]},"import-data")]:[]]})]})})]})]})},RowHeader=e=>{var t,s;let{table:i,sorts:r,filters:o}=e,{ui:p}=(0,d.oR)(),h=(0,C.Qq)(),g=(0,C.I0)(),{project:x}=(0,l.d2)(),f=(0,m._2)(),y=(0,u.fN)(),[v,b]=(0,a.useState)(!1),{data:w}=(0,c.KK)({queryKey:[i.schema,i.name],projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString,table:i,sorts:r,filters:o,page:f.page,limit:f.rowsPerPage,impersonatedRole:y.role}),{data:N}=useTableRowsCountQuery({queryKey:[null==i?void 0:i.schema,null==i?void 0:i.name,"count"],projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString,table:i,filters:o,impersonatedRole:y.role},{keepPreviousData:!0}),onSelectAllRows=()=>{g({type:"SELECT_ALL_ROWS",payload:{selectedRows:new Set(S.map(e=>e.idx))}})};async function onRowsExportCSV(){if(b(!0),P&&k>5e5)return p.setNotification({category:"error",message:"Sorry! We're unable to support exporting of CSV for row counts larger than ".concat(5e5.toLocaleString()," at the moment.")}),b(!1);let e=P?await h.rowService.fetchAllData(o,r):S.filter(e=>_.has(e.idx)),t=e.map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e)),s=T().unparse(t,{columns:h.table.columns.map(e=>e.name)}),n=new Blob([s],{type:"text/csv;charset=utf-8;"});L()(n,"".concat(h.table.name,"_rows.csv")),b(!1)}let S=null!==(t=null==w?void 0:w.rows)&&void 0!==t?t:[],k=null!==(s=null==N?void 0:N.count)&&void 0!==s?s:0,{selectedRows:_,editable:E,allRowsSelected:P}=h;return(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(j.z,{type:"default",style:{padding:"3px"},icon:(0,n.jsx)(O.Z,{size:"tiny",strokeWidth:2}),onClick:function(){g({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})}}),(0,n.jsx)("span",{className:"text-xs text-foreground",children:P?"".concat(k," rows selected"):_.size>1?"".concat(_.size," rows selected"):"".concat(_.size," row selected")}),!P&&k>S.length&&(0,n.jsxs)(j.z,{type:"link",onClick:()=>onSelectAllRows(),children:["Select all ",k," rows"]})]}),(0,n.jsx)("div",{className:"h-[20px] border-r border-gray-700"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j.z,{type:"primary",size:"tiny",icon:(0,n.jsx)(U.Z,{}),loading:v,disabled:v,onClick:onRowsExportCSV,children:"Export to CSV"}),E&&(0,n.jsx)(j.z,{type:"default",size:"tiny",icon:(0,n.jsx)(M.Z,{size:"tiny"}),onClick:()=>{let e=P?k:_.size,t=Array.from(_),s=S.filter(e=>t.includes(e.idx));f.onDeleteRows(s,{allRowsSelected:P,numRows:e,callback:()=>{g({type:"REMOVE_ROWS",payload:{rowIdxs:t}}),g({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})}})},children:P?"Delete ".concat(k," rows"):_.size>1?"Delete ".concat(_.size," rows"):"Delete ".concat(_.size," row")})]})]})};var header=e=>{let{table:t,sorts:s,filters:a,onAddColumn:i,onAddRow:r,onImportData:o,headerActions:l,customHeader:c,isRefetching:d}=e,u=(0,C.Qq)(),{selectedRows:m}=u;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex h-10 items-center justify-between bg-surface-100 px-5 py-1.5",children:[c?(0,n.jsx)(n.Fragment,{children:c}):(0,n.jsx)(n.Fragment,{children:m.size>0?(0,n.jsx)(RowHeader,{table:t,sorts:s,filters:a}):(0,n.jsx)(DefaultHeader,{table:t,isRefetching:d,onAddColumn:i,onAddRow:r,onImportData:o})}),(0,n.jsx)("div",{className:"sb-grid-header__inner",children:l})]}),(0,n.jsx)(RLSBannerWarning,{})]})},ee=s(90175);let SupabaseGrid=e=>{let t=(0,p.cc)(e);return(0,n.jsx)(C.g3,{children:(0,n.jsx)(i.W,{backend:r.PD,context:window,children:(0,n.jsx)(SupabaseGridLayout,{...t})})})},SupabaseGridLayout=e=>{var t,s;let{editable:i,storageRef:r,gridProps:g,headerActions:x,showCustomChildren:f,customHeader:y,children:j,onAddRow:v,onAddColumn:b,updateTableRow:w,onEditForeignKeyColumnValue:N,onImportData:S}=e,k=(0,C.I0)(),E=(0,C.Qq)(),P=(0,m._2)(),I=(0,a.useRef)(null),[L,A]=(0,a.useState)(!1),[{sort:T,filter:R},D]=(0,d.x3)({arrayKeys:["sort","filter"]}),z=(0,p.rg)(T),Z=(0,p.Yb)(R),F=(0,u.fN)(),{project:O}=(0,l.d2)(),{data:U,error:M,isSuccess:B,isError:q,isLoading:W,isRefetching:H}=(0,c.KK)({queryKey:[e.table.schema,e.table.name],projectRef:null==O?void 0:O.ref,connectionString:null==O?void 0:O.connectionString,table:e.table,sorts:z,filters:Z,page:P.page,limit:P.rowsPerPage,impersonatedRole:F.role},{keepPreviousData:!0,retryDelay:(e,t)=>{var s;return(t&&(null===(s=t.message)||void 0===s?void 0:s.includes("does not exist"))&&D(e=>({...e,sort:void 0})),e>3)?1/0:5e3},onSuccess(e){k({type:"SET_ROWS_COUNT",payload:e.rows.length})}});return(0,a.useEffect)(()=>{L||A(!0)},[]),(0,a.useEffect)(()=>{L&&k({type:"UPDATE_FILTERS",payload:{}})},[JSON.stringify(Z)]),(0,a.useEffect)(()=>{L&&k({type:"UPDATE_SORTS",payload:{}})},[JSON.stringify(z)]),(0,a.useEffect)(()=>{E.isInitialComplete&&r&&E.table&&(0,p.Tf)(E,r,T,R)},[E.table,E.isInitialComplete,E.gridColumns,JSON.stringify(z),JSON.stringify(Z),r]),(0,a.useEffect)(()=>{k({type:"INIT_CALLBACK",payload:{...e}})},[]),(0,a.useEffect)(()=>{let initializeData=async()=>{let{savedState:t}=await (0,p.uk)(e,E,k,T,R);(t.sorts||t.filters)&&D(e=>({...e,...t.sorts&&{sort:t.sorts},...t.filters&&{filter:t.filters}}))},t=JSON.stringify(e.table)!==JSON.stringify(E.table);(!E.table||t)&&initializeData()},[E.table,e.table,e.schema]),(0,n.jsxs)("div",{className:"sb-grid",children:[(0,n.jsx)(header,{table:e.table,sorts:z,filters:Z,isRefetching:H,onAddRow:i?v:void 0,onAddColumn:i?b:void 0,onImportData:i?S:void 0,headerActions:x,customHeader:y}),f&&void 0!==j?(0,n.jsx)(n.Fragment,{children:j}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.rj,{ref:I,...g,rows:null!==(t=null==U?void 0:U.rows)&&void 0!==t?t:[],error:M,isLoading:W,isSuccess:B,isError:q,filters:Z,setParams:D,updateRow:w,onAddRow:v,onImportData:S,onEditForeignKeyColumnValue:N}),(0,n.jsx)(footer,{isLoading:W||H}),(0,n.jsx)(h.fQ,{gridRef:I})]}),L&&(0,o.createPortal)((0,n.jsx)(ee.q4,{rows:null!==(s=null==U?void 0:U.rows)&&void 0!==s?s:[]}),document.body)]})};var et=s(91063)},91063:function(e,t,s){var n=s(97035);t.Z=n.A},4690:function(e,t,s){s.d(t,{g3:function(){return h},I0:function(){return x},Qq:function(){return g}});var n=s(2784),a=s(64018),i=s(25076),r=s(87612),o=s(91063),l=s(74386);let SqlRowService=class SqlRowService{async count(e){var t;let s=this.query.from(this.table.name,null!==(t=this.table.schema)&&void 0!==t?t:void 0).count();e.filter(e=>e.value&&""!=e.value).forEach(e=>{let t=this.formatFilterValue(e);s=s.filter(e.column,e.operator,t)});let n=s.toSql(),{data:a,error:i}=await this.onSqlQuery(n);return i?{error:i}:(null==a?void 0:a.length)==1?{data:a[0].count}:{error:{message:"fetch rows count failed"}}}async delete(e){var t;let{primaryKeys:s,error:n}=this.getPrimaryKeys();if(n)return{error:n};let a=this.query.from(this.table.name,null!==(t=this.table.schema)&&void 0!==t?t:void 0).delete();s.forEach(t=>{let s=e.map(e=>e[t]);a=a.filter(t,"in",s)});let i=a.toSql();return await this.onSqlQuery(i)}async deleteAll(e){var t;let s=this.query.from(this.table.name,null!==(t=this.table.schema)&&void 0!==t?t:void 0).delete();e.filter(e=>e.value&&""!==e.value).forEach(e=>{let t=this.formatFilterValue(e);s=s.filter(e.column,e.operator,t)});let n=s.toSql();return await this.onSqlQuery(n)}async truncate(){var e;let t=this.query.from(this.table.name,null!==(e=this.table.schema)&&void 0!==e?e:void 0).truncate(),s=t.toSql();return await this.onSqlQuery(s)}async fetchAllData(e,t){var s;let n=[],a=this.query.from(this.table.name,null!==(s=this.table.schema)&&void 0!==s?s:void 0).select();e.filter(e=>e.value&&""!=e.value).forEach(e=>{let t=this.formatFilterValue(e);a=a.filter(e.column,e.operator,t)}),t.forEach(e=>{a=a.order(e.column,e.ascending,e.nullsFirst)});let i=-1,r=0,o=0,l=[];return await (async()=>{do{i+=1,r=500*i,o=(i+1)*500-1;let e=a.range(r,o).toSql(),{data:t,error:s}=await this.onSqlQuery(e);if(s)return this.onError(s),{data:{rows:[]}};n.push(...t),l=t}while(500===l.length)})(),n}update(e,t,s,n){var a;let{primaryKeys:r,error:o}=this.getPrimaryKeys();if(o)return{error:o};let{idx:l,...c}=e;n&&n({row:c,idx:l});let d={};r.forEach(t=>{d[t]=e[t],delete c[t]});let u=this.table.columns.filter(e=>{var t;return(null!==(t=null==e?void 0:e.enum)&&void 0!==t?t:[]).length>0&&"array"===e.dataType.toLowerCase()}).map(e=>e.name),m=this.query.from(this.table.name,null!==(a=this.table.schema)&&void 0!==a?a:void 0).update(s?{[s]:c[s]}:c,{returning:!0,enumArrayColumns:u}).match(d).toSql();return i.Cx.add(async()=>{let{data:e,error:t}=await this.onSqlQuery(m);if(t)throw t;n&&n({row:e[0],idx:l})}).catch(e=>{let{idx:s,...a}=t;n&&n({row:a,idx:s}),this.onError(e)}),{}}getPrimaryKeys(){let e=this.table.columns.filter(e=>e.isPrimaryKey);return e&&0!=e.length?{primaryKeys:e.map(e=>e.name)}:{error:{message:i.jg}}}formatFilterValue(e){let t=this.table.columns.find(t=>t.name==e.column);if(t&&(0,l.v3)(t.format)){let t=Number(e.value);if(!Number.isNaN(t))return Number(e.value)}return e.value}constructor(e,t,s){(0,r._)(this,"table",void 0),(0,r._)(this,"onSqlQuery",void 0),(0,r._)(this,"onError",void 0),(0,r._)(this,"query",void 0),this.table=e,this.onSqlQuery=t,this.onError=s,this.query=new o.Z}};var c=s(14819),d=s.n(c);let u={rows:[],selectedRows:new Set,selectedCellPosition:null,totalRows:i.Vz},m={table:null,rowService:null,isInitialComplete:!1,editable:!1,allRowsSelected:!1,onAddColumn:null,onAddRow:null,onError:null,onEditRow:null,onEditColumn:null,onDeleteColumn:null,onSqlQuery:null,gridColumns:[],...u},p=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,s=arguments.length>1?arguments[1]:void 0;for(let n=0;n<t.length;n++)e=t[n](e,s);return e}}((e,t)=>{switch(t.type){case"INIT_TABLE":return{...e,table:t.payload.table,rowService:new SqlRowService(t.payload.table,t.payload.onSqlQuery,t.payload.onError),isInitialComplete:!0,editable:t.payload.editable||!1};case"UPDATE_FILTERS":{let t={...e};return t.page=1,t.totalRows=i.ZR,t}case"UPDATE_SORTS":{let t={...e};return t}default:return e}},(e,t)=>"INIT_CALLBACK"===t.type?{...e,onAddColumn:t.payload.onAddColumn,onAddRow:t.payload.onAddRow,onError:t.payload.onError,onEditRow:t.payload.onEditRow,onEditColumn:t.payload.onEditColumn,onDeleteColumn:t.payload.onDeleteColumn,onSqlQuery:t.payload.onSqlQuery}:e,(e,t)=>{switch(t.type){case"INIT_TABLE":return{...e,gridColumns:(0,l.iu)(t.payload.gridColumns,t.payload.savedState)};case"MOVE_COLUMN":{let s=e.gridColumns.findIndex(e=>e.key===t.payload.fromKey),n=e.gridColumns.findIndex(e=>e.key===t.payload.toKey),a=e.gridColumns[s];return{...e,gridColumns:d()(e.gridColumns,{$splice:[[s,1],[n,0,a]]})}}case"UPDATE_COLUMN_SIZE":{let s=(0,l.Sj)(e.gridColumns[t.payload.index]);return s.width=t.payload.width,{...e,gridColumns:d()(e.gridColumns,{[t.payload.index]:{$set:s}})}}case"FREEZE_COLUMN":{let s=e.gridColumns.findIndex(e=>e.key===t.payload.columnKey),n=(0,l.Sj)(e.gridColumns[s]);return n.frozen=!0,{...e,gridColumns:d()(e.gridColumns,{[s]:{$set:n}})}}case"UNFREEZE_COLUMN":{let s=e.gridColumns.findIndex(e=>e.key===t.payload.columnKey),n=(0,l.Sj)(e.gridColumns[s]);return n.frozen=!1,{...e,gridColumns:d()(e.gridColumns,{[s]:{$set:n}})}}case"UPDATE_COLUMN_IDX":{let s=e.gridColumns.findIndex(e=>e.key===t.payload.columnKey),n=(0,l.Sj)(e.gridColumns[s]);return n.idx=t.payload.columnIdx,{...e,gridColumns:d()(e.gridColumns,{[s]:{$set:n}}).sort((e,t)=>e.idx-t.idx)}}default:return e}},(e,t)=>{switch(t.type){case"INIT_TABLE":return{...e,selectedCellPosition:null,selectedRows:new Set,totalRows:i.ZR};case"SELECTED_CELL_CHANGE":return{...e,selectedCellPosition:t.payload.position};case"SELECTED_ROWS_CHANGE":return{...e,allRowsSelected:!1,selectedRows:t.payload.selectedRows};case"SELECT_ALL_ROWS":return{...e,allRowsSelected:!0,selectedRows:t.payload.selectedRows};case"SET_ROWS":return{...e,rows:t.payload.rows};case"SET_ROWS_COUNT":return{...e,totalRows:t.payload};default:return e}}),{Provider:h,useTrackedState:g,useUpdate:x}=(0,a.fH)(()=>(0,n.useReducer)(p,m))},33181:function(e,t,s){s.d(t,{i1:function(){return C},ve:function(){return getColumnDefaultWidth},cv:function(){return getGridColumns}});var n=s(52322),a=s(2784),i=s(37886),r=s(39381),o=s(4690);let BooleanEditor=e=>{let{row:t,column:s,isNullable:a,onRowChange:i,onClose:l}=e,c=(0,o.Qq)(),d=c.gridColumns.find(e=>e.name==s.key),u=t[s.key];return(0,n.jsxs)(r.ZP,{autoFocus:!0,id:"boolean-editor",name:"boolean-editor",size:"small",onBlur:()=>l(!1),onChange:e=>{let n=e.target.value;"null"===n?i({...t,[s.key]:null},!0):i({...t,[s.key]:"true"===n},!0)},defaultValue:null===u?"null":u.toString(),style:{width:"".concat((null==d?void 0:d.width)||s.width,"px")},children:[(0,n.jsx)(r.ZP.Option,{value:"true",children:"TRUE"}),(0,n.jsx)(r.ZP.Option,{value:"false",children:"FALSE"}),a&&(0,n.jsx)(r.ZP.Option,{value:"null",children:"NULL"})]})};function autoFocusAndSelect(e){null==e||e.focus(),null==e||e.select()}function DateEditor(e){let{row:t,column:s,onRowChange:a,onClose:i}=e,r=t[s.key];return(0,n.jsx)("input",{className:"sb-grid-date-editor",ref:autoFocusAndSelect,value:null!=r?r:"",onChange:function(e){let n=e.target.value;""==n?a({...t,[s.key]:null}):a({...t,[s.key]:n})},onBlur:()=>i(!0),type:"date"})}var l=s(28879),c=s.n(l),d=s(89945),u=s.n(d);function DateTimeEditor_autoFocusAndSelect(e){null==e||e.focus(),null==e||e.select()}function BaseEditor(e){let{row:t,column:s,format:a,onRowChange:i,onClose:r}=e,o=t[s.key],l=o?c()(o,a).format("YYYY-MM-DDTHH:mm:ss"):o;return(0,n.jsx)("input",{className:"sb-grid-datetime-editor",ref:DateTimeEditor_autoFocusAndSelect,value:null!=l?l:"",onChange:function(e){let n=e.target.value;if(0===n.length)i({...t,[s.key]:null});else{let e=c()(n).format(a);i({...t,[s.key]:e})}},onBlur:()=>r(!0),type:"datetime-local",step:"1"})}function DateTimeEditor(e){return(0,n.jsx)(BaseEditor,{...e,format:"YYYY-MM-DDTHH:mm:ss"})}function DateTimeWithTimezoneEditor(e){return(0,n.jsx)(BaseEditor,{...e,format:"YYYY-MM-DDTHH:mm:ssZ"})}c().extend(u());var m=s(24990),p=s(694),h=s(73124),g=s(97265),IconMaximize_IconMaximize=function(e){return(0,n.jsx)(g.Z,{icon:h.Z,...e})},x=s(67146),f=s(71813),y=s(1842),j=s.n(y);let JsonEditor=e=>{let{row:t,column:s,isEditable:i=!0,onRowChange:r,onExpandEditor:l}=e,c=(0,o.Qq)(),d=c.gridColumns.find(e=>e.name==s.key),u=t[s.key],h=(0,f.ZO)(j()(u)?"":JSON.stringify(u)),[g,y]=(0,a.useState)(!0),[v,b]=(0,a.useState)(h),w=(0,a.useCallback)(()=>{i&&r(t,!0),y(!1)},[]),N=(0,a.useCallback)(e=>{e!==v&&commitChange(e)},[]),onSelectExpand=()=>{w(),l(s.key,{...t,[s.key]:(0,f.dW)(v)||t[s.key]})},commitChange=e=>{if(i){if(e){if(verifyJSON(e)){let n=JSON.parse(e);r({...t,[s.key]:n},!0),y(!1)}else{let{onError:e}=c;e&&e(Error("Please enter a valid JSON"))}}else r({...t,[s.key]:null},!0),y(!1)}};return(0,n.jsx)(p.Z,{open:g,side:"bottom",align:"start",sideOffset:-35,className:"rounded-none",overlay:(0,n.jsxs)(x.rc,{value:v,onEscape:w,onEnter:N,children:[(0,n.jsx)(x.rE,{width:"".concat((null==d?void 0:d.width)||s.width,"px"),value:null!=v?v:"",language:"json",readOnly:!i,onChange:e=>{i&&(e&&""!=e?b(e):b(null))}}),(0,n.jsxs)("div",{className:"flex items-start justify-between p-2 bg-surface-200 space-x-2",children:[i?(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"px-1.5 py-[2.5px] rounded bg-selection border border-strong flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-[10px]",children:""})}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Save changes"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"px-1 py-[2.5px] rounded bg-selection border border-strong flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-[10px]",children:"Esc"})}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Cancel changes"})]})]}):(0,n.jsx)("div",{}),(0,n.jsxs)(m.fC,{delayDuration:0,children:[(0,n.jsx)(m.xz,{children:(0,n.jsx)("div",{className:"border border-strong rounded p-1 flex items-center justify-center transition cursor-pointer bg-selection hover:bg-border-strong",onClick:()=>onSelectExpand(),children:(0,n.jsx)(IconMaximize_IconMaximize,{size:12,strokeWidth:2})})}),(0,n.jsx)(m.h_,{children:(0,n.jsxs)(m.VY,{side:"bottom",children:[(0,n.jsx)(m.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Expand editor"})})]})})]})]})]}),children:(0,n.jsx)("div",{className:"".concat(v&&0==h.trim().length?"sb-grid-fill-container":""," sb-grid-json-editor__trigger"),onClick:()=>y(!g),children:null===v||""===v?(0,n.jsx)(x.q2,{}):h})})},verifyJSON=e=>{try{return JSON.parse(e),!0}catch(e){return!1}};function NumberEditor_autoFocusAndSelect(e){null==e||e.focus(),null==e||e.select()}function NumberEditor(e){let{row:t,column:s,onRowChange:a,onClose:i}=e,r=t[s.key];return(0,n.jsx)("input",{className:"sb-grid-number-editor",ref:NumberEditor_autoFocusAndSelect,value:null!=r?r:"",onChange:function(e){let n=e.target.value;""==n?a({...t,[s.key]:null}):a({...t,[s.key]:n})},onBlur:function(){i(!0)},type:"number"})}function SelectEditor(e){let{row:t,column:s,onRowChange:a,onClose:i,options:l}=e,c=(0,o.Qq)(),d=c.gridColumns.find(e=>e.name==s.key),u=t[s.key];return(0,n.jsxs)(r.ZP,{autoFocus:!0,id:"select-editor",name:"select-editor",size:"small",defaultValue:null!=u?u:"",className:"sb-grid-select-editor !gap-2",style:{width:"".concat((null==d?void 0:d.width)||s.width,"px")},onChange:function(e){e.target.value&&""!=e.target.value?a({...t,[s.key]:e.target.value},!0):a({...t,[s.key]:null},!0)},onBlur:function(){i(!1)},children:[(0,n.jsx)(r.ZP.Option,{value:"",children:"NULL"}),l.map(e=>{let{label:t,_value:s}=e;return(0,n.jsx)(r.ZP.Option,{value:s,selected:s===u,children:t},s)})]})}var v=s(94580);let TextEditor=e=>{let{row:t,column:s,isNullable:i,isEditable:r,onRowChange:l}=e,c=(0,o.Qq)(),[d,u]=(0,a.useState)(!0),m=c.gridColumns.find(e=>e.name==s.key),h=t[s.key],[g,f]=(0,a.useState)(h),y=(0,a.useCallback)(()=>{r&&l(t,!0),u(!1)},[]),j=(0,a.useCallback)(e=>{r&&l({...t,[s.key]:e},!0),u(!1)},[]);return(0,n.jsx)(p.Z,{open:d,side:"bottom",align:"start",sideOffset:-35,className:"rounded-none",overlay:(0,n.jsxs)(x.rc,{value:g,onEscape:y,onEnter:j,children:[(0,n.jsx)(x.rE,{width:"".concat((null==m?void 0:m.width)||s.width,"px"),value:null!=g?g:"",readOnly:!r,onChange:function(e){r&&(e?f(e):f(""))}}),r&&(0,n.jsxs)("div",{className:"flex items-start justify-between p-2 bg-surface-200 space-x-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"px-1.5 py-[2.5px] rounded bg-surface-300 border border-strong flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-[10px]",children:""})}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Save changes"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"px-1 py-[2.5px] rounded bg-surface-300 border border-strong flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-[10px]",children:"Esc"})}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Cancel changes"})]})]}),(0,n.jsx)("div",{className:"space-y-1",children:i&&(0,n.jsx)(v.z,{asChild:!0,htmlType:"button",type:"default",size:"tiny",onClick:()=>j(null),children:(0,n.jsx)("div",{children:"Set to NULL"})})})]})]}),children:(0,n.jsx)("div",{className:"".concat(g&&0==g.trim().length?"sb-grid-fill-container":""," sb-grid-text-editor__trigger"),onClick:()=>u(!d),children:null===g?(0,n.jsx)(x.q2,{}):""===g?(0,n.jsx)(x.OX,{}):g})})};function TimeEditor_autoFocusAndSelect(e){null==e||e.focus(),null==e||e.select()}c().extend(u());let b="HH:mm:ss";function TimeEditor_BaseEditor(e){let{row:t,column:s,format:a,onRowChange:i,onClose:r}=e,o=t[s.key],l=o?c()(o,a).format(b):o;return(0,n.jsx)("input",{className:"sb-grid-time-editor",ref:TimeEditor_autoFocusAndSelect,value:null!=l?l:"",onChange:function(e){let n=e.target.value;if(""==n)i({...t,[s.key]:null});else{let e=c()(n,b).format(a);i({...t,[s.key]:e})}},onBlur:()=>r(!0),type:"time",step:"1"})}function TimeEditor(e){return(0,n.jsx)(TimeEditor_BaseEditor,{...e,format:"HH:mm:ss"})}function TimeWithTimezoneEditor(e){return(0,n.jsx)(TimeEditor_BaseEditor,{...e,format:"HH:mm:ssZZ"})}var w=s(91852),N=s(25076),S=s(28321);let C=9;function getGridColumns(e,t){let s=e.columns.map((e,s)=>{var a;let r=function(e){if((0,i.Pm)(e))return"foreign_key";if((0,i.v3)(e.dataType))return"number";if((0,i.nr)(e.dataType))return"array";if((0,i.om)(e.dataType))return"json";if((0,i.II)(e.dataType))return"text";if((0,i.kO)(e.format))return"citext";if((0,i.VO)(e.format))return"date";else if((0,i.LT)(e.format))return"time";else if((0,i.Kp)(e.format))return"datetime";else if((0,i.nL)(e.dataType))return"boolean";else if((0,i.N8)(e.dataType))return"enum";else return"unknown"}(e),o=getColumnDefaultWidth(e),l=(e.name.length+e.format.length)*C,c=(null==t?void 0:t.defaultWidth)?t.defaultWidth:o<l?l:o,d={key:e.name,name:e.name,idx:s+1,resizable:!0,sortable:!0,width:c,minWidth:N.mr,frozen:e.isPrimaryKey||!1,isLastFrozenColumn:!1,renderHeaderCell:t=>(0,n.jsx)(w.x8,{...t,columnType:r,isPrimaryKey:e.isPrimaryKey,isEncrypted:e.isEncrypted,format:e.format,foreignKey:e.foreignKey}),renderEditCell:t?function(e,t,s,a){if(!s)return["array","json"].includes(t)?e=>(0,n.jsx)(JsonEditor,{...e,isEditable:s,onExpandEditor:a}):["number","boolean"].includes(t)?void 0:e=>(0,n.jsx)(TextEditor,{...e,isEditable:s});if(!e.isPrimaryKey&&e.isUpdatable)switch(t){case"boolean":return t=>(0,n.jsx)(BooleanEditor,{...t,isNullable:e.isNullable});case"date":return DateEditor;case"datetime":return e.format.endsWith("z")?DateTimeWithTimezoneEditor:DateTimeEditor;case"time":return e.format.endsWith("z")?TimeWithTimezoneEditor:TimeEditor;case"enum":{let t=e.enum.map(e=>({label:e,value:e}));return e=>(0,n.jsx)(SelectEditor,{...e,options:t})}case"array":case"json":return e=>(0,n.jsx)(JsonEditor,{...e,onExpandEditor:a});case"number":return NumberEditor;case"citext":case"text":return t=>(0,n.jsx)(TextEditor,{...t,isEditable:s,isNullable:e.isNullable});default:return}}(e,r,null!==(a=null==t?void 0:t.editable)&&void 0!==a&&a,t.onExpandJSONEditor):void 0,renderCell:function(e,t){switch(t){case"boolean":return S.SJ;case"foreign_key":if(e.isPrimaryKey||!e.isUpdatable)return S.k3;return S._O;case"json":return S.$3;default:return S.k3}}(e,r),parent:void 0,level:0,maxWidth:void 0,draggable:!1};return d}),a=[w.F_,...s];return(null==t?void 0:t.onAddColumn)&&a.push(w.Lx),a}function getColumnDefaultWidth(e){return(0,i.v3)(e.dataType)?120:(0,i.Kp)(e.format)||(0,i.VO)(e.format)||(0,i.LT)(e.format)?150:(0,i.nL)(e.dataType)?120:(0,i.N8)(e.dataType)?150:250}},74386:function(e,t,s){function formatClipboardValue(e){return null===e?"":"object"==typeof e||Array.isArray(e)?JSON.stringify(e):e}s.d(t,{Sj:function(){return cloneColumn},vQ:function(){return copyToClipboard},Lw:function(){return formatClipboardValue},iu:function(){return getInitialGridColumns},v3:function(){return a.v3}});let copyToClipboard=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=window.document.hasFocus();if(s){var n,a;null===(a=window.navigator)||void 0===a||null===(n=a.clipboard)||void 0===n||n.writeText(e).then(t)}else console.warn("Unable to copy to clipboard")};var n=s(25076);function cloneColumn(e){let t=function(e){try{return JSON.parse(JSON.stringify(e))}catch(e){throw e}}(e);return t.renderEditCell=e.renderEditCell,t.renderHeaderCell=e.renderHeaderCell,t.renderCell=e.renderCell,t.renderGroupCell=e.renderGroupCell,t}function getInitialGridColumns(e,t){let s=e;if(null==t?void 0:t.gridColumns){s=[];let a=t.gridColumns.filter(e=>(null==e?void 0:e.name)!=="");for(let t=0;t<a.length;t++){let n=a[t],i=e.find(e=>e.key===n.key);i&&s.push({...i,width:n.width,frozen:n.frozen})}let i=e.filter(e=>{let t=a.find(t=>t.key===e.key);return!t&&""!==e.name});s=s.concat(i);let r=e.find(e=>e.key===n.W);r&&(s=[r,...s]);let o=e.find(e=>e.key===n.uZ);o&&s.push(o)}return s}var a=s(37886)},37886:function(e,t,s){s.d(t,{II:function(){return isTextColumn},Kp:function(){return isDateTimeColumn},LT:function(){return isTimeColumn},N8:function(){return isEnumColumn},Pm:function(){return isForeignKeyColumn},VO:function(){return isDateColumn},kO:function(){return isCiTextColumn},nL:function(){return isBoolColumn},nr:function(){return isArrayColumn},om:function(){return isJsonColumn},v3:function(){return isNumericalColumn}});let n=["smallint","integer","bigint","decimal","numeric","real","double precision","serial","bigserial","int2","int4","int8","float4","float8","smallserial","serial2","serial4","serial8"];function isNumericalColumn(e){return n.indexOf(e.toLowerCase())>-1}let a=["json","jsonb","array"];function isJsonColumn(e){return a.indexOf(e.toLowerCase())>-1}let i=["array"];function isArrayColumn(e){return i.indexOf(e.toLowerCase())>-1}let r=["uuid","text","character varying"];function isTextColumn(e){return r.indexOf(e.toLowerCase())>-1}let o=["citext"];function isCiTextColumn(e){return o.indexOf(e.toLowerCase())>-1}let l=["timestamp","timestamptz"];function isDateTimeColumn(e){return l.indexOf(e.toLowerCase())>-1}let c=["date"];function isDateColumn(e){return c.indexOf(e.toLowerCase())>-1}let d=["time","timetz"];function isTimeColumn(e){return d.indexOf(e.toLowerCase())>-1}let u=["boolean","bool"];function isBoolColumn(e){return u.indexOf(e.toLowerCase())>-1}let m=["user-defined"];function isEnumColumn(e){return m.indexOf(e.toLowerCase())>-1}function isForeignKeyColumn(e){var t;let{targetTableSchema:s,targetTableName:n,targetColumnName:a}=null!==(t=null==e?void 0:e.foreignKey)&&void 0!==t?t:{};return!!s&&!!n&&!!a}},67959:function(e,t,s){s.d(t,{CM:function(){return PolicyEditor_PolicyName},$L:function(){return PolicyEditor_PolicyRoles},ZP:function(){return Policies_PolicyEditor}});var n=s(52322),a=s(1681),i=s(34291),r=s.n(i),o=s(39599),PolicyEditor_PolicyAllowedOperation=e=>{let{operation:t="",onSelectOperation:s=r()}=e;return(0,n.jsxs)("div",{className:"flex justify-between space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"allowed-operation",children:"Allowed operation"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Select an operation for this policy"})]}),(0,n.jsx)("div",{className:"w-2/3",children:(0,n.jsx)("div",{className:"flex items-center space-x-8",children:(0,n.jsx)(o.Z.Group,{type:"small-cards",size:"tiny",id:"allowed-operation",children:["SELECT","INSERT","UPDATE","DELETE","ALL"].map(e=>(0,n.jsx)(o.Z,{name:"allowed-operation",label:e,value:e,checked:t===e,onChange:e=>s(e.target.value)},e))})})})]})},l=s(24990),c=s(2784),d=s(99750),u=s(90411),m=s(89465),PolicyEditor_PolicyDefinition=e=>{let{operation:t="",definition:s="",check:a="",onUpdatePolicyUsing:i=r(),onUpdatePolicyCheck:o=r()}=e,showUsing=e=>["SELECT","UPDATE","DELETE","ALL"].includes(e)||!e,showCheck=e=>["INSERT","UPDATE","ALL"].includes(e),p=(0,m.D9)(t)||"";return(0,c.useEffect)(()=>{showUsing(p)&&!showUsing(t)&&i(void 0),showCheck(p)&&!showCheck(t)&&o(void 0)},[t]),(0,n.jsxs)("div",{className:"space-y-4",children:[showUsing(t)&&(0,n.jsxs)("div",{className:"flex space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"policy-name",children:"USING expression"}),(0,n.jsxs)(l.fC,{delayDuration:0,children:[(0,n.jsx)(l.xz,{children:(0,n.jsx)(d.Z,{className:"text-foreground-light",size:16,strokeWidth:1.5})}),(0,n.jsx)(l.h_,{children:(0,n.jsxs)(l.VY,{side:"bottom",children:[(0,n.jsx)(l.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsxs)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow w-[300px] space-y-2 border border-background",children:[(0,n.jsx)("p",{className:"text-xs text-foreground",children:"This expression will be added to queries that refer to the table if row-level security is enabled."}),(0,n.jsx)("p",{className:"text-xs text-foreground",children:"Rows for which the expression returns true will be visible. Any rows for which the expression returns false or null will not be visible to the user (in a SELECT), and will not be available for modification (in an UPDATE or DELETE)."}),(0,n.jsx)("p",{className:"text-xs text-foreground",children:"Such rows are silently suppressed - no error is reported."})]})]})})]})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,n.jsx)("div",{className:"w-2/3 ".concat(showCheck(t)?"h-32":"h-56"),children:(0,n.jsx)(u.Z,{defaultValue:s,onInputChange:i})})]}),showCheck(t)&&(0,n.jsxs)("div",{className:"flex space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"policy-name",children:"WITH CHECK expression"}),(0,n.jsxs)(l.fC,{delayDuration:0,children:[(0,n.jsx)(l.xz,{children:(0,n.jsx)(d.Z,{className:"text-foreground-light",size:16,strokeWidth:1.5})}),(0,n.jsx)(l.h_,{children:(0,n.jsxs)(l.VY,{side:"bottom",children:[(0,n.jsx)(l.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsxs)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow w-[300px] space-y-2 border border-background",children:[(0,n.jsx)("p",{className:"text-xs text-foreground",children:"This expression will be used in INSERT and UPDATE queries against the table if row-level security is enabled."}),(0,n.jsx)("p",{className:"text-xs text-foreground",children:"Only rows for which the expression evaluates to true will be allowed. An error will be thrown if the expression evaluates to false or null for any of the records inserted or any of the records that result from the update."}),(0,n.jsx)("p",{className:"text-xs text-foreground",children:"Note that this expression is evaluated against the proposed new contents of the row, not the original contents."})]})]})})]})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,n.jsx)("div",{className:"w-2/3 ".concat(showUsing(t)?"h-32":"h-56"),children:(0,n.jsx)(u.Z,{defaultValue:a,onInputChange:o})})]})]})},p=s(94580),h=s(63157),PolicyEditor_PolicyEditorFooter=e=>{let{showTemplates:t,onViewTemplates:s=r(),onReviewPolicy:a=r()}=e;return(0,n.jsxs)("div",{className:"flex justify-between items-center border-t px-6 py-4 border-default",children:[(0,n.jsx)("a",{href:"https://supabase.com/docs/learn/auth-deep-dive/auth-policies",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(p.z,{type:"link",icon:(0,n.jsx)(h.Z,{size:14,strokeWidth:1.5}),children:"Documentation"})}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[t&&(0,n.jsx)(p.z,{type:"default",onClick:s,children:"View templates"}),(0,n.jsx)(p.z,{type:"primary",onClick:a,children:"Review"})]})]})},g=s(31915),PolicyEditor_PolicyName=e=>{let{name:t="",limit:s=100,onUpdatePolicyName:a}=e;return(0,n.jsxs)("div",{className:"flex space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"policy-name",children:"Policy name"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A descriptive name for your policy"})]}),(0,n.jsx)("div",{className:"relative w-2/3",children:(0,n.jsx)(g.Z,{id:"policy-name",value:t,onChange:e=>a(e.target.value),actions:(0,n.jsxs)("span",{className:"mr-3 text-sm text-foreground-lighter",children:[t.length,"/",s]})})})]})},x=s(65770),f=s(2755),y=s(7503),j=s(84204),v=s(20775),b=s(67149),w=s(829),N=s.n(w),PolicyEditor_PolicyRoles=e=>{let{selectedRoles:t,onUpdateSelectedRoles:s}=e,{project:a}=(0,f.d2)(),{data:i,error:r,isLoading:o,isError:l,isSuccess:c}=(0,b.x)({projectRef:null==a?void 0:a.ref,connectionString:null==a?void 0:a.connectionString}),d=N()((null!=i?i:[]).filter(e=>!x.Bv.includes(e.name)),e=>e.name.toLocaleLowerCase()),u=d.map(e=>({id:e.id,name:e.name,value:e.name,disabled:!1}));return(0,n.jsxs)("div",{className:"flex space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsx)("label",{className:"text-foreground-light text-base",htmlFor:"policy-name",children:"Target roles"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-sm",children:"Apply policy to the selected roles"})]}),(0,n.jsxs)("div",{className:"relative w-2/3",children:[o&&(0,n.jsx)(v.Z,{className:"py-4"}),l&&(0,n.jsx)(y.Z,{error:r,subject:"Failed to retrieve database roles"}),c&&(0,n.jsx)(j.Z,{options:u,value:t,placeholder:"Defaults to all (public) roles if none selected",searchPlaceholder:"Search for a role",onChange:s})]})]})},Policies_PolicyEditor=e=>{var t,s,i,r;let{isNewPolicy:o=!0,policyFormFields:l={},onUpdatePolicyFormFields:c=()=>{},onViewTemplates:d=()=>{},onReviewPolicy:u=()=>{}}=e,m=null!==(t=null==l?void 0:l.command)&&void 0!==t?t:"",p=null!==(s=null==l?void 0:l.definition)&&void 0!==s?s:"",h=null!==(i=null==l?void 0:l.check)&&void 0!==i?i:"",g=(null!==(r=null==l?void 0:l.roles)&&void 0!==r?r:[]).filter(e=>"public"!==e);return(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"space-y-8 py-8",children:[(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(PolicyEditor_PolicyName,{name:l.name,limit:63,onUpdatePolicyName:e=>c({name:e})})}),(0,n.jsx)(a.C.Separator,{}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(PolicyEditor_PolicyAllowedOperation,{operation:m,onSelectOperation:e=>c({command:e})})}),(0,n.jsx)(a.C.Separator,{})]}),(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(PolicyEditor_PolicyRoles,{selectedRoles:g,onUpdateSelectedRoles:e=>c({roles:e})})}),(0,n.jsx)(a.C.Separator,{}),(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(PolicyEditor_PolicyDefinition,{operation:m,definition:p,check:h,onUpdatePolicyUsing:e=>c({definition:e}),onUpdatePolicyCheck:e=>c({check:e})})})]}),(0,n.jsx)(PolicyEditor_PolicyEditorFooter,{showTemplates:o,onViewTemplates:d,onReviewPolicy:u})]})}},77262:function(e,t,s){s.d(t,{$A:function(){return P},rE:function(){return S},yV:function(){return Policies_PolicyEditorModal},pT:function(){return Policies_PolicySelection},tV:function(){return Policies_PolicyTableRow},jm:function(){return Policies_PolicyTemplates}});var n=s(52322),a=s(55830),i=s(73872),r=s(89465),o=s(45455),l=s.n(o),c=s(46776),d=s(5632),u=s(2784),m=s(62202),p=s(99750),h=s(55691),g=s(2755),x=s(92042),f=s(82042),y=s(33461),j=s(61356),v=s(94161),b=s(80823),w=s(67673),N=s(33039),S=(0,c.Pi)(e=>{let{tables:t,hasTables:s,isLocked:o,onSelectEditPolicy:c}=e,S=(0,d.useRouter)(),{ref:C}=(0,i.UO)(),{project:k}=(0,g.d2)(),{ui:_,meta:E}=(0,r.oR)(),P=(0,a.NL)(),I=(0,h.bB)(),[L,A]=(0,u.useState)({}),[T,R]=(0,u.useState)({}),[D,z]=(0,u.useState)(!1),[Z,F]=(0,u.useState)({}),[O,U]=(0,u.useState)({}),{mutateAsync:M}=(0,v.f)(),{mutateAsync:B}=(0,w.k)(),{mutate:q}=(0,b.l)({onSuccess:()=>{m.ZP.success("Successfully deleted policy!"),closeConfirmModal()}}),W=(0,u.useCallback)(()=>{F({}),A({}),D&&z(!1)},[D]),closeConfirmModal=()=>{U({}),R({})},onSelectToggleRLS=e=>{R(e)},onSelectCreatePolicy=e=>{A({schema:e.schema,table:e.name})},onSelectEditPolicy=e=>{I?c(e):(F(e),A({schema:e.schema,table:e.table}))},onSelectDeletePolicy=e=>{U(e)},H=(0,u.useCallback)(async()=>{_.setNotification({category:"success",message:"Policy successfully saved!"}),W()},[W]),onToggleRLS=async()=>{let e={id:T.id,rls_enabled:!T.rls_enabled},t=await E.tables.update(e.id,e);if(t.error)return _.setNotification({category:"error",message:"Failed to toggle RLS: ".concat(t.error.message)});await P.invalidateQueries(N.W.list(C,T.schema)),closeConfirmModal()},G=(0,u.useCallback)(async e=>{if(!k)return console.error("Project is required"),!0;try{return await M({projectRef:k.ref,connectionString:k.connectionString,payload:e}),!1}catch(e){return!0}},[k]),onUpdatePolicy=async e=>{if(!k)return console.error("Project is required"),!0;try{return await B({projectRef:k.ref,connectionString:k.connectionString,id:e.id,payload:e}),!1}catch(e){return!0}},onDeletePolicy=async()=>{if(!k)return console.error("Project is required");q({projectRef:k.ref,connectionString:k.connectionString,id:O.id})};return(0,n.jsxs)(n.Fragment,{children:[t.length>0?t.map(e=>(0,n.jsx)("section",{children:(0,n.jsx)(Policies_PolicyTableRow,{table:e,isLocked:o,onSelectToggleRLS:onSelectToggleRLS,onSelectCreatePolicy:onSelectCreatePolicy,onSelectEditPolicy:onSelectEditPolicy,onSelectDeletePolicy:onSelectDeletePolicy})},e.id)):s?(0,n.jsx)(x.Z,{}):(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)(f.Z,{size:"large",title:"Row-Level Security (RLS) Policies",ctaButtonLabel:"Create a table",infoButtonLabel:"What is RLS?",infoButtonUrl:"https://supabase.com/docs/guides/auth/row-level-security",onClickCta:()=>S.push("/project/".concat(C,"/editor")),children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(j.Z,{title:"What are policies?",icon:(0,n.jsx)(p.Z,{strokeWidth:2}),description:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"Policies restrict, on a per-user basis, which rows can be returned by normal queries, or inserted, updated, or deleted by data modification commands."}),(0,n.jsx)("p",{className:"text-sm",children:"This is also known as Row-Level Security (RLS). Each policy is attached to a table, and the policy is executed each time its accessed."})]})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Create a table in this schema first before creating a policy."})]})})}),(0,n.jsx)(Policies_PolicyEditorModal,{visible:!l()(L),schema:L.schema,table:L.table,selectedPolicyToEdit:Z,onSelectCancel:W,onCreatePolicy:G,onUpdatePolicy:onUpdatePolicy,onSaveSuccess:H}),(0,n.jsx)(y.Z,{danger:!0,visible:!l()(O),title:"Confirm to delete policy",description:'This is permanent! Are you sure you want to delete the policy "'.concat(O.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:closeConfirmModal,onSelectConfirm:onDeletePolicy}),(0,n.jsx)(y.Z,{danger:T.rls_enabled,visible:!l()(T),title:"Confirm to ".concat(T.rls_enabled?"disable":"enable"," RLS"),description:"Are you sure you want to ".concat(T.rls_enabled?"disable":"enable",' row level security for the table "').concat(T.name,'"?'),buttonLabel:"Confirm",buttonLoadingLabel:"Saving",onSelectCancel:closeConfirmModal,onSelectConfirm:onToggleRLS})]})}),C=s(34291),k=s.n(C),_=s(1681),E=s(98050);let P={SELECTION:"SELECTION",TEMPLATES:"TEMPLATES",EDITOR:"EDITOR",REVIEW:"REVIEW"};var I=s(93352),L=s.n(I),A=s(18149),T=s.n(A);let createSQLPolicy=(e,t)=>{let{definition:s,check:n}=e,a={...e,definition:s?s.replace(/\s+/g," ").trim():void 0===s?null:s,check:n?n.replace(/\s+/g," ").trim():void 0===n?null:n};if(l()(t))return createSQLStatementForCreatePolicy(a);if(T()(e,t))return{};let i={};return(T()(a.name,t.name)||(i.name=a.name),T()(a.definition,t.definition)||(i.definition=a.definition),T()(a.check,t.check)||(i.check=a.check),T()(a.roles,t.roles)||(i.roles=a.roles),l()(i))?{}:createSQLStatementForUpdatePolicy(a,i)},createSQLStatementForCreatePolicy=e=>{let{name:t,definition:s,check:n,command:a,schema:i,table:r}=e,o=0===e.roles.length?["public"]:e.roles,l="Add policy for the ".concat(a,' operation under the policy "').concat(t,'"'),c=['CREATE POLICY "'.concat(t,'" ON "').concat(i,'"."').concat(r,'"'),"AS PERMISSIVE FOR ".concat(a),"TO ".concat(o.join(", ")),"".concat(s?"USING (".concat(s,")"):""),"".concat(n?"WITH CHECK (".concat(n,")"):"")].join("\n");return{description:l,statement:c}},createSQLStatementForUpdatePolicy=(e,t)=>{var s;let{name:n,schema:a,table:i}=e,r=L()(t,["definition"]),o=L()(t,["check"]),l=L()(t,["name"]),c=L()(t,["roles"]),d=Object.keys(t),u="Update policy's ".concat(1===d.length?d[0]:"".concat(d.slice(0,d.length-1).join(", ")," and ").concat(d[d.length-1])," "),m=0===(null!==(s=null==t?void 0:t.roles)&&void 0!==s?s:[]).length?["public"]:t.roles,p='ALTER POLICY "'.concat(n,'" ON "').concat(a,'"."').concat(i,'"'),h=["BEGIN;",...r?["  ".concat(p," USING (").concat(t.definition,");")]:[],...o?["  ".concat(p," WITH CHECK (").concat(t.check,");")]:[],...c?["  ".concat(p," TO ").concat(m.join(", "),";")]:[],...l?["  ".concat(p,' RENAME TO "').concat(t.name,'";')]:[],"COMMIT;"].join("\n");return{description:u,statement:h}},createPayloadForCreatePolicy=e=>{let{command:t,definition:s,check:n,roles:a}=e;return{...e,action:"PERMISSIVE",command:t||void 0,definition:s||void 0,check:n||void 0,roles:a.length>0?a:void 0}},createPayloadForUpdatePolicy=(e,t)=>{let{definition:s,check:n}=e,a={...e,definition:s?s.replace(/\s+/g," ").trim():s,check:n?n.replace(/\s+/g," ").trim():n},i={id:t.id};return T()(a.name,t.name)||(i.name=a.name),T()(a.definition,t.definition)||(i.definition=a.definition||void 0),T()(a.check,t.check)||(i.check=a.check||void 0),T()(a.roles,t.roles)||(0===a.roles.length?i.roles=["public"]:i.roles=a.roles||void 0),i};var R=s(67959),D=s(90411),z=s(94580),Policies_PolicyReview=e=>{let{policy:t={},onSelectBack:s=k(),onSelectSave:a=k()}=e,[i,r]=(0,u.useState)(!1),o=t.statement||"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-6 py-8",children:[(0,n.jsx)("div",{className:"flex items-center justify-between space-y-8",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This is the SQL statement that will be used to create your policy."})})}),(0,n.jsx)("div",{className:"space-y-4 overflow-y-auto",style:{maxHeight:"25rem"},children:l()(t)?(0,n.jsx)("div",{className:"my-10 flex items-center justify-center space-x-2 opacity-50",children:(0,n.jsx)("p",{className:"text-base text-foreground-light",children:"There are no changes made to this policy"})}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{children:t.description}),(0,n.jsx)("div",{className:"h-40",children:(0,n.jsx)(D.Z,{readOnly:!0,defaultValue:o})})]})})]})}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-2 border-t px-6 py-4 border-default",children:[(0,n.jsx)(z.z,{type:"default",onClick:s,children:"Back to edit"}),(0,n.jsx)(z.z,{type:"primary",disabled:l()(t),onClick:()=>{r(!0),a()},loading:i,children:"Save policy"})]})]})},Z=s(86699),F=s(97265),IconGrid_IconGrid=function(e){return(0,n.jsx)(F.Z,{icon:Z.Z,...e})},O=s(22354),U=s(21209),Policies_PolicySelection=e=>{let{description:t="",onViewTemplates:s=k(),onViewEditor:a=k()}=e;return(0,n.jsx)(_.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-6 py-8",children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:t})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-1",children:[(0,n.jsx)(U.Z,{title:"Get started quickly",description:"Create a policy from a template",icon:(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:" flex h-8 w-8 items-center justify-center rounded bg-foreground text-background   ",children:(0,n.jsx)(IconGrid_IconGrid,{size:14,strokeWidth:2})})}),onClick:s}),(0,n.jsx)(U.Z,{title:"For full customization",description:"Create a policy from scratch",icon:(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:" flex h-8 w-8 items-center justify-center rounded bg-foreground text-background   ",children:(0,n.jsx)(O.Z,{size:14,strokeWidth:2})})}),onClick:a})]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Not sure what policies are? Check out our resources"," ",(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-brand transition-colors hover:text-brand-600",href:"https://supabase.com/docs/guides/auth#policies",children:"here"}),"."]})]})})},PolicyTemplates_TemplatePreview=e=>{let{selectedTemplate:t}=e,{id:s,templateName:a,description:i,statement:r}=t;return(0,n.jsx)("div",{className:"space-y-8",style:{width:"70%"},children:!l()(t)&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,n.jsxs)("div",{className:"my-5 h-full space-y-6 px-6",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("h3",{className:"text-foreground text-base",children:a}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:i})]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-foreground-light text-sm",children:"Policy SQL template:"}),(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(D.Z,{readOnly:!0,queryId:s,defaultValue:r})})]})]})})})},M=s(22754),PolicyTemplates_TemplatesList=e=>{let{templates:t=[],templatesNote:s="",selectedTemplate:a,setSelectedTemplate:i=k()}=e;return(0,n.jsxs)("div",{className:"flex flex-col justify-between border-r border-default",style:{width:"30%"},children:[(0,n.jsx)("div",{className:"hide-scrollbar  divide-border-primary space-y-0 divide-y divide-solid overflow-y-auto",style:{maxHeight:"24rem"},children:(0,n.jsx)(M.ZP,{type:"border",children:t.map((e,t)=>{let s=(null==a?void 0:a.id)===(null==e?void 0:e.id);return(0,n.jsx)("div",{className:"border-b border-overlay hover:bg-surface-200 "+(s?"bg-surface-300":""),children:(0,n.jsx)(M.ZP.Item,{active:s,onClick:()=>i(e),children:(0,n.jsx)("div",{className:"truncate py-2",children:e.templateName})},e.id)},t)})})}),s&&(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:s})})]})},Policies_PolicyTemplates=e=>{let{templates:t=[],templatesNote:s="",onUseTemplate:a=k()}=e,[i,r]=(0,u.useState)(t[0]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between border-t border-default",children:[(0,n.jsx)(PolicyTemplates_TemplatesList,{templatesNote:s,templates:t,selectedTemplate:i,setSelectedTemplate:r}),(0,n.jsx)(PolicyTemplates_TemplatePreview,{selectedTemplate:i})]}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-3 border-t px-6 py-4 border-default",children:[(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:"This will override any existing code you've written"}),(0,n.jsx)(z.z,{type:"primary",disabled:l()(i),onClick:()=>a(i),children:"Use this template"})]})]})};let getGeneralPolicyTemplates=(e,t)=>[{id:"policy-1",templateName:"Enable read access to everyone",description:"This policy gives read access to your table for all users via the SELECT operation.",statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR SELECT USING (\n  true\n);").trim(),name:"Enable read access for all users",definition:"true",check:"",command:"SELECT",roles:[]},{id:"policy-2",templateName:"Enable insert access for authenticated users only",description:"This policy gives insert access to your table for all authenticated users only.",statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR INSERT \nTO authenticated \nWITH CHECK (true);").trim(),name:"Enable insert for authenticated users only",definition:"",check:"true",command:"INSERT",roles:["authenticated"]},{id:"policy-3",templateName:"Enable update access for users based on their email *",description:'This policy assumes that your table has a column "email", and allows users to update rows which the "email" column matches their email.',statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR UPDATE USING (\n  auth.jwt() ->> 'email' = email\n) WITH CHECK (\n  auth.jwt() ->> 'email' = email\n);").trim(),name:"Enable update for users based on email",definition:"auth.jwt() ->> 'email' = email",check:"auth.jwt() ->> 'email' = email",command:"UPDATE",roles:[]},{id:"policy-4",templateName:"Enable delete access for users based on their user ID *",description:'This policy assumes that your table has a column "user_id", and allows users to delete rows which the "user_id" column matches their ID',statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR DELETE USING (\n  auth.uid() = user_id\n);").trim(),name:"Enable delete for users based on user_id",definition:"auth.uid() = user_id",check:"",command:"DELETE",roles:[]},{id:"policy-5",templateName:"Enable insert access for users based on their user ID *",description:'This policy assumes that your table has a column "user_id", and allows users to insert rows which the "user_id" column matches their ID',statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR INSERT USING (\n  auth.uid() = user_id\n)  WITH CHECK (\n  auth.uid() = user_id\n);").trim(),name:"Enable insert for users based on user_id",definition:"auth.uid() = user_id",check:"true",command:"INSERT",roles:[]}];var B=s(6225),PolicyEditorModal_PolicyEditorModalTitle=e=>{let{view:t,schema:s,table:a,isNewPolicy:i,onSelectBackFromTemplates:r=k()}=e;return t===P.TEMPLATES?(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("span",{onClick:r,className:"cursor-pointer text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(B.Z,{strokeWidth:2,size:14})}),(0,n.jsx)("h4",{className:"m-0 text-lg",children:"Select a template to use for your new policy"})]})}):(0,n.jsx)("div",{className:"flex items-center space-x-3",children:(0,n.jsx)("h4",{className:"m-0 truncate text-lg",children:t===P.EDITOR||t===P.SELECTION?"".concat(i?"Adding new policy to":"Editing policy from"," ").concat(s,".").concat(a):t===P.REVIEW?"Reviewing policy to be ".concat(i?"created":"updated"," on ").concat(s,".").concat(a):void 0})})},Policies_PolicyEditorModal=e=>{let{visible:t=!1,schema:s="",table:a="",selectedPolicyToEdit:i={},onSelectCancel:o=k(),onCreatePolicy:c,onUpdatePolicy:d,onSaveSuccess:m=k()}=e,{ui:p}=(0,r.oR)(),h=l()(i),g=h?{schema:s,table:a,name:"",definition:"",check:"",command:null,roles:[]}:i,[x,f]=(0,u.useState)(""),[y,j]=(0,u.useState)(P.EDITOR),[v,b]=(0,u.useState)(g),[w,N]=(0,u.useState)(""),[S,C]=(0,u.useState)(!1),[I,L]=(0,u.useState)(!1);(0,u.useEffect)(()=>{t&&(h?onViewIntro():onViewEditor(),b(g))},[t]);let onViewIntro=()=>j(P.SELECTION),onViewEditor=()=>j(P.EDITOR),onViewTemplates=()=>{f(y),j(P.TEMPLATES)},onReviewPolicy=()=>j(P.REVIEW),onSavePolicy=async e=>{let t=h?await c(e):await d(e);t?onViewEditor():m()};return(0,n.jsx)(_.C,{size:y===P.SELECTION?"medium":"xxlarge",closable:!0,hideFooter:!0,visible:t,contentStyle:{padding:0},header:[(0,n.jsx)(PolicyEditorModal_PolicyEditorModalTitle,{view:y,isNewPolicy:h,schema:s,table:a,onSelectBackFromTemplates:()=>j(x)},"0")],onCancel:()=>{S?L(!0):o()},children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(E.Z,{visible:I,header:"Discard changes",buttonLabel:"Discard",onSelectCancel:()=>L(!1),onSelectConfirm:()=>{o(),L(!1),C(!1)},children:(0,n.jsx)(_.C.Content,{children:(0,n.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"There are unsaved changes. Are you sure you want to close the editor? Your changes will be lost."})})}),y===P.SELECTION?(0,n.jsx)(Policies_PolicySelection,{description:"Write rules with PostgreSQL's policies to fit your unique business needs.",onViewTemplates:onViewTemplates,onViewEditor:onViewEditor}):y===P.EDITOR?(0,n.jsx)(R.ZP,{isNewPolicy:h,policyFormFields:v,onUpdatePolicyFormFields:e=>{C(!0),e.name&&e.name.length>63||b({...v,...e})},onViewTemplates:onViewTemplates,onReviewPolicy:()=>{let{name:e,definition:t,check:s,command:n}=v;if(0===e.length)return p.setNotification({category:"error",message:"Do give your policy a name"});if(!n)return p.setNotification({category:"error",message:"You will need to allow at one operation in your policy",duration:4e3});if(["SELECT","DELETE"].includes(n)&&!t)return p.setNotification({category:"error",message:"Did you forget to provide a USING expression for your policy?",duration:4e3});if("INSERT"===n&&!s)return p.setNotification({category:"error",message:"Did you forget to provide a WITH CHECK expression for your policy?",duration:4e3});if("UPDATE"===n&&!t&&!s)return p.setNotification({category:"error",message:"You will need to provide either a USING, or WITH CHECK expression, or both for your policy",duration:4e3});let a=createSQLPolicy(v,i);N(a),onReviewPolicy()}}):y===P.TEMPLATES?(0,n.jsx)(Policies_PolicyTemplates,{templates:getGeneralPolicyTemplates(s,a),templatesNote:"* References a specific column in the table",onUseTemplate:e=>{b({...v,name:e.name,definition:e.definition,check:e.check,command:e.command,roles:e.roles}),onViewEditor()}}):y===P.REVIEW?(0,n.jsx)(Policies_PolicyReview,{policy:w,onSelectBack:onViewEditor,onSelectSave:()=>{let e=h?createPayloadForCreatePolicy(v):createPayloadForUpdatePolicy(v,i);onSavePolicy(e),C(!1)}}):(0,n.jsx)("div",{})]})})},q=s(73205),W=s(12744),H=s(97632),G=s(24990),V=s(59491),Q=s(97036),K=s(53830),Y=s(5099),PolicyTableRow_PolicyRow=e=>{let{policy:t,onSelectEditPolicy:s=k(),onSelectDeletePolicy:a=k()}=e,i=(0,r.Xo)(V.KA.TENANT_SQL_ADMIN_WRITE,"policies");return(0,n.jsxs)(W.Z.Content,{className:"flex border-overlay w-full space-x-4 border-b py-4 lg:items-center",children:[(0,n.jsxs)("div",{className:"flex grow flex-col space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("p",{className:"font-mono text-xs text-foreground-light",children:t.command}),(0,n.jsx)("p",{className:"text-sm text-foreground",children:t.name})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Applied to:"}),t.roles.slice(0,3).map((e,t)=>(0,n.jsx)("code",{className:"text-foreground-light text-xs",children:e},"policy-".concat(e,"-").concat(t))),(0,n.jsxs)(G.fC,{delayDuration:0,children:[(0,n.jsx)(G.xz,{children:t.roles.length>3&&(0,n.jsxs)("code",{className:"text-foreground-light text-xs",children:["+ ",t.roles.length-3," more roles"]},"policy-etc")}),(0,n.jsx)(G.h_,{children:(0,n.jsxs)(G.VY,{side:"bottom",children:[(0,n.jsx)(G.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background max-w-[220px] text-center",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:t.roles.slice(3).join(", ")})})]})})]})]})]}),(0,n.jsx)("div",{children:i?(0,n.jsxs)(Q.h_,{children:[(0,n.jsx)(Q.$F,{asChild:!0,children:(0,n.jsx)(z.z,{type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,n.jsx)(K.Z,{})})}),(0,n.jsxs)(Q.AW,{side:"bottom",align:"end",className:"w-32",children:[(0,n.jsxs)(Q.Xi,{className:"space-x-2",onClick:()=>s(t),children:[(0,n.jsx)(O.Z,{size:14}),(0,n.jsx)("p",{children:"Edit"})]}),(0,n.jsx)(Q.VD,{}),(0,n.jsxs)(Q.Xi,{className:"space-x-2",onClick:()=>a(t),children:[(0,n.jsx)(Y.Z,{size:14}),(0,n.jsx)("p",{children:"Delete"})]})]})]}):(0,n.jsxs)(G.fC,{delayDuration:0,children:[(0,n.jsx)(G.xz,{asChild:!0,children:(0,n.jsx)(z.z,{disabled:!0,type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,n.jsx)(K.Z,{})})}),!i&&(0,n.jsx)(G.h_,{children:(0,n.jsxs)(G.VY,{side:"left",children:[(0,n.jsx)(G.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to edit RLS policies"})})]})})]})})]})},J=s(39097),X=s.n(J),$=s(84959),ee=s(96143),PolicyTableRow_PolicyTableRowHeader=e=>{let{table:t,isLocked:s,onSelectToggleRLS:a=k(),onSelectCreatePolicy:i=k()}=e,o=(0,d.useRouter)(),{ref:l}=o.query,c=(0,h.bB)(),u=(0,r.Xo)(V.KA.TENANT_SQL_ADMIN_WRITE,"tables"),m=(0,r.Xo)(V.KA.TENANT_SQL_ADMIN_WRITE,"policies");return(0,n.jsxs)("div",{id:t.id.toString(),className:"flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex space-x-4 text-left",children:[(0,n.jsx)(X(),{href:"/project/".concat(l,"/editor/").concat(t.id),children:(0,n.jsx)("h4",{className:"m-0",children:t.name})}),s?(0,n.jsx)($.Z,{color:"scale",children:(0,n.jsxs)("span",{className:"flex gap-2 items-center text-xs uppercase text-foreground-lighter",children:[(0,n.jsx)(ee.Z,{width:12})," Locked"]})}):(0,n.jsx)($.Z,{color:t.rls_enabled?"green":"yellow",children:t.rls_enabled?"RLS enabled":"RLS disabled"})]}),!s&&(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"flex flex-row justify-end gap-x-2",children:[(0,n.jsxs)(G.fC,{delayDuration:0,children:[(0,n.jsx)(G.xz,{asChild:!0,children:(0,n.jsx)(z.z,{type:"default",disabled:!u,onClick:()=>a(t),children:t.rls_enabled?"Disable RLS":"Enable RLS"})}),!u&&(0,n.jsx)(G.h_,{children:(0,n.jsxs)(G.VY,{side:"bottom",children:[(0,n.jsx)(G.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to toggle RLS"})})]})})]}),!c&&(0,n.jsxs)(G.fC,{delayDuration:0,children:[(0,n.jsx)(G.xz,{asChild:!0,children:(0,n.jsx)(z.z,{type:"outline",disabled:!m,onClick:()=>i(t),children:"New Policy"})}),!m&&(0,n.jsx)(G.h_,{children:(0,n.jsxs)(G.VY,{side:"bottom",children:[(0,n.jsx)(G.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create RLS policies"})})]})})]})]})})]})},Policies_PolicyTableRow=e=>{let{table:t,isLocked:s,onSelectToggleRLS:a=k(),onSelectCreatePolicy:i=k(),onSelectEditPolicy:r=k(),onSelectDeletePolicy:o=k()}=e,{project:l}=(0,g.d2)(),{data:c}=(0,H.r)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),d=(null!=c?c:[]).filter(e=>e.schema===t.schema&&e.table===t.name);return(0,n.jsxs)(W.Z,{title:(0,n.jsx)(PolicyTableRow_PolicyTableRowHeader,{table:t,isLocked:s,onSelectToggleRLS:a,onSelectCreatePolicy:i}),children:[0===(null!=d?d:[]).length&&(0,n.jsxs)("div",{className:"p-4 px-6 space-y-1",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"No policies created yet"}),!s&&(t.rls_enabled?(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"RLS is enabled - create a policy to allow access to this table."}):(0,n.jsx)(q.b,{withIcon:!0,variant:"warning",className:"!px-4 !py-3 !mt-3",title:"Warning: RLS is disabled. Your table is publicly readable and writable.",children:"Anyone with the anon. key can modify or delete your data. You should turn on RLS and create access policies to keep your data secure."}))]}),null==d?void 0:d.map(e=>(0,n.jsx)(PolicyTableRow_PolicyRow,{policy:e,onSelectEditPolicy:r,onSelectDeletePolicy:o},e.id))]})}},8957:function(e,t,s){s.d(t,{$:function(){return subscriptionHasHipaaAddon},O:function(){return getAddons}});var n=s(46732);let getAddons=e=>{let t=e.find(e=>"compute_instance"===e.type),s=e.find(e=>"pitr"===e.type),n=e.find(e=>"custom_domain"===e.type);return{computeInstance:t,pitr:s,customDomain:n}},subscriptionHasHipaaAddon=e=>!n.Qy&&void 0!==e&&e.addons.some(e=>"addon_security_hipaa"===e.supabase_prod_id)},56173:function(e,t,s){s.d(t,{b:function(){return ProtectedSchemaModal}});var n=s(52322),a=s(2784),i=s(1681),r=s(94580),o=s(50074),l=s(39195),c=s(99033);let ProtectedSchemaModal=e=>{let{visible:t,onClose:s}=e;return(0,n.jsx)(i.C,{size:"medium",visible:t,header:"Schemas managed by Supabase",customFooter:(0,n.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,n.jsx)(r.z,{type:"default",onClick:()=>s(),children:"Understood"})}),onCancel:()=>s(),children:(0,n.jsxs)(i.C.Content,{className:"py-4 space-y-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:c.F.map(e=>(0,n.jsx)("code",{className:"text-xs",children:e},e))}),(0,n.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,n.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};t.Z=e=>{let{schema:t,entity:s}=e,[i,c]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.bZ,{children:[(0,n.jsx)(l.Z,{strokeWidth:2}),(0,n.jsxs)(o.Cd,{children:["Currently viewing ",s," from a protected schema"]}),(0,n.jsxs)(o.X,{children:[(0,n.jsxs)("p",{className:"mb-2",children:["The ",(0,n.jsx)("code",{className:"text-xs",children:t})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,n.jsx)(r.z,{type:"default",size:"tiny",onClick:()=>c(!0),children:"Learn more"})]})]}),(0,n.jsx)(ProtectedSchemaModal,{visible:i,onClose:()=>c(!1)})]})}},65770:function(e,t,s){s.d(t,{Bv:function(){return a},IC:function(){return i},NM:function(){return n}});let n=["anon","service_role","authenticated","authenticator","dashboard_user","supabase_admin","supabase_auth_admin","supabase_read_only_user","supabase_replication_admin","supabase_storage_admin","supabase_functions_admin","pgbouncer","pgsodium_keyholder","pgsodium_keyiduser","pgsodium_keymaker","pgtle_admin"],a=["postgres","pgbouncer","supabase_admin","supabase_auth_admin","supabase_storage_admin","dashboard_user","authenticator","pg_database_owner","pg_read_all_data","pg_write_all_data"],i={can_login:{disabled:!1,description:"User can login",grant_by_dashboard:!0},can_create_role:{disabled:!1,description:"User can create roles",grant_by_dashboard:!0},can_create_db:{disabled:!1,description:"User can create databases",grant_by_dashboard:!0},can_bypass_rls:{disabled:!0,description:"User bypasses every row level security policy",grant_by_dashboard:!1},is_superuser:{disabled:!0,description:"User is a Superuser",grant_by_dashboard:!1},is_replication_role:{disabled:!0,description:"User can initiate streaming replication and put the system in and out of backup mode",grant_by_dashboard:!1}}},95933:function(e,t,s){var n=s(52322),a=s(84959),i=s(94580),r=s(78796),o=s(46568),l=s(46732);t.Z=e=>{let{language:t,officialSupport:s,docsUrl:c,gitUrl:d,altIconName:u}=e;return(0,n.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,n.jsx)("img",{src:"".concat(l.GW,"/img/libraries/").concat(u?"".concat(u,"-icon.svg"):"".concat(t.toLowerCase(),"-icon.svg")),alt:"".concat(t," logo"),width:"21"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("h5",{className:"flex items-center gap-2 text-base text-foreground",children:[t," ",!s&&(0,n.jsx)(a.Z,{color:"green",children:"Community"})]})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[c&&(0,n.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(i.z,{icon:(0,n.jsx)(r.Z,{}),type:"default",children:"Docs"})}),(0,n.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(i.z,{icon:(0,n.jsx)(o.Z,{}),type:"default",children:"See GitHub"})})]})]})]})}},79944:function(e,t,s){var n=s(52322),a=s(46732),i=s(38617),r=s(39097),o=s.n(r),l=s(79569);t.Z=e=>{let{framework:t,title:s,description:r,url:c}=e,{resolvedTheme:d}=(0,i.F)();return(0,n.jsx)(o(),{href:c,target:"_blank",rel:"noreferrer",children:(0,n.jsxs)("div",{className:"group relative border bg-surface-100 border-overlay flex h-32 flex-row rounded-md p-4 hover:bg-overlay-hover transition duration-150 ease-in-out",children:[(0,n.jsx)("div",{className:"mr-4 flex flex-col",children:(0,n.jsx)("img",{className:"transition-all group-hover:scale-110",src:"".concat(a.GW,"/img/libraries/").concat(t.toLowerCase()).concat(["expo","nextjs"].includes(t.toLowerCase())&&(null==d?void 0:d.includes("dark"))?"-dark":"","-icon.svg"),alt:"".concat(t," logo"),width:26,height:26})}),(0,n.jsxs)("div",{className:"w-4/5 space-y-2",children:[(0,n.jsx)("h5",{className:"text-foreground",children:s}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:r})]}),(0,n.jsx)("div",{className:" absolute right-4 top-3 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:(0,n.jsx)(l.Z,{})})]})})}},13758:function(e,t,s){s.d(t,{B:function(){return a},l:function(){return n}});let n=[{language:"JavaScript",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/installing",gitUrl:"https://github.com/supabase/supabase-js"},{language:"Flutter",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/dart/installing",gitUrl:"https://github.com/supabase/supabase-flutter"},{language:"Python",officialSupport:!1,releaseState:"Alpha",docsUrl:"https://supabase.com/docs/reference/python/initializing",gitUrl:"https://github.com/supabase/supabase-py"},{language:"C#",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/csharp/installing",gitUrl:"https://github.com/supabase-community/supabase-csharp",altIconName:"c-sharp"},{language:"Swift",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/swift/initializing",gitUrl:"https://github.com/supabase-community/supabase-swift"},{language:"Kotlin",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/kotlin/installing",gitUrl:"https://github.com/supabase-community/supabase-kt"}],a=[{framework:"Svelte",title:"Svelte kanban board",description:"A Trello clone using Supabase as the storage system.",url:"https://github.com/joshnuss/supabase-kanban"},{framework:"nextjs",title:"Next.js Realtime chat app",description:"Next.js Slack clone app using Supabase realtime subscriptions",url:"https://github.com/supabase/supabase/tree/master/examples/slack-clone/nextjs-slack-clone"},{framework:"nextjs",title:"Next.js Subscription and Auth",description:"The all-in-one starter kit for high-performance SaaS applications.",url:"https://github.com/vercel/nextjs-subscription-payments"},{framework:"Expo",title:"Expo Starter",description:"Template bottom tabs with auth flow (Typescript)",url:"https://github.com/codingki/react-native-expo-template/tree/master/template-typescript-bottom-tabs-supabase-auth-flow"},{framework:"NestJS",title:"NestJS example",description:"NestJS example using Supabase Auth",url:"https://github.com/hiro1107/nestjs-supabase-auth"},{framework:"React",title:"React realtime chat app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/shwosner/realtime-chat-supabase-react"},{framework:"JavaScript",title:"Vanilla-js Auth app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/auth/javascript-auth"},{framework:"React",title:"React Native todo list app",description:"React Native Todo List example with Expo",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/expo-todo-list"},{framework:"nextjs",title:"Next.js todo list app",description:"Next.js todo list example",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/nextjs-todo-list"},{framework:"React",title:"React todo List app",description:"React todo List example",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/react-todo-list"},{framework:"Svelte",title:"Svelte todo list app",description:"Sveltejs todo with TailwindCSS and Snowpack",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/sveltejs-todo-list"},{framework:"VueJS",title:"Vue.js todo list app",description:"Vue.js todo app using TypeScript",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/vue3-ts-todo-list"}]},15542:function(e,t,s){s.d(t,{FP:function(){return S},ML:function(){return b},WY:function(){return C},jA:function(){return w}});var n=s(52322),a=s(28879),i=s.n(a),r=s(38421),o=s.n(r),l=s(2784),c=s(59323),d=s(29659),u=s(46732),m=s(62711),p=s(39097),h=s.n(p),g=s(46568),x=s(4220),f=s(84959),y=s(94580),j=s(63157),v=s(83150);let HandleIcon=e=>{let{type:t,className:s}=e;switch(t){case"GitHub":return(0,n.jsx)(g.Z,{strokeWidth:2,size:14});case"Vercel":return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 512 512",className:(0,x.cn)("w-3.5",s),children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M256,48,496,464H16Z"})});case"Supabase":return(0,n.jsx)("img",{src:"".concat(u.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-3.5"});default:return(0,n.jsx)(n.Fragment,{})}},Avatar=e=>{let{src:t}=e;return(0,n.jsx)("div",{className:"relative border shadow-lg w-8 h-8 rounded-full overflow-hidden",children:(0,n.jsx)(o(),{src:t||"",width:30,height:30,layout:"fill",alt:"avatar",className:"relative"})})},b=l.forwardRef((e,t)=>{var s,a,r,o,l;let{integration:c,disabled:d,...u}=e;return(0,n.jsxs)("li",{ref:t,className:"bg-surface-100 border shadow-sm flex justify-between items-center px-8 py-4 rounded-lg",...u,children:[(0,n.jsxs)("div",{className:"flex gap-6 items-center",children:[(0,n.jsx)("div",{className:"flex gap-3 items-center",children:(0,n.jsxs)("div",{className:"flex -space-x-1",children:[(0,n.jsx)(()=>(0,n.jsx)("div",{className:"bg-black text-white w-8 h-8 rounded flex items-center justify-center",children:(0,n.jsx)(HandleIcon,{type:c.integration.name})}),{}),(0,n.jsx)(Avatar,{src:null==c?void 0:null===(s=c.metadata)||void 0===s?void 0:s.account.avatar})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-foreground text-sm font-medium",children:(null===(a=c.metadata)||void 0===a?void 0:a.account.name)||void 0!==c.metadata&&"gitHubConnectionOwner"in c.metadata&&(null===(r=c.metadata)||void 0===r?void 0:r.gitHubConnectionOwner)}),(0,n.jsx)(f.Z,{color:"scale",className:"capitalize",children:null===(o=c.metadata)||void 0===o?void 0:o.account.type})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,n.jsxs)("span",{className:"text-foreground-lighter text-xs",children:["Created ",i()(c.inserted_at).fromNow()]}),(0,n.jsxs)("span",{className:"text-foreground-lighter text-xs",children:["Added by ",null==c?void 0:null===(l=c.added_by)||void 0===l?void 0:l.primary_email]})]})]})]}),(0,n.jsx)(y.z,{asChild:!0,disabled:d,type:"default",iconRight:(0,n.jsx)(j.Z,{}),children:d?(0,n.jsx)("p",{children:"Manage"}):(0,n.jsx)(h(),{href:(0,m.H)(c),target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]},c.id)}),w=l.forwardRef((e,t)=>{var s,a,r;let{connection:o,type:l,actions:c,showNode:m=!0,orientation:p="horizontal",className:h,...g}=e,{data:f}=(0,d.Sy)(),y=null==f?void 0:f.find(e=>e.ref===o.supabase_project_ref);return(0,n.jsxs)("li",{ref:t,...g,className:(0,x.cn)(m&&"pl-8 ml-6 border-l border-muted","pb-2","relative"),children:[m&&(0,n.jsx)("div",{className:"absolute w-8 rounded-bl-full border-b border-l border-muted h-10 -left-px"}),(0,n.jsxs)("div",{className:(0,x.cn)("horizontal"===p?"flex items-center justify-between":"flex flex-col gap-3","bg-surface-100 border shadow-sm px-8 py-4 rounded-lg",h),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(HandleIcon,{type:"Supabase"}),(0,n.jsx)("span",{className:"text-sm",children:null==y?void 0:y.name}),(0,n.jsx)(v.Z,{size:14,className:"text-foreground-lighter",strokeWidth:1.5}),(null==o?void 0:null===(s=o.metadata)||void 0===s?void 0:s.framework)?(0,n.jsx)("img",{src:"".concat(u.GW,"/img/icons/frameworks/").concat(o.metadata.framework,".svg"),width:21,height:21,alt:"icon"}):(0,n.jsx)("div",{className:"bg-black text-white w-4 h-4 rounded flex items-center justify-center",children:(0,n.jsx)(HandleIcon,{type:l,className:"!w-2.5"})}),(0,n.jsx)("span",{className:"text-sm truncate",children:null===(a=o.metadata)||void 0===a?void 0:a.name})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,n.jsxs)("span",{className:"text-foreground-lighter text-xs",children:["Connected ",i()(null==o?void 0:o.inserted_at).fromNow()]}),(0,n.jsxs)("span",{className:"text-foreground-lighter text-xs",children:["Added by ",null==o?void 0:null===(r=o.added_by)||void 0===r?void 0:r.primary_email]})]})]}),(0,n.jsx)("div",{children:c})]})]},o.id)}),N=l.forwardRef((e,t)=>{let{connection:s,type:a,...r}=e,{data:o}=(0,d.Sy)(),l=null==o?void 0:o.find(e=>e.ref===s.supabase_project_ref);return(0,n.jsxs)("li",{ref:t,...r,className:(0,x.cn)("bg-surface-100 border shadow-sm flex justify-between items-center px-8 py-4 rounded-lg"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(HandleIcon,{type:"Supabase"}),(0,n.jsx)("span",{className:"text-sm",children:null==l?void 0:l.name}),(0,n.jsx)(v.Z,{size:14,className:"text-foreground-lighter",strokeWidth:1.5}),(0,n.jsx)(HandleIcon,{type:a}),(0,n.jsx)("span",{className:"text-sm",children:s.metadata.name})]}),(0,n.jsxs)("span",{className:"text-foreground-lighter text-xs",children:["Connected ",i()(s.inserted_at).fromNow()]})]}),(0,n.jsx)(y.z,{type:"default",children:"Connect"})]},s.id)}),S=l.forwardRef((e,t)=>{let{className:s,showNode:a=!0,onClick:i,...r}=e;return(0,n.jsxs)("div",{ref:t,...r,className:(0,x.cn)(a&&"ml-6 pl-8  border-l","pb-2 ","last:border-l-transparent","relative",s),children:[a&&(0,n.jsx)("div",{className:"absolute w-8 rounded-bl-full border-b border-l border-muted h-10 -left-px"}),(0,n.jsx)("div",{className:(0,x.cn)("w-full","border border-dashed bg-surface-100 border-overlay","","flex h-20 px-10 rounded-lg justify-center items-center"),children:(0,n.jsx)(y.z,{type:"default",onClick:()=>i(),children:"Add new project connection"})})]})}),C=l.forwardRef((e,t)=>{let{className:s,markdown:a="",showNode:i=!0,...r}=e;return(0,n.jsxs)("div",{...r,ref:t,className:(0,x.cn)(i&&"border-l border-muted ml-6 pl-8","pt-6 pb-3","prose text-sm",s),children:[r.title&&(0,n.jsx)("h5",{className:"text-foreground",children:r.title}),(0,n.jsx)(c.U,{content:a,className:""})]})});b.displayName="IntegrationInstallation",w.displayName="IntegrationConnection",C.displayName="IntegrationConnectionHeader",S.displayName="EmptyIntegrationConnection",N.displayName="IntegrationConnectionOption"},37680:function(e,t,s){var n=s(52322),a=s(2784),i=s(83094),r=s(59323),o=s(6056),l=s(68082),c=s(138),d=s(29659),u=s(89465),m=s(47095),p=s(66768),h=s(35944),g=s(94235);let x=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 98 96",className:"w-6",children:(0,n.jsx)("path",{fill:"#ffffff",fillRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",clipRule:"evenodd"})});t.Z=e=>{var t;let{projectRef:s}=e,f=(0,u.lL)(),y=(0,g.x5)(),j=y.githubConnectionsIntegrationId,{data:v}=(0,c.T)({orgSlug:null==f?void 0:f.slug}),b=null==v?void 0:v.filter(e=>"GitHub"===e.integration.name),w=null==b?void 0:null===(t=b[0])||void 0===t?void 0:t.connections.find(e=>e.supabase_project_ref===s),N=null==b?void 0:b.find(e=>e.id===j),{data:S,isLoading:C}=(0,d.Sy)({enabled:void 0!==j}),k=(0,a.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.filter(e=>e.organization_id===(null==f?void 0:f.id)).map(e=>({id:e.id.toString(),name:e.name,ref:e.ref})))&&void 0!==e?e:m.Z6},[null==f?void 0:f.id,S]),{data:_,isLoading:E}=(0,l.q)({integrationId:j},{enabled:void 0!==j}),P=(0,a.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.map(e=>({id:e.id.toString(),name:e.full_name})))&&void 0!==e?e:m.Z6},[_]),{mutate:I,isLoading:L}=(0,o.s)({onSuccess(){y.setGithubConnectionsOpen(!1)}}),{mutate:A}=(0,h.A)();return(0,n.jsx)(p.ZP,{header:"Add GitHub repository",size:"large",visible:y.githubConnectionsOpen,hideFooter:!0,onCancel:()=>y.setGithubConnectionsOpen(!1),children:(0,n.jsxs)("div",{className:"py-10 flex flex-col gap-6 bg-background h-full",children:[(0,n.jsx)(p.ZP.Content,{children:(0,n.jsx)(r.U,{content:"\n### Choose repository to connect to\n\nCheck the details below before proceeding\n          "})}),(0,n.jsx)(p.ZP.Content,{className:"flex flex-col gap-2",children:(0,n.jsx)(i.Z,{defaultSupabaseProjectRef:s,defaultForeignProjectId:null==w?void 0:w.foreign_project_id,organizationIntegrationId:null==N?void 0:N.id,foreignProjects:P,supabaseProjects:k,onCreateConnections:e=>{let t=null==b?void 0:b[0].connections.find(t=>t.supabase_project_ref===e.connection.supabase_project_ref);void 0!==t&&void 0!==f&&A({connectionId:t.id,integrationId:t.organization_integration_id,orgSlug:f.slug}),I(e)},installedConnections:null==N?void 0:N.connections,isLoading:L,loadingForeignProjects:E,loadingSupabaseProjects:C,integrationIcon:x,choosePrompt:"Choose GitHub Repo"})})]})})}},10024:function(e,t,s){s.d(t,{Z:function(){return RLSDisableModalContent}});var n=s(52322),a=s(39097),i=s.n(a),r=s(73205),o=s(65093),l=s(37431),c=s(96143),d=s(94580),u=s(78796);function RLSDisableModalContent(){return(0,n.jsx)("div",{className:"my-6",children:(0,n.jsxs)("div",{className:"text-sm text-foreground-light grid gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[(0,n.jsx)(r.b,{variant:"warning",className:"!px-4 !py-3",title:"This table will be publicly readable and writable",withIcon:!0,children:(0,n.jsx)("p",{children:"Anyone can edit or delete data in this table."})}),(0,n.jsxs)("ul",{className:"mt-4 space-y-5",children:[(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(o.Z,{}),(0,n.jsx)("span",{children:"All requests to this table will be accepted."})]}),(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(l.Z,{}),(0,n.jsx)("span",{children:"Auth policies will not be enforced."})]}),(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(c.Z,{w:14,className:"flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Before you turn off Row Level Security, consider:"}),(0,n.jsxs)("ul",{className:"space-y-2 mt-2",children:[(0,n.jsx)("li",{className:"list-disc ml-4",children:"Any personal information in this table will be publicly accessible."}),(0,n.jsx)("li",{className:"list-disc ml-4",children:"Anyone will be able to modify, add or delete any row in this table."})]})]})]})]})]}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)("p",{className:"mt-2",children:(0,n.jsx)(d.z,{asChild:!0,type:"default",icon:(0,n.jsx)(u.Z,{strokeWidth:1.5}),children:(0,n.jsx)(i(),{href:"https://supabase.com/docs/guides/auth/row-level-security",target:"_blank",rel:"noreferrer",children:"RLS Documentation"})})})})]})})}},79241:function(e,t,s){s.d(t,{Z:function(){return u}});var n=s(52322),a=s(59491),i=s(5632),r=s(97131),o=s(79552),l=s(89465),c=s(51373),d=s(46732);let generateLogsMenu=(e,t)=>{var s,n,a,i;let r=null!==(s=null==e?void 0:e.ref)&&void 0!==s?s:"default",o=null===(n=null==t?void 0:t.auth)||void 0===n||n,l=null===(a=null==t?void 0:t.storage)||void 0===a||a,c=null===(i=null==t?void 0:t.realtime)||void 0===i||i;return[{title:"Logs Explorer",items:[{key:"explorer",name:"Query",root:!0},d.Qy?{key:"saved",name:"Saved Queries"}:null,{key:"recent",name:"Recent Queries"},{key:"templates",name:"Templates"}].filter(e=>e).map(e=>{let{key:t,name:s,root:n}=e;return{name:s,key:t,url:"/project/".concat(r,"/logs/explorer").concat(n?"":"/"+t),items:[]}})},{items:[{name:d.Qy?"API Edge Network":"Kong API",key:"edge-logs",url:"/project/".concat(r,"/logs/edge-logs"),items:[]},{name:"Postgres",key:"postgres-logs",url:"/project/".concat(r,"/logs/postgres-logs"),items:[]},{name:"PostgREST",key:"postgrest-logs",url:"/project/".concat(r,"/logs/postgrest-logs"),items:[]},d.Qy?{name:"Pooler",key:"pooler-logs",url:"/project/".concat(r,"/logs/pooler-logs"),items:[]}:null,,o?{name:"Auth",key:"auth-logs",url:"/project/".concat(r,"/logs/auth-logs"),items:[]}:null,l?{name:"Storage",key:"storage-logs",url:"/project/".concat(r,"/logs/storage-logs"),items:[]}:null,c?{name:"Realtime",key:"realtime-logs",url:"/project/".concat(r,"/logs/realtime-logs"),items:[]}:null].filter(e=>e)}]};var u=(0,l.QO)(e=>{let{title:t,children:s}=e,d=(0,i.useRouter)(),u=d.pathname.split("/"),m=u[u.length-1],{projectAuthAll:p,projectStorageAll:h,realtimeAll:g}=(0,l.N3)(["project_storage:all","project_auth:all","realtime:all"]),x=(0,l.Vm)(),f=(0,l.Xo)(a.KA.ANALYTICS_READ,"logflare");return f?(0,n.jsx)(c.ZP,{title:t,product:"Logs",productMenu:(0,n.jsx)(o.Z,{page:m,menu:generateLogsMenu(x,{auth:p,storage:h,realtime:g})}),children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})}):(0,n.jsx)(c.ZP,{children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,n.jsx)(r.Z,{isFullPage:!0,resourceText:"access your project's logs explorer"})})})})},69568:function(e,t,s){s.d(t,{Z:function(){return ProjectUsageLoadingState}});var n=s(52322),a=s(60674),i=s(20775),r=s(29659);t.C=()=>{var e;let{ref:t}=(0,a.UO)(),{data:s,isLoading:o}=(0,r.Sy)(),l="default"!==t?null==s?void 0:null===(e=s.find(e=>e.ref===t))||void 0===e?void 0:e.name:"Welcome to your project";return(0,n.jsxs)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:[(0,n.jsx)("div",{className:"flex items-center mx-6 space-x-6",children:o?(0,n.jsx)(i.Z,{className:"h-9 w-40"}):(0,n.jsx)("h1",{className:"text-3xl",children:l})}),(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)(ProjectUsageLoadingState,{})}),(0,n.jsxs)("div",{className:"mx-6 space-y-4",children:[(0,n.jsx)(i.Z,{className:"w-40 h-7"}),(0,n.jsx)(i.Z,{className:"w-full h-32"})]})]})};let ProjectUsageLoadingState=()=>(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(i.Z,{className:"w-40 h-7"}),(0,n.jsxs)("div",{className:"flex md:gap-4 lg:gap-8",children:[(0,n.jsx)(i.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(i.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(i.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(i.Z,{className:"w-full h-[304px]"})]})]})},82202:function(e,t,s){s.d(t,{Z:function(){return ProjectLayout_ProjectPausedState}});var n=s(52322),a=s(24990),i=s(59491),r=s(55830),o=s(60674),l=s(39097),c=s.n(l),d=s(2784),u=s(20644),m=s(94580),p=s(1681),h=s(33461),g=s(73566),x=s(62350),f=s(62202),y=s(9402);async function restoreProject(e){let{ref:t}=e,{data:s,error:n}=await (0,y.v_)("/platform/projects/{ref}/restore",{params:{path:{ref:t}},body:{}});if(n)throw n;return s}let useProjectRestoreMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,x.D)(e=>restoreProject(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?f.Am.error("Failed to restore project: ".concat(e.message)):t(e,s,n)},...s})};var j=s(29659),v=s(89465),b=s(46732),w=s(2755),N=s(21511),ProjectLayout_ProjectPausedState=e=>{var t,s;let{product:l}=e,x=(0,r.NL)(),{ui:f}=(0,v.oR)(),{ref:y}=(0,o.UO)(),S=(0,v.lL)(),{project:C}=(0,w.d2)(),k=null==S?void 0:S.slug,{data:_}=(0,N.G)({orgSlug:k}),E=(null==_?void 0:null===(t=_.plan)||void 0===t?void 0:t.id)==="free",{data:P}=(0,g.u)({slug:k},{enabled:E}),I=(P||[]).length>0,[L,A]=(0,d.useState)(!1),[T,R]=(0,d.useState)(!1),{mutate:D}=useProjectRestoreMutation({onSuccess:(e,t)=>{(0,j.k7)(x,t.ref,b.S.RESTORING),f.setNotification({category:"success",message:"Restoring project"})}}),z=(0,v.Xo)(i.KA.INFRA_EXECUTE,"queue_jobs.projects.initialize_or_resume");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{className:"w-full mx-auto mb-16 max-w-7xl",children:(0,n.jsx)("div",{className:"mx-6 flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,n.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,n.jsx)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center space-x-4 lg:space-x-8",children:(0,n.jsx)(u.Z,{className:"text-foreground-light",size:50,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("p",{className:"text-center",children:['The project "',null!==(s=null==C?void 0:C.name)&&void 0!==s?s:"",'" is currently paused.']}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light text-center",children:["All of your project's data is still intact, but your project is inaccessible while paused."," ",void 0!==l?(0,n.jsxs)(n.Fragment,{children:["Restore this project to access the"," ",(0,n.jsx)("span",{className:"text-brand",children:l})," page"]}):"Restore this project and get back to building the next big thing!"]}),E&&(0,n.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"You can also prevent project pausing in the future by upgrading to Pro."}),!E&&(0,n.jsxs)("p",{className:"text-sm text-foreground-light text-center",children:["Unpaused projects count towards compute usage. For every hour your instance is active, we'll bill you based on the instance size of your project. See"," ",(0,n.jsx)(c(),{href:"https://supabase.com/docs/guides/platform/org-based-billing#usage-based-billing-for-compute",target:"_blank",rel:"noreferrer",className:"underline",children:"Compute Instance Usage Billing"})," ","for more details."]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{asChild:!0,children:(0,n.jsx)(m.z,{size:"tiny",type:"primary",disabled:!z,onClick:()=>{z?I?R(!0):A(!0):f.setNotification({category:"error",message:"You do not have the required permissions to restore this project"})},children:"Restore project"})}),!z&&(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to resume this project"})})]})})]}),E?(0,n.jsx)(m.z,{asChild:!0,type:"default",children:(0,n.jsx)(c(),{href:"/org/".concat(k,"/billing?panel=subscriptionPlan"),children:"Upgrade to Pro"})}):(0,n.jsx)(m.z,{asChild:!0,type:"default",children:(0,n.jsx)(c(),{href:"/project/".concat(y,"/settings/general"),children:"View project settings"})})]})]})})})}),(0,n.jsx)(h.Z,{visible:L,title:"Restore this project",description:"Confirm to restore this project? Your project's data will be restored to when it was initially paused.",buttonLabel:"Restore project",buttonLoadingLabel:"Restoring project",onSelectCancel:()=>A(!1),onSelectConfirm:()=>{if(!C)return f.setNotification({error:"Project is required",category:"error",message:"Unable to restore: project is required"});D({ref:C.ref})}}),(0,n.jsx)(p.C,{hideFooter:!0,visible:T,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:()=>R(!1),children:(0,n.jsxs)("div",{className:"py-4 space-y-4",children:[(0,n.jsx)(p.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,n.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(P||[]).map((e,t)=>(0,n.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," ","free projects)"]},"member-".concat(t)))}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to unpause this project."})]})}),(0,n.jsx)(p.C.Separator,{}),(0,n.jsx)(p.C.Content,{children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(m.z,{htmlType:"button",type:"default",onClick:()=>R(!1),block:!0,children:"Understood"})})})]})})]})}},63285:function(e,t,s){var n=s(52322),a=s(97729),i=s.n(a),r=s(80035),o=s(46732);t.Z=e=>{let{children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Supabase + Vercel"})}),(0,n.jsxs)("main",{className:"flex flex-col w-full h-full",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"mx-auto px-4 sm:px-6",children:(0,n.jsx)("div",{className:"max-w-xl flex justify-between items-center mx-auto py-4",children:(0,n.jsx)("div",{className:"flex justify-start lg:w-0 lg:flex-1",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"sr-only",children:"Supabase"}),(0,n.jsx)("img",{className:"h-6 w-auto sm:h-6",src:"".concat(o.GW,"/img/supabase-logo.svg"),alt:""})]})})})})}),(0,n.jsx)(r.Z,{light:!0}),(0,n.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,n.jsx)("div",{className:"max-w-7xl h-full mx-auto px-4 sm:px-6",children:(0,n.jsx)("div",{className:"max-w-xl h-full mx-auto py-10",children:t})})})]})]})}},51373:function(e,t,s){s.d(t,{p0:function(){return Z},g1:function(){return U},_h:function(){return W},zt:function(){return X},gm:function(){return sp},Uj:function(){return $.Z},Ix:function(){return layouts_OrganizationLayout},$E:function(){return tM},li:function(){return tq},Vk:function(){return sd},dU:function(){return tB},_J:function(){return SignInLayout_SignInLayout},ro:function(){return s_},lz:function(){return sK},Ru:function(){return sJ},pj:function(){return sX},ZP:function(){return s$}});var n=s(52322),a=s(97729),i=s.n(a),r=s(5632),o=s(22634),l=s(89465),c=s(95615),d=s(46732),u=s(24560),m=s(60674),p=s(6277),h=s(39097),g=s.n(h),SettingsLayout_SettingsMenuItem=e=>{let{href:t,label:s,isActive:a}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(g(),{href:t,className:(0,p.default)("text-sm",a?"text-foreground":"text-foreground-light hover:text-foreground transition"),children:s})})},SettingsLayout_OrganizationSettingsMenu=()=>{let e=(0,r.useRouter)(),t=(0,l.lL)();return(0,n.jsx)("div",{className:"space-y-10",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Organization"}),[{label:"General",pathname:"/org/[slug]/general"},{label:"Members",pathname:"/org/[slug]/team"},{label:"Integrations",pathname:"/org/[slug]/integrations"},{label:"Billing",pathname:"/org/[slug]/billing"},{label:"Usage",pathname:"/org/[slug]/usage"},{label:"Invoices",pathname:"/org/[slug]/invoices"},{label:"OAuth Apps",pathname:"/org/[slug]/apps"},{label:"Audit Logs",pathname:"/org/[slug]/audit"},{label:"Legal Documents",pathname:"/org/[slug]/documents"}].map(s=>(0,n.jsx)(SettingsLayout_SettingsMenuItem,{label:s.label,href:void 0!==t?s.pathname.replace("[slug]",t.slug):"/",isActive:s.pathname===e.pathname},s.label))]})})},x=s(60417),f=s.n(x),SettingsLayout_AccountSettingsMenu=()=>{let e=(0,r.useRouter)(),t=f()([{label:"Preferences",pathname:"/account/me"},{label:"Access Tokens",pathname:"/account/tokens"},{label:"Security",pathname:"/account/security"},{label:"Audit logs",pathname:"/account/audit"}]);return(0,n.jsx)("div",{className:"space-y-10",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Account Settings"}),t.map(t=>(0,n.jsx)(SettingsLayout_SettingsMenuItem,{label:t.label,href:t.pathname,isActive:t.pathname===e.pathname},t.label))]})})},SettingsLayout_SettingsLayout=e=>{let{children:t}=e,s=(0,r.useRouter)(),{ref:a,slug:i}=(0,m.UO)();return(0,n.jsx)(u.Z,{children:(0,n.jsxs)("div",{className:"flex h-full",children:["/projects"!==s.pathname&&(0,n.jsx)("div",{className:"h-full overflow-y-auto min-w-[280px] border-r px-8 py-8",children:void 0===i&&void 0===a?(0,n.jsx)(SettingsLayout_AccountSettingsMenu,{}):(0,n.jsx)(SettingsLayout_OrganizationSettingsMenu,{})}),(0,n.jsx)("div",{className:"h-full overflow-y-auto flex-grow",children:t})]})})},y=s(84336),j=s.n(y),v=s(22754),b=s(84959),w=s(2784),N=s(73193),S=s(97265),IconArrowUpRight_IconArrowUpRight=function(e){return(0,n.jsx)(S.Z,{icon:N.Z,...e})},C=s(2760),IconLogOut_IconLogOut=function(e){return(0,n.jsx)(S.Z,{icon:C.Z,...e})},k=s(689),_=s(30254),E=s(83418),P=s(72137);let getResourcesExceededLimitsOrg=e=>e.length?e.filter(e=>{if(!e.capped||!e.available_in_plan||e.unlimited)return!1;let t=e.pricing_free_units||0;return e.usage>t}).map(e=>e.metric):[];var I=s(21511),L=s(17653),A=s(46776),T=(0,A.Pi)(e=>{let{defaultValue:t}=e;return(0,n.jsx)(n.Fragment,{children:(null==t?void 0:t.length)?t.map((e,s)=>(0,n.jsxs)(w.Fragment,{children:[(0,n.jsx)("a",{onClick:e.onClick||(()=>{}),className:"text-gray-1100 block px-2 py-1 text-xs leading-5 focus:bg-gray-100 focus:text-gray-900 focus:outline-none ".concat(e.onClick?"cursor-pointer hover:text-white":""),children:e.label}),s!==t.length-1&&(0,n.jsx)("span",{className:"text-border-stronger",children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,n.jsx)("path",{d:"M16 3.549L7.12 20.600"})})})]},e.key)):null})}),R=s(81859),D=s(4539),z=s(35745),ProjectLayout_LayoutHeader=e=>{let{customHeaderComponents:t,breadcrumbs:s=[],headerBorder:a=!0}=e,{ref:i}=(0,m.UO)(),r=(0,l.Vm)(),o=(0,l.lL)(),c=(0,l.P5)("branchManagement"),u=(null==r?void 0:r.is_branch_enabled)===!0||(null==r?void 0:r.parent_project_ref)!==void 0,{data:p}=(0,L.v)({orgSlug:null==o?void 0:o.slug}),h=(0,w.useMemo)(()=>!!p&&getResourcesExceededLimitsOrg((null==p?void 0:p.usages)||[]).length>0,[p]),{data:x}=(0,I.G)({orgSlug:null==o?void 0:o.slug}),f=(null==x?void 0:x.usage_billing_enabled)===!0,y=(0,l.P5)("overusageBadge")&&void 0!==x&&("free"===x.plan.id||"pro"===x.plan.id)&&!f&&h;return(0,n.jsxs)("div",{className:"flex h-12 max-h-12 items-center justify-between py-2 px-5 ".concat(a?"border-b border-default":""),children:[(0,n.jsxs)("div",{className:"-ml-2 flex items-center text-sm",children:[i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-border-stronger",children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,n.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,n.jsx)(P.Z,{}),y&&(0,n.jsx)("div",{className:"ml-2",children:(0,n.jsx)(g(),{href:"/org/".concat(null==o?void 0:o.slug,"/usage"),children:(0,n.jsx)(b.Z,{color:"red",children:"Exceeding usage limits"})})})]}),r&&c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-border-stronger",children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,n.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),u?(0,n.jsx)(k.Z,{}):(0,n.jsx)(_.Z,{})]})]}),(0,n.jsx)(T,{defaultValue:s})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&t,d.Qy&&(0,n.jsx)(D.Z,{}),d.Qy&&(0,n.jsx)(R.Z,{}),d.Qy&&(0,n.jsx)(z.Z,{})]})]})},AccountLayout_WithSidebar=e=>{let{title:t,header:s,breadcrumbs:a=[],children:i,sections:r,subitems:o,subitemsParentKey:c,hideSidebar:d=!1,customSidebarContent:u}=e,m=(0,l.P5)("ongoingIncident"),p=(0,l.P5)("navigationLayoutV2"),h=m?"calc(100vh - 44px)":"100vh";return(0,n.jsxs)("div",{className:"flex max-h-full",children:[!d&&!(!r&&!u)&&(0,n.jsxs)("div",{id:"with-sidebar",style:{height:h,maxHeight:h},className:"h-full bg-background hide-scrollbar w-64 overflow-auto border-r border-default",children:[t&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("div",{className:"flex h-12 max-h-12 items-center border-b px-6 border-default",children:(0,n.jsx)("h4",{className:"mb-0 text-lg truncate",title:t,children:t})})}),s&&s,(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsxs)(v.ZP,{children:[u,r.map(e=>e.heading?(0,n.jsx)(SectionWithHeaders,{section:e,subitems:o,subitemsParentKey:c},e.key):(0,n.jsx)("div",{className:"border-b py-5 px-6 border-default",children:(0,n.jsx)(SidebarItem,{links:e.links,subitems:o,subitemsParentKey:c})},e.key))]})})]}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[!p&&(0,n.jsx)(ProjectLayout_LayoutHeader,{breadcrumbs:a}),(0,n.jsx)("div",{className:"flex-1 flex-grow overflow-auto",children:i})]})]})};let SectionWithHeaders=e=>{let{section:t,subitems:s,subitemsParentKey:a}=e;return(0,n.jsxs)("div",{className:"border-b py-5 px-6 border-default",children:[t.heading&&(0,n.jsx)(v.ZP.Group,{title:t.heading}),t.versionLabel&&(0,n.jsx)("div",{className:"mb-1 px-3",children:(0,n.jsx)(b.Z,{color:"yellow",children:t.versionLabel})}),(0,n.jsx)(SidebarItem,{links:t.links,subitems:s,subitemsParentKey:a})]},t.heading)},SidebarItem=e=>{let{links:t,subitems:s,subitemsParentKey:a}=e;return(0,n.jsx)("ul",{className:"space-y-1",children:t.map((e,t)=>{let i=e.isActive&&!s,r=(0,n.jsx)(SidebarLinkItem,{id:"".concat(e.key,"-").concat(t),isActive:i,label:e.label,href:e.href,onClick:e.onClick,isExternal:e.isExternal||!1},"".concat(e.key,"-").concat(t,"-sidebarItem"));if(s&&e.subitemsKey===a){let t=s.map((t,s)=>(0,n.jsx)(SidebarLinkItem,{id:"".concat(t.key||t.as,"-").concat(s),isSubitem:!0,label:t.label,onClick:t.onClick,isExternal:e.isExternal||!1},"".concat(t.key||t.as,"-").concat(s,"-sidebarItem")));r=[r,...t]}return r})})},SidebarLinkItem=e=>{let{id:t,label:s,href:a,isActive:i,isSubitem:r,isExternal:o,onClick:l}=e;if(j()(a)){let e;return o&&(e=(0,n.jsx)(IconArrowUpRight_IconArrowUpRight,{size:"tiny"})),"Logout"===s&&(e=(0,n.jsx)(IconLogOut_IconLogOut,{size:"tiny"})),(0,n.jsx)(v.ZP.Item,{rounded:!0,style:{marginLeft:r?".5rem":"0rem"},active:!!i,onClick:l||(()=>{}),icon:e,children:r?(0,n.jsx)("p",{className:"text-sm",children:s}):s},t)}return(0,n.jsx)(g(),{href:a||"",className:"block",target:o?"_blank":"_self",children:(0,n.jsxs)("span",{className:"group flex max-w-full cursor-pointer items-center space-x-2 border-default py-1 font-normal outline-none ring-foreground focus-visible:z-10 focus-visible:ring-1 group-hover:border-foreground-muted",children:[o&&(0,n.jsx)("span",{className:"truncate text-sm text-foreground-lighter transition group-hover:text-foreground-light",children:(0,n.jsx)(IconArrowUpRight_IconArrowUpRight,{size:"tiny"})}),(0,n.jsx)("span",{title:s,className:"w-full truncate text-sm text-foreground-light transition group-hover:text-foreground",children:r?(0,n.jsx)("p",{children:s}):s})]})})};var Z=(0,l.QO)(e=>{let{children:t,title:s,breadcrumbs:a}=e,u=(0,r.useRouter)(),{data:m}=(0,o.tl)(),p=(0,l.lL)(),h=(0,l.P5)("ongoingIncident"),g=(0,l.P5)("navigationLayoutV2"),x=h?"calc(100vh - 44px)":"100vh",f=(0,c.QJ)(),onClickLogout=async()=>{await f(),await u.push("/sign-in")},y=(null!=m?m:[]).map(e=>({isActive:u.pathname.startsWith("/org/")&&(null==p?void 0:p.slug)===e.slug,label:e.name,href:"/org/".concat(e.slug,"/general"),key:e.slug})).sort((e,t)=>e.label.localeCompare(t.label)),j=[{heading:"Projects",key:"projects",links:[{isActive:"/projects"===u.pathname,label:"All projects",href:"/projects",key:"all-projects-item"}]},...d.Qy&&(null==y?void 0:y.length)>0?[{heading:"Organizations",key:"organizations",links:y}]:[],...d.Qy?[{heading:"Account",key:"account",links:[{isActive:"/account/me"===u.pathname,icon:"".concat(u.basePath,"/img/user.svg"),label:"Preferences",href:"/account/me",key:"/account/me"},{isActive:"/account/tokens"===u.pathname,icon:"".concat(u.basePath,"/img/user.svg"),label:"Access Tokens",href:"/account/tokens",key:"/account/tokens"},{isActive:"/account/security"===u.pathname,icon:"".concat(u.basePath,"/img/user.svg"),label:"Security",href:"/account/security",key:"/account/security"},{isActive:"/account/audit"===u.pathname,icon:"".concat(u.basePath,"/img/user.svg"),label:"Audit Logs",href:"/account/audit",key:"/account/audit"}]}]:[],{heading:"Documentation",key:"documentation",links:[{key:"ext-guides",icon:"".concat(u.basePath,"/img/book.svg"),label:"Guides",href:"https://supabase.com/docs",isExternal:!0},{key:"ext-guides",icon:"".concat(u.basePath,"/img/book-open.svg"),label:"API Reference",href:"https://supabase.com/docs/guides/api",isExternal:!0}]},...d.Qy?[{key:"logout-link",links:[{key:"logout",icon:"/icons/feather/power.svg",label:"Logout",href:void 0,onClick:onClickLogout}]}]:[]];return g?(0,n.jsx)(SettingsLayout_SettingsLayout,{children:t}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:s?"".concat(s," | Supabase"):"Supabase"}),(0,n.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,n.jsx)("div",{className:"flex h-full",children:(0,n.jsx)("main",{style:{height:x,maxHeight:x},className:"flex flex-col flex-1 w-full overflow-y-auto",children:(0,n.jsx)(AccountLayout_WithSidebar,{hideSidebar:g,title:s,breadcrumbs:a,sections:j,children:t})})})]})}),F=s(79552),O=s(30206);let generateAuthMenu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(e,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(e,"/auth/policies"),items:[]},...d.Qy?[{name:"Providers",key:"providers",url:"/project/".concat(e,"/auth/providers"),items:[]},{name:"Rate Limits",key:"rate-limits",url:"/project/".concat(e,"/auth/rate-limits"),items:[]},{name:"Email Templates",key:"templates",url:"/project/".concat(e,"/auth/templates"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(e,"/auth/url-configuration"),items:[]},...(null==t?void 0:t.hooksReleased)?[{name:"Hooks",key:"hooks",url:"/project/".concat(e,"/auth/hooks"),items:[],label:"BETA"}]:[]]:[]]}]};var U=(0,l.QO)(e=>{let{title:t,children:s}=e,{ref:a="default"}=(0,m.UO)(),i=(0,l.P5)("authHooksReleased");(0,O.kM)({projectRef:a});let o=(0,r.useRouter)(),c=o.pathname.split("/")[4];return(0,n.jsx)(s$,{title:t||"Authentication",product:"Authentication",productMenu:(0,n.jsx)(F.Z,{page:c,menu:generateAuthMenu(null!=a?a:"default",{hooksReleased:i})}),isBlocking:!1,children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})})}),M=s(88979);(0,l.QO)(e=>{let{children:t}=e,s=(0,l.lL)(),a=(0,l.Vm)();return(0,n.jsx)(s$,{hideHeader:!0,hideIconBar:!0,children:(0,n.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 border-b py-4 px-5 border-default",children:[(0,n.jsx)(g(),{href:"/org/".concat(null==s?void 0:s.slug,"/billing"),className:"text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(M.Z,{size:16,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,n.jsx)("h1",{className:"text-sm text-foreground",children:"Customize your plan"}),(0,n.jsx)("div",{className:"h-6 w-px bg-selection"}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null==s?void 0:s.name}),(0,n.jsx)("span",{className:"text-border-stronger",children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,n.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null==a?void 0:a.name})]})]})]}),(0,n.jsx)("div",{className:"overflow-auto",children:(0,n.jsx)("section",{className:"relative",children:t})})]})})});var B=s(72397),q=s(58010);let generateDatabaseMenu=(e,t)=>{var s;let n=null!==(s=null==e?void 0:e.ref)&&void 0!==s?s:"default",{pgNetExtensionExists:a,pitrEnabled:i}=t||{};return[{title:"Database",items:[{name:"Tables",key:"tables",url:"/project/".concat(n,"/database/tables"),items:[]},{name:"Schema Visualizer",key:"schemas",url:"/project/".concat(n,"/database/schemas"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(n,"/database/triggers"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(n,"/database/functions"),items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(n,"/database/extensions"),items:[]},{name:"Roles",key:"roles",url:"/project/".concat(n,"/database/roles"),items:[]},{name:"Replication",key:"replication",url:"/project/".concat(n,"/database/replication"),items:[]},...a?[{name:"Webhooks",key:"hooks",url:"/project/".concat(n,"/database/hooks"),items:[]}]:[],{name:"Wrappers",key:"wrappers",url:"/project/".concat(n,"/database/wrappers"),items:[]},...d.Qy?[{name:"Backups",key:"backups",url:i?"/project/".concat(n,"/database/backups/pitr"):"/project/".concat(n,"/database/backups/scheduled"),items:[]}]:[],{name:"Migrations",key:"migrations",url:"/project/".concat(n,"/database/migrations"),items:[]},{name:"Indexes",key:"indexes",url:"/project/".concat(n,"/database/indexes"),items:[]},{name:"Enumerated Types",key:"types",url:"/project/".concat(n,"/database/types"),items:[]}]}]};var W=(0,l.QO)((0,A.Pi)(e=>{let{children:t}=e,s=(0,l.Vm)(),a=(0,r.useRouter)(),i=a.pathname.split("/")[4],{data:o}=(0,B.H)({projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString}),{data:c}=(0,q.F)({projectRef:null==s?void 0:s.ref}),d=void 0!==(null!=o?o:[]).find(e=>"pg_net"===e.name),u=(null==c?void 0:c.selected_addons.find(e=>"pitr"===e.type))!==void 0;return(0,n.jsx)(s$,{product:"Database",productMenu:(0,n.jsx)(F.Z,{page:i,menu:generateDatabaseMenu(s,{pgNetExtensionExists:d,pitrEnabled:u})}),isBlocking:!1,children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:t})})})),H=s(55691),G=s(94580);function EmptyPageState(e){let{error:t}=e;return(0,w.useEffect)(()=>{console.error("Error",t)},[]),(0,n.jsxs)("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center space-y-6",children:[(0,n.jsxs)("div",{className:"flex w-[320px] flex-col items-center justify-center space-y-3",children:[(0,n.jsx)("h4",{className:"text-lg",children:"Something went wrong \uD83E\uDD15"}),(0,n.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"Sorry about that, please try again later or feel free to reach out to us if the problem persists."})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(G.z,{asChild:!0,children:(0,n.jsx)(g(),{href:"/projects",children:"Head back"})}),(0,n.jsx)(G.z,{asChild:!0,type:"secondary",children:(0,n.jsx)(g(),{href:"/support/new",children:"Submit a support request"})})]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Error: [",null==t?void 0:t.code,"] ",null==t?void 0:t.message]})]})}var V=s(58943),Q=s(9402);async function getOpenAPISpec(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,Q.U2)("/platform/projects/{ref}/api/rest",{params:{path:{ref:s}},signal:t});if(a)throw a;let i=n.definitions?Object.entries(n.definitions).map(e=>{let[t,s]=e;return{...s,name:t,fields:Object.entries(s.properties||{}).map(e=>{let[t,s]=e;return{...s,name:t}})}}):[],r=n.paths?Object.entries(n.paths).map(e=>{let[t,s]=e;return{...s,path:t,name:t.replace("/rpc/","")}}).filter(e=>e.path.includes("/rpc")).sort((e,t)=>e.name.localeCompare(t.name)):[];return{data:n,tables:i,functions:r}}let useOpenAPISpecQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,V.a)(["projects",t,"open-api-spec"],e=>{let{signal:s}=e;return getOpenAPISpec({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var K=s(38183),Y=s(11980),J=s(78796);let generateDocsMenu=(e,t,s,a)=>[{title:"Getting Started",items:[{name:"Introduction",key:"introduction",url:"/project/".concat(e,"/api"),items:[]},{name:"Authentication",key:"auth",url:"/project/".concat(e,"/api?page=auth"),items:[]},...(null==a?void 0:a.authEnabled)?[{name:"User Management",key:"users",url:"/project/".concat(e,"/api?page=users"),items:[]}]:[]]},{title:"Tables and Views",items:[{name:"Introduction",key:"tables-intro",url:"/project/".concat(e,"/api?page=tables-intro"),items:[]},...t.sort().map(t=>({name:t,key:t,url:"/project/".concat(e,"/api?resource=").concat(t),items:[]}))]},{title:"Stored Procedures",items:[{name:"Introduction",key:"rpc-intro",url:"/project/".concat(e,"/api?page=rpc-intro"),items:[]},...s.map(t=>({name:t,key:t,url:"/project/".concat(e,"/api?rpc=").concat(t),items:[]}))]},{title:"GraphQL",items:[{name:"GraphiQL",key:"graphiql",url:"/project/".concat(e,"/api/graphiql"),icon:(0,n.jsx)(K.Z,{src:"".concat(d.GW,"/img/graphql.svg"),style:{width:"".concat(16,"px"),height:"".concat(16,"px")},className:"text-foreground",preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),items:[]}]},{title:"More Resources",items:[{name:"Guides",key:"guides",url:"https://supabase.com/docs",icon:(0,n.jsx)(Y.Z,{size:14,strokeWidth:2}),items:[],isExternal:!0},{name:"API Reference",key:"api-reference",url:"https://supabase.com/docs/guides/api",icon:(0,n.jsx)(J.Z,{size:14,strokeWidth:2}),items:[],isExternal:!0}]}];var X=(0,l.QO)((0,A.Pi)(function(e){var t,s,a;let{title:i,children:o}=e,c=(0,r.useRouter)(),{ref:u}=(0,m.UO)(),p=(0,l.Vm)(),h=(null==p?void 0:p.status)===d.S.INACTIVE,{data:g,isLoading:x,error:f}=useOpenAPISpecQuery({projectRef:u},{enabled:!h}),y=(0,H.cg)(),j=y&&c.pathname.endsWith("/graphiql"),{projectAuthAll:v}=(0,l.N3)(["project_auth:all"]);if(f)return(0,n.jsx)(s$,{product:"API Docs",children:(0,n.jsx)(EmptyPageState,{error:f})});let b=null!==(t=null==p?void 0:p.ref)&&void 0!==t?t:"default",w=(null!==(s=null==g?void 0:g.tables)&&void 0!==s?s:[]).map(e=>e.name),N=(null!==(a=null==g?void 0:g.functions)&&void 0!==a?a:[]).map(e=>e.name);return(0,n.jsx)(s$,{title:i||"API Docs",isLoading:x,product:"API Docs",productMenu:!j&&(0,n.jsx)(F.Z,{page:(()=>{if(c.pathname.endsWith("graphiql"))return"graphiql";let{page:e,resource:t}=c.query;return e||t?e||t||"":"introduction"})(),menu:generateDocsMenu(b,w,N,{authEnabled:v})}),children:o})})),$=s(79241),ee=s(40599),et=s(34278),layouts_OrganizationLayout=e=>{var t,s,a,i;let{children:o}=e,c=(0,l.lL)(),d=(0,r.useRouter)(),{slug:u}=(0,m.UO)(),p=null===(s=d.asPath.split("/").at(-1))||void 0===s?void 0:null===(t=s.split("?")[0])||void 0===t?void 0:t.split("#")[0],h=(0,l.N3)("billing:invoices"),g=(0,l.P5)("navigationLayoutV2");return g?(0,n.jsx)(SettingsLayout_SettingsLayout,{children:o}):(0,n.jsxs)(Z,{title:null!==(a=null==c?void 0:c.name)&&void 0!==a?a:"Supabase",breadcrumbs:[{key:"org-settings",label:"Settings"}],children:[(0,n.jsxs)(et.tU,{children:[(0,n.jsx)(et._S,{id:"billing-page-top",children:(0,n.jsxs)(et.q7,{children:[null!==(i=null==c?void 0:c.name)&&void 0!==i?i:"Organization"," settings"]})}),(0,n.jsx)(et._S,{children:(0,n.jsx)("nav",{children:(0,n.jsxs)(ee.Z,{listClassNames:"border-none",size:"small",type:"underlined",activeId:p,onChange:e=>{d.push("/org/".concat(u,"/").concat(e))},children:[(0,n.jsx)(ee.Z.Panel,{id:"general",label:"General",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"team",label:"Team",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"integrations",label:"Integrations",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"billing",label:"Billing",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"usage",label:"Usage",className:"!my-0"}),h&&(0,n.jsx)(ee.Z.Panel,{id:"invoices",label:"Invoices",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"apps",label:"OAuth Apps",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"audit",label:"Audit Logs",className:"!my-0"}),(0,n.jsx)(ee.Z.Panel,{id:"documents",label:"Legal Documents",className:"!my-0"})]})})})]}),(0,n.jsx)(et.I7,{}),o]})},es=s(73872),en=s(66768),ea=s(25544),ei=s(13813),er=s(64439),eo=s(33952),el=s(59323),ProjectAPIDocs_ContentSnippet=e=>{var t;let{apikey:s,endpoint:a,selectedLanguage:i,snippet:r,children:o}=e,{ref:l}=(0,m.UO)(),c=null===(t=r[i])||void 0===t?void 0:t.call(r,s,a).replaceAll("[ref]",null!=l?l:"");return(0,n.jsxs)("div",{id:r.key,className:"space-y-4 py-6 pb-2 last:pb-6",children:[(0,n.jsxs)("div",{className:"px-4 space-y-4",children:[(0,n.jsx)("h2",{className:"doc-heading",children:r.title}),void 0!==r.description&&(0,n.jsx)("div",{className:"doc-section",children:(0,n.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,n.jsx)(el.U,{className:"max-w-none",content:r.description.replaceAll("[ref]",null!=l?l:"_")})})})]}),o,void 0!==c&&(0,n.jsx)("div",{className:"px-4 codeblock-container",children:(0,n.jsx)("div",{className:"bg rounded p-2",children:(0,n.jsx)(eo.Z,{className:i,children:c})})})]})};let ec=[{name:"Connect",key:"introduction"},{name:"User Management",key:"user-management"},{name:"Tables & Views",key:"entities"},{name:"Stored Procedures",key:"stored-procedures"},{name:"Storage",key:"storage"},{name:"Edge Functions",key:"edge-functions"},{name:"Realtime",key:"realtime"}],ed={init:{key:"introduction",category:"introduction",title:"Connect to your project",description:"Projects have a RESTful endpoint that you can use with your project's API key to query and manage your database. Put these keys in your .env file.",js:(e,t)=>"\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = '".concat(t,"'\nconst supabaseKey = process.env.SUPABASE_KEY\nconst supabase = createClient(supabaseUrl, supabaseKey)"),bash:()=>"# No client library required for Bash."},clientApiKeys:{key:"client-api-keys",category:"introduction",title:"Client API Keys",description:'Client keys allow "anonymous access" to your database, until the user has logged in. After logging in, the keys will switch to the user\'s own login token.\n\nIn this documentation, we will refer to the key using the name `SUPABASE_KEY`. You can find the `anon` key in the [API settings](/project/[ref]/settings/api) page.',js:(e,t)=>"\nconst SUPABASE_KEY = '".concat(e,"'\nconst SUPABASE_URL = '").concat(t,"'\nconst supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);"),bash:(e,t)=>"".concat(e)},serviceApiKeys:{key:"service-keys",category:"introduction",title:"Service Keys",description:"Service keys have *FULL* access to your data, bypassing any security policies. Be VERY careful where you expose these keys. They should only be used on a server and never on a client or browser.\n\nIn this documentation, we refer to the key using the name `SERVICE_KEY`. You can find the `service_role` key above or in the [API settings](/project/[ref]/settings/api) page.",js:(e,t)=>"\nconst SUPABASE_KEY = '".concat(e,"'\nconst SUPABASE_URL = 'https://").concat(t,"'\nconst supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);"),bash:(e,t)=>"".concat(e)},userManagement:{key:"user-management",category:"user-management",title:"Introduction",description:"Supabase makes it easy to manage your users.\n\n  Supabase assigns each user a unique ID. You can reference this ID anywhere in your database. For example, you might create a `profiles` table references the user using a `user_id` field.\n\n  Supabase already has built in the routes to sign up, login, and log out for managing users in your apps and websites.",js:void 0,bash:void 0},signUp:{key:"sign-up",category:"user-management",title:"Sign up",description:'Allow your users to sign up and create a new account\n\n  After they have signed up, all interactions using the Supabase client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signUp({\n  email: 'someone@email.com',\n  password: 'some-secure-password'\n})",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/signup' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com",\n  "password": "some-secure-password"\n}\'')},emailLogin:{key:"email-login",category:"user-management",title:"Log in with Email/Password",description:'\nIf an account is created, users can login to your app.\n\nAfter they have logged in, all interactions using the Supabase JS client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithPassword({\n  email: 'someone@email.com',\n  password: 'some-secure-password'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/token?grant_type=password' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com",\n  "password": "some-secure-password"\n}\'\n    ')},magicLinkLogin:{key:"magic-link-login",category:"user-management",title:"Log in with Magic Link via Email",description:'\nSend a user a passwordless link which they can use to redeem an access_token.\n\nAfter they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOtp({\n  email: 'someone@email.com'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/magiclink' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com"\n}\'\n    ')},phoneLogin:{key:"phone-log-in",category:"user-management",title:"Sign up with Phone/Password",description:"\nA phone number can be used instead of an email as a primary account confirmation mechanism.\n\nThe user will receive a mobile OTP via sms with which they can verify that they control the phone number.\n\nYou must enter your own twilio credentials on the auth settings page to enable sms confirmations.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.signUp({\n  phone: '+13334445555',\n  password: 'some-password'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/signup' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "phone": "+13334445555",\n  "password": "some-password"\n}\'\n    ')},smsLogin:{key:"sms-otp-log-in",category:"user-management",title:"Login via SMS OTP",description:"\nSMS OTPs work like magic links, except you have to provide an interface for the user to verify the 6 digit number they receive.\n\nYou must enter your own twilio credentials on the auth settings page to enable SMS-based Logins.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOtp({\n  phone: '+13334445555'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/otp' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "phone": "+13334445555"\n}\'\n    ')},smsVerify:{key:"sms-verify",category:"user-management",title:"Verify an SMS OTP",description:"\nOnce the user has received the OTP, have them enter it in a form and send it for verification\n\nYou must enter your own twilio credentials on the auth settings page to enable SMS-based OTP verification.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.verifyOtp({\n  phone: '+13334445555',\n  token: '123456',\n  type: 'sms'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/verify' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "type": "sms",\n  "phone": "+13334445555",\n  "token": "123456"\n}\'\n    ')},oauthLogin:{key:"oauth-login",category:"user-management",title:"Log in with Third Party OAuth",description:'\nUsers can log in with Third Party OAuth like Google, Facebook, GitHub, and more. You must first enable each of these in the Auth Providers settings [here](https://supabase.com).\n\nView all the available [Third Party OAuth providers](https://supabase.com).\n\nAfter they have logged in, all interactions using the Supabase JS client will be performed as "that user".\n\nGenerate your Client ID and secret from: [Google](https://console.developers.google.com/apis/credentials), [Github](https://github.com/settings/applications/new), [Gitlab](https://gitlab.com/oauth/applications), [Facebook](https://developers.facebook.com/apps), and [Bitbucket](https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud).',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOAuth({\n  provider: 'github'\n})\n    ",bash:(e,t)=>"No available command"},user:{key:"get-user",category:"user-management",title:"Get user",description:"Get the JSON object for the logged in user.",js:(e,t)=>"\nconst { data: { user } } = await supabase.auth.getUser()\n    ",bash:(e,t)=>"\ncurl -X GET '".concat(t,"/auth/v1/user' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer USER_TOKEN"\n    ')},forgotPassWordEmail:{key:"forgot-password-email",category:"user-management",title:"Forgot password / email",description:'Sends the user a log in link via email. Once logged in you should direct the user to a new password form. And use "Update User" below to save the new password.',js:(e,t)=>"\nconst { data, error } = await supabase.auth.resetPasswordForEmail(email)\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/recover' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n"email": "someone@email.com"\n}\'\n')},updateUser:{key:"update-user",category:"user-management",title:"Update User",description:"Update the user with a new email or password. Each key (email, password, and data) is optional.",js:(e,t)=>'\nconst { data, error } = await supabase.auth.updateUser({\n  email: "new@email.com",\n  password: "new-password",\n  data: { hello: \'world\' }\n})\n    ',bash:(e,t)=>"\ncurl -X PUT '".concat(t,"/auth/v1/user' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer <USERS-ACCESS-TOKEN>" \\\n-H "Content-Type: application/json" \\\n-d \'{\n"email": "someone@email.com",\n"password": "new-password",\n"data": {\n  "key": "value"\n}\n}\'\n')},logout:{key:"log-out",category:"user-management",title:"Log out",description:'After calling log out, all interactions using the Supabase JS client will be "anonymous".',js:(e,t)=>"\nconst { error } = await supabase.auth.signOut()\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/logout' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer USER_TOKEN"\n    ')},emailInvite:{key:"email-invite",category:"user-management",title:"Invite user over email",description:'\nSend a user a passwordless link which they can use to sign up and log in.\n\nAfter they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".\n\nThis endpoint requires you use the `service_role_key` when initializing the client, and should only be invoked from the server, never from the client.',js:(e,t)=>"\nconst { data, error } = await supabase.auth.api.inviteUserByEmail('someone@email.com')\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/invite' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer ').concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com"\n}\'\n    ')},storage:{key:"storage",category:"storage",title:"Introduction",description:"Supabase Storage makes it simple to upload and serve files of any size, providing a robust framework for file access controls.\n\nYou can use Supabase Storage to store images, videos, documents, and any other file type. Serve your assets with a global CDN to reduce latency from over 285 cities globally. Supabase Storage includes a built-in image optimizer, so you can resize and compress your media files on the fly.",js:void 0,bash:void 0},edgeFunctions:{key:"edge-function",category:"edge-functions",title:"Introduction",description:"\nEdge Functions are server-side TypeScript functions, distributed globally at the edgeclose to your users. They can be used for listening to webhooks or integrating your Supabase project with third-parties like Stripe. Edge Functions are developed using Deno, which offers a few benefits to you as a developer:\n",js:void 0,bash:void 0},edgeFunctionsPreReq:{key:"edge-function-pre-req",category:"edge-functions",title:"Pre-requisites",description:"\nFollow the steps to prepare your Supabase project on your local machine.\n\n- Install the Supabase [CLI](https://supabase.com/docs/guides/cli).\n- [Login to the CLI](https://supabase.com/docs/reference/cli/usage#supabase-login) using the command: `supabase login`..\n- [Initialize Supabase](https://supabase.com/docs/guides/getting-started/local-development#getting-started) inside your project using the command: `supabase init`..\n- [Link to your Remote Project](https://supabase.com/docs/reference/cli/usage#supabase-link) using the command `supabase link --project-ref [ref]`..\n- Setup your environment: Follow the steps [here](https://supabase.com/docs/guides/functions/quickstart#setting-up-your-environment).\n",js:void 0,bash:void 0},createEdgeFunction:{key:"create-edge-function",category:"edge-functions",title:"Create an Edge Function",description:"\nCreate a Supabase Edge Function locally via the Supabase CLI.\n",js:()=>"// Create an edge function via the Supabase CLI",bash:()=>"\nsupabase functions new hello-world\n"},deployEdgeFunction:{key:"deploy-edge-function",category:"edge-functions",title:"Deploy an Edge Function",description:"\nDeploy a Supabase Edge Function to your Supabase project via the Supabase CLI.\n",js:()=>"// Deploy an edge function via the Supabase CLI",bash:()=>"supabase functions deploy hello-world --project-ref [ref]\n"},entitiesIntroduction:{key:"entities-introduction",category:"entities",title:"Introduction",description:"\nAll views and tables in the `public` schema, and those accessible by the active database role for a request are available for querying via the API.\n\nIf you don't want to expose tables in your API, simply add them to a different schema (not the `public` schema).\n",js:void 0,bash:void 0},generatingTypes:{key:"generating-types",category:"entities",title:"Generating Types",description:"\nSupabase APIs are generated from your database, which means that we can use database introspection to generate type-safe API definitions.\n\nYou can generate types from your database either through the [Supabase CLI](https://supabase.com/docs/guides/database/api/generating-types), or by downloading the types file via the button on the right and importing it in your application within `src/index.ts`.\n",js:void 0,bash:void 0},graphql:{key:"graphql",category:"entities",title:"GraphQL vs PostgREST",description:"\nIf you have a GraphQL background, you might be wondering if you can fetch your data in a single round-trip. The answer is yes! The syntax is very similar. This example shows how you might achieve the same thing with Apollo GraphQL and Supabase.\n\nStill want GraphQL?\nIf you still want to use GraphQL, you can. Supabase provides you with a full Postgres database, so as long as your middleware can connect to the database then you can still use the tools you love. You can find the database connection details [in the settings](/project/[ref]/settings/database).\n",js:(e,t)=>"\n// With Apollo GraphQL\nconst { loading, error, data } = useQuery(gql`\n  query GetDogs {\n    dogs {\n      id\n      breed\n      owner {\n        id\n        name\n      }\n    }\n  }\n    `)\n\n// With Supabase\nconst { data, error } = await supabase\n  .from('dogs')\n  .select(`\n      id, breed,\n      owner (id, name)\n  `)\n",bash:(e,t)=>"\n// With Apollo GraphQL\nconst { loading, error, data } = useQuery(gql`\n  query GetDogs {\n    dogs {\n      id\n      breed\n      owner {\n        id\n        name\n      }\n    }\n  }\n    `)\n\n// With Supabase\nconst { data, error } = await supabase\n  .from('dogs')\n  .select(`\n      id, breed,\n      owner (id, name)\n  `)\n    "},storedProceduresIntroduction:{key:"stored-procedures-introduction",category:"stored-procedures",title:"Introduction",description:"\nAll of your database stored procedures are available on your API. This means you can build your logic directly into the database (if you're brave enough)!\n\nThe API endpoint supports POST (and in some cases GET) to execute the function.\n",js:void 0,bash:void 0},realtime:{key:"realtime-introduction",category:"realtime",title:"Introduction",description:"\nSupabase provides a globally distributed cluster of Realtime servers that enable the following functionality:\n\n- [Broadcast](https://supabase.com/docs/guides/realtime/broadcast): Send ephemeral messages from client to clients with low latency.\n- [Presence](https://supabase.com/docs/guides/realtime/presence): Track and synchronize shared state between clients.\n- [Postgres Changes](https://supabase.com/docs/guides/realtime/postgres-changes): Listen to Postgres database changes and send them to authorized clients.\n",js:void 0,bash:void 0},subscribeChannel:{key:"subscribe-to-channel",category:"realtime",title:"Subscribe to channel",description:"\nCreates an event handler that listens to changes.\n\n- By default, Broadcast and Presence are enabled for all projects.\n- By default, listening to database changes is disabled for new projects due to database performance and security concerns. You can turn it on by managing Realtime's [replication](https://supabase.com/docs/guides/api#realtime-api-overview).\n- You can receive the \"previous\" data for updates and deletes by setting the table's `REPLICA IDENTITY` to `FULL` (e.g., `ALTER TABLE your_table REPLICA IDENTITY FULL;`).\n- Row level security is not applied to delete statements. When RLS is enabled and replica identity is set to full, only the primary key is sent to clients.\n",js:()=>"\nsupabase\n  .channel('any')\n  .on('broadcast', { event: 'cursor-pos' }, payload => {\n    console.log('Cursor position received!', payload)\n  })\n  .subscribe((status) => {\n    if (status === 'SUBSCRIBED') {\n      channel.send({\n        type: 'broadcast',\n        event: 'cursor-pos',\n        payload: { x: Math.random(), y: Math.random() },\n      })\n    }\n  })\n    ",bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannel:{key:"unsubscribe-channel",category:"realtime",title:"Unsubscribe from a channel",description:"\nUnsubscribes and removes Realtime channel from Realtime client.\n\nRemoving a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.\n",js:()=>"supabase.removeChannel(myChannel)",bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannels:{key:"unsubscribe-channels",category:"realtime",title:"Unsubscribe from all channels",description:"\nUnsubscribes and removes all Realtime channels from Realtime client.\n\nRemoving a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.\n",js:()=>"supabase.removeChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"},retrieveAllChannels:{key:"unsubscribe-channel",category:"realtime",title:"Unsubscribe from a channel",description:"\nReturns all Realtime channels.\n",js:()=>"const channels = supabase.getChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"}},eu={rpcSingle:{key:"invoke-function",title:"Invoke function",category:"stored-procedures",description:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/rpc",code:e=>{let{rpcName:t,rpcParams:s,endpoint:n,apiKey:a,showBearer:i=!0}=e,r=s.map(e=>'"'.concat(e.name,'": "value"')).join(", "),o=!s.length,l=o?"":"\n-d '{ ".concat(r," }' \\"),c=o?"":", {".concat(s.length?s.map(e=>"\n    ".concat(e.name)).join(", ").concat("\n  "):"","}");return[{key:"rpc-single",title:void 0,bash:"\n  curl -X POST '".concat(n,"/rest/v1/rpc/").concat(t,"' \\").concat(l,'\n  -H "Content-Type: application/json" \\\n  -H "apikey: ').concat(a,'" ').concat(i?'\\\n  -H "Authorization: Bearer '.concat(a,'"'):"","\n        "),js:"\nlet { data, error } = await supabase\n  .rpc('".concat(t,"'").concat(c,")\n\nif (error) console.error(error)\nelse console.log(data)\n        ")}]}},readRows:{key:"read-rows",title:"Read rows",category:"entities",docsUrl:"https://supabase.com/docs/reference/javascript/select",description:"To read rows in this table, use the `select` method.",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"read-all-rows",title:"Read all rows",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=*' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('*')\n          ")},{key:"read-specific-columns",title:"Read specific columns",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=some_column,other_column' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('some_column,other_column')\n  ")},{key:"read-foreign-tables",title:"Read referenced tables",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=some_column,other_table(foreign_key)' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select(`\n    some_column,\n    other_table (\n      foreign_key\n    )\n  `)\n          ")},{key:"with-pagination",title:"With pagination",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=*' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Range: 0-9"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('*')\n  .range(0, 9)\n          ")}]}},filtering:{key:"filter-rows",category:"entities",title:"Filtering",description:"Supabase provides a wide range of filters",docsUrl:"https://supabase.com/docs/reference/javascript/using-filters",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"with-filtering",title:"With filtering",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?id=eq.1&select=*' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Range: 0-9"\n        '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select(\"*\")\n\n  // Filters\n  .eq('column', 'Equal to')\n  .gt('column', 'Greater than')\n  .lt('column', 'Less than')\n  .gte('column', 'Greater than or equal to')\n  .lte('column', 'Less than or equal to')\n  .like('column', '%CaseSensitive%')\n  .ilike('column', '%CaseInsensitive%')\n  .is('column', null)\n  .in('column', ['Array', 'Values'])\n  .neq('column', 'Not equal to')\n\n  // Arrays\n  .cs('array_column', ['array', 'contains'])\n  .cd('array_column', ['contained', 'by'])\n          ")}]}},insertRows:{key:"insert-rows",category:"entities",title:"Insert rows",description:"\n`insert` lets you insert into your tables. You can also insert in bulk and do UPSERT.\n\n`insert` will also return the replaced values for UPSERT.\n",docsUrl:"https://supabase.com/docs/reference/javascript/insert",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"insert-a-row",title:"Insert a row",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: return=minimal" \\\n-d \'{ "some_column": "someValue", "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .insert([\n    { some_column: 'someValue', other_column: 'otherValue' },\n  ])\n  .select()\n          ")},{key:"insert-many-rows",title:"Insert many rows",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-d \'[{ "some_column": "someValue" }, { "other_column": "otherValue" }]\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .insert([\n    { some_column: 'someValue' },\n    { some_column: 'otherValue' },\n  ])\n  .select()\n          ")},{key:"upsert-matching-rows",title:"Upsert matching rows",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: resolution=merge-duplicates" \\\n-d \'{ "some_column": "someValue", "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .upsert({ some_column: 'someValue' })\n  .select()\n          ")}]}},updateRows:{key:"update-rows",category:"entities",title:"Update rows",description:"\n`update` lets you update rows. `update` will match all rows by default. You can update specific rows using horizontal filters, e.g. `eq`, `lt`, and `is`.\n\n`update` will also return the replaced values for UPDATE.\n",docsUrl:"https://supabase.com/docs/reference/javascript/update",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"update-matching-rows",title:"Update matching rows",bash:"\ncurl -X PATCH '".concat(s,"/rest/v1/").concat(t,"?some_column=eq.someValue' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: return=minimal" \\\n-d \'{ "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .update({ other_column: 'otherValue' })\n  .eq('some_column', 'someValue')\n  .select()\n          ")}]}},deleteRows:{key:"delete-rows",category:"entities",title:"Delete rows",description:"\n`delete` lets you delete rows. `delete` will match all rows by default, so remember to specify your filters!\n",docsUrl:"https://supabase.com/docs/reference/javascript/delete",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"delete-matching-rows",title:"Delete matching rows",bash:"\ncurl -X DELETE '".concat(s,"/rest/v1/").concat(t,"?some_column=eq.someValue' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nconst { error } = await supabase\n  .from('".concat(t,"')\n  .delete()\n  .eq('some_column', 'someValue')\n          ")}]}},subscribeChanges:{key:"subscribe-changes",category:"entities",title:"Subscribe to changes",description:"\nSupabase provides realtime functionality and broadcasts database changes to authorized users depending on Row Level Security (RLS) policies.\n",docsUrl:"https://supabase.com/docs/reference/javascript/subscribe",code:e=>{let{resourceId:t}=e;return[{key:"subscribe-all-events",title:"Subscribe to all events",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-all-channel')\n  .on(\n    'postgres_changes',\n    { event: '*', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-inserts",title:"Subscribe to inserts",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-insert-channel')\n  .on(\n    'postgres_changes',\n    { event: 'INSERT', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-updates",title:"Subscribe to updates",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-update-channel')\n  .on(\n    'postgres_changes',\n    { event: 'UPDATE', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-deletes",title:"Subscribe to deletes",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-delete-channel')\n  .on(\n    'postgres_changes',\n    { event: 'DELETE', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-specific-rows",title:"Subscribe to specific rows",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-filter-channel')\n  .on(\n    'postgres_changes',\n    { event: '*', schema: 'public', table: '".concat(t,"', filter: 'some_column=eq.some_value' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")}]}},uploadFile:{key:"upload-file",category:"storage",title:"Upload a file",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-upload",description:"\nUpload a file to an existing bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: only `insert` when you are uploading new files and `select`, `insert`, and `update` when you are upserting files.\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-upload-file",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/").concat(t,"/folder/avatar1.png' \\\n-H 'Content-Type: image/png' \\\n-H \"Authorization: Bearer ").concat(s,"\" \\\n--data-binary @/path/to/your/file'\n-H 'Content-Type: multipart/form-data' \\\n-H \"Authorization: Bearer ").concat(s,"\" \\\n--data-raw $'your_file_data'\n        "),js:"\nconst avatarFile = event.target.files[0]\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .upload('folder/avatar1.png', avatarFile, {\n    cacheControl: '3600',\n    upsert: false\n  })\n")}]}},deleteFiles:{key:"delete-files",category:"storage",title:"Delete files",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-remove",description:"\nDelete files within the bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `delete` and `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-delete-files",title:void 0,bash:"\ncurl -X DELETE '".concat(n,"/storage/v1/object/").concat(t,'\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "prefixes": ["file_name", "another_file_name"] }\'\n'),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .remove(['folder/avatar1.png'])\n        ")}]}},listFiles:{key:"list-files",category:"storage",title:"List all files",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-list",description:"\nList all files within the bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-list-files",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/list/").concat(t,'\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "limit": 100, "offset": 0, "prefix": "", "sortBy": { "column": "name", "order": "asc" } }\''),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .list('folder', {\n    limit: 100,\n    offset: 0,\n    sortBy: { column: 'name', order: 'asc' },\n  })\n        ")}]}},downloadFile:{key:"download-file",category:"storage",title:"Download a file",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-download",description:"\nDownloads a file from a private bucket. For public buckets, make a request to the URL returned from getPublicUrl instead. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-download-file",title:void 0,bash:"\ncurl -X GET '".concat(n,"/storage/v1/object/").concat(t,'/folder/avatar1.png\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n--output avatar1.png\n'),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .download('folder/avatar1.png')\n      ")}]}},createSignedURL:{key:"create-signed-url",category:"storage",title:"Create a signed URL",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-createsignedurl",description:"\nCreate a signed URL which can be used to share a file for a fixed amount of time. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-create-signed-url",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/sign/").concat(t,'/folder/avatar1.png\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "expiresIn": 60 }\'\n        '),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .createSignedUrl('folder/avatar1.png', 60)\n        ")}]}},retrievePublicURL:{key:"retrieve-public-url",category:"storage",title:"Retrieve public URL",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-getpublicurl",description:'\nA simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n\nThis function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n\nThe bucket needs to be set to public, either via `updateBucket()` or by going to Storage on supabase.com/dashboard, clicking the overflow menu on a bucket and choosing "Make public"\n\nRLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: none\n',code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-retrieve-public-url",title:void 0,bash:"\n# No bash command available.\n# You can construct the public URL by concatenating the bucket URL with the path to the asset\n# e.g ".concat(n,"/storage/v1/object/public/").concat(t,"/folder/avatar1.png"),js:"\nconst { data } = supabase\n  .storage\n  .from('".concat(t,"')\n  .getPublicUrl('folder/avatar1.png')\n        ")}]}},invokeEdgeFunction:{key:"invoke-edge-function",category:"edge-functions",title:"Invoke an edge function",docsUrl:"https://supabase.com/docs/reference/javascript/functions-invoke",description:"\nInvokes a Supabase Edge Function. Requires an Authorization header, and invoke params generally match the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) spec.\n\nWhen you pass in a body to your function, we automatically attach the `Content-Type` header for `Blob`, `ArrayBuffer`, `File`, `FormData` and `String`. If it doesn't match any of these types we assume the payload is `json`, serialize it and attach the `Content-Type` header as `application/json`. You can override this behavior by passing in a `Content-Type` header of your own.\n\nResponses are automatically parsed as `json`, `blob` and `form-data` depending on the `Content-Type` header sent by your function. Responses are parsed as `text` by default.\n",code:e=>{let{name:t,endpoint:s,apikey:n}=e;return[{key:"invoke-edge-function",title:void 0,bash:"\ncurl --request POST '".concat(s,"/functions/v1/").concat(t,"' \\\n--header 'Authorization: Bearer ").concat(n,"' \\\n--header 'Content-Type: application/json' \\\n--data '{ \"name\": \"Functions\" }'\n        "),js:"\nconst { data, error } = await supabase\n  .functions\n  .invoke('".concat(t,"', {\n    body: { foo: 'bar' }\n  })")}]}}};var Content_EdgeFunctions=e=>{let{language:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.edgeFunctions}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.edgeFunctionsPreReq}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.createEdgeFunction}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.deployEdgeFunction})]})},em=s(63157),ep=s(46469),eh=s(46166),Content_Entities=e=>{let{language:t}=e,{ui:s}=(0,l.oR)(),{ref:a}=(0,m.UO)(),[i,r]=(0,w.useState)(!1),onClickGenerateTypes=async()=>{try{r(!0);let e=await (0,eh.J)({ref:a}),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.types)),t.setAttribute("download","supabase.ts"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),s.setNotification({category:"success",message:"Successfully generated types! File is being downloaded"})}catch(e){s.setNotification({error:e,category:"error",message:"Failed to generate types: ".concat(e.message)})}finally{r(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.entitiesIntroduction}),(0,n.jsxs)("div",{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.generatingTypes}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 px-4 mt-3",children:[(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/database/api/generating-types",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,n.jsx)(G.z,{type:"default",disabled:i,loading:i,icon:(0,n.jsx)(ep.Z,{strokeWidth:1.5}),onClick:onClickGenerateTypes,children:"Generate and download types"})]}),(0,n.jsx)("p",{className:"text-xs text-foreground-light px-4 mt-2",children:"Remember to re-generate and download this file as you make changes to your tables."})]}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.graphql})]})},eg=s(31915),ex=s(38149),ef=s(71813),Content_Introduction=e=>{var t;let{showKeys:s,language:a,apikey:i,endpoint:r}=e,{ref:o}=(0,m.UO)(),{data:l}=(0,ea.q)({projectRef:o}),[c,d]=(0,w.useState)();(0,w.useEffect)(()=>{void 0!==c&&setTimeout(()=>d(void 0),2e3)},[c]);let u=s&&null!==(t=null==l?void 0:l.autoApiService.serviceApiKey)&&void 0!==t?t:"SUPABASE_CLIENT_SERVICE_KEY";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:a,apikey:i,endpoint:r,snippet:ed.init,children:(0,n.jsxs)("div",{className:"px-4 space-y-6",children:[(0,n.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,n.jsx)("p",{className:"text-sm w-40",children:"Project URL"}),(0,n.jsx)(eg.Z,{disabled:!0,readOnly:!0,copy:!0,size:"small",value:r,className:"w-full"})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("p",{className:"text-sm w-40",children:"Client API key"}),(0,n.jsx)(eg.Z,{disabled:!0,readOnly:!0,size:"small",value:s?i:"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:"This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies.",actions:[(0,n.jsx)(G.z,{type:"default",icon:(0,n.jsx)(ex.Z,{}),onClick:()=>{var e;d("anon"),(0,ef.vQ)(null!==(e=null==l?void 0:l.autoApiService.defaultApiKey)&&void 0!==e?e:"SUPABASE_CLIENT_ANON_KEY")},children:"anon"===c?"Copied":"Copy"},"copy")]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("p",{className:"text-sm w-40 mb-16",children:"Service key"}),(0,n.jsx)(eg.Z,{disabled:!0,readOnly:!0,size:"small",value:s?u:"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:(0,n.jsxs)("p",{children:["This key has the ability to bypass Row Level Security."," ",(0,n.jsx)("span",{className:"text-amber-900",children:"Never share it publicly."})]}),actions:[(0,n.jsx)(G.z,{type:"default",icon:(0,n.jsx)(ex.Z,{}),onClick:()=>{var e;d("service"),(0,ef.vQ)(null!==(e=null==l?void 0:l.autoApiService.serviceApiKey)&&void 0!==e?e:"SUPABASE_CLIENT_SERVICE_KEY")},children:"service"===c?"Copied":"Copy"},"copy")]})]})]})}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:a,apikey:i,endpoint:r,snippet:ed.clientApiKeys}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:a,apikey:u,endpoint:r,snippet:ed.serviceApiKeys})]})},Content_Realtime=e=>{let{language:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.realtime}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.subscribeChannel}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.unsubscribeChannel}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.unsubscribeChannels}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.retrieveAllChannels})]})},Content_Storage=e=>{let{language:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.storage})})},Content_StoredProcedures=e=>{let{language:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.storedProceduresIntroduction})})},Content_UserManagement=e=>{let{language:t,apikey:s,endpoint:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,snippet:ed.userManagement}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.signUp}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.emailLogin}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.magicLinkLogin}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.phoneLogin}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.smsLogin}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.smsVerify}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.oauthLogin}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.user}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.forgotPassWordEmail}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.updateUser}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.logout}),(0,n.jsx)(ProjectAPIDocs_ContentSnippet,{selectedLanguage:t,apikey:s,endpoint:a,snippet:ed.emailInvite})]})},ey=s(30984),ProjectAPIDocs_ResourceContent=e=>{let{selectedLanguage:t,snippet:s,codeSnippets:a}=e,{ref:i}=(0,m.UO)();return(0,n.jsxs)("div",{id:s.key,className:"space-y-4 py-6",children:[(0,n.jsxs)("div",{className:"px-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"doc-heading",children:s.title}),void 0!==s.docsUrl&&(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{}),children:(0,n.jsx)(g(),{href:s.docsUrl,target:"_blank",rel:"noreferrer",children:"Documentation"})})]}),void 0!==s.description&&(0,n.jsx)("div",{className:"doc-section",children:(0,n.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,n.jsx)(el.U,{className:"max-w-none",content:s.description.replaceAll("[ref]",null!=i?i:"_")})})})]}),a.map(e=>(0,n.jsxs)("div",{className:"px-4 space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:e.title}),(0,n.jsx)("div",{className:"codeblock-container",children:(0,n.jsx)("div",{className:"bg rounded p-2",children:(0,n.jsx)(eo.Z,{className:t,children:e[t]})})})]},e.key))]})},Content_Bucket=e=>{let{language:t,apikey:s,endpoint:a}=e,{ref:i}=(0,m.UO)(),r=(0,er.WZ)(),{data:o}=(0,ey.K)({projectRef:i}),l=r.activeDocsSection[1],c=(null!=o?o:[]).find(e=>e.name===l),d=null==c?void 0:c.allowed_mime_types,u=null==c?void 0:c.file_size_limit;return void 0===c?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("h2",{className:"text-xl",children:c.name}),(0,n.jsx)(b.Z,{color:c.public?"amber":"scale",children:c.public?"Public":"Private"})]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Allowed MIME types:"," ",null===d?"All types are allowed":0===(null!=d?d:[]).length?"No types are allowed":(null!=d?d:[]).length>1?(null!=d?d:[]).join(", "):"Unknown"]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Max file size limit:"," ",null===u?"No limit":"".concat((0,ef.td)(u))]})]}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.uploadFile,codeSnippets:eu.uploadFile.code({name:l,apikey:s,endpoint:a})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.deleteFiles,codeSnippets:eu.deleteFiles.code({name:l,apikey:s,endpoint:a})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.listFiles,codeSnippets:eu.listFiles.code({name:l,apikey:s,endpoint:a})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.downloadFile,codeSnippets:eu.downloadFile.code({name:l,apikey:s,endpoint:a})}),c.public?(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.retrievePublicURL,codeSnippets:eu.retrievePublicURL.code({name:l,apikey:s,endpoint:a})}):(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.createSignedURL,codeSnippets:eu.createSignedURL.code({name:l,apikey:s,endpoint:a})})]})},ej=s(62046),EdgeFunction=e=>{let{language:t,apikey:s="API_KEY",endpoint:a}=e,{ref:i}=(0,m.UO)(),r=(0,er.WZ)(),{data:o}=(0,ej.I)({projectRef:i}),l=r.activeDocsSection[1],c=(null!=o?o:[]).find(e=>e.name===l);return void 0===c?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsx)("div",{className:"space-y-1 px-4 py-4",children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("h2",{className:"text-xl",children:c.name})})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:t,snippet:eu.invokeEdgeFunction,codeSnippets:eu.invokeEdgeFunction.code({name:l,endpoint:"".concat(a),apikey:s})})]})},ev=s(44171),eb=s(53530);let navigateToSection=e=>{{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}},tempRemovePostgrestText=e=>{let t=e.lastIndexOf("Note:\nThis is a Primary Key.<pk/>"),s=e.lastIndexOf("Note:\nThis is a Foreign Key to"),n=e;return t>=0&&(n=n.substring(0,t)),s>=0&&(n=n.substring(0,s)),n};var ew=s(56469),eN=s(77105),eS=s(43502),eC=s(50671),ProjectAPIDocs_LanguageSelector=e=>{let{simplifiedVersion:t=!1}=e,s=(0,er.WZ)(),[a,i]=(0,w.useState)(!1),updateLanguage=e=>{s.setDocsLanguage(e),i(!1)};return(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsxs)(ew.J2,{modal:!1,open:a,onOpenChange:i,children:[(0,n.jsx)(ew.xo,{asChild:!0,children:(0,n.jsx)(G.z,{type:"default",className:t?"px-1":"",icon:t?"js"===s.docsLanguage?(0,n.jsx)("img",{src:"".concat(d.GW,"/img/libraries/javascript-icon.svg"),alt:"javascript logo",width:"14"}):(0,n.jsx)(eN.Z,{size:14,strokeWidth:2.5}):void 0,iconRight:!t&&(0,n.jsx)(eS.Z,{size:14,strokeWidth:2}),children:t?void 0:"Language: ".concat("js"===s.docsLanguage?"Javascript":"Bash")})}),(0,n.jsx)(ew.yk,{className:"p-0 w-24",side:"bottom",align:"end",children:(0,n.jsx)(eC.mY,{children:(0,n.jsx)(eC.e8,{children:(0,n.jsxs)(eC.fu,{children:[(0,n.jsx)(eC.di,{className:"cursor-pointer",onSelect:()=>updateLanguage("js"),onClick:()=>updateLanguage("js"),children:(0,n.jsx)("p",{children:"Javascript"})}),(0,n.jsx)(eC.di,{className:"cursor-pointer",onSelect:()=>updateLanguage("bash"),onClick:()=>updateLanguage("bash"),children:(0,n.jsx)("p",{children:"Bash"})})]})})})})]})})},Content_Entity=e=>{var t,s;let{language:a,apikey:i="",endpoint:r=""}=e,{ref:o}=(0,m.UO)(),l=(0,er.WZ)(),c=l.activeDocsSection[1],{data:d,refetch:u}=(0,eb.a)({projectRef:o}),p=null==d?void 0:null===(t=d.definitions)||void 0===t?void 0:t[c],h=void 0!==p?Object.entries(p.properties).map(e=>{let[t,s]=e;return{...s,id:t,required:p.required.includes(t)}}):[];return((0,w.useEffect)(()=>{void 0!==c&&u()},[c]),void 0===c)?null:(0,n.jsxs)("div",{className:"divide-y relative",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sticky top-0 bg-surface-100 z-10 border-b shadow-md",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("h2",{className:"text-xl",children:c}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null!==(s=null==p?void 0:p.description)&&void 0!==s?s:"No description available"})]}),(0,n.jsx)(ProjectAPIDocs_LanguageSelector,{})]}),(0,n.jsxs)("div",{className:"space-y-2 px-4 py-4 !border-t-0",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Columns"}),(0,n.jsx)(ev.Z,{head:[(0,n.jsx)(ev.Z.th,{children:"Name"},"name"),(0,n.jsx)(ev.Z.th,{children:"Format"},"format"),(0,n.jsx)(ev.Z.th,{children:"Type"},"type"),(0,n.jsx)(ev.Z.th,{children:"Description"},"description")],body:h.map(e=>{var t;let s=function(e,t){if(void 0===e&&("jsonb"===t||"json"===t))return"json";switch(e){case"string":return"string";case"integer":case"number":return"number";case"json":return"json";case"boolean":return"boolean";default:return e}}(e.type,e.format);return(0,n.jsxs)(ev.Z.tr,{children:[(0,n.jsx)(ev.Z.td,{title:e.id,children:e.id}),(0,n.jsx)(ev.Z.td,{title:e.format,children:(0,n.jsx)("p",{className:"truncate",children:e.format})}),(0,n.jsx)(ev.Z.td,{title:s,children:s}),(0,n.jsx)(ev.Z.td,{title:e.description,children:tempRemovePostgrestText(null!==(t=e.description)&&void 0!==t?t:"").trim()})]},e.id)})})]}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.readRows,codeSnippets:eu.readRows.code({resourceId:c,endpoint:r,apikey:i})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.filtering,codeSnippets:eu.filtering.code({resourceId:c,endpoint:r,apikey:i})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.insertRows,codeSnippets:eu.insertRows.code({resourceId:c,endpoint:r,apikey:i})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.updateRows,codeSnippets:eu.updateRows.code({resourceId:c,endpoint:r,apikey:i})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.deleteRows,codeSnippets:eu.deleteRows.code({resourceId:c,endpoint:r,apikey:i})}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.subscribeChanges,codeSnippets:eu.subscribeChanges.code({resourceId:c})})]})},Content_RPC=e=>{var t,s;let{language:a}=e,{ref:i}=(0,m.UO)(),r=(0,er.WZ)(),{data:o,refetch:l}=(0,eb.a)({projectRef:i}),{data:c,refetch:d}=useOpenAPISpecQuery({projectRef:i}),u=null!==(t=null==c?void 0:c.functions)&&void 0!==t?t:[],p=r.activeDocsSection[1],h=u.find(e=>e.name===p),g=null==o?void 0:o.paths[null==h?void 0:h.path],x=null==g?void 0:g.post.summary,f=null!==(s=null==h?void 0:h.get.parameters)&&void 0!==s?s:[];return((0,w.useEffect)(()=>{void 0!==p&&(l(),d())},[p]),void 0===h)?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,n.jsx)("h2",{className:"text-xl",children:h.name}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null!=x?x:"No description available"})]}),(0,n.jsxs)("div",{className:"space-y-2 px-4 py-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Function arguments"}),(0,n.jsx)(ev.Z,{head:[(0,n.jsx)(ev.Z.th,{children:"Name"},"name"),(0,n.jsx)(ev.Z.th,{children:"Format"},"format"),(0,n.jsx)(ev.Z.th,{children:"Type"},"type"),(0,n.jsx)(ev.Z.th,{},"required")],body:f.map(e=>(0,n.jsxs)(ev.Z.tr,{children:[(0,n.jsx)(ev.Z.td,{title:e.name,children:(0,n.jsx)("p",{className:"font-mono text-xs text-foreground truncate",children:e.name})}),(0,n.jsx)(ev.Z.td,{title:e.format,children:e.format}),(0,n.jsx)(ev.Z.td,{title:e.type,children:e.type}),(0,n.jsx)(ev.Z.td,{children:e.required?(0,n.jsx)(b.Z,{color:"amber",children:"Required"}):(0,n.jsx)("p",{className:"text-foreground-light",children:"Optional"})})]},e.name))})]}),(0,n.jsx)(ProjectAPIDocs_ResourceContent,{selectedLanguage:a,snippet:eu.rpcSingle,codeSnippets:eu.rpcSingle.code({rpcName:p,rpcParams:f,endpoint:"endpoint",apiKey:"apiKey",showBearer:!0})})]})};let Separator=()=>(0,n.jsx)("div",{className:"border-t !mt-3 pb-1 mx-3"});var ProjectAPIDocs_FirstLevelNav=()=>{var e,t;let{ref:s}=(0,m.UO)(),a=(0,er.WZ)(),{projectAuthAll:i,projectStorageAll:r,projectEdgeFunctionAll:o,realtimeAll:c}=(0,l.N3)(["project_auth:all","project_storage:all","project_edge_function:all","realtime:all"]),u=ec.filter(e=>"user-management"===e.key?i:"storage"===e.key?r:"edge-functions"===e.key?o:"realtime"!==e.key||c),{data:p}=useOpenAPISpecQuery({projectRef:s}),h=null!==(e=null==p?void 0:p.tables)&&void 0!==e?e:[],x=null!==(t=null==p?void 0:p.functions)&&void 0!==t?t:[],{data:f}=(0,ey.K)({projectRef:s}),{data:y}=(0,ej.I)({projectRef:s});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-2 py-4  border-b",children:u.map(e=>{let t=a.activeDocsSection[0]===e.key,s=Object.values(ed).filter(t=>t.category===e.key);return(0,n.jsxs)(w.Fragment,{children:[(0,n.jsx)("div",{className:"cursor-pointer text-sm py-2 px-3 rounded-md transition ".concat(t?"bg-surface-300":""),onClick:()=>a.setActiveDocsSection([e.key]),children:e.name}),t&&s.length>0&&(0,n.jsxs)("div",{className:"space-y-2 py-2",children:[s.map(t=>(0,n.jsx)("p",{title:t.title,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>{a.setActiveDocsSection([e.key]),navigateToSection(t.key)},children:t.title},t.key)),"entities"===e.key&&(0,n.jsxs)(n.Fragment,{children:[h.length>0&&(0,n.jsx)(Separator,{}),h.map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>a.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"stored-procedures"===e.key&&(0,n.jsxs)(n.Fragment,{children:[x.length>0&&(0,n.jsx)(Separator,{}),x.map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>a.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"storage"===e.key&&(0,n.jsxs)(n.Fragment,{children:[(null!=f?f:[]).length>0&&(0,n.jsx)(Separator,{}),(null!=f?f:[]).map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>a.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"edge-functions"===e.key&&(0,n.jsxs)(n.Fragment,{children:[(null!=y?y:[]).length>0&&(0,n.jsx)(Separator,{}),(null!=y?y:[]).map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>a.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]})]})]},e.key)})}),(0,n.jsxs)("div",{className:"px-2 py-4 border-b",children:[(0,n.jsx)(G.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(K.Z,{src:"".concat(d.GW,"/img/graphql.svg"),style:{width:"".concat(16,"px"),height:"".concat(16,"px")},className:"text-foreground",preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),onClick:()=>a.setShowProjectApiDocs(!1),children:(0,n.jsx)(g(),{className:"!justify-start",href:"/project/".concat(s,"/api/graphiql"),children:"GraphiQL"})}),(0,n.jsx)(G.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(J.Z,{}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/graphql",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"GraphQL guide"})})]}),(0,n.jsxs)("div",{className:"px-2 py-4",children:[(0,n.jsx)(G.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(Y.Z,{}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"Documentation"})}),(0,n.jsx)(G.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(J.Z,{}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/api",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"REST guide"})})]})]})},ek=s(6225),e_=s(47742),eE=s(50074),ProjectAPIDocs_SecondLevelNav=()=>{var e,t;let{ref:s}=(0,m.UO)(),a=(0,er.WZ)(),[i,r]=(0,w.useState)(!1),o=(0,H.cg)(),{data:l}=useOpenAPISpecQuery({projectRef:s}),c=null!==(e=null==l?void 0:l.tables)&&void 0!==e?e:[],d=null!==(t=null==l?void 0:l.functions)&&void 0!==t?t:[],[u,p]=a.activeDocsSection,{data:h}=(0,ey.K)({projectRef:s}),{data:x}=(0,ej.I)({projectRef:s}),f=(null!=h?h:[]).find(e=>e.name===p),y={entities:{title:"Tables & Views",options:c,docsUrl:"https://supabase.com/docs/reference/javascript/select"},"stored-procedures":{title:"Stored Procedures",options:d,docsUrl:"https://supabase.com/docs/reference/javascript/rpc"},storage:{title:"Storage",options:null!=h?h:[],docsUrl:"https://supabase.com/docs/reference/javascript/storage-createbucket"},"edge-functions":{title:"Edge Functions",options:null!=x?x:[],docsUrl:"https://supabase.com/docs/reference/javascript/functions-invoke"}},updateSection=e=>{a.setActiveDocsSection([a.activeDocsSection[0],e]),r(!1)},j=Object.values(eu).filter(e=>e.category===a.activeDocsSection[0]);return(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsxs)("div",{className:"px-4 flex items-center space-x-2 mb-2",children:[o&&(0,n.jsx)(G.z,{type:"text",icon:(0,n.jsx)(ek.Z,{}),className:"px-1",onClick:()=>a.setActiveDocsSection([a.activeDocsSection[0]])}),(0,n.jsx)("p",{className:"text-sm text-foreground-light capitalize",children:y[u].title})]}),(0,n.jsxs)(ew.J2,{open:i,onOpenChange:r,modal:!1,children:[(0,n.jsx)(ew.xo,{asChild:!0,children:(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)(G.z,{block:!0,type:"default",size:"small",className:"[&>span]:w-full",children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:a.activeDocsSection[1]}),(0,n.jsx)("div",{children:(0,n.jsx)(e_.Z,{className:"rotate-90",strokeWidth:1.5,size:12})})]})})})})}),(0,n.jsx)(ew.yk,{className:"p-0 w-60",side:"bottom",align:"center",children:(0,n.jsx)(eC.mY,{children:(0,n.jsx)(eC.e8,{children:(0,n.jsx)(eC.fu,{children:y[u].options.map(e=>(0,n.jsx)(eC.di,{className:"cursor-pointer",onSelect:()=>updateSection(e.name),onClick:()=>updateSection(e.name),children:(0,n.jsx)("p",{children:e.name})},e.name))})})})})]}),(0,n.jsx)("div",{className:"px-2 py-4 space-y-2",children:j.map(e=>"storage"===u&&void 0!==f&&(!f.public&&"retrieve-public-url"===e.key||f.public&&"create-signed-url"===e.key)?null:(0,n.jsx)("p",{title:e.title,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>navigateToSection(e.key),children:e.title},e.key))}),(0,n.jsx)("div",{className:"px-4 py-4 border-t space-y-2",children:(0,n.jsxs)(eE.bZ,{className:"p-3",children:[(0,n.jsx)(eE.Cd,{children:(0,n.jsx)("p",{className:"text-xs",children:"Unable to find what you're looking for?"})}),(0,n.jsxs)(eE.X,{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-xs !leading-normal",children:"The API methods shown here are only the commonly used ones to get you started building quickly."}),(0,n.jsx)("p",{className:"text-xs !leading-normal",children:"Head over to our docs site for the full API documentation."}),(0,n.jsx)(G.z,{asChild:!0,className:"!mt-2",size:"tiny",type:"default",icon:(0,n.jsx)(em.Z,{strokeWidth:1.5}),children:(0,n.jsx)(g(),{href:y[u].docsUrl,target:"_blank",rel:"noreferrer",children:"Documentation"})})]})]})})]})},ProjectAPIDocs_ProjectAPIDocs=()=>{var e,t,s,a;let{ref:i}=(0,m.UO)(),r=(0,er.WZ)(),o=2===r.activeDocsSection.length&&"entities"===r.activeDocsSection[0],[l,c]=(0,w.useState)(!1),d=r.docsLanguage,{data:u}=(0,ea.q)({projectRef:i}),{data:p}=(0,ei.z)({projectRef:i}),h=l&&null!==(s=null==u?void 0:u.autoApiService.defaultApiKey)&&void 0!==s?s:"SUPABASE_CLIENT_ANON_KEY",g=(null==p?void 0:null===(e=p.customDomain)||void 0===e?void 0:e.status)==="active"?"https://".concat(null===(t=p.customDomain)||void 0===t?void 0:t.hostname,"/auth/v1/callback"):"https://".concat(null!==(a=null==u?void 0:u.autoApiService.endpoint)&&void 0!==a?a:"");return(0,n.jsx)(en.ZP,{hideFooter:!0,size:"xxlarge",className:"max-w-5xl",visible:r.showProjectApiDocs,onCancel:()=>r.setShowProjectApiDocs(!1),children:(0,n.jsxs)("div",{className:"flex items-start h-full",children:[(0,n.jsxs)("div",{className:"w-64 border-r h-full",children:[(0,n.jsxs)("div",{className:"border-b px-4 py-2 flex items-center justify-between",children:[(0,n.jsx)("h4",{children:"API Docs"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[!o&&(0,n.jsx)(ProjectAPIDocs_LanguageSelector,{simplifiedVersion:!0}),(0,n.jsx)(G.z,{type:"default",onClick:()=>c(!l),children:l?"Hide keys":"Show keys"})]})]}),1===r.activeDocsSection.length?(0,n.jsx)(ProjectAPIDocs_FirstLevelNav,{}):(0,n.jsx)(ProjectAPIDocs_SecondLevelNav,{})]}),(0,n.jsxs)("div",{className:"flex-1 divide-y space-y-4 max-h-screen overflow-auto",children:["introduction"===r.activeDocsSection[0]&&(0,n.jsx)(Content_Introduction,{showKeys:l,language:d,apikey:h,endpoint:g}),"user-management"===r.activeDocsSection[0]&&(0,n.jsx)(Content_UserManagement,{language:d,apikey:h,endpoint:g}),"realtime"===r.activeDocsSection[0]&&(0,n.jsx)(Content_Realtime,{language:d}),"storage"===r.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==r.activeDocsSection[1]?(0,n.jsx)(Content_Bucket,{language:d,apikey:h,endpoint:g}):(0,n.jsx)(Content_Storage,{language:d})}),"edge-functions"===r.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==r.activeDocsSection[1]?(0,n.jsx)(EdgeFunction,{language:d,apikey:h,endpoint:g}):(0,n.jsx)(Content_EdgeFunctions,{language:d})}),"entities"===r.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==r.activeDocsSection[1]?(0,n.jsx)(Content_Entity,{language:d,apikey:h,endpoint:g}):(0,n.jsx)(Content_Entities,{language:d})}),"stored-procedures"===r.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==r.activeDocsSection[1]?(0,n.jsx)(Content_RPC,{language:d}):(0,n.jsx)(Content_StoredProcedures,{language:d})})]})]})})},eP=s(1681),eI=s(73205),eL=s(49730),ui_AISettingsModal=()=>{var e,t;let s=(0,er.WZ)(),a=(0,l.lL)(),i=null!==(t=null==a?void 0:null===(e=a.opt_in_tags)||void 0===e?void 0:e.includes(d.PV.AI_SQL))&&void 0!==t&&t,[r,o]=(0,l.ly)("supabase_sql-editor-ai-schema-enabled",!0),{ui:c}=(0,l.oR)(),u=(i||!d.Qy)&&r;return(0,n.jsx)(eP.C,{header:"Supabase AI Settings",hideFooter:!0,visible:s.showAiSettingsModal,onCancel:()=>s.setShowAiSettingsModal(!1),children:(0,n.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 px-6 py-3",children:[d.Qy&&!i&&a&&(0,n.jsx)(eI.b,{variant:"warning",title:"This option is only available if your organization has opted-in to sending anonymous data to OpenAI.",children:(0,n.jsxs)(g(),{href:"/org/".concat(a.slug,"/general"),className:"flex flex-row gap-1 items-center",target:"_blank",rel:"noopener",children:["Go to your organization's settings to opt-in.",(0,n.jsx)(em.Z,{className:"inline-block w-3 h-3"})]})}),(0,n.jsxs)("div",{className:"flex justify-between gap-8 mr-8 my-4",children:[(0,n.jsx)(eL.Z,{disabled:d.Qy&&!i,checked:u,onChange:()=>{o(e=>!e),c.setNotification({category:"success",message:"Successfully saved settings"})}}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"Include anonymous database metadata in AI queries"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Metadata includes table names, column names and their corresponding data types in the request. This will generate queries that are more relevant to your project."})]})]})]})})},eA=s(67950),eT=s(16236),eR=s(99484),eD=s(89435),ez=s(81710),ResourceExhaustionWarningBanner_ResourceExhaustionWarningBanner=()=>{var e,t,s,a,i,o;let{ref:l}=(0,m.UO)(),c=(0,r.useRouter)(),{data:d}=(0,eR.q)(),u=null===(e=null!=d?d:[])||void 0===e?void 0:e.find(e=>e.project===l),p=void 0!==u?u.is_readonly_mode_enabled?["is_readonly_mode_enabled"]:Object.keys(u).filter(e=>"project"!==e&&"is_readonly_mode_enabled"!==e&&null!==u[e]):[],h=void 0!==u&&p.some(e=>"critical"===u[e]),x=p.includes("is_readonly_mode_enabled")||h,f=void 0!==u?(0,ez.L)(u,p[0],"bannerContent"):void 0,y=p.length>1?eD.x.multiple_resource_warnings.bannerContent[h?"critical":"warning"].title:null==f?void 0:f.title,j=p.length>1?eD.x.multiple_resource_warnings.bannerContent[h?"critical":"warning"].description:null==f?void 0:f.description,v=p.length>1?eD.x.multiple_resource_warnings.docsUrl:null===(t=eD.x[p[0]])||void 0===t?void 0:t.docsUrl,b=p.length>1?eD.x.multiple_resource_warnings.metric:null===(s=eD.x[p[0]])||void 0===s?void 0:s.metric,w=null===(i=void 0===b?void 0:null===b?"/project/[ref]/settings/[infra-path]":"disk_space"===b||"read_only"===b?"/project/[ref]/settings/database":"/project/[ref]/settings/[infra-path]#".concat(b))||void 0===i?void 0:null===(a=i.replace("[ref]",null!=l?l:"default"))||void 0===a?void 0:a.replace("[infra-path]","infrastructure"),N=p.length>1?eD.x.multiple_resource_warnings.buttonText:null===(o=eD.x[p[0]])||void 0===o?void 0:o.buttonText;return 0===p.length||void 0===f||(c.pathname.endsWith("/usage")||c.pathname.endsWith("/infrastructure"))&&!p.includes("is_readonly_mode_enabled")||p.includes("is_readonly_mode_enabled")&&c.pathname.endsWith("settings/database")?null:(0,n.jsxs)(eE.bZ,{variant:x?"destructive":"warning",className:"border-0 border-r-0 rounded-none [&>svg]:left-6 px-6 [&>svg]:w-[26px] [&>svg]:h-[26px]",children:[(0,n.jsx)(eT.Z,{}),(0,n.jsx)(eE.Cd,{children:y}),(0,n.jsx)(eE.X,{children:j}),(0,n.jsxs)("div",{className:"absolute top-5 right-5 flex items-center space-x-2",children:[void 0!==v&&(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{}),children:(0,n.jsx)(g(),{href:v,children:"Learn more"})}),void 0!==w&&(0,n.jsx)(G.z,{asChild:!0,type:"default",children:(0,n.jsx)(g(),{href:w,children:null!=N?N:"Check"})})]})]})},eZ=s(33684),eF=s(88883),eO=s(56974),eU=s.n(eO),eM=s(63955),eB=s(69218),eq=s(67427),eW=s(67542),IconDollarSign_IconDollarSign=function(e){return(0,n.jsx)(S.Z,{icon:eW.Z,...e})},eH=s(11205),eG=s(30195),eV=s(37680),eQ=s(7503),eK=s(20775),eY=s(4481),eJ=s(50226),eX=s(79725),e$=s(138),EnableBranchingButton_BranchingPITRNotice=()=>{let{ref:e}=(0,m.UO)(),t=(0,er.WZ)();return(0,n.jsxs)(eE.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 !border-t-0 !border-l-0 !border-r-0",children:[(0,n.jsx)(eE.Cd,{className:"text-base",children:"We strongly encourage enabling Point in Time Recovery (PITR)"}),(0,n.jsx)(eE.X,{children:'This is to ensure that you can always recover data if you make a "bad migration". For example, if you accidentally delete a column or some of your production data.'}),(0,n.jsx)(G.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(g(),{href:"/project/".concat(e,"/settings/addons?panel=pitr"),onClick:()=>t.setShowEnableBranchingModal(!1),children:"Enable PITR add-on"})})]})},e0=s(43911),EnableBranchingButton_BranchingPostgresVersionNotice=()=>{let{ref:e}=(0,m.UO)(),t=(0,er.WZ)();return(0,n.jsxs)(eE.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 !border-t-0 !border-l-0 !border-r-0",children:[(0,n.jsx)(e0.Z,{}),(0,n.jsx)(eE.Cd,{className:"text-base",children:"Your project needs to be on Postgres 15 to enable branching"}),(0,n.jsx)(eE.X,{children:"Head over to your project's infrastructure settings to upgrade to the latest version of Postgres before enabling branching."}),(0,n.jsx)(eE.X,{children:(0,n.jsx)(G.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(g(),{href:"/project/".concat(e,"/settings/infrastructure"),onClick:()=>t.setShowEnableBranchingModal(!1),children:"Head to project settings"})})})]})},e1=s(84283),e2=s(13781),e4=s(55216),e5=s(15542),e3=s(94235),EnableBranchingButton_GithubRepositorySelection=e=>{let{form:t,isChecking:s,isValid:a,integration:i,hasGithubIntegrationInstalled:r}=e,{ref:o}=(0,m.UO)(),c=(0,l.lL)(),d=null==i?void 0:i.connections.find(e=>e.supabase_project_ref===o),u=(0,e3.x5)(),h="https://github.com/apps/supabase/installations/new?state=".concat(o);function onSelectConnectRepo(){i&&(u.setGithubConnectionsOpen(!0),u.setGithubConnectionsIntegrationId(i.id))}return(0,n.jsx)("div",{className:(0,p.default)("border-t border-b",r?"":"border-warning-300 bg-warning-200"),children:(0,n.jsx)(eP.C.Content,{className:"px-7",children:(0,n.jsxs)("div",{className:"py-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{children:"Git Connection"}),(0,n.jsx)(b.Z,{color:"amber",children:"Required"})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light !mb-4",children:void 0!==d?"Your database preview branches will be based on the branches in the following repository that your project is connected with:":"Your database preview branches will be based on the branches in the Git repository that your project is connected with."}),!r&&(0,n.jsx)(G.z,{asChild:!0,type:"default",className:"!mt-3",children:(0,n.jsx)(g(),{href:h,children:"Install Github Integration"})}),r&&!d&&(0,n.jsx)(e5.FP,{showNode:!1,onClick:()=>onSelectConnectRepo(),orgSlug:null==c?void 0:c.slug}),i&&d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"mb-3",children:(0,n.jsx)(e5.jA,{type:"GitHub",connection:d,showNode:!1,actions:(0,n.jsx)(G.z,{type:"default",onClick:()=>onSelectConnectRepo(),children:"Configure connection"}),orientation:"vertical"})}),(0,n.jsx)(eB.Wi,{control:t.control,name:"branchName",render:e=>{let{field:t}=e;return(0,n.jsxs)(eB.xJ,{className:"relative",children:[(0,n.jsx)("label",{className:"text-sm text-foreground-light",children:"Choose your production branch"}),(0,n.jsx)(eB.NI,{children:(0,n.jsx)(e1.I,{...t,placeholder:"e.g main"})}),(0,n.jsx)("div",{className:"absolute top-9 right-3",children:s?(0,n.jsx)(e2.Z,{className:"animate-spin"}):a?(0,n.jsx)(e4.Z,{className:"text-brand",strokeWidth:2}):null}),(0,n.jsx)(eB.zG,{})]})}})]})]})})})},EnableBranchingButton_BranchingPlanNotice=()=>{let e=(0,er.WZ)(),t=(0,l.lL)();return(0,n.jsxs)(eE.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 border-0 border-y",children:[(0,n.jsx)(e0.Z,{}),(0,n.jsx)(eE.Cd,{className:"text-base",children:"Database branching is only available on the Pro plan and above"}),(0,n.jsx)(eE.X,{children:"Go to your organization's billing settings and upgrade your plan to enable branching for this project"}),(0,n.jsx)(eE.X,{children:(0,n.jsx)(G.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(g(),{href:"/org/".concat(null==t?void 0:t.slug,"/billing?panel=subscriptionPlan"),onClick:()=>e.setShowEnableBranchingModal(!1),children:"Upgrade to Pro"})})})]})},EnableBranchingButton_EnableBranchingModal=()=>{var e,t,s,a,i,r;let{ui:o}=(0,l.oR)(),{ref:c}=(0,m.UO)(),d=(0,er.WZ)(),u=(0,l.lL)(),[p,h]=(0,w.useState)(!1),{data:x,error:f,isLoading:y,isSuccess:j,isError:v}=(0,e$.T)({orgSlug:null==u?void 0:u.slug}),{data:b,error:N,isLoading:S,isError:C,isSuccess:k}=(0,eJ.D)({projectRef:c}),_=Number(null!==(s=null===(e=eU()(null!==(t=null==b?void 0:b.current_app_version.split("-"))&&void 0!==t?t:[]))||void 0===e?void 0:e.split(".")[0])&&void 0!==s?s:0)>=15,{data:E}=(0,I.G)({orgSlug:null==u?void 0:u.slug}),P=(null==E?void 0:E.plan.id)==="free",{data:L}=(0,q.F)({projectRef:c}),A=void 0!==(null!==(a=null==L?void 0:L.selected_addons)&&void 0!==a?a:[]).find(e=>"pitr"===e.type),T=null!==(i=null==x?void 0:x.some(e=>"GitHub"===e.integration.name))&&void 0!==i&&i,R=null==x?void 0:x.find(e=>"GitHub"===e.integration.name&&e.organization.slug===(null==u?void 0:u.slug)),D=null==R?void 0:R.connections.find(e=>e.supabase_project_ref===c),[z,Z]=null!==(r=null==D?void 0:D.metadata.name.split("/"))&&void 0!==r?r:[],{mutateAsync:F,isLoading:O}=(0,eX.s)({onError:()=>{}}),{mutate:U,isLoading:M}=(0,eY.J)({onSuccess:()=>{o.setNotification({category:"success",message:"Successfully created new branch"}),d.setShowEnableBranchingModal(!1)}}),B="enable-branching-form",W=eG.Ry({branchName:eG.Z_().refine(e=>e.length>1,"Please enter a branch name from ".concat(z,"/").concat(Z)).refine(async e=>{try{return e.length>0&&(await F({organizationIntegrationId:null==R?void 0:R.id,repoOwner:z,repoName:Z,branchName:e}),h(!0)),!0}catch(e){return h(!1),!1}},"Unable to find branch from ".concat(z,"/").concat(Z))}),H=(0,eM.cI)({mode:"onBlur",reValidateMode:"onChange",resolver:(0,eF.F)(W),defaultValues:{branchName:""}}),V=j&&k,Q=H.getValues("branchName").length>0&&!O&&p;return(0,w.useEffect)(()=>{H&&d.showEnableBranchingModal&&(h(!1),H.reset())},[H,d.showEnableBranchingModal]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.C,{hideFooter:!0,visible:d.showEnableBranchingModal,onCancel:()=>d.setShowEnableBranchingModal(!1),className:"!bg !max-w-[40rem]",size:"xlarge",children:(0,n.jsx)(eB.l0,{...H,children:(0,n.jsxs)("form",{id:B,onSubmit:H.handleSubmit(e=>{if(!c)return console.error("Project ref is required");U({projectRef:c,branchName:e.branchName,gitBranch:e.branchName})}),onChange:()=>h(!1),children:[(0,n.jsxs)(eP.C.Content,{className:"px-7 py-5 flex items-center justify-between space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,n.jsx)(eq.Z,{strokeWidth:2,size:20}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-foreground",children:"Enable database branching"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Manage environments in Supabase"})]})]}),(0,n.jsx)(G.z,{type:"default",icon:(0,n.jsx)(em.Z,{strokeWidth:1.5}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/platform/branching",target:"_blank",rel:"noreferrer",children:"Documentation"})})]}),(y||S)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.C.Separator,{}),(0,n.jsx)(eP.C.Content,{className:"px-7 py-6",children:(0,n.jsx)(eK.A,{})}),(0,n.jsx)(eP.C.Separator,{})]}),(v||C)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.C.Separator,{}),(0,n.jsx)(eP.C.Content,{className:"px-7 py-6",children:v?(0,n.jsx)(eQ.Z,{error:f,subject:"Failed to retrieve integrations"}):C?(0,n.jsx)(eQ.Z,{error:N,subject:"Failed to retrieve Postgres version"}):null}),(0,n.jsx)(eP.C.Separator,{})]}),V&&(0,n.jsxs)(n.Fragment,{children:[P?(0,n.jsx)(EnableBranchingButton_BranchingPlanNotice,{}):_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(EnableBranchingButton_GithubRepositorySelection,{form:H,isChecking:O,isValid:Q,integration:R,hasGithubIntegrationInstalled:T}),!A&&(0,n.jsx)(EnableBranchingButton_BranchingPITRNotice,{})]}):(0,n.jsx)(EnableBranchingButton_BranchingPostgresVersionNotice,{}),(0,n.jsxs)(eP.C.Content,{className:"px-7 py-6 flex flex-col gap-3",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Please keep in mind the following:"}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)("figure",{className:"w-10 h-10 rounded-md bg-warning-200 border border-warning-300 flex items-center justify-center",children:(0,n.jsx)(IconDollarSign_IconDollarSign,{className:"text-amber-900",size:20,strokeWidth:2})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"Preview branches are billed $0.32 per day (approximately $10 per month)"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Launching a new preview branch incurs additional compute costs at $0.32 per day. This cost will continue for as long as the branch has not been removed. This pricing is for Early Access and is subject to change."})]})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 mt-2",children:[(0,n.jsx)("div",{children:(0,n.jsx)("figure",{className:"w-10 h-10 rounded-md bg-warning-200 border border-warning-300 flex items-center justify-center",children:(0,n.jsx)(eH.Z,{className:"text-amber-900",size:20,strokeWidth:2})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"Branching uses your GitHub repository to apply migrations"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Database migrations are handled via the"," ",(0,n.jsx)("code",{className:"text-xs",children:"./supabase"})," directory in your GitHub repo. Migration files will run on both Preview Branches and Production when pushing to and merging git branches."]})]})]})]})]}),(0,n.jsx)(eP.C.Separator,{}),(0,n.jsx)(eP.C.Content,{className:"px-7",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 py-2 pb-4",children:[(0,n.jsx)(G.z,{size:"medium",block:!0,disabled:M,type:"default",onClick:()=>d.setShowEnableBranchingModal(!1),children:"Cancel"}),(0,n.jsx)(G.z,{block:!0,size:"medium",form:B,disabled:!V||M||!Q,loading:M,type:"primary",htmlType:"submit",children:"I understand, enable branching"})]})})]})})}),(0,n.jsx)(eV.Z,{projectRef:c})]})},e6=s(55830),e8=s(95933),e9=s(79944),e7=s(13758),te=s(83150),tt=s(81437),ts=s(60496),tn=s(29659),ta=s(3218),ProjectLayout_BuildingState=()=>{let{ref:e}=(0,m.UO)(),t=(0,l.Vm)(),s=(0,e6.NL)(),a=(0,w.useRef)();async function checkServer(){if(!t)return;let n=await (0,ta.GC)("".concat(d.T5,"/projects/").concat(t.ref,"/status"),{timeout:2e3});if(n&&!n.error){let{status:t}=n;t===d.S.ACTIVE_HEALTHY&&(clearInterval(a.current),e&&await (0,ts.H0)(s,e),await (0,tn.fr)(s))}}return((0,w.useEffect)(()=>(a.current=window.setInterval(checkServer,4e3),()=>{clearInterval(a.current)}),[]),void 0===t)?null:(0,n.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl items-center justify-center",children:[(0,n.jsxs)("div",{className:"mx-6 flex flex-col space-y-16",children:[(0,n.jsxs)("div",{className:" flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("h1",{className:"text-3xl text-foreground",children:null==t?void 0:t.name}),(0,n.jsx)(b.Z,{color:"brand",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(e2.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:t.status===d.S.UNKNOWN?"Initiating project set up":"Setting up project"})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:[" ","We are provisioning your database and API endpoints"]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:" This may take a few minutes"})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:" grid grid-cols-12 gap-12",children:[(0,n.jsxs)("div",{className:"col-span-12 space-y-12 lg:col-span-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-base text-foreground",children:"While you wait"}),(0,n.jsx)(ChecklistItem,{description:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Browse the Supabase"," ",(0,n.jsx)(g(),{href:"https://supabase.com/docs",className:"mb-0 text-brand transition-colors hover:text-brand-600",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-base text-foreground",children:"Not working?"}),(0,n.jsx)(ChecklistItem,{description:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Try refreshing after a couple of minutes."})}),(0,n.jsx)("ul",{children:(0,n.jsx)(ChecklistItem,{description:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-4 text-sm text-foreground-light",children:"If your dashboard hasn't connected within 2 minutes, you can open a support ticket."}),(0,n.jsx)(G.z,{asChild:!0,type:"default",children:(0,n.jsx)(g(),{href:"/support/new",children:"Contact support team"})})]})})})]})]}),(0,n.jsxs)("div",{className:"col-span-12  lg:col-span-8",children:[(0,n.jsx)(tt.D,{}),(0,n.jsx)(tt.m,{})]})]})})]}),t.status===d.S.COMING_UP&&(0,n.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:[(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)("h5",{children:"Client libraries"})}),(0,n.jsx)("div",{className:"mx-6 mb-12 grid gap-12 md:grid-cols-3",children:e7.l.map(e=>(0,n.jsx)(e8.Z,{...e},e.language))})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)("h5",{children:"Example projects"})}),(0,n.jsx)("div",{className:"mx-6 grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:e7.B.map(e=>(0,n.jsx)(e9.Z,{...e},e.url))})]})]})]})};let ChecklistItem=e=>{let{description:t}=e;return(0,n.jsxs)("li",{className:"my-3 flex flex-wrap space-x-3",children:[(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)(te.Z,{className:"text-foreground-lighter",size:"tiny"})}),(0,n.jsx)("div",{className:"flex-1",children:t})]})};var ti=s(63819),tr=s(29586),IconServer_IconServer=function(e){return(0,n.jsx)(S.Z,{icon:tr.Z,...e})},to=s(50575),tl=s(4678),tc=s.n(tl);async function pingPostgrest(e,t){if(void 0===e)return!1;let{kpsVersion:s,timeout:n}=null!=t?t:{},a=tc().gte(tc().coerce(null!=s?s:"kps-v0.0.1"),tc().coerce("kps-v3.8.6"));return a?pingHealthCheckApi(e,n):pingOpenApi(e,n)}async function pingOpenApi(e,t){let{error:s}=await (0,ta.pu)("".concat(d.T5,"/projects/").concat(e,"/api/rest"),[],{timeout:null!=t?t:2e3});return void 0===s}async function pingHealthCheckApi(e,t){let{error:s}=await (0,ta.GC)("".concat(d.T5,"/projects/").concat(e,"/live"),{timeout:null!=t?t:2e3});return void 0===s}var ProjectLayout_ConnectingState=e=>{let{project:t}=e,{ref:s}=(0,m.UO)(),a=(0,e6.NL)(),i=(0,w.useRef)();(0,w.useEffect)(()=>{if(t.restUrl)return i.current=window.setInterval(testProjectConnection,4e3),()=>{clearInterval(i.current)}},[t]);let testProjectConnection=async()=>{let e=await pingPostgrest(t.ref,{kpsVersion:t.kpsVersion});e&&(clearInterval(i.current),(0,tn.Ob)(a,t.ref,"ONLINE"))};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,n.jsx)("h1",{className:"text-3xl",children:t.name}),(0,n.jsx)("div",{children:(0,n.jsx)(b.Z,{color:"brand",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(e2.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:"Connecting to project"})]})})})]}),(0,n.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,n.jsxs)("div",{className:"w-[440px] space-y-4",children:[(0,n.jsxs)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,n.jsx)(ti.Z,{className:"text-foreground-light",size:30,strokeWidth:1.5})})}),(0,n.jsx)(to.Z,{active:!0}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,n.jsx)(IconServer_IconServer,{className:"text-foreground-light",size:30,strokeWidth:1.5})})})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-center",children:["Connecting to ",t.name]}),(0,n.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"If you are unable to connect after a few minutes, check your project's health to verify if it's running into any resource constraints."})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(G.z,{asChild:!0,type:"default",children:(0,n.jsx)(g(),{href:"/project/".concat(s,"/settings/infrastructure"),children:"Check database health"})}),(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{strokeWidth:1.5}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/platform/troubleshooting#unable-to-connect-to-your-supabase-project",className:"translate-y-[1px]",children:"Troubleshooting"})})]})]})})]})})})},td=s(69568),tu=s(24990),tm=s(33025),tp=s(38617),th=s(51593),tg=s(64475),tx=s(10381),tf=s(91992),ty=s(97036),tj=s(81393),tv=s(71164),tb=s(21547),tw=s(2755),tN=s(82089),tS=s(60087),tC=s(8809);let generateToolRoutes=(e,t)=>{let s=(null==t?void 0:t.status)===d.S.COMING_UP,a="/project/".concat(e,"/building");return[{key:"editor",label:"Table Editor",icon:(0,n.jsx)(K.Z,{src:"".concat(d.GW,"/img/table-editor.svg"),style:{width:"".concat(18,"px"),height:"".concat(18,"px")},preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),link:e&&(s?a:"/project/".concat(e,"/editor"))},{key:"sql",label:"SQL Editor",icon:(0,n.jsx)(K.Z,{src:"".concat(d.GW,"/img/sql-editor.svg"),style:{width:"".concat(18,"px"),height:"".concat(18,"px"),strokeWidth:"4"},preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),link:d.Qy?e&&(s?a:"/project/".concat(e,"/sql/new")):"/project/".concat(e,"/sql/1")}]},generateProductRoutes=(e,t,s)=>{var a,i,r,o;let l=(null==t?void 0:t.status)===d.S.COMING_UP,c="/project/".concat(e,"/building"),u=null===(a=null==s?void 0:s.auth)||void 0===a||a,m=null===(i=null==s?void 0:s.edgeFunctions)||void 0===i||i,p=null===(r=null==s?void 0:s.storage)||void 0===r||r,h=null===(o=null==s?void 0:s.realtime)||void 0===o||o;return[{key:"database",label:"Database",icon:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:tN.RB.database.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(l?c:"/project/".concat(e,"/database/tables"))},...u?[{key:"auth",label:"Authentication",icon:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:tN.RB.authentication.icon[24],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(l?c:"/project/".concat(e,"/auth/users"))}]:[],...p?[{key:"storage",label:"Storage",icon:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:tN.RB.storage.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(l?c:"/project/".concat(e,"/storage/buckets"))}]:[],...d.Qy&&m?[{key:"functions",label:"Edge Functions",icon:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:tN.RB.functions.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(l?c:"/project/".concat(e,"/functions"))}]:[],...d.Qy&&h?[{key:"realtime",label:"Realtime",icon:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:tN.RB.realtime.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(l?c:"/project/".concat(e,"/realtime/inspector"))}]:[]]},generateOtherRoutes=(e,t)=>{let s=(null==t?void 0:t.status)===d.S.COMING_UP,a="/project/".concat(e,"/building");return[...d.Qy?[{key:"reports",label:"Reports",icon:(0,n.jsx)(tS.Z,{size:18,strokeWidth:2.5}),link:e&&(s?a:"/project/".concat(e,"/reports"))}]:[],{key:"logs",label:"Logs",icon:(0,n.jsx)(tC.Z,{size:18,strokeWidth:2.5}),link:e&&(s?a:"/project/".concat(e,"/logs/explorer"))},{key:"api",label:"API Docs",icon:(0,n.jsx)(eH.Z,{size:18,strokeWidth:2}),link:e&&(s?a:"/project/".concat(e,"/api"))},...d.Qy?[{key:"settings",label:"Project Settings",icon:(0,n.jsx)(tv.Z,{size:18,strokeWidth:2.5}),link:e&&"/project/".concat(e,"/settings/general")}]:[]]};var ui_ConditionalWrap=e=>{let{condition:t,children:s,wrap:n}=e;return t?(0,w.cloneElement)(n(s)):s},NavigationBar_NavigationIconButton=e=>{let{route:t,isActive:s=!1}=e;return(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{children:(0,n.jsx)(ui_ConditionalWrap,{condition:void 0!==t.link,wrap:e=>(0,n.jsx)(g(),{href:t.link,children:e}),children:(0,n.jsx)("span",{className:["transition-colors duration-200","flex items-center justify-center h-10 w-10 rounded","bg-background hover:bg-overlay-hover","text-foreground-lighter hover:text-foreground ","".concat(s?"bg-selection shadow-sm text-foreground":"")].join(" "),children:t.icon})})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"right",sideOffset:5,children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"bg-alternative shadow-lg shadow-background-surface-100	py-1.5 px-3 rounded leading-none border border-default",children:(0,n.jsx)("span",{className:"text-foreground text-xs",children:t.label})})]})})]})},NavigationBar_NavigationBar=()=>{let e=(0,ef.fV)(),t=(0,r.useRouter)(),s=(0,er.WZ)(),{theme:a,setTheme:i}=(0,tp.F)(),{ref:o}=(0,m.UO)(),{setIsOpen:c}=(0,th.f$)(),{project:u}=(0,tw.d2)(),p=(0,l.P5)("navigationLayoutV2"),h=(0,l.P5)("featurePreviews"),x=(0,H.cg)(),{projectAuthAll:f,projectEdgeFunctionAll:y,projectStorageAll:v,realtimeAll:b}=(0,l.N3)(["project_auth:all","project_edge_function:all","project_storage:all","realtime:all"]),w=t.pathname.split("/")[3],N=generateToolRoutes(o,u),S=generateProductRoutes(o,u,{auth:f,edgeFunctions:y,storage:v,realtime:b}),C=generateOtherRoutes(o,u);return(0,n.jsxs)("div",{className:"hide-scrollbar flex w-14 flex-col justify-between p-2 overflow-y-auto border-r bg-background border-default",children:[(0,n.jsxs)("ul",{className:"flex flex-col space-y-2",children:[(!p||!d.Qy)&&(0,n.jsx)(g(),{href:d.Qy?"/projects":"/project/".concat(o),className:"block",children:(0,n.jsx)("img",{src:"".concat(t.basePath,"/img/supabase-logo.svg"),alt:"Supabase",className:"mx-auto h-[40px] w-6 cursor-pointer rounded"})}),(0,n.jsx)(NavigationBar_NavigationIconButton,{isActive:j()(w)&&!j()(t.query.ref),route:{key:"HOME",label:"Home",icon:(0,n.jsx)(tg.Z,{size:18,strokeWidth:2}),link:"/project/".concat(o)}}),(0,n.jsx)("div",{className:"bg-border h-px w-full"}),N.map(e=>(0,n.jsx)(NavigationBar_NavigationIconButton,{route:e,isActive:w===e.key},e.key)),(0,n.jsx)("div",{className:"bg-border h-px w-full"}),S.map(e=>(0,n.jsx)(NavigationBar_NavigationIconButton,{route:e,isActive:w===e.key},e.key)),(0,n.jsx)("div",{className:"h-px w-full bg-border"}),C.map(e=>"api"===e.key&&x?(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{asChild:!0,children:(0,n.jsx)(G.z,{type:"text",size:"tiny",onClick:()=>s.setShowProjectApiDocs(!0),className:"border-none group",children:(0,n.jsx)("div",{className:"py-[7px]",children:(0,n.jsx)(eH.Z,{size:18,strokeWidth:2,className:"transition text-foreground-lighter group-hover:text-foreground"})})})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"right",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"bg-alternative shadow-lg shadow-background-surface-100	py-1.5 px-3 rounded leading-none border border-default",children:(0,n.jsx)("span",{className:"text-foreground text-xs",children:"Project API Docs"})})]})})]},e.key):(0,n.jsx)(NavigationBar_NavigationIconButton,{route:e,isActive:w===e.key},e.key))]}),!p&&(0,n.jsxs)("ul",{className:"flex flex-col space-y-4 items-center",children:[d.Qy&&(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{asChild:!0,children:(0,n.jsx)(G.z,{type:"text",size:"tiny",onClick:()=>c(!0),className:"border-none",children:(0,n.jsx)("div",{className:"py-1",children:(0,n.jsx)(tx.Z,{size:18,strokeWidth:2,className:"text-foreground-lighter"})})})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"right",sideOffset:5,children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsxs)("div",{className:"bg-alternative shadow-lg shadow-background-surface-100	py-1.5 px-3 rounded leading-none border border-default flex items-center gap-1",children:["macos"===e?(0,n.jsx)(tf.Z,{size:11.5,strokeWidth:1.5,className:"text-foreground"}):(0,n.jsx)("p",{className:"text-xs",children:"CTRL"}),(0,n.jsx)("p",{className:"text-xs",children:"K"})]})]})})]}),(0,n.jsxs)(ty.h_,{children:[(0,n.jsx)(ty.$F,{asChild:!0,children:(0,n.jsx)(G.z,{type:"text",size:"tiny",className:"py-1 h-10 border-none",children:(0,n.jsx)(tj.Z,{size:18,strokeWidth:2,className:"text-foreground-lighter"})})}),(0,n.jsxs)(ty.AW,{side:"right",align:"start",children:[d.Qy&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ty.Xi,{className:"space-x-2",asChild:!0,children:(0,n.jsxs)(g(),{href:"/account/me",children:[(0,n.jsx)(tv.Z,{size:14,strokeWidth:1.5}),(0,n.jsx)("p",{children:"Account preferences"})]})},"header"),h&&(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:()=>s.setShowFeaturePreviewModal(!0),onSelect:()=>s.setShowFeaturePreviewModal(!0),children:[(0,n.jsx)(tm.Z,{size:14,strokeWidth:2}),(0,n.jsx)("p",{children:"Feature previews"})]},"header"),(0,n.jsx)(ty.VD,{})]}),(0,n.jsx)(ty.Ju,{children:"Theme"}),(0,n.jsx)(ty.Qk,{children:(0,n.jsx)(ty._x,{value:a,onValueChange:e=>{i(e)},children:tb.n.map(e=>(0,n.jsx)(ty.qB,{value:e.value,children:e.name},e.value))})})]})]})]})]})},tk=s(57561),IconCircle_IconCircle=function(e){return(0,n.jsx)(S.Z,{icon:tk.Z,...e})},t_=s(31604);async function getProjectStatus(e,t){let{projectRef:s}=e;if(!s)throw Error("Project ref is required");let{data:n,error:a}=await (0,Q.U2)("/platform/projects/{ref}/status",{params:{path:{ref:s}},signal:t});if(a)throw a;return n}let useProjectStatusQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,V.a)(t_.i.status(t),e=>{let{signal:s}=e;return getProjectStatus({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var ProjectLayout_PausingState=e=>{let{project:t}=e,{ref:s}=(0,m.UO)(),a=(0,e6.NL)(),[i,r]=(0,w.useState)(!1);return useProjectStatusQuery({projectRef:s},{enabled:i,refetchInterval:e=>(null==e?void 0:e.status)!==d.S.INACTIVE&&2e3,onSuccess:async e=>{e.status===d.S.INACTIVE&&(s&&await (0,ts.H0)(a,s),await (0,tn.fr)(a))}}),(0,w.useEffect)(()=>{setTimeout(()=>r(!0),4e3)},[]),(0,n.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,n.jsx)("h1",{className:"text-3xl",children:t.name}),(0,n.jsx)("div",{children:(0,n.jsx)(b.Z,{color:"gray",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(e2.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:"Pausing project"})]})})})]}),(0,n.jsx)("div",{className:"mx-auto mt-8 mb-16 w-full max-w-7xl",children:(0,n.jsx)("div",{className:"mx-6 flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,n.jsxs)("div",{className:"grid w-[380px] gap-4",children:[(0,n.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,n.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,n.jsx)(e2.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,n.jsx)(IconCircle_IconCircle,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,n.jsxs)("p",{className:"text-center",children:["Pausing ",t.name]}),(0,n.jsx)("p",{className:"mt-4 text-center text-sm text-foreground-light",children:"You may restore your project anytime thereafter, and your data will be restored to when it was initially paused."})]})})})]})})},ProjectLayout_ProductMenuBar=e=>{let{title:t,children:s}=e;return(0,n.jsxs)("div",{className:"hide-scrollbar flex w-64 flex-col border-r bg-background border-default ",children:[(0,n.jsx)("div",{className:"border-default flex max-h-12 items-center border-b px-6",style:{minHeight:"3rem"},children:(0,n.jsx)("h4",{className:"text-lg",children:t})}),(0,n.jsx)("div",{className:"flex-grow overflow-y-auto",style:{maxHeight:"calc(100vh - 96px)"},children:s})]})},tE=s(82202),tP=s(3239),tI=s(39195),ProjectLayout_RestoringState=()=>{let{ref:e}=(0,m.UO)(),{meta:t}=(0,l.oR)(),s=(0,e6.NL)(),{project:a}=(0,tw.d2)(),i=(0,w.useRef)(),[r,o]=(0,w.useState)(!1),[c,u]=(0,w.useState)(!1),[p,h]=(0,w.useState)(!1);async function checkServer(){if(!a)return;let e=await (0,ta.GC)("".concat(d.T5,"/projects/").concat(a.ref,"/status"),{timeout:2e3});if(e&&!e.error){let{status:t}=e;t===d.S.RESTORATION_FAILED?(clearInterval(i.current),u(!0)):t===d.S.ACTIVE_HEALTHY&&(clearInterval(i.current),h(!0))}}(0,w.useEffect)(()=>(i.current=window.setInterval(checkServer,4e3),()=>clearInterval(i.current)),[]);let onConfirm=async()=>{if(!a)return console.error("Project is required");o(!0);let n=await (0,ts.T)({ref:null==a?void 0:a.ref});n&&t.setProjectDetails(n),e&&await (0,ts.H0)(s,e)};return(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:p?(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(tP.Z,{className:"text-brand",size:18,strokeWidth:2})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Restoration complete!"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project has been successfully restored and is now back online."})]})]}),(0,n.jsx)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8",children:(0,n.jsx)(G.z,{disabled:r,loading:r,onClick:onConfirm,children:"Return to project"})})]}):c?(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(tI.Z,{size:18,strokeWidth:2})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Something went wrong while restoring your project"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Our engineers have already been notified of this, do hang tight while we are investigating into the issue."})]})]}),c&&(0,n.jsx)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8",children:(0,n.jsx)(G.z,{asChild:!0,type:"default",children:(0,n.jsx)(g(),{href:"/support/new?category=Database_unresponsive&ref=".concat(null==a?void 0:a.ref,"&subject=Restoration%20failed%20for%20project"),children:"Contact support"})})})]}):(0,n.jsx)("div",{className:"space-y-6 py-6",children:(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(e2.Z,{className:"animate-spin",size:18})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Restoration in progress"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Restoration can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while the restoration is running."})]})]})})})})},tL=s(63059),tA=s(28879),tT=s.n(tA),tR=s(84837),tD=s(35530),tz=s(52857);let tZ=[{key:tL.L9.Started,initial:"Prepare new server",progress:"Preparing new server",completed:"Prepared new server"},{key:tL.L9.LaunchedUpgradedInstance,initial:"Prepare new server for migration",progress:"Preparing new server for migration",completed:"New server ready for migration"},{key:tL.L9.DetachedVolumeFromUpgradedInstance,initial:"Execute pre-upgrade checks",progress:"Executing pre-upgrade checks",completed:"Completed pre-upgrade checks"},{key:tL.L9.AttachedVolumeToOriginalInstance,initial:"Shut down API services",progress:"Shutting down API services",completed:"Completed shutting down API services"},{key:tL.L9.InitiatedDataUpgrade,initial:"Migrate to new database",progress:"Migrating to new database",completed:"Completed migration to new database"},{key:tL.L9.CompletedDataUpgrade,initial:"Execute database migration",progress:"Executing database migration",completed:"Completed database migration"},{key:tL.L9.DetachedVolumeFromOriginalInstance,initial:"Update database extensions",progress:"Updating database extensions",completed:"Updated database extensions"},{key:tL.L9.AttachedVolumeToUpgradedInstance,initial:"Optimize database",progress:"Optimizing database",completed:"Completed optimization of database"}];var ProjectLayout_UpgradingState=()=>{var e;let{ref:t}=(0,es.UO)(),{meta:s}=(0,l.oR)(),a=(0,e6.NL)(),{project:i}=(0,tw.d2)(),[r,o]=(0,w.useState)(!1),[c,u]=(0,w.useState)(!1),{data:m}=(0,tz.h)({projectRef:t,projectStatus:null==i?void 0:i.status},{enabled:d.Qy}),{initiated_at:p,status:h,progress:x,target_version:f,error:y}=null!==(e=null==m?void 0:m.databaseUpgradeStatus)&&void 0!==e?e:{},j=Number((x||"").split("_")[0]),v=h===tL.h.Failed,b=h===tL.h.Upgraded,N=tT().utc(null!=p?p:0).format("DD MMM YYYY HH:mm:ss"),S=tT().utc(null!=p?p:0).local().format("DD MMM YYYY HH:mm:ss (ZZ)"),refetchProjectDetails=async()=>{o(!0);let e=await (0,ts.T)({ref:t});e&&s.setProjectDetails(e),t&&await (0,ts.H0)(a,t)},C="Upgrade information:%0A Initiated at: ".concat(p,"%0A Target Version: ").concat(f,"%0A Error: ").concat(y);return(0,n.jsx)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsx)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:(0,n.jsx)("h1",{className:"text-3xl",children:null==i?void 0:i.name})}),(0,n.jsx)("div",{className:"w-full mx-auto mt-8 mb-16 max-w-7xl",children:(0,n.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-muted bg-surface-100 p-8",children:b?(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,n.jsx)(tP.Z,{className:"text-brand",size:40,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center",children:"Upgrade completed!"}),(0,n.jsxs)("p",{className:"mt-4 text-center text-sm text-foreground-light w-[300px] mx-auto",children:["Your project has been successfully upgraded to Postgres ",f," and is now back online."]})]}),(0,n.jsx)("div",{className:"mx-auto",children:(0,n.jsx)(G.z,{loading:r,disabled:r,onClick:refetchProjectDetails,children:"Return to project"})})]}):v?(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,n.jsx)(tI.Z,{className:"text-amber-900",size:40,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center",children:"We ran into an issue while upgrading your project"}),(0,n.jsx)("p",{className:"mt-4 text-center text-sm text-foreground-light w-[450px] mx-auto",children:"Your project is back online and its data is not affected. Please reach out to us via our support form for assistance with the upgrade."})]}),(0,n.jsxs)("div",{className:"flex items-center mx-auto space-x-2",children:[(0,n.jsx)(G.z,{asChild:!0,type:"default",children:(0,n.jsx)(g(),{href:"/support/new?category=Database_unresponsive&ref=".concat(t,"&subject=").concat("Upgrade%20failed%20for%20project","&message=").concat(C),target:"_blank",rel:"noreferrer",children:"Contact support"})}),(0,n.jsx)(G.z,{loading:r,disabled:r,onClick:refetchProjectDetails,children:"Return to project"})]})]}):(0,n.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,n.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,n.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full",children:(0,n.jsx)(tv.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,n.jsx)(IconCircle_IconCircle,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center",children:"Upgrading in progress"}),(0,n.jsx)("p",{className:"text-sm text-center text-foreground-light",children:"Upgrades can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while it is being upgraded."}),(0,n.jsxs)("div",{className:"!mt-4 !mb-2 py-3 px-4 transition-all overflow-hidden border rounded relative",style:{maxHeight:c?"500px":"110px"},children:[c?(0,n.jsx)(tR.Z,{size:"tiny",strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>u(!1)}):(0,n.jsx)(tD.Z,{size:"tiny",strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>u(!0)}),(0,n.jsx)("div",{className:"space-y-2 transition-all",style:{translate:c?"0px 0px":"0px ".concat(-((j-2<=0?0:j>6?5:j-2)*28),"px")},children:tZ.map((e,t)=>{let s=e.key===x,a=j>t;return(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[s?(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 rounded-full",children:(0,n.jsx)(e2.Z,{size:20,className:"animate-spin text-foreground-light",strokeWidth:2})}):a?(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-brand border-brand",children:(0,n.jsx)(e4.Z,{size:12,className:"text-white",strokeWidth:3})}):(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-overlay-hover"}),(0,n.jsx)("p",{className:"text-sm ".concat(s?"text-foreground":a?"text-foreground-light":"text-foreground-lighter"," hover:text-foreground transition"),children:s?e.progress:a?e.completed:e.initial})]},e.key)})})]}),void 0!==p&&(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{className:"w-full",children:(0,n.jsxs)("p",{className:"text-sm text-center text-foreground-light",children:["Started on: ",N," (UTC)"]})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:S})})]})})]})]})]})})})]})})};let tF=["/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/storage","/project/[ref]/settings/infrastructure"],tO=["/project/[ref]/branches","/project/[ref]/database/backups/scheduled"],tU=["/project/[ref]/reports","/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/infrastructure"],ProjectLayout=e=>{let{title:t,isLoading:s=!1,isBlocking:a=!0,product:o="",productMenu:c,children:m,hideHeader:p=!1,hideIconBar:h=!1,selectedTable:g}=e,x=(0,r.useRouter)(),{ref:f}=(0,es.UO)(),y=(0,l.lL)(),j=(0,l.Vm)(),v=null==j?void 0:j.name,b=null==y?void 0:y.name,w=(0,l.P5)("navigationLayoutV2"),N=(null==j?void 0:j.status)===d.S.INACTIVE,S="/project/[ref]"===x.pathname||x.pathname.includes("/project/[ref]/settings"),C=N&&!S;return(0,n.jsx)(u.Z,{children:(0,n.jsxs)(tw.Ml,{projectRef:f,children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:t?"".concat(t," | Supabase"):g?"".concat(g," | ").concat(v," | ").concat(b," | Supabase"):v?"".concat(v," | ").concat(b," | Supabase"):b?"".concat(b," | Supabase"):"Supabase"}),(0,n.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,n.jsxs)("div",{className:"flex h-full",children:[!h&&(0,n.jsx)(NavigationBar_NavigationBar,{}),!C&&(0,n.jsx)(MenuBarWrapper,{isLoading:s,isBlocking:a,productMenu:c,children:(0,n.jsx)(ProjectLayout_ProductMenuBar,{title:o,children:c})}),(0,n.jsxs)("main",{className:"flex flex-col flex-1 w-full overflow-x-hidden",children:[!w&&!p&&d.Qy&&(0,n.jsx)(ProjectLayout_LayoutHeader,{}),C?(0,n.jsx)("div",{className:"mx-auto my-16 w-full h-full max-w-7xl flex items-center",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(tE.Z,{product:o})})}):(0,n.jsxs)(ContentWrapper,{isLoading:s,isBlocking:a,children:[(0,n.jsx)(ResourceExhaustionWarningBanner_ResourceExhaustionWarningBanner,{}),m]})]})]}),(0,n.jsx)(EnableBranchingButton_EnableBranchingModal,{}),(0,n.jsx)(ui_AISettingsModal,{}),(0,n.jsx)(ProjectAPIDocs_ProjectAPIDocs,{})]})})},tM=(0,l.QO)(ProjectLayout),MenuBarWrapper=e=>{let{isLoading:t,isBlocking:s=!0,productMenu:n,children:a}=e,i=(0,r.useRouter)(),o=(0,l.Vm)(),c=!tF.includes(i.pathname);return s?!t&&n&&(!c||c&&void 0!==o)?a:null:a},ContentWrapper=e=>{let{isLoading:t,isBlocking:s=!0,children:a}=e,i=(0,r.useRouter)(),{ref:o}=(0,es.UO)(),c=(0,eZ.TF)(),u=(0,l.Vm)(),m=i.pathname.includes("/project/[ref]/settings"),p="/project/[ref]/settings/vault"===i.pathname,h=!m&&!tO.includes(i.pathname)||p,g=!tU.includes(i.pathname),x=!tF.includes(i.pathname),f=(null==u?void 0:u.status)===d.S.UPGRADING,y=(null==u?void 0:u.status)===d.S.RESTORING,j=(null==u?void 0:u.status)===d.S.COMING_UP||(null==u?void 0:u.status)===d.S.UNKNOWN,v=(null==u?void 0:u.status)===d.S.GOING_DOWN||(null==u?void 0:u.status)===d.S.PAUSING,b=(null==u?void 0:u.postgrestStatus)==="OFFLINE";return((0,w.useEffect)(()=>{o&&c.setSelectedDatabaseId(o)},[o]),s&&(t||x&&void 0===u))?i.pathname.endsWith("[ref]")?(0,n.jsx)(td.C,{}):(0,n.jsx)(eA.Z,{}):f?(0,n.jsx)(ProjectLayout_UpgradingState,{}):v?(0,n.jsx)(ProjectLayout_PausingState,{project:u}):g&&b?(0,n.jsx)(ProjectLayout_ConnectingState,{project:u}):h&&y?(0,n.jsx)(ProjectLayout_RestoringState,{}):h&&j?(0,n.jsx)(ProjectLayout_BuildingState,{}):(0,n.jsx)(w.Fragment,{children:a},null==u?void 0:u.ref)},generateSettingsMenu=(e,t,s,n)=>{var a,i,r;let o=(null==t?void 0:t.status)===d.S.COMING_UP,l="/project/".concat(e,"/building"),c=null===(a=null==n?void 0:n.auth)||void 0===a||a,u=null===(i=null==n?void 0:n.edgeFunctions)||void 0===i||i,m=null===(r=null==n?void 0:n.storage)||void 0===r||r;return[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},{name:"Infrastructure",key:"infrastructure",url:o?l:"/project/".concat(e,"/settings/infrastructure"),items:[]},...d.Qy?[{name:"Integrations",key:"integrations",url:"/project/".concat(e,"/settings/integrations"),items:[]}]:[],{name:"Add Ons",key:"addons",url:"/project/".concat(e,"/settings/addons"),items:[]},{name:"Vault",key:"vault",url:o?l:"/project/".concat(e,"/settings/vault/secrets"),items:[],label:"BETA"}]},{title:"",items:[{name:"Database",key:"database",url:o?l:"/project/".concat(e,"/settings/database"),items:[]},{name:"API",key:"api",url:o?l:"/project/".concat(e,"/settings/api"),items:[]},...d.Qy&&c?[{name:"Authentication",key:"auth",url:o?l:"/project/".concat(e,"/settings/auth"),items:[]}]:[],...d.Qy&&m?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/settings/storage"),items:[]}]:[],...d.Qy&&u?[{name:"Edge Functions",key:"functions",url:"/project/".concat(e,"/settings/functions"),items:[]}]:[]]},{title:"Billing",items:[{name:"Subscription",key:"subscription",url:"/org/".concat(null==s?void 0:s.slug,"/billing"),items:[]},{name:"Usage",key:"usage",url:"/org/".concat(null==s?void 0:s.slug,"/usage?projectRef=").concat(e),items:[]}]}]};var tB=(0,l.QO)((0,A.Pi)(e=>{let{title:t,children:s}=e,a=(0,r.useRouter)(),{ref:i}=(0,m.UO)(),o=(0,l.Vm)(),c=(0,l.lL)(),d=a.pathname.includes("billing")?a.pathname.split("/")[5]:a.pathname.split("/")[4],{projectAuthAll:u,projectEdgeFunctionAll:p,projectStorageAll:h,billingInvoices:g}=(0,l.N3)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),x=generateSettingsMenu(i,o,c,{auth:u,edgeFunctions:p,storage:h,invoices:g});return(0,n.jsx)(s$,{title:t||"Settings",product:"Settings",productMenu:(0,n.jsx)(F.Z,{page:d,menu:x}),children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})})})),tq=(0,l.QO)(e=>{var t;let{title:s,children:a}=e,i=(0,r.useRouter)(),o=(0,l.Vm)(),c=i.pathname.split("/")[4]||"",d=null!==(t=null==o?void 0:o.ref)&&void 0!==t?t:"default",u=(0,l.N3)("project_storage:all"),m=[{key:"reports",items:[{name:"Custom reports",key:"[id]",url:"/project/".concat(d,"/reports"),items:[]}]},{key:"builtin-reports",items:[{name:"API",key:"api-overview",url:"/project/".concat(d,"/reports/api-overview"),items:[]},...u?[{name:"Storage",key:"storage",url:"/project/".concat(d,"/reports/storage"),items:[],label:"NEW"}]:[],{name:"Database",key:"database",url:"/project/".concat(d,"/reports/database"),items:[]},{name:"Query Performance",key:"query-performance",url:"/project/".concat(d,"/reports/query-performance"),items:[]}]}];return(0,n.jsx)(s$,{title:s,product:"Reports",productMenu:(0,n.jsx)(F.Z,{page:c,menu:m}),children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:a})})}),tW=s(59491),tH=s(88058),tG=s(4220),tV=s(55345),tQ=s(32392),tK=s(53504),tY=s(81029);function filterSqlContent(e){return"sql"===e.type}let useSqlSnippetsQuery=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,tY.I1)(e,{select:e=>({snippets:e.content.filter(filterSqlContent)}),...t})};var tJ=s(84447),tX=s(87082),t$=s(1191),t0=s(78201),IconShare_IconShare=function(e){return(0,n.jsx)(S.Z,{icon:t0.Z,...e})},t1=s(5099),t2=s(77784),t4=s(26700),t5=s(3152),t3=s(56424),t6=s(57463),t8=s(9839),t9=s(8957),SQLEditor_RenameQueryModal=e=>{let{snippet:t,visible:s,onCancel:a,onComplete:i}=e,{ui:r}=(0,l.oR)(),{ref:o}=(0,m.UO)(),c=(0,l.lL)(),d=(0,tX.W2)(),{data:u}=(0,I.G)({orgSlug:null==c?void 0:c.slug}),p=(0,t9.$)(u),{id:h,name:g,description:x}=t,[f,y]=(0,w.useState)(g),[j,v]=(0,w.useState)(x);(0,w.useEffect)(()=>{y(g)},[g]);let onSubmit=async(e,t)=>{let{setSubmitting:s}=t;if(!o)return console.error("Project ref is required");if(!h)return console.error("Snippet ID is required");s(!0);try{return d.renameSnippet(h,f,j),i&&i(),Promise.resolve()}catch(e){r.setNotification({error:e,category:"error",message:"Failed to rename query: ".concat(e.message)})}},{mutateAsync:b,isLoading:N}=(0,t5.g)(),S=!!t.content.sql;return(0,n.jsx)(eP.C,{visible:s,onCancel:a,hideFooter:!0,header:"Rename",size:"small",children:(0,n.jsx)(t6.Z,{onReset:a,validateOnBlur:!0,initialValues:{name:null!=g?g:"",description:null!=x?x:""},validate:()=>{let e={};return f||(e.name="Please enter a query name"),e},onSubmit:onSubmit,children:e=>{let{isSubmitting:s}=e;return(0,n.jsxs)("div",{className:"space-y-4 py-4",children:[(0,n.jsxs)(eP.C.Content,{children:[(0,n.jsx)(eg.Z,{label:"Name",id:"name",name:"name",value:f,onChange:e=>y(e.target.value)}),(0,n.jsx)("div",{className:"flex w-full justify-end mt-2",children:!p&&S&&(0,n.jsx)(G.z,{type:"default",onClick:async()=>{try{let{title:e,description:s}=await b({sql:t.content.sql});y(e),j||v(s)}catch(e){(0,t3.V)(e)&&r.setNotification({category:"error",message:"Failed to rename query: ".concat(e.message)})}},size:"tiny",disabled:N,children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"scale-75",children:(0,n.jsx)(t8.c,{loading:N})}),(0,n.jsx)("span",{children:"Rename with Supabase AI"})]})})})]}),(0,n.jsx)(eP.C.Content,{children:(0,n.jsx)(eg.Z.TextArea,{label:"Description",id:"description",placeholder:"Describe query",size:"medium",textAreaClassName:"resize-none",value:j,onChange:e=>v(e.target.value)})}),(0,n.jsx)(eP.C.Separator,{}),(0,n.jsx)(eP.C.Content,{children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(G.z,{htmlType:"reset",type:"default",onClick:a,disabled:s,children:"Cancel"}),(0,n.jsx)(G.z,{htmlType:"submit",loading:s,disabled:s,children:"Rename query"})]})})]})}})})},t7=s(98050),se=s(62350),st=s(62202),ss=s(13080);async function deleteContent(e,t){let{projectRef:s,id:n}=e,a=await (0,ta.$v)("".concat(d.T5,"/projects/").concat(s,"/content?id=").concat(n),void 0,{signal:t});if(!(0,ta.d8)(a))throw a.error;return a}let useContentDeleteMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,e6.NL)();return(0,se.D)(e=>deleteContent(e),{async onSuccess(t,s,a){let{projectRef:i}=s;await Promise.all([n.invalidateQueries(ss.$.list(i))]),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?st.ZP.error("Failed to delete content: ".concat(e.message)):t(e,s,n)},...s})};var sn=s(57370),sa=s.n(sn),si=s(36043),sr=s(8897),so=s(17277),SQLEditor_DownloadSnippetModal=e=>{let{id:t,...s}=e,a=(0,tX.W2)(),i=a.snippets[t].snippet,r=sa()(i.name),[o,l]=(0,w.useState)("CLI"),c=[{id:"migration",label:"Migration",title:"Download as migration",description:"Download the snippet in a new migration named `".concat(r,"`"),cli:(0,tQ.kL)(t,r),npm:(0,tQ.kL)(t,r,!0)},{id:"seed",label:"Seed file",title:"Download as seed file",description:"If your query consists of sample data, append the snippet to the end of `supabase/seed.sql`",cli:(0,tQ.YI)(t),npm:(0,tQ.YI)(t,!0)},{id:"sql",label:"SQL file",title:"Download as SQL file",description:"Download the snippet directly into a new SQL file named `".concat(r,".sql`"),cli:(0,tQ.y4)(t,r),npm:(0,tQ.y4)(t,r,!0)}];return(0,n.jsx)(eP.C,{hideFooter:!0,showCloseButton:!0,size:"xlarge",header:(0,n.jsx)("p",{children:"Download snippet as local migration file via the Supabase CLI."}),...s,children:(0,n.jsx)(si.Z,{children:(0,n.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 py-5 relative",children:[(0,n.jsx)(ee.Z,{type:"underlined",listClassNames:"pl-5",children:c.map(e=>(0,n.jsxs)(ee.Z.Panel,{id:e.id,label:e.label,className:"px-5",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("h2",{className:"text-lg",children:e.title}),(0,n.jsx)(el.U,{className:"text-sm text-scale-1000 [&>p>code]:!break-normal",content:e.description})]}),(0,n.jsx)(so.Z,{width:75,options:["CLI","NPM"],activeOption:o,borderOverride:"border-gray-100",onClickOption:()=>"CLI"===o?l("NPM"):l("CLI")})]}),(0,n.jsx)("pre",{children:(0,n.jsx)(sr.d,{language:"bash",className:"language-bash prose dark:prose-dark max-w-none",children:"CLI"===o?e.cli:e.npm})})]},e.id))}),(0,n.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,n.jsx)("p",{className:"text-xs text-lighter mx-5",children:"Run this command from your project directory"}),(0,n.jsxs)("div",{className:"flex justify-between items-center gap-x-2 mx-5",children:[(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/cli/local-development#database-migrations",target:"_blank",rel:"noreferrer",children:"About migrations"})}),(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(em.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs/guides/cli/local-development",target:"_blank",rel:"noreferrer",children:"About CLI"})})]})]})]})})})},SQLEditorLayout_QueryItem=e=>{let{tabInfo:t}=e,{ref:s,id:a}=(0,m.UO)(),{id:i,name:r,description:o}=t||{},l=i===a,c=(0,w.useRef)(null);return(0,w.useEffect)(()=>{l&&c.current&&setTimeout(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}),(0,n.jsxs)("div",{className:(0,p.default)("flex items-center justify-between rounded-md group",l&&"text-foreground bg-surface-300 -active"),ref:l?c:null,children:[(0,n.jsx)(g(),{href:"/project/".concat(s,"/sql/").concat(i),className:"py-1 px-3 w-full overflow-hidden",children:(0,n.jsx)("p",{title:o||r,className:"text-sm text-foreground-light group-hover:text-foreground transition overflow-hidden text-ellipsis",children:r})}),(0,n.jsx)("div",{className:"pr-1",children:(0,n.jsx)(sl,{tabInfo:t,activeId:a})})]},i)};let sl=(0,A.Pi)(e=>{var t,s,a;let{tabInfo:i,activeId:o}=e,{ui:c}=(0,l.oR)(),{ref:u}=(0,m.UO)(),h=(0,r.useRouter)(),{profile:g}=(0,tJ.Un)(),x=(0,tX.W2)(),f=(0,l.Vm)(),y=(0,m.aF)(),{id:j}=i||{},v=void 0!==j&&x.snippets&&void 0!==x.snippets[j]?x.snippets[j]:null,b=(null==y?void 0:null===(t=y.user_metadata)||void 0===t?void 0:t.user_name)===(null==v?void 0:null===(a=v.snippet)||void 0===a?void 0:null===(s=a.owner)||void 0===s?void 0:s.username),{mutate:N,isLoading:S}=useContentDeleteMutation({onSuccess(e){var t;e.id&&x.removeSnippet(e.id);let s=(null!==(t=x.orders[u])&&void 0!==t?t:[]).filter(e=>e!==C);0===s.length?h.push("/project/".concat(u,"/sql/new")):h.push("/project/".concat(u,"/sql/").concat(s[0]))},onError(e,t){if(404===e.code&&e.message.includes("Content not found")){var s;t.id&&x.removeSnippet(t.id);let e=(null!==(s=x.orders[u])&&void 0!==s?s:[]).filter(e=>e!==C);0===e.length?h.push("/project/".concat(u,"/sql/new")):h.push("/project/".concat(u,"/sql/").concat(e[0]))}else c.setNotification({category:"error",message:"Failed to delete query: ".concat(e.message)})}}),{id:C,name:k,visibility:_,content:E}=i||{},[P,I]=(0,w.useState)(!1),[L,A]=(0,w.useState)(!1),[T,R]=(0,w.useState)(!1),[D,z]=(0,w.useState)(!1),Z=C===o,F=(0,l.Xo)(tW.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==g?void 0:g.id},subject:{id:null==g?void 0:g.id}}),onCloseRenameModal=()=>{I(!1)},onConfirmShare=async()=>{if(C)try{return x.shareSnippet(C,"project"),Promise.resolve()}catch(e){c.setNotification({error:e,category:"error",message:"Failed to share query: ".concat(e.message)})}},onConfirmDelete=async()=>u?C?void N({projectRef:u,id:C}):console.error("Snippet ID is required"):console.error("Project ref is required"),createPersonalCopy=async()=>{if(!u)return console.error("Project ref is required");if(!C)return console.error("Snippet ID is required");try{let e=(0,tQ.UA)({id:(0,ef.k$)(),name:k,sql:E.sql,owner_id:null==g?void 0:g.id,project_id:null==f?void 0:f.id});x.addSnippet(e,u),x.addNeedsSaving(e.id),h.push("/project/".concat(u,"/sql/").concat(e.id))}catch(e){c.setNotification({category:"error",message:"Failed to create a personal copy of this query: ".concat(e.message)})}};return(0,n.jsxs)("div",{className:"group [div&>button[data-state='open']>span]:text-foreground-lighter flex items-center",children:[d.Qy?(0,n.jsxs)(ty.h_,{children:[(0,n.jsx)(ty.$F,{asChild:!0,children:(0,n.jsx)("span",{className:(0,p.default)("rounded p-1",Z?"text-foreground-light hover:bg-border-stronger":"text-background hover:bg-overlay-hover group-hover:text-foreground-light"),children:(0,n.jsx)(eS.Z,{size:"tiny",strokeWidth:2})})}),(0,n.jsxs)(ty.AW,{side:"bottom",align:"end",children:[b&&(0,n.jsxs)(ty.Xi,{onClick:e=>{e.stopPropagation(),I(!0)},className:"space-x-2",children:[(0,n.jsx)(t$.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Rename query"})]}),"user"===_&&F&&(0,n.jsxs)(ty.Xi,{onClick:e=>{e.stopPropagation(),A(!0)},className:"space-x-2",children:[(0,n.jsx)(IconShare_IconShare,{size:"tiny"}),(0,n.jsx)("p",{children:"Share query"})]}),"project"===_&&F&&(0,n.jsxs)(ty.Xi,{onClick:createPersonalCopy,className:"space-x-2",children:[(0,n.jsx)(ex.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Duplicate personal copy"})]}),d.Qy&&(0,n.jsxs)(ty.Xi,{onClick:()=>z(!D),className:"space-x-2",children:[(0,n.jsx)(ep.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Download as migration file"})]}),b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ty.VD,{}),(0,n.jsxs)(ty.Xi,{onClick:e=>{e.stopPropagation(),R(!0)},className:"space-x-2",children:[(0,n.jsx)(t1.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Delete query"})]})]})]})]}):(0,n.jsx)(G.z,{asChild:!0,disabled:!0,type:"text",style:{padding:"3px"},children:(0,n.jsx)("span",{})}),(0,n.jsx)(SQLEditor_RenameQueryModal,{snippet:i,visible:P,onCancel:onCloseRenameModal,onComplete:onCloseRenameModal}),(0,n.jsx)(t7.Z,{header:"Confirm to delete query",buttonLabel:"Delete query",buttonLoadingLabel:"Deleting query",size:"medium",loading:S,visible:T,onSelectConfirm:onConfirmDelete,onSelectCancel:()=>R(!1),children:(0,n.jsx)(eP.C.Content,{children:(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)("div",{className:"text-sm text-foreground-light grid gap-4",children:(0,n.jsxs)("div",{className:"grid gap-1",children:["project"===_&&(0,n.jsxs)(eE.bZ,{variant:"destructive",children:[(0,n.jsx)(tI.Z,{strokeWidth:2}),(0,n.jsx)(eE.Cd,{children:"This SQL snippet will be lost forever"}),(0,n.jsx)(eE.X,{children:"Deleting this query will remove it for all members of the project team."})]}),(0,n.jsxs)("p",{children:["Are you sure you want to delete '",k,"'?"]})]})})})})}),(0,n.jsx)(t7.Z,{header:"Confirm sharing query",size:"medium",buttonLabel:"Share query",buttonLoadingLabel:"Sharing query",visible:L,onSelectConfirm:onConfirmShare,onSelectCancel:()=>A(!1),children:(0,n.jsx)(eP.C.Content,{children:(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)("div",{className:"text-sm text-foreground-light grid gap-4",children:(0,n.jsxs)("div",{className:"grid gap-1",children:[(0,n.jsxs)(eE.bZ,{variant:"warning",children:[(0,n.jsx)(eT.Z,{strokeWidth:2}),(0,n.jsx)(eE.Cd,{children:"This SQL query will become public to all team members"}),(0,n.jsx)(eE.X,{children:"Anyone with access to the project can view it"})]}),(0,n.jsxs)("ul",{className:"mt-4 space-y-5",children:[(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(t2.Z,{}),(0,n.jsx)("span",{children:"Project members will have read-only access to this query."})]}),(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(t4.Z,{}),(0,n.jsx)("span",{children:"Anyone will be able to duplicate it to their personal snippets."})]})]})]})})})})}),(0,n.jsx)(SQLEditor_DownloadSnippetModal,{id:C,visible:D,onCancel:()=>z(!1)})]})}),sc=(0,A.Pi)(()=>{let{ui:e}=(0,l.oR)(),{ref:t}=(0,m.UO)(),s=(0,r.useRouter)(),{profile:a}=(0,tJ.Un)(),i=(0,l.Vm)(),[o,c]=(0,w.useState)(""),[d,u]=(0,w.useState)(""),[p,h]=(0,w.useState)(""),[g,x]=(0,w.useState)(!1),[f,y]=(0,w.useState)(!1),[j,b]=(0,w.useState)(!1),N=(0,tX.W2)(),{isLoading:S,isSuccess:C}=useSqlSnippetsQuery(t,{refetchOnWindowFocus:!1,staleTime:300,onSuccess(e){t&&N.setRemoteSnippets(e.snippets,t)}}),k=(0,tX.Fy)(t),_=(0,w.useMemo)(()=>k.filter(e=>"project"===e.visibility),[k]),E=(0,w.useMemo)(()=>d.length>0?_.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())):_,[_,d]),P=(0,w.useMemo)(()=>{let e=k.filter(e=>"user"===e.visibility&&!e.content.favorite);return o.length>0?e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())):e},[o,k]),I=(0,w.useMemo)(()=>k.filter(e=>e.content.favorite),[k]),L=(0,w.useMemo)(()=>p.length>0?I.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())):I,[I,p]),A=(0,l.Xo)(tW.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==a?void 0:a.id},subject:{id:null==a?void 0:a.id}}),handleNewQuery=async()=>{if(!t)return console.error("Project is required");if(!a)return console.error("Profile is required");if(!A)return e.setNotification({category:"info",message:"Your queries will not be saved as you do not have sufficient permissions"});try{let e=(0,tQ.UA)({id:(0,ef.k$)(),name:tV.$C,owner_id:null==a?void 0:a.id,project_id:null==i?void 0:i.id});N.addSnippet(e,t),s.push("/project/".concat(t,"/sql/").concat(e.id)),c(""),u(""),h(""),x(!1),y(!1),b(!1)}catch(t){e.setNotification({category:"error",message:"Failed to create new query: ".concat(t.message)})}};return(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(v.ZP,{type:"pills",children:S?(0,n.jsxs)("div",{className:"px-5 my-4 space-y-2",children:[(0,n.jsx)(eK.Z,{}),(0,n.jsx)(eK.Z,{className:"w-3/4"}),(0,n.jsx)(eK.Z,{className:"w-1/2"})]}):C?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"px-3 flex flex-col gap-2",children:(0,n.jsx)(G.z,{type:"default",className:"mx-3 justify-start",onClick:()=>{handleNewQuery()},icon:(0,n.jsx)(tH.Z,{size:"tiny"}),children:"New query"})}),(0,n.jsxs)("div",{className:"space-y-6 px-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(tK.Z,{name:"Templates",isActive:s.asPath==="/project/".concat(t,"/sql/templates"),url:"/project/".concat(t,"/sql/templates")}),(0,n.jsx)(tK.Z,{name:"Quickstarts",isActive:s.asPath==="/project/".concat(t,"/sql/quickstarts"),url:"/project/".concat(t,"/sql/quickstarts")})]}),I.length>=1&&(0,n.jsxs)("div",{className:"editor-product-menu",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(v.ZP.Group,{title:"Favorites"}),(0,n.jsx)("button",{className:"flex items-center w-4 h-4 cursor-pointer mr-3",onClick:()=>{b(!j)},children:(0,n.jsx)(tx.Z,{className:(0,tG.cn)("w-4","h-4","cursor-pointer",j?"text-foreground":"text-foreground-lighter"),onClick:()=>{h(""),b(e=>!e)}})})]}),j&&(0,n.jsx)("div",{className:"pl-3 mb-2 mr-3",children:(0,n.jsx)(eg.Z,{autoFocus:!0,size:"tiny",icon:(0,n.jsx)(tx.Z,{size:"tiny"}),placeholder:"Filter",disabled:S,onChange:e=>h(e.target.value),value:p,onKeyDown:e=>{"Escape"===e.key&&(b(!1),h(""))},actions:p&&(0,n.jsx)(M.Z,{size:"tiny",className:"mr-2 cursor-pointer",onClick:()=>h("")})})}),L.length>0?(0,n.jsx)("div",{className:"space-y-1",children:L.map(e=>{let{id:t}=e||{};return(0,n.jsx)(SQLEditorLayout_QueryItem,{tabInfo:e},t)})}):(0,n.jsx)("div",{className:"text-foreground text-sm h-32 border border-dashed flex flex-col gap-3 items-center justify-center px-3 mx-3 rounded",children:(0,n.jsx)("span",{className:"text-foreground-lighter",children:"No queries found"})})]}),_.length>=1&&(0,n.jsxs)("div",{className:"editor-product-menu",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(v.ZP.Group,{title:"Project queries"}),(0,n.jsx)("button",{className:"flex items-center w-4 h-4 cursor-pointer mr-3",onClick:()=>{y(!f)},children:(0,n.jsx)(tx.Z,{className:(0,tG.cn)("w-4","h-4","cursor-pointer",f?"text-foreground":"text-foreground-lighter"),onClick:()=>{u(""),y(e=>!e)}})})]}),f&&(0,n.jsx)("div",{className:"pl-3 mb-2 mr-3",children:(0,n.jsx)(eg.Z,{autoFocus:!0,size:"tiny",icon:(0,n.jsx)(tx.Z,{size:"tiny"}),placeholder:"Filter",disabled:S,onChange:e=>u(e.target.value),value:d,onKeyDown:e=>{"Escape"===e.key&&(y(!1),u(""))},actions:d&&(0,n.jsx)(M.Z,{size:"tiny",className:"mr-2 cursor-pointer",onClick:()=>u("")})})}),E.length>0?(0,n.jsx)("div",{className:"space-y-1",children:E.map(e=>{let{id:t}=e||{};return(0,n.jsx)(SQLEditorLayout_QueryItem,{tabInfo:e},t)})}):(0,n.jsx)("div",{className:"text-foreground text-sm h-32 border border-dashed flex flex-col gap-3 items-center justify-center px-3 mx-3 rounded",children:(0,n.jsx)("span",{className:"text-foreground-lighter",children:"No queries found"})})]}),(0,n.jsxs)("div",{className:"editor-product-menu",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(v.ZP.Group,{title:"Your queries"}),(0,n.jsx)("button",{className:"flex items-center w-4 h-4 cursor-pointer mr-3",onClick:()=>{x(!g)},children:(0,n.jsx)(tx.Z,{className:(0,tG.cn)("w-4","h-4","cursor-pointer",g?"text-foreground":"text-foreground-lighter"),onClick:()=>{c(""),x(e=>!e)}})})]}),g&&(0,n.jsx)("div",{className:"pl-3 mb-2 mr-3",children:(0,n.jsx)(eg.Z,{autoFocus:!0,size:"tiny",icon:(0,n.jsx)(tx.Z,{size:"tiny"}),placeholder:"Filter",disabled:S,onChange:e=>c(e.target.value),value:o,onKeyDown:e=>{"Escape"===e.key&&(x(!1),c(""))},actions:o&&(0,n.jsx)(M.Z,{size:"tiny",className:"mr-2 cursor-pointer",onClick:()=>c("")})})}),P.length>0?(0,n.jsx)("div",{className:"space-y-1 pb-8",children:P.map(e=>{let{id:t}=e||{};return(0,n.jsx)(SQLEditorLayout_QueryItem,{tabInfo:e},t)})}):(0,n.jsxs)("div",{className:"text-foreground text-sm h-32 border border-dashed flex flex-col gap-3 items-center justify-center px-3 mx-3 rounded",children:[0===L.length&&(0,n.jsx)("span",{className:"text-foreground-lighter",children:"No queries found"}),(0,n.jsx)(G.z,{type:"default",onClick:()=>handleNewQuery(),children:"New Query"})]})]})]})]}):(0,n.jsx)("div",{})})})});var sd=(0,l.QO)(e=>{let{title:t,children:s}=e,a=(0,w.useMemo)(()=>(0,n.jsx)(sc,{},"sql-editor-menu"),[]);return(0,n.jsx)(s$,{title:t||"SQL",product:"SQL Editor",productMenu:a,isBlocking:!1,children:s})}),su=s(38421),sm=s.n(su),sp=(0,A.Pi)(e=>{let{heading:t,subheading:s,logoLinkToMarketingSite:a=!1,showHeadings:i=!0,children:r}=e,{resolvedTheme:o}=(0,tp.F)();return(0,n.jsxs)("div",{className:"flex-1 bg-background flex flex-col gap-8 lg:gap-16 xl:gap-32",children:[(0,n.jsx)("div",{className:"sticky top-0 mx-auto w-full max-w-7xl px-8 pt-6 sm:px-6 lg:px-8",children:(0,n.jsx)("nav",{className:"relative flex items-center justify-between sm:h-10",children:(0,n.jsx)("div",{className:"flex flex-shrink-0 flex-grow items-center lg:flex-grow-0",children:(0,n.jsx)("div",{className:"flex w-full items-center justify-between md:w-auto",children:(0,n.jsx)(g(),{href:a?"https://supabase.com":"/projects",children:(0,n.jsx)(sm(),{src:(null==o?void 0:o.includes("dark"))?"".concat(d.GW,"/img/supabase-dark.svg"):"".concat(d.GW,"/img/supabase-light.svg"),alt:"",height:24,width:120})})})})})}),(0,n.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,n.jsxs)("main",{className:"max-w-[448px] w-full flex flex-col px-5",children:[i&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl lg:text-3xl mt-8 mb-2",children:t}),(0,n.jsx)("h2",{className:"text-foreground-light text-sm",children:s})]}),r]})})]})}),sh=s(71751),SignInLayout_SignInLayout=e=>{let{heading:t,subheading:s,showDisclaimer:a=!0,logoLinkToMarketingSite:i=!1,children:o}=e,c=(0,r.useRouter)(),u=(0,e6.NL)(),{resolvedTheme:m}=(0,tp.F)(),p=(0,l.P5)("ongoingIncident");(0,w.useEffect)(()=>{sh.I8.initialize().then(async e=>{let{error:t}=e;if(t)return;let s=await (0,sh.hP)();if(s){let{data:e,error:t}=await sh.I8.mfa.getAuthenticatorAssuranceLevel();if(t)return;if(e){if("/sign-in-mfa"===c.pathname)return;if(e.currentLevel!==e.nextLevel){let e=(0,sh.lJ)("/sign-in-mfa");c.replace(e);return}}await u.resetQueries(),c.push((0,sh.nD)())}else{let e=(0,sh.lJ)("/sign-in");c.replace(e);return}}).catch(()=>{})},[]);let[h,x]=(0,w.useState)(null);return(0,w.useEffect)(()=>{let e=tN.UW[Math.floor(Math.random()*tN.UW.length)];x(e)},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col flex-1 bg-alternative",children:[(0,n.jsx)("div",{className:"absolute top-0 w-full px-8 mx-auto sm:px-6 lg:px-8 ".concat(p?"pt-16":"pt-6"),children:(0,n.jsxs)("nav",{className:"relative flex items-center justify-between sm:h-10",children:[(0,n.jsx)("div",{className:"flex items-center flex-grow flex-shrink-0 lg:flex-grow-0",children:(0,n.jsx)("div",{className:"flex items-center justify-between w-full md:w-auto",children:(0,n.jsx)(g(),{href:i?"https://supabase.com":"/projects",children:(0,n.jsx)(sm(),{src:(null==m?void 0:m.includes("dark"))?"".concat(d.GW,"/img/supabase-dark.svg"):"".concat(d.GW,"/img/supabase-light.svg"),alt:"Supabase Logo",height:24,width:120})})})}),(0,n.jsx)("div",{className:"items-center hidden space-x-3 md:ml-10 md:flex md:pr-4",children:(0,n.jsx)(G.z,{asChild:!0,type:"default",icon:(0,n.jsx)(eH.Z,{}),children:(0,n.jsx)(g(),{href:"https://supabase.com/docs",target:"_blank",rel:"noreferrer",children:"Documentation"})})})]})}),(0,n.jsxs)("div",{className:"flex flex-1",children:[(0,n.jsxs)("main",{className:"flex flex-col items-center flex-1 flex-shrink-0 px-5 pt-16 pb-8 border-r shadow-lg bg-background border-default",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col justify-center w-[330px] sm:w-[384px]",children:[(0,n.jsxs)("div",{className:"mb-10",children:[(0,n.jsx)("h1",{className:"mt-8 mb-2 text-2xl lg:text-3xl",children:t}),(0,n.jsx)("h2",{className:"text-sm text-foreground-light",children:s})]}),o]}),a&&(0,n.jsx)("div",{className:"sm:text-center",children:(0,n.jsxs)("p",{className:"text-xs text-foreground-lighter sm:mx-auto sm:max-w-sm",children:["By continuing, you agree to Supabase's"," ",(0,n.jsx)(g(),{href:"https://supabase.com/terms",className:"underline hover:text-foreground-light",children:"Terms of Service"})," ","and"," ",(0,n.jsx)(g(),{href:"https://supabase.com/privacy",className:"underline hover:text-foreground-light",children:"Privacy Policy"}),", and to receive periodic emails with updates."]})})]}),(0,n.jsx)("aside",{className:"flex-col items-center justify-center flex-1 flex-shrink hidden basis-1/4 xl:flex",children:null!==h&&(0,n.jsxs)("div",{className:"relative flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"absolute select-none -top-12 -left-11",children:(0,n.jsx)("span",{className:"text-[160px] leading-none text-foreground-muted/30",children:""})}),(0,n.jsx)("blockquote",{className:"z-10 max-w-lg text-3xl",children:h.text}),(0,n.jsxs)("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4",children:[(0,n.jsx)("img",{src:"https://supabase.com".concat(h.img_url),alt:h.handle,className:"w-12 h-12 rounded-full"}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("cite",{className:"not-italic font-medium text-foreground-light whitespace-nowrap",children:["@",h.handle]})})]})]})})]})]})})},sg=s(20069),sx=s(22354),sf=s(25618),sy=s(60240),sj=s(74246),sv=s(14385),sb=s(3051),sw=s(36179);async function createBucket(e){let{projectRef:t,id:s,isPublic:n,file_size_limit:a,allowed_mime_types:i}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let r=await (0,ta.v_)("".concat(d.T5,"/storage/").concat(t,"/buckets"),{id:s,public:n,file_size_limit:a,allowed_mime_types:i});if(r.error)throw r.error;return r}let useBucketCreateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,e6.NL)();return(0,se.D)(e=>createBucket(e),{async onSuccess(t,s,a){let{projectRef:i}=s;await n.invalidateQueries(sw.m.buckets(i)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?st.Am.error("Failed to create bucket: ".concat(e.message)):t(e,s,n)},...s})};var Storage_CreateBucketModal=e=>{var t;let{visible:s,onClose:a}=e,{ui:i}=(0,l.oR)(),{ref:o}=(0,m.UO)(),c=(0,r.useRouter)(),{mutate:u,isLoading:h}=useBucketCreateMutation({onSuccess:e=>{i.setNotification({category:"success",message:"Successfully created bucket ".concat(e.name)}),c.push("/project/".concat(o,"/storage/buckets/").concat(e.name)),a()}}),{data:x}=(0,sb.k)({projectRef:o},{enabled:d.Qy}),{value:f,unit:y}=(0,sv.K)(null!==(t=null==x?void 0:x.fileSizeLimit)&&void 0!==t?t:0),j="".concat(f," ").concat(y),[v,b]=(0,w.useState)(sj.b.BYTES),[N,S]=(0,w.useState)(!1),onSubmit=async e=>{if(!o)return console.error("Project ref is required");u({projectRef:o,id:e.name,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,sv.F)(e.formatted_size_limit,v):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null})};return(0,w.useEffect)(()=>{s&&(b(sj.b.BYTES),S(!1))},[s]),(0,n.jsx)(eP.C,{hideFooter:!0,visible:s,size:"medium",header:"Create storage bucket",onCancel:()=>a(),children:(0,n.jsx)(t6.Z,{validateOnBlur:!1,initialValues:{name:"",public:!1,file_size_limit:0,allowed_mime_types:"",has_file_size_limit:!1,formatted_size_limit:0},validate:e=>{let t={};return e.name||(t.name="Please provide a name for your bucket"),e.name&&e.name.endsWith(" ")&&(t.name="The name of the bucket cannot end with a whitespace"),e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),"public"===e.name&&(t.name='"public" is a reserved name. Please choose another name'),t},onSubmit:onSubmit,children:e=>{let{values:t}=e;return(0,n.jsxs)("div",{className:"space-y-4 py-4",children:[(0,n.jsxs)(eP.C.Content,{children:[(0,n.jsx)(eg.Z,{id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created.",descriptionText:"Only lowercase letters, numbers, dots, and hyphens"}),(0,n.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,n.jsx)(eL.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),t.public&&(0,n.jsxs)(eI.b,{title:"Public buckets are not protected",variant:"warning",withIcon:!0,children:[(0,n.jsx)("p",{className:"mb-2",children:"Users can read objects in public buckets without any authorization."}),(0,n.jsx)("p",{children:"Row level security (RLS) policies are still required for other operations such as object uploads and deletes."})]})]})]}),(0,n.jsxs)(sf.ZP,{open:N,onOpenChange:()=>S(!N),children:[(0,n.jsx)(sf.ZP.Trigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,n.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,n.jsx)(eS.Z,{size:18,strokeWidth:2,className:(0,p.default)("text-foreground-light",N&&"rotate-180")})]})}),(0,n.jsx)(sf.ZP.Content,{className:"py-4",children:(0,n.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eL.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,n.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,n.jsx)("div",{className:"col-span-8",children:(0,n.jsx)(eg.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,sv.F)(t.formatted_size_limit,v).toLocaleString()," bytes.")})}),(0,n.jsx)("div",{className:"col-span-4",children:(0,n.jsx)(sy.Z,{id:"size_limit_units",disabled:!1,value:v,onChange:b,children:Object.values(sj.b).map(e=>(0,n.jsx)(sy.Z.Option,{label:e,value:e,children:(0,n.jsx)("div",{children:e})},e))})}),d.Qy&&(0,n.jsx)("div",{className:"col-span-12",children:(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,n.jsx)(g(),{href:"/project/".concat(o,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",j,")"]})})]})]}),(0,n.jsx)(eg.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,n.jsx)("div",{className:"w-full border-t border-default !mt-0"}),(0,n.jsx)(eP.C.Content,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,n.jsx)(G.z,{type:"default",htmlType:"button",disabled:h,onClick:()=>a(),children:"Cancel"}),(0,n.jsx)(G.z,{type:"primary",htmlType:"submit",loading:h,disabled:h,children:"Save"})]})})]})}})})};async function updateBucket(e){let{projectRef:t,id:s,isPublic:n,file_size_limit:a,allowed_mime_types:i}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let r=await (0,ta.r$)("".concat(d.T5,"/storage/").concat(t,"/buckets/").concat(s),{public:n,file_size_limit:a,allowed_mime_types:i});if(r.error)throw r.error;return r}let useBucketUpdateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,e6.NL)();return(0,se.D)(e=>updateBucket(e),{async onSuccess(t,s,a){let{projectRef:i}=s;await n.invalidateQueries(sw.m.buckets(i)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?st.Am.error("Failed to update bucket: ".concat(e.message)):t(e,s,n)},...s})};var Storage_EditBucketModal=e=>{var t;let{visible:s,bucket:a,onClose:i}=e,{ui:r}=(0,l.oR)(),{ref:o}=(0,m.UO)(),{mutate:c,isLoading:u}=useBucketUpdateMutation({onSuccess:()=>{r.setNotification({category:"success",message:'Successfully updated bucket "'.concat(null==a?void 0:a.name,'"')}),i()}}),{data:h}=(0,sb.k)({projectRef:o},{enabled:d.Qy}),{value:x,unit:f}=(0,sv.K)(null!==(t=null==h?void 0:h.fileSizeLimit)&&void 0!==t?t:0),y="".concat(x," ").concat(f),[j,v]=(0,w.useState)(sj.b.BYTES),[b,N]=(0,w.useState)(!1),onSubmit=async e=>void 0===a?console.error("Bucket is required"):void 0===o?console.error("Project ref is required"):void c({projectRef:o,id:a.id,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,sv.F)(e.formatted_size_limit,j):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null});return(0,w.useEffect)(()=>{if(s){var e;let{unit:t}=(0,sv.K)(null!==(e=null==a?void 0:a.file_size_limit)&&void 0!==e?e:0);v(t),N(!1)}},[s]),(0,n.jsx)(eP.C,{hideFooter:!0,visible:s,size:"medium",header:'Edit bucket "'.concat(null==a?void 0:a.name,'"'),onCancel:i,children:(0,n.jsx)(t6.Z,{validateOnBlur:!1,initialValues:{},validate:e=>{let t={};return e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),t},onSubmit:onSubmit,children:e=>{let{values:t,resetForm:r}=e;return(0,w.useEffect)(()=>{if(s&&void 0!==a){var e,t,n;let{value:s}=(0,sv.K)(null!==(e=a.file_size_limit)&&void 0!==e?e:0),i={name:null!==(t=a.name)&&void 0!==t?t:"",public:a.public,file_size_limit:a.file_size_limit,allowed_mime_types:(null!==(n=a.allowed_mime_types)&&void 0!==n?n:[]).join(", "),has_file_size_limit:null!==a.file_size_limit,formatted_size_limit:null!=s?s:0};r({values:i,initialValues:i})}},[s]),(0,n.jsxs)("div",{className:"space-y-4 py-4",children:[(0,n.jsxs)(eP.C.Content,{children:[(0,n.jsx)(eg.Z,{disabled:!0,id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created."}),(0,n.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,n.jsx)(eL.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),(null==a?void 0:a.public)!==t.public&&(0,n.jsx)(eI.b,{title:(null==a?void 0:a.public)||!t.public?(null==a?void 0:a.public)&&!t.public?"Warning: Making bucket private":"":"Warning: Making bucket public",variant:"warning",withIcon:!0,children:(0,n.jsx)("p",{className:"mb-2",children:(null==a?void 0:a.public)||!t.public?(null==a?void 0:a.public)&&!t.public?'All objects in "'.concat(null==a?void 0:a.name,'" will be made private and will only be accessible via signed URLs or downloaded with the right authorisation headers'):"":'This will make all objects in the bucket "'.concat(null==a?void 0:a.name,'" public')})})]})]}),(0,n.jsxs)(sf.ZP,{open:b,onOpenChange:()=>N(!b),children:[(0,n.jsx)(sf.ZP.Trigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,n.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,n.jsx)(eS.Z,{size:18,strokeWidth:2,className:(0,p.default)("text-foreground-light",b&&"rotate-180")})]})}),(0,n.jsx)(sf.ZP.Content,{className:"py-4",children:(0,n.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eL.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,n.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,n.jsx)("div",{className:"col-span-8",children:(0,n.jsx)(eg.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,sv.F)(t.formatted_size_limit,j).toLocaleString()," bytes.")})}),(0,n.jsx)("div",{className:"col-span-4",children:(0,n.jsx)(sy.Z,{id:"size_limit_units",disabled:!1,value:j,onChange:v,children:Object.values(sj.b).map(e=>(0,n.jsx)(sy.Z.Option,{label:e,value:e,children:(0,n.jsx)("div",{children:e})},e))})}),d.Qy&&(0,n.jsx)("div",{className:"col-span-12",children:(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,n.jsx)(g(),{href:"/project/".concat(o,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",y,")"]})})]})]}),(0,n.jsx)(eg.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,n.jsx)("div",{className:"w-full border-t border-default !mt-0"}),(0,n.jsx)(eP.C.Content,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,n.jsx)(G.z,{type:"default",disabled:u,onClick:()=>i(),children:"Cancel"}),(0,n.jsx)(G.z,{type:"primary",htmlType:"submit",loading:u,disabled:u,children:"Save"})]})})]})}})})},sN=s(81787),sS=s(34291),sC=s.n(sS),StorageLayout_BucketRow=e=>{let{bucket:t,projectRef:s="",isSelected:a=!1,onSelectDeleteBucket:i=sC(),onSelectEditBucket:r=sC()}=e,o=(0,l.Xo)(tW.KA.STORAGE_ADMIN_WRITE,"*");return(0,n.jsxs)("div",{className:(0,p.default)("group flex items-center justify-between rounded-md",a&&"text-foreground bg-surface-100"),children:[(0,n.jsx)(g(),{href:"/project/".concat(s,"/storage/buckets/").concat(encodeURIComponent(t.id)),className:"py-1 px-3 w-full",children:(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-2 truncate w-full",children:[(0,n.jsx)("p",{className:"text-sm group-hover:text-foreground transition truncate ".concat(a?"text-foreground":"text-foreground-light"),title:t.name,children:t.name}),t.public&&(0,n.jsx)(b.Z,{color:"yellow",children:"Public"})]})}),o&&a?(0,n.jsxs)(ty.h_,{children:[(0,n.jsx)(ty.$F,{asChild:!0,children:(0,n.jsx)(G.z,{asChild:!0,type:"text",icon:(0,n.jsx)(eS.Z,{size:"tiny",strokeWidth:2,className:"text-foreground-light"}),className:"mr-1 p-0.5",children:(0,n.jsx)("span",{})})}),(0,n.jsxs)(ty.AW,{side:"bottom",align:"start",children:[(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:()=>r(t),children:[(0,n.jsx)(t$.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Edit bucket"})]},"toggle-private"),(0,n.jsx)(ty.VD,{}),(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:()=>i(t),children:[(0,n.jsx)(t1.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Delete bucket"})]},"delete-bucket")]})]}):(0,n.jsx)("div",{className:"w-5"})]},t.id)},sk=(0,A.Pi)(()=>{let e=(0,r.useRouter)(),{ref:t,bucketId:s}=(0,m.UO)(),a=(0,l.Vm)(),i=(null==a?void 0:a.parent_project_ref)!==void 0,[o,c]=(0,w.useState)(!1),[d,u]=(0,w.useState)(),[p,h]=(0,w.useState)(),x=(0,l.Xo)(tW.KA.STORAGE_ADMIN_WRITE,"*"),f=e.pathname.split("/")[4],{data:y,error:j,isLoading:b,isError:N,isSuccess:S}=(0,ey.K)({projectRef:t}),C=null!=y?y:[],k=(null==j?void 0:j.message.includes("Tenant config"))&&i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.ZP,{type:"pills",className:"my-6 flex flex-grow flex-col px-5",children:[(0,n.jsx)("div",{className:"mb-6 px-2",children:(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{className:"w-full",children:(0,n.jsx)(G.z,{block:!0,type:"default",icon:(0,n.jsx)("div",{className:"text-foreground-lighter",children:(0,n.jsx)(sx.Z,{size:14})}),disabled:!x,style:{justifyContent:"start"},onClick:()=>c(!0),children:"New bucket"})}),!x&&(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create buckets"})})]})})]})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(v.ZP.Group,{title:"All buckets"}),b&&(0,n.jsxs)("div",{className:"space-y-2 mx-2",children:[(0,n.jsx)(eK.Z,{className:"!py-2.5"}),(0,n.jsx)(eK.Z,{className:"!py-2.5"}),(0,n.jsx)(eK.Z,{className:"!py-2.5"})]}),N&&(0,n.jsx)("div",{className:"px-2",children:(0,n.jsxs)(eE.bZ,{variant:k?"default":"warning",children:[(0,n.jsx)(eE.Cd,{className:"text-xs tracking-normal",children:k?"Storage is not available on preview branches for now":"Failed to fetch buckets"}),(0,n.jsx)(eE.X,{className:"text-xs",children:k?"We're actively looking into making this available on preview branches":"Please refresh to try again"})]})}),S&&(0,n.jsxs)(n.Fragment,{children:[0===C.length&&(0,n.jsx)("div",{className:"px-2",children:(0,n.jsx)(eI.b,{title:"No buckets available",children:"Buckets that you create will appear here"})}),C.map((e,a)=>{let i=s===e.id;return(0,n.jsx)(StorageLayout_BucketRow,{bucket:e,projectRef:t,isSelected:i,onSelectDeleteBucket:()=>h(e),onSelectEditBucket:()=>u(e)},"".concat(a,"_").concat(e.id))})]})]}),(0,n.jsx)("div",{className:"h-px w-full bg-border"}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(v.ZP.Group,{title:"Configuration"}),(0,n.jsx)(g(),{href:"/project/".concat(t,"/storage/policies"),legacyBehavior:!0,children:(0,n.jsx)(v.ZP.Item,{rounded:!0,active:"policies"===f,children:(0,n.jsx)("p",{className:"truncate",children:"Policies"})})})]})]})]}),(0,n.jsx)(Storage_CreateBucketModal,{visible:o,onClose:()=>c(!1)}),(0,n.jsx)(Storage_EditBucketModal,{visible:void 0!==d,bucket:d,onClose:()=>u(void 0)}),(0,n.jsx)(sN.Iw,{visible:void 0!==p,bucket:p,onClose:()=>h(void 0)})]})}),s_=(0,l.QO)(e=>{let{title:t,children:s}=e,{ui:a}=(0,l.oR)(),{ref:i}=(0,es.UO)(),r=(0,l.Vm)(),o=(0,sg.HN)(),{data:c,isLoading:u}=(0,ea.q)({projectRef:i}),m=null==c?void 0:c.autoApiService,p=(null==r?void 0:r.status)===d.S.INACTIVE;(0,w.useEffect)(()=>{!u&&m&&initializeStorageStore(m)},[u,i]);let initializeStorageStore=async e=>{p||(e.endpoint?o.initStore(i,e.endpoint,e.serviceApiKey,e.protocol):a.setNotification({category:"error",message:"Failed to fetch project configuration. Try refreshing your browser, or reach out to us at support@supabase.io"}),o.setLoaded(!0))};return(0,n.jsx)(s$,{title:t||"Storage",product:"Storage",productMenu:(0,n.jsx)(sk,{}),children:s})}),sE=s(97131),sP=s(96795),sI=s.n(sP),sL=s(56173),sA=s(54554),sT=s(50932),sR=s(12752),sD=s(24435),sz=s(99033),sZ=s(44389),sF=s(84444),sO=s(72275),sU=s(46782),sM=s.n(sU),sB=s(90286),sq=s.n(sB),sW=s(96143),sH=s(90507),sG=s(5835),sV=s(48256),sQ=s(90948),TableEditorLayout_EntityListItem=e=>{var t,s,a,i,r,o,c,u;let{id:h,projectRef:x,item:f,isLocked:y}=e,{ui:j}=(0,l.oR)(),{project:v}=(0,tw.d2)(),b=(0,sZ._2)(),w=Number(h)===f.id,exportTableAsCSV=async()=>{if(m.Qy&&!(null==v?void 0:v.connectionString))return console.error("Connection string is required");let e=j.setNotification({category:"loading",message:"Exporting ".concat(f.name," as CSV...")});try{var t;let s=await (0,sQ.hC)({id:f.id,projectRef:x,connectionString:null==v?void 0:v.connectionString}),n=s&&(0,sH.NK)({table:s,columns:null!==(t=s.columns)&&void 0!==t?t:[],primaryKeys:s.primary_keys,relationships:s.relationships},[]),a=await (0,sV.wF)({projectRef:x,connectionString:null==v?void 0:v.connectionString,table:n}),i=a.map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));if(i.length>0){let e=sq().unparse(i,{columns:n.columns.map(e=>e.name)}),t=new Blob([e],{type:"text/csv;charset=utf-8;"});sM()(t,"".concat(f.name,"_rows.csv"))}j.setNotification({id:e,category:"success",message:"Successfully exported ".concat(f.name," as CSV")})}catch(t){j.setNotification({id:e,category:"error",message:"Failed to export table: ".concat(t.message)})}};return(0,n.jsxs)("div",{className:(0,p.default)("group flex items-center justify-between rounded-md",w&&"text-foreground bg-surface-200"),children:[(0,n.jsxs)(g(),{href:"/project/".concat(x,"/editor/").concat(f.id),className:"flex items-center py-1 px-3 w-full space-x-3 max-w-[90%]",children:[(0,n.jsxs)(tu.fC,{delayDuration:0,disableHoverableContent:!0,children:[(0,n.jsx)(tu.xz,{className:"flex items-center",children:f.type===sG.l.TABLE?(0,n.jsx)(K.Z,{className:"table-icon",src:"".concat(d.GW,"/img/icons/table-icon.svg"),style:{width:"16px",height:"16px",strokeWidth:"1px"},preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}):f.type===sG.l.VIEW?(0,n.jsx)(K.Z,{className:"view-icon",src:"".concat(d.GW,"/img/icons/view-icon.svg"),style:{width:"16px",height:"16px",strokeWidth:"1px"},preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}):(0,n.jsx)("div",{className:(0,p.default)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",f.type===sG.l.FOREIGN_TABLE&&"text-yellow-900 bg-yellow-500",f.type===sG.l.MATERIALIZED_VIEW&&"text-purple-1000 bg-purple-500",f.type===sG.l.PARTITIONED_TABLE&&"text-foreground-light bg-border-stronger"),children:null===(a=Object.entries(sG.l).find(e=>{let[,t]=e;return t===f.type}))||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toUpperCase()})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground capitalize",children:(i=f.type,null===(u=Object.entries(sG.l).find(e=>{let[,t]=e;return t===i}))||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(o=c.toLowerCase())||void 0===o?void 0:null===(r=o.split("_"))||void 0===r?void 0:r.join(" "))})})]})})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition max-w-[85%] overflow-hidden text-ellipsis whitespace-nowrap",children:f.name.length>20?(0,n.jsxs)(tu.fC,{delayDuration:0,disableHoverableContent:!0,children:[(0,n.jsx)(tu.xz,{className:"max-w-[95%] overflow-hidden text-ellipsis whitespace-nowrap",children:f.name}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:f.name})})]})})]}):f.name})]}),(0,n.jsx)("div",{className:"pr-3",children:f.type===sG.l.TABLE&&w&&!y&&(0,n.jsxs)(ty.h_,{children:[(0,n.jsx)(ty.$F,{children:(0,n.jsx)("div",{className:"text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(eS.Z,{size:14,strokeWidth:2})})}),(0,n.jsxs)(ty.AW,{side:"bottom",align:"start",children:[(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),b.onEditTable()},children:[(0,n.jsx)(sx.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Edit Table"})]},"edit-table"),(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),b.onDuplicateTable()},children:[(0,n.jsx)(ex.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Duplicate Table"})]},"duplicate-table"),(0,n.jsx)(ty.Xi,{className:"space-x-2",asChild:!0,children:(0,n.jsxs)(g(),{href:"/project/".concat(x,"/auth/policies?schema=").concat(b.selectedSchemaName,"&search=").concat(f.id),children:[(0,n.jsx)(sW.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"View Policies"})]},"view-policies")},"delete-table"),(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),exportTableAsCSV()},children:[(0,n.jsx)(ep.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Export as CSV"})]},"download-table-csv"),(0,n.jsx)(ty.VD,{}),(0,n.jsxs)(ty.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),b.onDeleteTable()},children:[(0,n.jsx)(t1.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Delete Table"})]},"delete-table")]})]})})]})},TableEditorLayout_TableEditorMenu=()=>{var e,t,s,a;let{id:i}=(0,m.UO)(),r=(0,sZ._2)(),[o,c]=(0,w.useState)(!1),[d,u]=(0,w.useState)(""),[p,h]=(0,l._)("table-editor-sort","alphabetical"),{project:g}=(0,tw.d2)(),{data:x,isLoading:f,isSuccess:y,isError:j,error:v,refetch:b,isRefetching:N,hasNextPage:S,isFetchingNextPage:C,fetchNextPage:k,isPreviousData:_}=(0,sD.H)({projectRef:null==g?void 0:g.ref,connectionString:null==g?void 0:g.connectionString,schema:r.selectedSchemaName,search:d||void 0,sort:p},{keepPreviousData:!0}),E=null==x?void 0:null===(e=x.pages)||void 0===e?void 0:e[0].data.count,P=(0,w.useMemo)(()=>null==x?void 0:x.pages.flatMap(e=>e.data.entities),[null==x?void 0:x.pages]),{data:I}=(0,sR.Q1)({projectRef:null==g?void 0:g.ref,connectionString:null==g?void 0:g.connectionString}),L=null==I?void 0:I.find(e=>e.name===r.selectedSchemaName),A=(0,l.Xo)(tW.KA.TENANT_SQL_ADMIN_WRITE,"tables"),refreshTables=async()=>{await b()},[T]=sI()((null!=I?I:[]).sort((e,t)=>e.name.localeCompare(t.name)),e=>{var t;return sz.F.includes(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"")}),R=T.some(e=>e.id===(null==L?void 0:L.id));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"pt-5 flex flex-col flex-grow space-y-4 h-full",style:{maxHeight:"calc(100vh - 48px)"},children:[(0,n.jsx)(sT.Z,{className:"mx-4",selectedSchemaName:r.selectedSchemaName,onSelectSchema:e=>{u(""),r.setSelectedSchemaName(e)},onSelectCreateSchema:()=>r.onAddSchema()}),(0,n.jsxs)("div",{className:"space-y-1 mx-4",children:[R?(0,n.jsxs)(eE.bZ,{children:[(0,n.jsx)(eE.Cd,{className:"text-xs tracking-normal",children:"Viewing protected schema"}),(0,n.jsxs)(eE.X,{className:"text-xs",children:[(0,n.jsx)("p",{className:"mb-2",children:"This schema is managed by Supabase and is read-only through the table editor"}),(0,n.jsx)(G.z,{type:"default",size:"tiny",onClick:()=>c(!0),children:"Learn more"})]})]}):(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(tu.xz,{className:"w-full",children:(0,n.jsx)(G.z,{asChild:!0,block:!0,disabled:!A,size:"tiny",icon:(0,n.jsx)("div",{className:"text-foreground-lighter",children:(0,n.jsx)(sx.Z,{size:14,strokeWidth:1.5})}),type:"default",style:{justifyContent:"start"},onClick:r.onAddTable,children:(0,n.jsx)("span",{children:"New table"})})}),!A&&(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create tables"})})]})})]}),(0,n.jsx)("div",{className:"mb-2 block",children:(0,n.jsx)(eg.Z,{className:"table-editor-search border-none",icon:_?(0,n.jsx)(e2.Z,{className:"animate-spin text-foreground-lighter",size:12,strokeWidth:1.5}):(0,n.jsx)(tx.Z,{className:"text-foreground-lighter",size:12,strokeWidth:1.5}),placeholder:"Search tables",onChange:e=>u(e.target.value.trim()),value:d,size:"tiny",actions:d&&(0,n.jsx)(G.z,{size:"tiny",type:"text",onClick:()=>u(""),children:(0,n.jsx)(M.Z,{size:12,strokeWidth:2})})})})]}),(0,n.jsxs)("nav",{className:"flex flex-auto flex-col gap-2 pb-4 px-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between w-full px-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm text-foreground-lighter",children:[(0,n.jsx)("p",{children:"Tables"}),void 0!==E&&(0,n.jsxs)("p",{style:{fontVariantNumeric:"tabular-nums"},children:["(",E,")"]})]}),(0,n.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,n.jsxs)(ty.h_,{children:[(0,n.jsxs)(tu.fC,{delayDuration:0,children:[(0,n.jsx)(ty.$F,{asChild:!0,children:(0,n.jsx)(tu.xz,{children:(0,n.jsx)("div",{className:"text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(sF.Z,{size:18,strokeWidth:1})})})}),(0,n.jsx)(tu.h_,{children:(0,n.jsxs)(tu.VY,{side:"bottom",children:[(0,n.jsx)(tu.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs",children:"Sort By"})})]})})]}),(0,n.jsx)(ty.AW,{side:"bottom",align:"start",className:"w-48",children:(0,n.jsxs)(ty._x,{value:p,onValueChange:e=>h(e),children:[(0,n.jsx)(ty.qB,{value:"alphabetical",children:"Alphabetical"},"alphabetical"),(0,n.jsx)(ty.qB,{value:"grouped-alphabetical",children:"Entity Type"},"grouped-alphabetical")]})})]}),(0,n.jsx)("button",{className:"cursor-pointer text-foreground-lighter transition-colors hover:text-foreground",onClick:refreshTables,children:(0,n.jsx)(sO.Z,{className:N?"animate-spin":"",size:14})})]})]}),f&&(0,n.jsxs)("div",{className:"flex flex-col px-2 gap-1 pb-4",children:[(0,n.jsx)(eK.Z,{className:"w-full h-7 rounded-md",delayIndex:0}),(0,n.jsx)(eK.Z,{className:"w-full h-7 rounded-md",delayIndex:1}),(0,n.jsx)(eK.Z,{className:"w-full h-7 rounded-md",delayIndex:2})]}),j&&(0,n.jsx)(eQ.Z,{error:null!=v?v:null,subject:"Failed to retrieve tables"}),y&&(0,n.jsxs)(n.Fragment,{children:[0===d.length&&(null!==(t=null==P?void 0:P.length)&&void 0!==t?t:0)<=0&&(0,n.jsxs)("div",{className:"mx-2 my-2 space-y-1 rounded-md border border-muted bg-surface-100 py-3 px-4",children:[(0,n.jsx)("p",{className:"text-xs",children:"No entities available"}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"This schema has no entities available yet"})]}),d.length>0&&(null!==(s=null==P?void 0:P.length)&&void 0!==s?s:0)<=0&&(0,n.jsxs)("div",{className:"mx-2 my-2 space-y-1 rounded-md border border-muted bg-surface-100 py-3 px-4",children:[(0,n.jsx)("p",{className:"text-xs",children:"No results found"}),(0,n.jsxs)("p",{className:"text-xs text-foreground-light",children:['Your search for "',d,'" did not return any results']})]}),(null!==(a=null==P?void 0:P.length)&&void 0!==a?a:0)>0&&(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(sA.Z,{items:P,ItemComponent:TableEditorLayout_EntityListItem,itemProps:{projectRef:null==g?void 0:g.ref,id:Number(i)},getItemSize:()=>28,hasNextPage:S,isLoadingNextPage:C,onLoadNextPage:()=>k()})})]})]})]}),(0,n.jsx)(sL.b,{visible:o,onClose:()=>c(!1)})]})},sK=(0,A.Pi)(e=>{let{children:t}=e,s=(0,l.Xo)(tW.KA.TENANT_SQL_ADMIN_READ,"tables"),a=(0,l.N4)(),i=(0,w.useMemo)(()=>(0,n.jsx)(TableEditorLayout_TableEditorMenu,{}),[]);return a&&!s?(0,n.jsx)(tM,{isBlocking:!1,children:(0,n.jsx)(sE.Z,{isFullPage:!0,resourceText:"view tables from this project"})}):(0,n.jsx)(tM,{product:"Table Editor",productMenu:i,isBlocking:!1,children:t})});s(63285);var sY=s(79569);let WizardLayout=e=>{let{organization:t,project:s,children:a}=e,i=(0,l.P5)("ongoingIncident"),r=i?"calc(100vh - 44px)":"100vh";return(0,n.jsxs)("div",{className:"flex w-full flex-col",style:{height:r,maxHeight:r},children:[(0,n.jsx)(Header,{organization:t,project:s}),(0,n.jsx)("div",{className:"overflow-auto",children:(0,n.jsx)("section",{className:"has-slide-in slide-in relative mx-auto my-10 max-w-2xl",children:a})})]})};var sJ=(0,l.QO)((0,A.Pi)(WizardLayout));let sX=(0,A.Pi)(WizardLayout),Header=e=>{let{organization:t,project:s}=e,a=t?1:s?2:0;return(0,n.jsx)("div",{className:"border-b p-3 border-default",children:(0,n.jsx)("div",{className:"PageHeader",children:(0,n.jsxs)("div",{className:"Breadcrumbs flex justify-between",children:[(0,n.jsx)("div",{className:"flex items-center text-sm",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(g(),{href:"/projects",children:(0,n.jsx)("img",{src:"".concat(d.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"rounded border p-1 hover:border-white border-default",style:{height:24}})}),(0,n.jsx)(sY.Z,{size:"small",className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm",children:t?"Organization: ".concat(t.name):"Create an organization"}),(0,n.jsx)(sY.Z,{size:"small",className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm ".concat(a<1?"text-foreground-light":""),children:s?s.name:"Create a new project"}),(0,n.jsx)(sY.Z,{size:"small",className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm ".concat(a<2?"text-foreground-light":""),children:s?s.name:"Extend your database"})]})}),(0,n.jsx)("div",{className:"flex"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.Z,{}),(0,n.jsx)(R.Z,{})]})]})})})};var s$=ProjectLayout},92042:function(e,t,s){var n=s(52322),a=s(38183),i=s(46732);t.Z=()=>(0,n.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center",children:[(0,n.jsx)(a.Z,{src:"".concat(i.GW,"/img/no-search-results.svg"),preProcessor:e=>e.replace(/svg/,'svg className="mb-2 w-16 h-16 text-color-inherit"')}),(0,n.jsx)("p",{className:"w-64 text-center text-sm opacity-50",children:"Hmm, we couldn't find any results that match your query."})]})},82042:function(e,t,s){var n=s(52322),a=s(24990),i=s(94580),r=s(63157);t.Z=e=>{let{title:t="",size:s="medium",children:o,ctaButtonLabel:l="",infoButtonLabel:c="",infoButtonUrl:d="",onClickCta:u=()=>{},loading:m=!1,disabled:p=!1,disabledMessage:h=""}=e;return(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)("div",{className:"flex space-x-4 rounded border border-overlay bg-surface-100 p-6 shadow-md",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"".concat("medium"===s?"w-80":"w-[400px]"," space-y-4"),children:[(0,n.jsx)("h5",{children:t}),(0,n.jsx)("div",{className:"flex flex-col space-y-2",children:o}),(l&&u||d&&c)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&u&&(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{asChild:!0,children:(0,n.jsx)(i.z,{type:"primary",onClick:u,loading:m,disabled:m||p,children:l})}),p&&h.length>0&&(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:h})})]})})]}),d&&c?(0,n.jsx)(i.z,{type:"default",icon:(0,n.jsx)(r.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:d,children:c})}):null]})]})})})})}},33952:function(e,t,s){var n=s(52322),a=s(84501),i=s.n(a),r=s(65336),o=s(71830),l=s(2784),c=s(94580),d=s(71813);let u=/{([\d,-]+)}/,m={defaultLanguage:"js"};t.Z=e=>{var t,s;let{children:a,className:p,metastring:h,showCopy:g=!0}=e,[x,f]=(0,l.useState)(!1),y=(0,l.useRef)(null);(0,l.useRef)(null);let j=[];if(h&&u.test(h)){let e=null===(t=h.match(u))||void 0===t?void 0:t[1];e&&(j=i()(e).filter(e=>e>0))}(0,l.useEffect)(()=>{if(!x)return;let e=setTimeout(()=>f(!1),2e3);return()=>clearTimeout(e)},[x]);let v=p&&p.replace(/language-/,"");!v&&m.defaultLanguage&&(v=m.defaultLanguage);let handleCopyCode=e=>{(0,d.vQ)(e,()=>f(!0))};return(0,n.jsx)(r.ZP,{...r.lG,theme:m.theme||o.Z,code:null!==(s=null==a?void 0:a.trim())&&void 0!==s?s:"",language:v,children:e=>{let{className:t,tokens:s,getLineProps:i,getTokenProps:r}=e;return(0,n.jsxs)("div",{className:"Code codeBlockWrapper group",children:[(0,n.jsx)("pre",{ref:y,className:"codeBlock ".concat(t),children:s.map((e,t)=>{let s=i({line:e,key:t});return j.includes(t+1)&&(s.className="".concat(s.className," docusaurus-highlight-code-line")),(0,n.jsx)("div",{...s,children:e.map((e,t)=>(0,n.jsx)("span",{...r({token:e,key:t})},t))},t)})}),g&&(0,n.jsx)("div",{className:"invisible absolute right-0 top-0 opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",children:(0,n.jsx)(c.z,{size:"tiny",type:"default",onClick:()=>handleCopyCode(a),children:x?"Copied":"Copy"})})]})}})}},19191:function(e,t,s){s.d(t,{De:function(){return a},Eb:function(){return c},Qo:function(){return n},R9:function(){return l},Ye:function(){return i},fh:function(){return o},l6:function(){return d},sd:function(){return r}});let n={WEEK:604800,MONTH:2592e3,YEAR:31536e3},a={COLUMNS:"COLUMNS",LIST:"LIST"},i={NAME:"name",UPDATED_AT:"updated_at",CREATED_AT:"created_at",LAST_ACCESSED_AT:"last_accessed_at"},r={ASC:"asc",DESC:"desc"},o={BUCKET:"BUCKET",FILE:"FILE",FOLDER:"FOLDER"},l={READY:"READY",LOADING:"LOADING",EDITING:"EDITING"},c={upload:["INSERT"],download:["SELECT"],list:["SELECT"],update:["SELECT","UPDATE"],move:["SELECT","UPDATE"],copy:["SELECT","INSERT"],remove:["SELECT","DELETE"],createSignedUrl:["SELECT"],createSignedUrls:["SELECT"],getPublicUrl:[]},d={STORAGE_COLUMN:"STORAGE_COLUMN",STORAGE_ITEM:"STORAGE_ITEM",STORAGE_FOLDER:"STORAGE_FOLDER"}},74246:function(e,t,s){var n,a;s.d(t,{H:function(){return i},b:function(){return n}});let i=5368709120;(a=n||(n={})).BYTES="bytes",a.KB="KB",a.MB="MB",a.GB="GB"},14385:function(e,t,s){s.d(t,{F:function(){return convertToBytes},K:function(){return convertFromBytes}});var n=s(74246);let convertFromBytes=(e,t)=>{if(e<=0)return{value:0,unit:n.b.BYTES};let s=void 0!==t?Object.values(n.b).indexOf(t):Math.floor(Math.log(e)/Math.log(1024)),a=void 0!==t?s<0?0:s:s>3?3:s,i=Object.values(n.b)[a];return{value:e/Math.pow(1024,a),unit:i}},convertToBytes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.b.BYTES,s=Object.values(n.b).indexOf(t);return e<0||s<0?0:e*Math.pow(1024,s)}},81787:function(e,t,s){s.d(t,{Iw:function(){return Storage_DeleteBucketModal},cm:function(){return eF},S:function(){return StoragePolicies_StoragePolicies},cx:function(){return StorageSettings_StorageSettings}});var n=s(52322),a=s(60674),i=s(60417),r=s.n(i),o=s(72579),l=s.n(o),c=s(45455),d=s.n(c),u=s(84636),m=s.n(u),p=s(46776),h=s(2784),g=s(96029),x=s(13813),f=s(89465),y=s(46732),j=s(71813),v=s(20069),b=s(19191),w=s(34291),N=s.n(w),S=s(1681),C=s(94580),k=s(73205),StorageExplorer_ConfirmDeleteModal=e=>{let{visible:t=!1,selectedItemsToDelete:s=[],onSelectCancel:a=N(),onSelectDelete:i=N()}=e,[r,o]=(0,h.useState)(!1);(0,h.useEffect)(()=>{o(!1)},[t]);let l=s.length>1,c=l?"Confirm deletion of ".concat(s.length," items"):1===s.length?"Confirm deletion of ".concat(s[0].name):"",d=l?"Are you sure you want to delete the selected ".concat(s.length," items?"):1===s.length?"Are you sure you want to delete the selected ".concat(s[0].type.toLowerCase(),"?"):"";return(0,n.jsx)(S.C,{visible:t,header:(0,n.jsx)("span",{className:"break-words",children:c}),size:"medium",onCancel:a,customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(C.z,{type:"default",disabled:r,onClick:a,children:"Cancel"}),(0,n.jsx)(C.z,{type:"danger",disabled:r,loading:r,onClick:()=>{o(!0),i()},children:r?"Deleting":"Delete"})]}),children:(0,n.jsx)(S.C.Content,{children:(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(k.b,{withIcon:!0,variant:"danger",title:"This action cannot be undone.",children:d})})})})},_=s(28879),E=s.n(_),P=s(57463),I=s(31915),L=s(60240);let A={days:86400,weeks:604800,months:2592e3,years:31536e3};var T=(0,p.Pi)(e=>{let{onCopyUrl:t}=e,s=(0,v.HN)(),{getFileUrl:a,selectedFileCustomExpiry:i,setSelectedFileCustomExpiry:r}=s,o=void 0!==i,onClose=()=>r(void 0);return(0,n.jsx)(S.C,{hideFooter:!0,size:"small",header:"Custom expiry for signed URL",visible:o,alignFooter:"right",confirmText:"Get URL",onCancel:()=>onClose(),children:(0,n.jsx)(P.Z,{validateOnBlur:!0,initialValues:{expiresIn:"",units:"days"},onSubmit:async(e,s)=>{let{setSubmitting:n}=s;n(!0),t(i.name,await a(i,e.expiresIn*A[e.units])),n(!1),onClose()},validate:e=>{let t={};return""!==e.expiresIn&&e.expiresIn<=0&&(t.expiresIn="Expiry duration cannot be less than 0"),t},children:e=>{let{values:t,isSubmitting:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-4 pb-2",children:(0,n.jsxs)(S.C.Content,{children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-2",children:"Enter the duration for which the URL will be valid for:"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(I.Z,{disabled:s,type:"number",id:"expiresIn",className:"w-full"}),(0,n.jsxs)(L.Z,{id:"units",className:"w-[150px]",children:[(0,n.jsx)(L.Z.Option,{id:"days",label:"days",value:"days",children:"days"}),(0,n.jsx)(L.Z.Option,{id:"weeks",label:"weeks",value:"weeks",children:"weeks"}),(0,n.jsx)(L.Z.Option,{id:"months",label:"months",value:"months",children:"months"}),(0,n.jsx)(L.Z.Option,{id:"years",label:"years",value:"years",children:"years"})]})]}),""!==t.expiresIn&&(0,n.jsxs)("p",{className:"text-sm text-foreground-light mt-2",children:["URL will expire on"," ",E()().add(t.expiresIn,t.units).format(y.Cu)]})]})}),(0,n.jsx)(S.C.Separator,{}),(0,n.jsx)(S.C.Content,{children:(0,n.jsxs)("div",{className:"flex items-center justify-end space-x-2 pt-1 pb-3",children:[(0,n.jsx)(C.z,{type:"default",onClick:()=>onClose(),children:"Cancel"}),(0,n.jsx)(C.z,{disabled:""===t.expiresIn||s,loading:s,htmlType:"submit",type:"primary",children:"Get signed URL"})]})})]})}})})}),R=s(71623);s(74752);var D=s(59491),z=s(49097),Z=s(79569),F=s(22354),O=s(97607),U=s(97265),IconMove_IconMove=function(e){return(0,n.jsx)(U.Z,{icon:O.Z,...e})},M=s(46469),B=s(70696),IconTrash2_IconTrash2=function(e){return(0,n.jsx)(U.Z,{icon:B.Z,...e})},q=(0,p.Pi)(e=>{let{id:t="",onCopyUrl:s=N()}=e,a=(0,v.HN)(),{getFileUrl:i,downloadFile:r,selectedBucket:o,setSelectedItemsToDelete:l,setSelectedItemToRename:c,setSelectedItemsToMove:d,setSelectedFileCustomExpiry:u}=a,m=o.public,p=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*"),onHandleClick=async(e,t,n)=>{if(!t.isCorrupted)switch(e){case"copy":if(void 0!==n&&n<0)return u(t);return s(t.name,await i(t,n));case"rename":return c(t);case"move":return d([t]);case"download":return await r(t)}};return(0,n.jsxs)(R.v2,{id:t,animation:"fade",children:[m?(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("copy",t.item)},children:[(0,n.jsx)(z.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Get URL"})]}):(0,n.jsxs)(R.rS,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(z.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"text-xs",children:"Get URL"})]}),arrow:(0,n.jsx)(Z.Z,{size:"tiny"}),children:[(0,n.jsx)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("copy",t.item,b.Qo.WEEK)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 week"})}),(0,n.jsx)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("copy",t.item,b.Qo.MONTH)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 month"})}),(0,n.jsx)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("copy",t.item,b.Qo.YEAR)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 year"})}),(0,n.jsx)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("copy",t.item,-1)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Custom expiry"})})]}),p&&[(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("rename",t.item)},children:[(0,n.jsx)(F.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]},"rename-file"),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("move",t.item)},children:[(0,n.jsx)(IconMove_IconMove,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Move"})]},"move-file"),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onHandleClick("download",t.item)},children:[(0,n.jsx)(M.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]},"download-file"),(0,n.jsx)(R.Z0,{},"file-separator"),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return l([t.item])},children:[(0,n.jsx)(IconTrash2_IconTrash2,{size:"tiny",stroke:"red"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete-file")]]})}),W=s(62202);let copyPathToFolder=(e,t)=>{let s=e.slice(0,t.columnIndex).map(e=>e.name),n=s.length>0?"".concat(s.join("/"),"/").concat(t.name):t.name;(0,j.vQ)(n),W.ZP.success('Copied path to folder "'.concat(t.name,'"'))};var StorageExplorer_FolderContextMenu=e=>{let{id:t=""}=e,s=(0,v.HN)(),{openedFolders:a,downloadFolder:i,setSelectedItemToRename:r,setSelectedItemsToDelete:o}=s,l=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*");return(0,n.jsxs)(R.v2,{id:t,animation:"fade",children:[l&&(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return r(t.item)},children:[(0,n.jsx)(F.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]}),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return i(t.item)},children:[(0,n.jsx)(M.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]}),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return copyPathToFolder(a,t.item)},children:[(0,n.jsx)(z.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Copy path to folder"})]}),l&&[(0,n.jsx)(R.Z0,{},"separator"),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return o([t.item])},children:[(0,n.jsx)(IconTrash2_IconTrash2,{size:"tiny",stroke:"red"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete")]]})},H=s(78027),IconFolderPlus_IconFolderPlus=function(e){return(0,n.jsx)(U.Z,{icon:H.Z,...e})},G=s(77784),V=s(84444),Q=s(93471),IconChevronsUp_IconChevronsUp=function(e){return(0,n.jsx)(U.Z,{icon:Q.Z,...e})},StorageExplorer_ColumnContextMenu=e=>{let{id:t=""}=e,s=(0,v.HN)(),{columns:a,selectedItems:i,setSelectedItems:o,setView:l,setSortBy:c,setSortByOrder:d,addNewFolderPlaceholder:u}=s,onSelectCreateFolder=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;u(e)},onSelectAllItemsInColumn=e=>{let t=a[e].items.filter(e=>e.type===b.fh.FILE).map(t=>({...t,columnIndex:e})),s=r()(t.map(e=>e.id)),n=i.filter(e=>s.includes(e.id));if(n.length===t.length){let e=i.filter(e=>!s.includes(e.id));o(e)}else{let e=m()(i.concat(t),"id");o(e)}};return(0,n.jsxs)(R.v2,{id:t,animation:"fade",children:[(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onSelectCreateFolder(t.index)},children:[(0,n.jsx)(IconFolderPlus_IconFolderPlus,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"New folder"})]}),(0,n.jsx)(R.Z0,{}),(0,n.jsxs)(R.ck,{onClick:e=>{let{props:t}=e;return onSelectAllItemsInColumn(t.index)},children:[(0,n.jsx)(z.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Select all items"})]}),(0,n.jsxs)(R.rS,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(G.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"text-xs",children:"View"})]}),arrow:(0,n.jsx)(Z.Z,{size:"tiny"}),children:[(0,n.jsx)(R.ck,{onClick:()=>l(b.De.COLUMNS),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"As columns"})}),(0,n.jsx)(R.ck,{onClick:()=>l(b.De.LIST),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"As list"})})]}),(0,n.jsxs)(R.rS,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(V.Z,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Sort by"})]}),arrow:(0,n.jsx)(Z.Z,{size:"tiny"}),children:[(0,n.jsx)(R.ck,{onClick:()=>c(b.Ye.NAME),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Name"})}),(0,n.jsx)(R.ck,{onClick:()=>c(b.Ye.CREATED_AT),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last created"})}),(0,n.jsx)(R.ck,{onClick:()=>c(b.Ye.UPDATED_AT),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last modified"})}),(0,n.jsx)(R.ck,{onClick:()=>c(b.Ye.LAST_ACCESSED_AT),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last accessed"})})]}),(0,n.jsxs)(R.rS,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(IconChevronsUp_IconChevronsUp,{size:"tiny"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Sort by order"})]}),arrow:(0,n.jsx)(Z.Z,{size:"tiny"}),children:[(0,n.jsx)(R.ck,{onClick:()=>d(b.sd.ASC),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Ascending"})}),(0,n.jsx)(R.ck,{onClick:()=>d(b.sd.DESC),children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Descending"})})]})]})},K=s(86263),Y=s(94030),J=s.n(Y),X=s(60516),$=s(44593),ee=s(54554),et=s(20775),es=s(9162),en=s(4741);let ea=(0,es.sj)({isSearching:!1,setIsSearching:e=>{ea.isSearching=e}}),useStorageExplorerStateSnapshot=e=>(0,en.R)(ea,e);var ei=s(24990),er=s(55281),eo=s.n(er),el=s(18149),ec=s.n(el),ed=s(38183),eu=s(13781),em=s(7113),ep=s(79983),IconMusic_IconMusic=function(e){return(0,n.jsx)(U.Z,{icon:ep.Z,...e})},eh=s(88599),IconFilm_IconFilm=function(e){return(0,n.jsx)(U.Z,{icon:eh.Z,...e})},eg=s(57393),IconFile_IconFile=function(e){return(0,n.jsx)(U.Z,{icon:eg.Z,...e})},ex=s(39195),ef=s(97036),ey=s(53830),ej=s(93352),ev=s.n(ej),StorageExplorer_FileExplorerRowEditing=e=>{var t;let{item:s,view:a,columnIndex:i}=e,r=(0,v.HN)(),{renameFile:o,renameFolder:l,addNewFolder:c}=r,d=(0,h.useRef)(null),[u,m]=(0,h.useState)(s.name),onSaveItemName=async(e,t)=>{if(t&&(t.preventDefault(),t.stopPropagation()),s.type===b.fh.FILE)await o(s,e,i);else if(ev()(s,"id")){let t={...s,columnIndex:i};l(t,e,i)}else c(e,i)};return(0,h.useEffect)(()=>{d.current&&d.current.select();let handleEsc=e=>{"Escape"===e.key&&((null==s?void 0:s.id)!==void 0?onSaveItemName(s.name):c("",i))};return window.addEventListener("keydown",handleEsc),()=>window.removeEventListener("keydown",handleEsc)},[]),(0,n.jsx)("div",{className:"storage-row flex items-center justify-between rounded bg-gray-500",children:(0,n.jsxs)("div",{className:"flex h-full flex-grow items-center px-2.5",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(RowIcon,{view:a,status:s.status,fileType:s.type,mimeType:null===(t=s.metadata)||void 0===t?void 0:t.mimetype})}),(0,n.jsxs)("form",{className:"h-9",onSubmit:e=>onSaveItemName(u,e),children:[(0,n.jsx)("input",{autoFocus:!0,ref:d,className:"storage-row-input ml-3 h-full bg-inherit p-0 px-1 text-sm",type:"text",value:u,onChange:e=>m(e.target.value),onBlur:e=>onSaveItemName(u,e)}),(0,n.jsx)("button",{className:"hidden",type:"submit",onClick:e=>onSaveItemName(u,e)})]})]})})};let RowIcon=e=>{let{view:t,status:s,fileType:a,mimeType:i}=e;if(t===b.De.LIST&&s===b.R9.LOADING)return(0,n.jsx)(eu.Z,{size:16,strokeWidth:2,className:"animate-spin"});if(a===b.fh.BUCKET||a===b.fh.FOLDER){let e=a===b.fh.BUCKET?"".concat(y.GW,"/img/bucket-filled.svg"):a===b.fh.FOLDER?"".concat(y.GW,"/img/folder-filled.svg"):"".concat(y.GW,"/img/file-filled.svg");return(0,n.jsx)(ed.Z,{src:e,preProcessor:e=>e.replace(/svg/,'svg class="w-4 h-4 text-color-inherit opacity-75"')})}return(null==i?void 0:i.includes("image"))?(0,n.jsx)(em.Z,{size:16,strokeWidth:2}):(null==i?void 0:i.includes("audio"))?(0,n.jsx)(IconMusic_IconMusic,{size:16,strokeWidth:2}):(null==i?void 0:i.includes("video"))?(0,n.jsx)(IconFilm_IconFilm,{size:16,strokeWidth:2}):(0,n.jsx)(IconFile_IconFile,{size:16,strokeWidth:2})};var StorageExplorer_FileExplorerRow=e=>{var t;let{index:s,item:a={},view:i=b.De.COLUMNS,columnIndex:r=0,selectedItems:o=[],openedFolders:l=[],selectedFilePreview:c={},onCopyUrl:u}=e,m=(0,v.HN)(),{getFileUrl:p,popColumnAtIndex:h,pushOpenedFolderAtIndex:g,popOpenedFoldersAtIndex:x,setFilePreview:y,closeFilePreview:w,clearSelectedItems:N,selectedBucket:S,setSelectedItems:C,setSelectedItemsToDelete:k,setSelectedItemToRename:_,setSelectedItemsToMove:E,setSelectedFileCustomExpiry:P,fetchFolderContents:I,downloadFile:L,downloadFolder:A,selectRangeItems:T}=m,Z=S.public,O={...a,columnIndex:r},U=void 0!==eo()(o,a),B=l.length>r&&ec()(l[r],a),q=!d()(c)&&ec()(c.id,a.id),W=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*"),{show:H}=(0,R.av)(),onSelectFile=async(e,t)=>{h(e),x(e-1),y(t),N()},onSelectFolder=async(e,t)=>{w(),N(e+1),x(e-1),g(t,e),await I(t.id,t.name,e)},onCheckItem=e=>{if(e&&0!==o.length){T(r,s);return}void 0!==eo()(o,e=>O.id===e.id)?C(o.filter(e=>O.id!==e.id)):C([...o,O]),w()},G=a.type===b.fh.FOLDER?[...W?[{name:"Rename",icon:(0,n.jsx)(F.Z,{size:"tiny"}),onClick:()=>_(O)}]:[],{name:"Download",icon:(0,n.jsx)(M.Z,{size:"tiny"}),onClick:()=>A(O)},{name:"Copy path to folder",icon:(0,n.jsx)(z.Z,{size:"tiny"}),onClick:()=>copyPathToFolder(l,O)},...W?[{name:"Separator",icon:void 0,onClick:void 0},{name:"Delete",icon:(0,n.jsx)(IconTrash2_IconTrash2,{size:"tiny"}),onClick:()=>k([O])}]:[]]:[...a.isCorrupted?[]:[...Z?[{name:"Get URL",icon:(0,n.jsx)(z.Z,{size:"tiny"}),onClick:async()=>u(O.name,await p(O))}]:[{name:"Get URL",icon:(0,n.jsx)(z.Z,{size:"tiny"}),children:[{name:"Expire in 1 week",onClick:async()=>u(O.name,await p(O,b.Qo.WEEK))},{name:"Expire in 1 month",onClick:async()=>u(O.name,await p(O,b.Qo.MONTH))},{name:"Expire in 1 year",onClick:async()=>u(O.name,await p(O,b.Qo.YEAR))},{name:"Custom expiry",onClick:async()=>P(O)}]}],...W?[{name:"Rename",icon:(0,n.jsx)(F.Z,{size:"tiny"}),onClick:()=>_(O)},{name:"Move",icon:(0,n.jsx)(IconMove_IconMove,{size:"tiny"}),onClick:()=>E([O])},{name:"Download",icon:(0,n.jsx)(M.Z,{size:"tiny"}),onClick:async()=>await L(O)},{name:"Separator",icon:void 0,onClick:void 0}]:[]],...W?[{name:"Delete",icon:(0,n.jsx)(IconTrash2_IconTrash2,{size:"tiny"}),onClick:()=>k([O])}]:[]],V=a.metadata?(0,j.td)(a.metadata.size):"-",Q=a.metadata?a.metadata.mimetype:"-",K=a.created_at?new Date(a.created_at).toLocaleString():"-",Y=a.updated_at?new Date(a.updated_at).toLocaleString():"-",displayMenu=(e,t)=>{H(e,{id:t===b.fh.FILE?b.l6.STORAGE_ITEM:b.l6.STORAGE_FOLDER,props:{item:O}})},J=i===b.De.LIST&&a.isCorrupted?"calc(100% - 60px)":i!==b.De.LIST||a.isCorrupted?"100%":"calc(100% - 50px)";return a.status===b.R9.EDITING?(0,n.jsx)(StorageExplorer_FileExplorerRowEditing,{view:i,item:a,columnIndex:r}):(0,n.jsx)("div",{className:"h-full border-b border-default",onContextMenu:e=>{e.stopPropagation(),a.type===b.fh.FILE?displayMenu(e,b.fh.FILE):displayMenu(e,b.fh.FOLDER)},children:(0,n.jsxs)("div",{className:["storage-row group flex h-full items-center px-2.5","hover:bg-panel-footer-light [[data-theme*=dark]_&]:hover:bg-panel-footer-dark","".concat(B?"bg-surface-200":""),"".concat(q?"bg-green-500 hover:bg-green-500":""),"".concat(a.status!==b.R9.LOADING?"cursor-pointer":"")].join(" "),onClick:e=>{e.stopPropagation(),e.preventDefault(),a.status===b.R9.LOADING||B||q||(a.type===b.fh.FOLDER||a.type===b.fh.BUCKET?onSelectFolder(r,a):onSelectFile(r,a))},children:[(0,n.jsxs)("div",{className:["flex items-center",i===b.De.LIST?"w-[40%] min-w-[250px]":"w-[90%]"].join(" "),children:[(0,n.jsxs)("div",{className:"relative w-[30px]",onClick:e=>e.stopPropagation(),children:[!U&&(0,n.jsx)("div",{className:"absolute ".concat(a.type===b.fh.FILE?"group-hover:hidden":""),style:{top:"2px"},children:(0,n.jsx)(RowIcon,{view:i,status:a.status,fileType:a.type,mimeType:null===(t=a.metadata)||void 0===t?void 0:t.mimetype})}),(0,n.jsx)($.Z,{label:"",className:"w-full ".concat(a.type!==b.fh.FILE?"invisible":""," ").concat(U?"opacity-100":"opacity-0 group-hover:opacity-100"),checked:U,onChange:e=>{e.stopPropagation(),onCheckItem(e.nativeEvent.shiftKey)}})]}),(0,n.jsx)("p",{title:a.name,className:"truncate text-sm",style:{width:J},children:a.name}),a.isCorrupted&&(0,n.jsxs)(ei.fC,{delayDuration:0,children:[(0,n.jsx)(ei.xz,{children:(0,n.jsx)(ex.Z,{size:18,strokeWidth:2,className:"text-foreground-light"})}),(0,n.jsx)(ei.h_,{children:(0,n.jsxs)(ei.VY,{side:"bottom",children:[(0,n.jsx)(ei.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"File is corrupted, please delete and reupload again."})})]})})]})]}),i===b.De.LIST&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"w-[11%] min-w-[100px] truncate text-sm",children:V}),(0,n.jsx)("p",{className:"w-[14%] min-w-[100px] truncate text-sm",children:Q}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:K}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:Y})]}),(0,n.jsx)("div",{className:"flex items-center justify-end ".concat(i===b.De.LIST?"flex-grow":"w-[10%]"),onClick:e=>e.stopPropagation(),children:a.status===b.R9.LOADING?(0,n.jsx)(eu.Z,{className:"animate-spin ".concat(i===b.De.LIST?"invisible":""),size:16,strokeWidth:2}):(0,n.jsxs)(ef.h_,{modal:!1,children:[(0,n.jsx)(ef.$F,{children:(0,n.jsx)("div",{className:"storage-row-menu opacity-0",children:(0,n.jsx)(ey.Z,{size:16,strokeWidth:2})})}),(0,n.jsx)(ef.AW,{side:"bottom",align:"end",children:G.map(e=>{var t,s,a;return(null!==(t=null==e?void 0:e.children)&&void 0!==t?t:[]).length>0?(0,n.jsxs)(ef.Ph,{children:[(0,n.jsxs)(ef.kt,{className:"space-x-2",children:[e.icon||(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("p",{children:e.name})]}),(0,n.jsx)(ef.cq,{children:(0,n.jsx)(ef.TG,{children:null===(s=null!==(a=null==e?void 0:e.children)&&void 0!==a?a:[])||void 0===s?void 0:s.map(e=>(0,n.jsx)(ef.Xi,{onClick:e.onClick,children:(0,n.jsx)("p",{children:e.name})},e.name))})})]},e.name):"Separator"===e.name?(0,n.jsx)(ef.VD,{},e.name):(0,n.jsxs)(ef.Xi,{className:"space-x-2",onClick:e.onClick,children:[e.icon||(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("p",{children:e.name})]},e.name)})})]})})]})})};let DragOverOverlay=e=>{let{isOpen:t,onDragLeave:s,onDrop:a,folderIsEmpty:i}=e;return(0,n.jsx)(K.u,{show:t,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",className:"h-full w-full absolute top-0",children:(0,n.jsx)("div",{onDragLeave:s,onDrop:a,className:"absolute top-0 flex h-full w-full items-center justify-center",style:{backgroundColor:i?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.2)"},children:!i&&(0,n.jsxs)("div",{className:"w-3/4 h-32 border-2 border-dashed border-gray-400 rounded-md flex flex-col items-center justify-center p-6 pointer-events-none",style:{backgroundColor:"rgba(0,0,0,0.4)"},children:[(0,n.jsx)(X.Z,{className:"text-white pointer-events-none",size:20,strokeWidth:2}),(0,n.jsx)("p",{className:"text-center text-sm  text-white mt-2 pointer-events-none",children:"Drop your files to upload to this folder"})]})})})};var StorageExplorer_FileExplorerColumn=e=>{let{index:t=0,view:s=b.De.COLUMNS,column:a,fullWidth:i=!1,openedFolders:r=[],selectedItems:o=[],selectedFilePreview:c={},itemSearchString:d,onFilesUpload:u=N(),onSelectAllItemsInColumn:m=N(),onSelectColumnEmptySpace:p=N(),onColumnLoadMore:g=N(),onCopyUrl:x=N()}=e,[f,v]=(0,h.useState)(!1),w=(0,h.useRef)(null),S=useStorageExplorerStateSnapshot();(0,h.useEffect)(()=>{if(w){let{scrollHeight:e,clientHeight:t}=w.current;e>t&&(w.current.scrollTop+=e-t)}},[a]);let C=o.length>0,k=a.items.map(e=>e.id),_=a.items.filter(e=>e.type===b.fh.FILE),E=o.filter(e=>k.includes(e.id)),P=E.filter(e=>e.type===b.fh.FILE),I=a.items,L=J()(I.map(e=>l()(e,["metadata","size"],0))),A=0===a.items.filter(e=>e.status!==b.R9.LOADING).length,{show:T}=(0,R.av)(),onDragOver=e=>{e&&(e.stopPropagation(),e.preventDefault(),"dragover"!==e.type||f||v(!0))},SelectAllCheckbox=()=>(0,n.jsx)($.Z,{label:"",className:"-mt-0.5",checked:0!==_.length&&P.length===_.length,disabled:0===_.length,onChange:()=>m(t)});return(0,n.jsxs)("div",{ref:w,className:"\n        ".concat(i?"w-full":"w-64 border-r border-overlay","\n        ").concat((b.De.COLUMNS,""),"\n        hide-scrollbar relative flex flex-shrink-0 flex-col overflow-auto\n      "),onContextMenu:e=>{T(e,{id:b.l6.STORAGE_COLUMN,props:{index:t}})},onDragOver:onDragOver,onDrop:e=>{onDragOver(e),u(e,t)},onClick:e=>{let s=l()(e.target,["className"],"");"string"==typeof s&&s.includes("react-contexify")||p(t)},children:[s===b.De.COLUMNS&&(0,n.jsx)("div",{className:"sticky top-0 z-10 mb-0 flex items-center bg-table-header-light px-2.5 [[data-theme*=dark]_&]:bg-table-header-dark ".concat(C?"h-10 py-3 opacity-100":"h-0 py-0 opacity-0"," transition-all duration-200"),onClick:e=>e.stopPropagation(),children:_.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(SelectAllCheckbox,{}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Select all ",_.length," files"]})]}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"No files available for selection"})}),s===b.De.LIST&&(0,n.jsxs)("div",{className:" sticky top-0 z-10 flex min-w-min items-center border-b border-overlay bg-surface-100 px-2.5 py-2 ",children:[(0,n.jsxs)("div",{className:"flex w-[40%] min-w-[250px] items-center",children:[(0,n.jsx)(SelectAllCheckbox,{}),(0,n.jsx)("p",{className:"text-sm",children:"Name"})]}),(0,n.jsx)("p",{className:"w-[11%] min-w-[100px] text-sm",children:"Size"}),(0,n.jsx)("p",{className:"w-[14%] min-w-[100px] text-sm",children:"Type"}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Created at"}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Last modified at"})]}),a.status===b.R9.LOADING&&(0,n.jsxs)("div",{className:"\n            ".concat(i?"w-full":"w-64 border-r border-default","\n            px-2 py-1 my-1 flex flex-shrink-0 flex-col space-y-2 overflow-auto\n          "),children:[(0,n.jsx)(et.Z,{}),(0,n.jsx)(et.Z,{}),(0,n.jsx)(et.Z,{})]}),(0,n.jsx)(ee.Z,{items:I,itemProps:{view:s,columnIndex:t,selectedItems:o,openedFolders:r,selectedFilePreview:c,onCopyUrl:x},ItemComponent:StorageExplorer_FileExplorerRow,getItemSize:e=>0!==e&&e===I.length?85:37,hasNextPage:a.status!==b.R9.LOADING&&a.hasMoreItems,isLoadingNextPage:a.isLoadingMoreItems,onLoadNextPage:()=>g(t,a)}),!(S.isSearching&&d.length>0)&&0===a.items.length&&a.status!==b.R9.LOADING&&(0,n.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,n.jsx)("img",{src:"".concat(y.GW,"/img/storage-placeholder.svg"),className:"opacity-75 pointer-events-none"}),(0,n.jsx)("p",{className:"my-3 opacity-75",children:"Drop your files here"}),(0,n.jsx)("p",{className:"w-40 text-center text-sm text-foreground-light",children:'Or upload them via the "Upload file" button above'})]}),S.isSearching&&d.length>0&&A&&a.status!==b.R9.LOADING&&(0,n.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,n.jsx)("p",{className:"text-sm my-3 text-foreground",children:"No results found in this folder"}),(0,n.jsxs)("p",{className:"w-40 text-center text-sm text-foreground-light",children:['Your search for "',d,'" did not return any results']})]}),(0,n.jsx)(DragOverOverlay,{isOpen:f,folderIsEmpty:A,onDragLeave:()=>v(!1),onDrop:()=>v(!1)}),s===b.De.LIST&&(0,n.jsx)("div",{className:" sticky bottom-0 z-10 flex min-w-min items-center bg-panel-footer-light px-2.5 py-2 [[data-theme*=dark]_&]:bg-panel-footer-dark ",children:(0,n.jsxs)("p",{className:"text-sm",children:[(0,j.td)(L)," for ",I.length," items"]})})]})},eb=(0,p.Pi)(e=>{let{view:t=b.De.COLUMNS,columns:s=[],openedFolders:a=[],selectedItems:i=[],selectedFilePreview:r={},itemSearchString:o,onFilesUpload:l=N(),onSelectAllItemsInColumn:c=N(),onSelectColumnEmptySpace:d=N(),onColumnLoadMore:u=N(),onCopyUrl:m=N()}=e,p=(0,h.useRef)(null);return(0,h.useEffect)(()=>{if(p){let{scrollWidth:e,clientWidth:t}=p.current;e>t&&(p.current.scrollLeft+=e-t)}},[s]),(0,n.jsxs)("div",{ref:p,className:"file-explorer flex flex-grow overflow-x-auto justify-between h-full w-full",children:[(0,n.jsx)(StorageExplorer_ColumnContextMenu,{id:b.l6.STORAGE_COLUMN}),(0,n.jsx)(q,{id:b.l6.STORAGE_ITEM,onCopyUrl:m}),(0,n.jsx)(StorageExplorer_FolderContextMenu,{id:b.l6.STORAGE_FOLDER}),t===b.De.COLUMNS?(0,n.jsx)("div",{className:"flex",children:s.map((e,s)=>(0,n.jsx)(StorageExplorer_FileExplorerColumn,{index:s,view:t,column:e,openedFolders:a,selectedItems:i,selectedFilePreview:r,itemSearchString:o,onFilesUpload:l,onSelectAllItemsInColumn:c,onSelectColumnEmptySpace:d,onColumnLoadMore:u,onCopyUrl:m},"column-".concat(s)))}):t===b.De.LIST?(0,n.jsx)(n.Fragment,{children:s.length>0&&(0,n.jsx)(StorageExplorer_FileExplorerColumn,{fullWidth:!0,index:s.length-1,view:t,column:s[s.length-1],selectedItems:i,selectedFilePreview:r,itemSearchString:o,onFilesUpload:l,onSelectAllItemsInColumn:c,onSelectColumnEmptySpace:d,onColumnLoadMore:u,onCopyUrl:m})}):(0,n.jsxs)("div",{children:["Unknown view: ",t]})]})}),ew=s(54073),eN=s.n(ew),eS=s(1191),eC=s(6225),ek=s(72275),e_=s(8809),eE=s(26292),eP=s(55216),eI=s(10381),eL=s(88979),eA=s(22404),eT=s(55691);let eR=[{key:b.De.COLUMNS,name:"As columns"},{key:b.De.LIST,name:"As list"}],eD=[{key:b.Ye.NAME,name:"Name"},{key:b.Ye.CREATED_AT,name:"Time created"},{key:b.Ye.UPDATED_AT,name:"Time modified"},{key:b.Ye.LAST_ACCESSED_AT,name:"Time last accessed"}],ez=[{key:b.sd.ASC,name:"Ascending"},{key:b.sd.DESC,name:"Descending"}],HeaderPathEdit=e=>{let{loading:t,isSearching:s,breadcrumbs:a,togglePathEdit:i}=e;return(0,n.jsx)("div",{className:"group ".concat(t?"":"cursor-pointer"),onClick:()=>t.isLoading?{}:i(),children:t.isLoading?(0,n.jsxs)("div",{className:"ml-2 flex items-center",children:[(0,n.jsx)(eu.Z,{size:16,strokeWidth:2,className:"animate-spin"}),(0,n.jsx)("p",{className:"ml-3 text-sm",children:t.message})]}):(0,n.jsxs)("div",{className:"flex cursor-pointer items-center",children:[(0,n.jsx)("p",{className:"ml-3 text-sm truncate",children:a[a.length-1]||""}),!s&&(0,n.jsx)("div",{className:"ml-3 flex items-center space-x-2 opacity-0 transition group-hover:opacity-100",children:(0,n.jsx)(C.z,{type:"text",icon:(0,n.jsx)(eS.Z,{}),children:"Navigate"})})]})})},HeaderBreadcrumbs=e=>{let{loading:t,isSearching:s,breadcrumbs:a,selectBreadcrumb:i}=e,r=a.map((e,t)=>({name:e,index:t})),o=r.length<=5?r:r.slice(0,2).concat([{name:"...",index:-1}]).concat(r.slice(r.length-2,r.length));return t.isLoading?(0,n.jsxs)("div",{className:"ml-2 flex items-center",children:[(0,n.jsx)(eu.Z,{size:16,strokeWidth:2,className:"animate-spin"}),(0,n.jsx)("p",{className:"ml-3 text-sm",children:t.message})]}):(0,n.jsx)("div",{className:"ml-3 flex items-center ".concat(s&&"max-w-[140px] overflow-x-auto"),children:o.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center",children:[0!==t&&(0,n.jsx)(Z.Z,{size:10,strokeWidth:2,className:"mx-3"}),(0,n.jsx)("p",{className:"truncate text-sm ".concat("..."!==e.name?"cursor-pointer":""),style:{maxWidth:"6rem"},onClick:()=>"..."!==e.name?i(e.index):{},children:e.name},e.name)]},e.name))})};var StorageExplorer_FileExplorerHeader=e=>{let{itemSearchString:t="",setItemSearchString:s=N(),onFilesUpload:a=N()}=e,i=useStorageExplorerStateSnapshot(),o=(0,eT.cg)(),[l,c]=(0,h.useState)(""),[d,u]=(0,h.useState)(""),[m,p]=(0,h.useState)({isLoading:!1,message:""}),[g,x]=(0,h.useState)(!1),[y,j]=(0,h.useState)(!1),w=(0,h.useRef)(null),S=(0,h.useRef)(null),k=(0,v.HN)(),{view:_,setView:E,columns:P,sortBy:L,setSortBy:A,sortByOrder:T,setSortByOrder:R,popColumn:z,popColumnAtIndex:Z,popOpenedFolders:F,popOpenedFoldersAtIndex:O,fetchFoldersByPath:U,refetchAllOpenedFolders:M,addNewFolderPlaceholder:B,clearOpenedFolders:q,closeFilePreview:W,selectedBucket:H}=k,G=P.map(e=>e.name),V=P.length<=1,Q=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*");(0,h.useEffect)(()=>{t&&u(t)},[]),(0,h.useEffect)(()=>{ec()(S.current,G)||(x(!1),S.current=G)},[G]);let K=(0,h.useCallback)(eN()(s,300),[]),onSelectBack=()=>{z(),F(),W()},onSetPathByString=async e=>{if(0===e.length)Z(0),q(),W();else{let t=e.join("/");p({isLoading:!0,message:"Navigating to ".concat(t,"...")}),await U(e),p({isLoading:!1,message:""})}},onCancelSearch=()=>{u(""),i.setIsSearching(!1),s("")},refreshData=async()=>{j(!0),await M(),j(!1)};return(0,n.jsxs)("div",{className:" flex h-[40px] pl-2 items-center justify-between rounded-t-md border-b border-overlay bg-surface-100",children:[(0,n.jsxs)("div",{className:"flex items-center ".concat(g?"w-1/2":""),children:[G.length>0&&(0,n.jsx)(C.z,{icon:(0,n.jsx)(eC.Z,{size:16,strokeWidth:2}),size:"tiny",type:"text",className:"".concat(G.length>1?"opacity-100":"opacity-25"," px-1"),disabled:V,onClick:()=>{x(!1),onSelectBack()}}),g?(0,n.jsx)("form",{className:"ml-2 flex-grow",children:(0,n.jsx)(I.Z,{autoFocus:!0,type:"text",size:"small",value:l,onChange:e=>{c(e.target.value)},placeholder:"e.g Parent Folder/Child Folder",actions:[(0,n.jsx)(C.z,{type:"default",htmlType:"button",onClick:()=>{x(!1)},children:"Cancel"},"cancelPath"),(0,n.jsx)(C.z,{type:"primary",htmlType:"submit",onClick:e=>{e&&(e.preventDefault(),e.stopPropagation()),x(!1),onSetPathByString(r()(l.split("/")))},children:"Go to folder"},"setPath")]},"pathSet")}):_===b.De.COLUMNS?(0,n.jsx)(HeaderPathEdit,{loading:m,isSearching:i.isSearching,breadcrumbs:G,togglePathEdit:()=>{x(!0),c(G.slice(1).join("/")),i.isSearching&&onCancelSearch()}}):(0,n.jsx)(HeaderBreadcrumbs,{loading:m,isSearching:i.isSearching,breadcrumbs:G,selectBreadcrumb:e=>{Z(e),O(e-1)}})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1 px-2",children:[(0,n.jsx)(C.z,{size:"tiny",icon:(0,n.jsx)(ek.Z,{}),type:"text",loading:y,onClick:refreshData,children:"Reload"}),(0,n.jsxs)(ef.h_,{children:[(0,n.jsx)(ef.$F,{asChild:!0,children:(0,n.jsx)(C.z,{type:"text",icon:"LIST"===_?(0,n.jsx)(e_.Z,{size:16,strokeWidth:2}):(0,n.jsx)(eE.Z,{size:16,strokeWidth:2}),children:"View"})}),(0,n.jsxs)(ef.AW,{align:"end",className:"w-40 min-w-0",children:[eR.map(e=>(0,n.jsx)(ef.Xi,{onClick:()=>E(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),_===e.key&&(0,n.jsx)(eP.Z,{className:"text-brand",strokeWidth:2})]})},e.key)),(0,n.jsx)(ef.VD,{}),(0,n.jsxs)(ef.Ph,{children:[(0,n.jsx)(ef.kt,{children:"Sort by"}),(0,n.jsx)(ef.TG,{className:"w-44",children:eD.map(e=>(0,n.jsx)(ef.Xi,{onClick:()=>A(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),L===e.key&&(0,n.jsx)(eP.Z,{className:"text-brand",strokeWidth:2})]})},e.key))})]}),(0,n.jsxs)(ef.Ph,{children:[(0,n.jsx)(ef.kt,{children:"Sort order"}),(0,n.jsx)(ef.TG,{children:ez.map(e=>(0,n.jsx)(ef.Xi,{onClick:()=>R(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),T===e.key&&(0,n.jsx)(eP.Z,{className:"text-brand",strokeWidth:2})]})},e.key))})]})]})]})]}),(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 px-2",children:[(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",{ref:w,type:"file",multiple:!0,onChange:a})}),(0,n.jsxs)(ei.fC,{delayDuration:0,children:[(0,n.jsx)(ei.xz,{className:"w-full",children:(0,n.jsx)(C.z,{icon:(0,n.jsx)(X.Z,{size:16,strokeWidth:2}),type:"text",disabled:!Q||0===G.length,onClick:()=>{w.current&&w.current.click()},children:"Upload files"})}),!Q&&(0,n.jsx)(ei.h_,{children:(0,n.jsxs)(ei.VY,{side:"bottom",children:[(0,n.jsx)(ei.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to upload files"})})]})})]}),(0,n.jsxs)(ei.fC,{delayDuration:0,children:[(0,n.jsx)(ei.xz,{className:"w-full",children:(0,n.jsx)(C.z,{icon:(0,n.jsx)(IconFolderPlus_IconFolderPlus,{size:16,strokeWidth:2}),type:"text",disabled:!Q||0===G.length,onClick:()=>B(-1),children:"Create folder"})}),!Q&&(0,n.jsx)(ei.h_,{children:(0,n.jsxs)(ei.VY,{side:"bottom",children:[(0,n.jsx)(ei.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create folders"})})]})})]})]}),(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsx)("div",{className:"flex items-center px-2",children:i.isSearching?(0,n.jsx)(I.Z,{size:"tiny",autoFocus:!0,className:"w-52",icon:(0,n.jsx)(eI.Z,{size:"tiny",strokeWidth:2}),actions:[(0,n.jsx)(eL.Z,{className:"mx-2 cursor-pointer text-foreground",size:"tiny",strokeWidth:2,onClick:onCancelSearch},"close")],placeholder:"Search for a file or folder",type:"text",value:d,onChange:e=>{u(e.target.value),K(e.target.value)}}):(0,n.jsx)(C.z,{icon:(0,n.jsx)(eI.Z,{size:16,strokeWidth:2}),size:"tiny",type:"text",className:"px-1",onClick:()=>{x(!1),i.setIsSearching(!0)}})}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsx)("div",{className:"mx-2",children:(0,n.jsx)(eA.Z,{section:["storage",H.name]})})]})]})]})},StorageExplorer_FileExplorerHeaderSelection=()=>{let e=(0,v.HN)(),{selectedItems:t,downloadFile:s,downloadSelectedFiles:a,clearSelectedItems:i,setSelectedItemsToDelete:r,setSelectedItemsToMove:o}=e;return(0,n.jsxs)("div",{className:"z-10 flex h-[40px] items-center rounded-t-md bg-brand-400 px-2 py-1 shadow [[data-theme*=dark]_&]:bg-brand-600",children:[(0,n.jsx)(C.z,{icon:(0,n.jsx)(eL.Z,{size:16,strokeWidth:2}),type:"text",onClick:()=>i()}),(0,n.jsxs)("div",{className:"ml-4 flex items-center space-x-3",children:[(0,n.jsxs)("p",{className:"mb-0 text-sm text-foreground",children:[(0,n.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:t.length})," items selected"]}),(0,n.jsx)(C.z,{icon:(0,n.jsx)(M.Z,{size:16,strokeWidth:2}),type:"primary",onClick:async()=>{1===t.length?await s(t[0]):await a(t)},children:"Download"}),(0,n.jsx)("div",{className:"border-r border-green-800 py-3 opacity-50"}),(0,n.jsx)(C.z,{icon:(0,n.jsx)(IconTrash2_IconTrash2,{size:16,strokeWidth:2}),type:"primary",onClick:()=>r(t),children:"Delete"}),(0,n.jsx)(C.z,{icon:(0,n.jsx)(IconMove_IconMove,{size:16,strokeWidth:2}),type:"primary",onClick:()=>o(t),children:"Move"})]})]})},StorageExplorer_MoveItemsModal=e=>{var t;let{bucketName:s="",visible:a=!1,selectedItemsToMove:i=[],onSelectCancel:r=N(),onSelectMove:o=N()}=e,[l,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)("");(0,h.useEffect)(()=>{c(!1),u("")},[a]);let m=i.length>1,p=m?"Moving ".concat(i.length," items within ").concat(s):1===i.length?"Moving ".concat(null===(t=i[0])||void 0===t?void 0:t.name," within ").concat(s):"",onConfirmMove=e=>{e&&e.preventDefault(),c(!0);let t="/"===d[0]?d.slice(1):d;o(t)};return(0,n.jsx)(S.C,{visible:a,header:p,description:"Enter the path to where you'd like to move the file".concat(m?"s":""," to."),size:"medium",onCancel:r,customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(C.z,{type:"default",onClick:r,children:"Cancel"}),(0,n.jsx)(C.z,{type:"primary",loading:l,onClick:onConfirmMove,children:l?"Moving files":"Move files"})]}),children:(0,n.jsx)(S.C.Content,{children:(0,n.jsxs)("form",{className:"my-4",children:[(0,n.jsx)("div",{className:"relative flex items-center",children:(0,n.jsx)(I.Z,{autoFocus:!0,label:"Path to new directory in ".concat(s),type:"text",className:"w-full",placeholder:"e.g folder1/subfolder2",value:d,descriptionText:"Leave blank to move items to the root of the bucket",onChange:e=>u(e.target.value)})}),(0,n.jsx)("button",{className:"hidden",type:"submit",onClick:onConfirmMove})]})})})},eZ=s(43502);let PreviewFile=e=>{let{mimeType:t,previewUrl:s}=e;return t&&s?"loading"===s?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center text-foreground-lighter",children:(0,n.jsx)(eu.Z,{size:14,strokeWidth:2,className:"animate-spin"})}):"skipped"===s?(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[(0,n.jsx)(ed.Z,{src:"".concat(y.GW,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}),(0,n.jsx)("p",{className:"mt-2 w-2/5 text-center text-sm",children:"File size is too large to preview in the explorer"})]}):t.includes("image")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-contain bg-center bg-no-repeat",style:{backgroundImage:"url('".concat(s,"')")}}):t.includes("audio")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center px-10",children:(0,n.jsxs)("audio",{controls:!0,style:{width:"inherit"},children:[(0,n.jsx)("source",{src:s,type:"audio/mpeg"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your browser does not support the audio element."})]},s)}):t.includes("video")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsxs)("video",{controls:!0,style:{maxHeight:"100%"},children:[(0,n.jsx)("source",{src:s,type:"video/mp4"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your browser does not support the video tag."})]},s)}):(0,n.jsx)(ed.Z,{src:"".concat(y.GW,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}):(0,n.jsx)(ed.Z,{src:"".concat(y.GW,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')})};var StorageExplorer_PreviewPane=e=>{let{onCopyUrl:t}=e,s=(0,v.HN)(),{getFileUrl:a,downloadFile:i,selectedBucket:r,selectedFilePreview:o,closeFilePreview:l,setSelectedItemsToDelete:c,setSelectedFileCustomExpiry:u}=s,m=!d()(o),p=o.metadata?(0,j.td)(o.metadata.size):null,h=o.metadata?o.metadata.mimetype:null,g=o.created_at?new Date(o.created_at).toLocaleString():"Unknown",x=o.updated_at?new Date(o.updated_at).toLocaleString():"Unknown",y=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(K.u,{show:m,enter:"transition ease-out duration-150",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-100",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:(0,n.jsxs)("div",{className:" h-full border-l border-overlay bg-surface-100 p-4",style:{width:450},children:[(0,n.jsx)("div",{className:"flex w-full justify-end text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(eL.Z,{className:"cursor-pointer",size:14,strokeWidth:2,onClick:()=>l()})}),(0,n.jsx)("div",{className:"my-4 border border-overlay",children:(0,n.jsx)("div",{className:"flex h-56 w-full items-center 2xl:h-72",children:(0,n.jsx)(PreviewFile,{mimeType:h,previewUrl:o.previewUrl})})}),(0,n.jsxs)("div",{className:"w-full space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h5",{className:"break-words text-base text-foreground",children:o.name}),o.isCorrupted&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(ex.Z,{size:14,strokeWidth:2,className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"File is corrupted, please delete and reupload this file again"})]}),h&&(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:[h,p&&(0,n.jsxs)("span",{children:[" - ",p]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 text-xs text-foreground-lighter",children:"Added on"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:g})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 text-xs text-foreground-lighter",children:"Last modified"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:x})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2 border-b border-overlay pb-4",children:[(0,n.jsx)(C.z,{type:"default",icon:(0,n.jsx)(M.Z,{size:16,strokeWidth:2}),disabled:o.isCorrupted,onClick:async()=>await i(o),children:"Download"}),r.public?(0,n.jsx)(C.z,{type:"outline",icon:(0,n.jsx)(z.Z,{size:16,strokeWidth:2}),onClick:async()=>t(o.name,await a(o)),disabled:o.isCorrupted,children:"Get URL"}):(0,n.jsxs)(ef.h_,{children:[(0,n.jsx)(ef.$F,{asChild:!0,children:(0,n.jsx)(C.z,{type:"outline",icon:(0,n.jsx)(z.Z,{size:16,strokeWidth:2}),iconRight:(0,n.jsx)(eZ.Z,{}),disabled:o.isCorrupted,children:"Get URL"})}),(0,n.jsxs)(ef.AW,{side:"bottom",align:"center",children:[(0,n.jsx)(ef.Xi,{onClick:async()=>t(o.name,await a(o,b.Qo.WEEK)),children:"Expire in 1 week"},"expires-one-week"),(0,n.jsx)(ef.Xi,{onClick:async()=>t(o.name,await a(o,b.Qo.MONTH)),children:"Expire in 1 month"},"expires-one-month"),(0,n.jsx)(ef.Xi,{onClick:async()=>t(o.name,await a(o,b.Qo.YEAR)),children:"Expire in 1 year"},"expires-one-year"),(0,n.jsx)(ef.Xi,{onClick:()=>u(o),children:"Custom expiry"},"custom-expiry")]})]})]}),(0,n.jsxs)(ei.fC,{delayDuration:0,children:[(0,n.jsx)(ei.xz,{asChild:!0,children:(0,n.jsx)(C.z,{type:"outline",disabled:!y,size:"tiny",icon:(0,n.jsx)(IconTrash2_IconTrash2,{size:16,strokeWidth:2}),onClick:()=>c([o]),children:"Delete file"})}),!y&&(0,n.jsx)(ei.h_,{children:(0,n.jsxs)(ei.VY,{side:"bottom",children:[(0,n.jsx)(ei.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete this file"})})]})})]})]})]})})})};let StorageExplorer=e=>{var t,s,i;let{bucket:o}=e,c=(0,v.HN)(),{columns:u,selectedFilePreview:p,closeFilePreview:w,selectedItems:N,setSelectedItems:S,clearSelectedItems:C,selectedItemsToDelete:k,clearSelectedItemsToDelete:_,openedFolders:E,popColumnAtIndex:P,popOpenedFoldersAtIndex:I,selectedItemsToMove:L,clearSelectedItemsToMove:A,view:R,currentBucketName:D,openBucket:z,loadExplorerPreferences:Z,fetchFolderContents:F,fetchMoreFolderContents:O,fetchFoldersByPath:U,deleteFolder:M,uploadFiles:B,deleteFiles:q,moveFiles:W}=c,H=(0,h.useRef)(null),{ui:G}=(0,f.oR)(),{ref:V}=(0,a.UO)(),{data:Q}=(0,x.z)({projectRef:V}),{data:K}=(0,g.o)({projectRef:V}),Y=(null!==(t=null==K?void 0:K.services)&&void 0!==t?t:[]).find(e=>e.app.id==y.pG),J=null==Y?void 0:Y.app_config,X="".concat(null!==(s=null==J?void 0:J.protocol)&&void 0!==s?s:"https","://").concat(null!==(i=null==J?void 0:J.endpoint)&&void 0!==i?i:"-"),[$,ee]=(0,h.useState)(""),et=window.innerHeight-122;(0,h.useEffect)(()=>{let fetchContents=async()=>{if(R===b.De.LIST){let e=E.length-1,t=E[e];$?t?await F(t.id,t.name,e,$):await F(o.id,o.name,-1,$):t?await F(t.id,t.name,e):await F(o.id,o.name,-1)}else if(R===b.De.COLUMNS){let e=E.map(e=>e.name);U(e,$,!0)}};fetchContents()},[$]),(0,h.useEffect)(()=>{Z()},[]),(0,h.useEffect)(()=>{z(o)},[o]);let onFilesUpload=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e.persist();let s=e.target.files||e.dataTransfer.items,n=!d()(l()(e,["dataTransfer","items"],[]));await B(s,t,n),e.target.value=""},onMoveSelectedFiles=async e=>{await W(e)},onDeleteSelectedFiles=async()=>{if(1===k.length){let[e]=k;if(e)switch(e.type){case b.fh.FOLDER:await M(e);break;case b.fh.FILE:await q([e])}}else await q(k)},onCopyUrl=(e,t)=>{var s;let n=(null==Q?void 0:null===(s=Q.customDomain)||void 0===s?void 0:s.status)==="active"?t.replace(X,"https://".concat(Q.customDomain.hostname)):t;(0,j.vQ)(n,()=>{G.setNotification({category:"success",message:"Copied URL for ".concat(e," to clipboard."),duration:4e3})})};return(0,n.jsxs)("div",{ref:H,className:" bg-background border-overlay flex h-full w-full flex-col rounded-md border",children:[0===N.length?(0,n.jsx)(StorageExplorer_FileExplorerHeader,{itemSearchString:$,setItemSearchString:ee,onFilesUpload:onFilesUpload}):(0,n.jsx)(StorageExplorer_FileExplorerHeaderSelection,{}),(0,n.jsxs)("div",{className:"flex h-full",style:{height:et},children:[(0,n.jsx)(eb,{view:R,columns:u,openedFolders:E,selectedItems:N,selectedFilePreview:p,itemSearchString:$,onFilesUpload:onFilesUpload,onSelectAllItemsInColumn:e=>{let t=u[e].items.filter(e=>e.type===b.fh.FILE).map(t=>({...t,columnIndex:e})),s=r()(t.map(e=>e.id)),n=N.filter(e=>s.includes(e.id));if(n.length===t.length){let e=N.filter(e=>!s.includes(e.id));S(e)}else{let e=m()(N.concat(t),"id");S(e)}},onSelectColumnEmptySpace:e=>{P(e),I(e-1),w(),C()},onColumnLoadMore:(e,t)=>O(e,t,$),onCopyUrl:onCopyUrl}),(0,n.jsx)(StorageExplorer_PreviewPane,{onCopyUrl:onCopyUrl})]}),(0,n.jsx)(StorageExplorer_ConfirmDeleteModal,{visible:k.length>0,selectedItemsToDelete:k,onSelectCancel:_,onSelectDelete:onDeleteSelectedFiles}),(0,n.jsx)(StorageExplorer_MoveItemsModal,{bucketName:D,visible:L.length>0,selectedItemsToMove:L,onSelectCancel:A,onSelectMove:onMoveSelectedFiles}),(0,n.jsx)(T,{onCopyUrl:onCopyUrl})]})};StorageExplorer.displayName="StorageExplorer";var eF=(0,p.Pi)(StorageExplorer),eO=s(90882),eU=s.n(eO),eM=s(77262),eB=s(2755),eq=s(33461),eW=s(97632),eH=s(94161),eG=s(80823),eV=s(67673),eQ=s(30984),eK=s(3440),eY=s.n(eK),eJ=s(17335),eX=s.n(eJ);let shortHash=e=>{let t=0;for(let s=0;s<e.length;s++){let n=e.charCodeAt(s);t=(t<<5)-t+n,t&=t}return new Uint32Array([t])[0].toString(36)},formatPoliciesForStorage=(e,t)=>{if(0===t.length)return t;let s=formatStoragePolicies(e,t),n=groupPoliciesByBucket(s);return n},formatStoragePolicies=(e,t)=>{let s=e.map(e=>e.name),n=t.map(e=>{let{definition:t,check:n}=e,a=null!==t?extractBucketNameFromDefinition(t):extractBucketNameFromDefinition(n);return a&&s.includes(a)?{...e,bucket:a}:{...e,bucket:"Ungrouped"}});return n},extractBucketNameFromDefinition=e=>{var t;let s=null!==(t=null==e?void 0:e.split(" AND "))&&void 0!==t?t:[],[n]=s.filter(e=>e.includes("bucket_id"));return n?n.split("'")[1]:null},groupPoliciesByBucket=e=>{let t=eY()(e,"bucket");return Object.keys(t).map(e=>({name:e,policies:t[e]}))},createPayloadsForAddPolicy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:n,definition:a,allowedOperations:i,roles:r}=t,o=a?a.replace(/\s+/g," ").trim():"";return i.map((t,a)=>createPayloadForNewPolicy(a,e,n,o,t,r,s))},createPayloadForNewPolicy=(e,t,s,n,a,i,r)=>{let o=shortHash(t);return{name:r?"".concat(s," ").concat(o,"_").concat(e):s,definition:"INSERT"===a?void 0:"(".concat(n,")"),action:"PERMISSIVE",check:"INSERT"===a?"(".concat(n,")"):void 0,command:a,schema:"storage",table:"objects",roles:i.length>0?i:void 0}},deriveAllowedClientLibraryMethods=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(b.Eb).filter(t=>{let s=b.Eb[t];if(0===eX()(s,e).length)return t})},createSQLStatementForCreatePolicy=(e,t,s,n,a,i,r)=>{let o=shortHash(t),l=r?"".concat(s," ").concat(o,"_").concat(e):s,c="Add policy for the ".concat(a,' operation under the policy "').concat(s,'"'),d=0===i.length?["public"]:i,u='\n    CREATE POLICY "'.concat(l,'"\n    ON storage.objects\n    FOR ').concat(a,"\n    TO ").concat(d.join(", "),"\n    ").concat("INSERT"===a?"WITH CHECK":"USING"," (").concat(n,");\n").replace(/\s+/g," ").trim();return{description:c,statement:u}},createSQLPolicies=function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:n,definition:a,allowedOperations:i,roles:r}=t,o=i.map((t,i)=>createSQLStatementForCreatePolicy(i,e,n,a||"",t,r,s));return o},applyBucketIdToTemplateDefinition=(e,t)=>e.replace("{bucket_id}","'".concat(t,"'"));var e$=s(12744),e0=s(5099),e1=s(2195),e2=s(84959);let PolicyRow=e=>{let{policy:t,table:s,bucketName:a,onSelectPolicyEdit:i=()=>{},onSelectPolicyDelete:r=()=>{}}=e,{name:o,command:l}=t;return(0,n.jsx)("div",{className:"group",children:(0,n.jsxs)(e$.Z.Content,{className:"flex justify-between gap-2 border-b border-overlay py-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center",children:[(0,n.jsx)("div",{className:"font-mono text-xs text-foreground-lighter",children:l}),(0,n.jsx)("div",{className:"flex flex-col gap-2 lg:flex-row",children:(0,n.jsx)("span",{className:"truncate text-sm text-foreground",children:o})})]}),(0,n.jsxs)(ef.h_,{children:[(0,n.jsx)(ef.$F,{children:(0,n.jsx)(C.z,{type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,n.jsx)(ey.Z,{})})}),(0,n.jsxs)(ef.AW,{side:"bottom",align:"end",children:[(0,n.jsxs)(ef.Xi,{className:"space-x-2",onClick:()=>i(t,a,s),children:[(0,n.jsx)(F.Z,{size:14}),(0,n.jsx)("p",{children:"Edit"})]}),(0,n.jsx)(ef.VD,{}),(0,n.jsxs)(ef.Xi,{className:"space-x-2",onClick:()=>r(t),children:[(0,n.jsx)(e0.Z,{size:14}),(0,n.jsx)("p",{children:"Delete"})]})]})]})]})})};var StoragePolicies_StoragePoliciesBucketRow=e=>{let{table:t="",label:s="",bucket:a={},policies:i=[],onSelectPolicyAdd:r=()=>{},onSelectPolicyEdit:o=()=>{},onSelectPolicyDelete:l=()=>{}}=e;return(0,n.jsx)(e$.Z,{title:[(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(e1.Z,{className:"text-foreground-light",size:"small"}),(0,n.jsx)("h4",{className:"m-0 text-lg",children:(0,n.jsx)("span",{children:s})}),a.public&&(0,n.jsx)(e2.Z,{color:"yellow",children:"Public"})]}),(0,n.jsx)(C.z,{type:"outline",onClick:()=>r(a.name,t),children:"New policy"})]},s)],children:0===i.length?(0,n.jsx)("div",{className:"p-4 px-6",children:(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"No policies created yet"})}):(0,n.jsxs)("div",{className:"grid grid-cols-1 divide-y [[data-theme*=dark]_&]:divide-dark",children:[i.map(e=>(0,n.jsx)(PolicyRow,{policy:e,table:t,bucketName:a.name,onSelectPolicyEdit:o,onSelectPolicyDelete:l},e.name)),0!==i.length?(0,n.jsx)("div",{className:"px-6 py-2",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:d()(a)?"objects"===t?"".concat(i.length," polic").concat(i.length>1?"ies":"y"," that are not tied to any buckets"):"".concat(i.length," polic").concat(i.length>1?"ies":"y"," that target your buckets"):"".concat(i.length," polic").concat(i.length>1?"ies":"y"," in ").concat(a.name)})}):null]})})},e4=s(2284),e5=s.n(e4);let e3=[{id:"policy-1",templateName:"Allow access to JPG images in a public folder to anonymous users",description:"This policy uses native postgres functions, functions from auth and storage schema",name:"Give anon users access to JPG images in folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n  -- restrict bucket\n  bucket_id = {bucket_name}\n  -- allow access to only jpg file\n  AND storage.\"extension\"(name) = 'jpg'\n  -- in the public folder\n  AND LOWER((storage.foldername(name))[1]) = 'public'\n  -- to anonymous users\n  AND auth.role() = 'anon'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND storage.\"extension\"(name) = 'jpg' AND LOWER((storage.foldername(name))[1]) = 'public' AND auth.role() = 'anon'",allowedOperations:[]},{id:"policy-2",templateName:"Give users access to only their own top level folder named as uid",description:"For example a user with id d7bed83c-44a0-4a4f-925f-efc384ea1e50 will be able to access anything under the folder d7bed83c-44a0-4a4f-925f-efc384ea1e50/",name:"Give users access to own folder",statement:'\nCREATE POLICY "policy_name"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n    -- restrict bucket\n    bucket_id = {bucket_name}\n    and auth.uid()::text = (storage.foldername(name))[1]\n);\n    '.trim(),definition:"bucket_id = {bucket_id} AND auth.uid()::text = (storage.foldername(name))[1]",allowedOperations:[]},{id:"policy-3",templateName:"Give users access to a folder only to authenticated users",description:"This policy gives users access to a folder (e.g private) only if they are authenticated",name:"Give users authenticated access to folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n    -- restrict bucket\n    bucket_id = {bucket_name}\n    AND (storage.foldername(name))[1] = 'private'\n    AND auth.role() = 'authenticated'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND (storage.foldername(name))[1] = 'private' AND auth.role() = 'authenticated'",allowedOperations:[]},{id:"policy-4",templateName:"Give access to a nested folder called admin/assets only to a specific user",description:'This policy gives read access to all authenticated users for your project to the folder "public"',name:"Give access to a folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n	  -- restrict bucket\n    bucket_id = {bucket_name}\n    AND (storage.foldername(name))[1] = 'admin' AND (storage.foldername(name))[2] = 'assets'\n    AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND (storage.foldername(name))[1] = 'admin' AND (storage.foldername(name))[2] = 'assets' AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'",allowedOperations:[]},{id:"policy-5",templateName:"Give access to a file to a user",description:"This policy gives access to a specific file to a specific user",name:"Give access to a file to user",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n	  -- restrict bucket\n    bucket_id = {bucket_name}\n    AND name = 'admin/assets/Costa Rican Frog.jpg'\n    AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND name = 'admin/assets/Costa Rican Frog.jpg' AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'",allowedOperations:[]}];var e6=s(63157),e8=s(67959),e9=s(90411);let PolicyDefinition=e=>{let{definition:t="",onUpdatePolicyDefinition:s=()=>{}}=e;return(0,n.jsxs)("div",{className:"flex space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"policy-name",children:"Policy definition"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,n.jsx)("div",{className:"h-56 w-2/3",children:(0,n.jsx)(e9.Z,{defaultValue:t,onInputChange:s})})]})},PolicyAllowedOperations=e=>{let{allowedOperations:t=[],onToggleOperation:s=()=>{}}=e,a=deriveAllowedClientLibraryMethods(t);return(0,n.jsxs)("div",{className:"flex justify-between space-x-12",children:[(0,n.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,n.jsx)("label",{className:"text-base text-foreground-light",htmlFor:"allowed-operation",children:"Allowed operation"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Based on the operations you have selected, you can use the highlighted functions in the"," ",(0,n.jsx)("a",{href:"https://supabase.com/docs/reference/javascript/storage-from-list",target:"_blank",rel:"noreferrer",className:"underline",children:"client library"}),"."]})]}),(0,n.jsxs)("div",{className:"w-2/3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,n.jsx)($.Z,{label:"SELECT",onChange:()=>s("SELECT"),checked:t.includes("SELECT")}),(0,n.jsx)($.Z,{label:"INSERT",onChange:()=>s("INSERT"),checked:t.includes("INSERT")}),(0,n.jsx)($.Z,{label:"UPDATE",onChange:()=>s("UPDATE"),checked:t.includes("UPDATE")}),(0,n.jsx)($.Z,{label:"DELETE",onChange:()=>s("DELETE"),checked:t.includes("DELETE")})]}),(0,n.jsx)("div",{className:"flex w-5/6 flex-wrap",children:Object.keys(b.Eb).map(e=>(0,n.jsx)("div",{className:"mr-2 mt-2 font-mono",children:(0,n.jsx)(e2.Z,{color:a.includes(e)?"green":"gray",children:e})},e))})]})]})},PolicyEditorFooter=e=>{let{onViewTemplates:t=()=>{},onReviewPolicy:s=()=>{}}=e;return(0,n.jsxs)("div",{className:"flex w-full items-center justify-end space-x-4 border-t px-6 py-3 border-default",children:[(0,n.jsx)(C.z,{asChild:!0,type:"link",icon:(0,n.jsx)(e6.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)("a",{href:"https://supabase.com/docs/guides/storage/access-control",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,n.jsx)(C.z,{type:"default",onClick:t,children:"View templates"}),(0,n.jsx)(C.z,{type:"primary",onClick:s,children:"Review"})]})]})};var StoragePolicies_StoragePoliciesEditor=e=>{let{policyFormFields:t={},onViewTemplates:s=()=>{},onUpdatePolicyName:a=()=>{},onUpdatePolicyDefinition:i=()=>{},onToggleOperation:r=()=>{},onUpdatePolicyRoles:o=()=>{},onReviewPolicy:l=()=>{}}=e,c=t.definition,d=t.roles;return(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"mb-8 space-y-8 py-6",children:[(0,n.jsx)(S.C.Content,{children:(0,n.jsx)(e8.CM,{name:t.name,limit:50,onUpdatePolicyName:a})}),(0,n.jsx)(S.C.Separator,{}),(0,n.jsx)(S.C.Content,{children:(0,n.jsx)(PolicyAllowedOperations,{allowedOperations:t.allowedOperations,onToggleOperation:r})}),(0,n.jsx)(S.C.Separator,{}),(0,n.jsx)(S.C.Content,{children:(0,n.jsx)(e8.$L,{selectedRoles:d,onUpdateSelectedRoles:o})}),(0,n.jsx)(S.C.Separator,{}),(0,n.jsx)(S.C.Content,{children:(0,n.jsx)(PolicyDefinition,{definition:c,onUpdatePolicyDefinition:i})})]}),(0,n.jsx)(PolicyEditorFooter,{onViewTemplates:s,onReviewPolicy:l})]})};let ReviewEmptyState=()=>(0,n.jsx)("div",{className:"my-10 flex items-center justify-center space-x-2 opacity-50",children:(0,n.jsx)("p",{children:"There are no changes made to this policy"})});var StoragePolicies_StoragePoliciesReview=e=>{let{policyStatements:t=[],onSelectBack:s=()=>{},onSelectSave:a=()=>{}}=e,[i,r]=(0,h.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-6 py-8",children:[(0,n.jsx)("div",{className:"flex items-center justify-between space-y-8 space-x-4",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["These are the SQL statements that will be used to create your policies. The suffix appended to the end of your policy name (",(0,n.jsx)("code",{children:"[hashString]_[number]"}),") just functions as a unique identifier for each of your policies."]})})}),(0,n.jsxs)("div",{className:"space-y-4 overflow-y-auto",style:{maxHeight:"25rem"},children:[0===t.length&&(0,n.jsx)(ReviewEmptyState,{}),t.map((e,t)=>{let s=e.statement||"";return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{children:e.description}),(0,n.jsx)("div",{className:"h-40",children:(0,n.jsx)(e9.Z,{readOnly:!0,defaultValue:s})})]},"policy_".concat(t))})]})]})}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-end gap-2 border-t px-6 py-4 border-default",children:[(0,n.jsx)(C.z,{type:"default",onClick:s,children:"Back to edit"}),t.length>0&&(0,n.jsx)(C.z,{type:"primary",onClick:()=>{r(!0),a()},loading:i,children:"Save policy"})]})]})};let e7={name:"",roles:[],policyIds:[],definition:"",allowedOperations:[]};var StoragePolicies_StoragePoliciesEditPolicyModal=e=>{let{visible:t=!1,bucketName:s="",onSelectCancel:a=()=>{},onCreatePolicies:i=()=>{},onSaveSuccess:r=()=>{}}=e,{ui:o}=(0,f.oR)(),[l,c]=(0,h.useState)(""),[d,u]=(0,h.useState)(""),[m,p]=(0,h.useState)(e7),[g,x]=(0,h.useState)([]);(0,h.useEffect)(()=>{t&&(onViewIntro(),p(e7))},[t]);let onViewIntro=()=>u(eM.$A.SELECTION),onViewEditor=e=>{"new"===e&&p({...m,definition:"bucket_id = '".concat(s,"'")}),u(eM.$A.EDITOR)},onViewTemplates=()=>{c(d),u(eM.$A.TEMPLATES)},onReviewPolicy=()=>u(eM.$A.REVIEW),onSavePolicy=async e=>{let t=await i(e),s=-1!==t.indexOf(!0);s?onViewEditor():r()};return(0,n.jsx)(S.C,{size:d===eM.$A.SELECTION?"medium":"xxlarge",closable:!0,hideFooter:!0,visible:t,contentStyle:{padding:0},header:[(0,n.jsx)(e=>{let{view:t,bucketName:s,onSelectBackFromTemplates:a=()=>{}}=e;return t===eM.$A.TEMPLATES?(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("span",{onClick:a,className:"cursor-pointer text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(eC.Z,{strokeWidth:2,size:14})}),(0,n.jsx)("h4",{className:"textlg m-0",children:"Select a template to use for your new policy"})]})}):(0,n.jsx)("div",{className:"flex items-center space-x-3",children:(0,n.jsx)("h4",{className:"m-0 text-lg",children:t===eM.$A.EDITOR||t===eM.$A.SELECTION?"Adding new policy to ".concat(s):t===eM.$A.REVIEW?"Reviewing policies to be created for ".concat(s):void 0})})},{view:d,bucketName:s,onSelectBackFromTemplates:()=>u(l)},"0")],onCancel:a,children:(0,n.jsx)("div",{className:"w-full",children:d===eM.$A.SELECTION?(0,n.jsx)(eM.pT,{description:"PostgreSQL policies control access to your files and folders",onViewTemplates:onViewTemplates,onViewEditor:()=>onViewEditor("new")}):d===eM.$A.EDITOR?(0,n.jsx)(StoragePolicies_StoragePoliciesEditor,{policyFormFields:m,onViewTemplates:onViewTemplates,onUpdatePolicyName:e=>{e.length<=50&&p({...m,name:e})},onUpdatePolicyDefinition:e=>{p({...m,definition:e})},onToggleOperation:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return p({...m,allowedOperations:[e]});let s=m.allowedOperations.includes(e)?e5()(m.allowedOperations.slice(),e):m.allowedOperations.concat([e]);return p({...m,allowedOperations:s})},onUpdatePolicyRoles:e=>{p({...m,roles:e})},onReviewPolicy:()=>{let{name:e,definition:t,allowedOperations:n}=m;if(0===e.length)return o.setNotification({category:"info",message:"Do give your policy a name"});if(0===t.length)return o.setNotification({category:"info",message:"Did you forget to provide a definition for your policy?"});if(0===n.length)return o.setNotification({category:"info",message:"You will need to allow at least one operation in your policy"});let a=createSQLPolicies(s,m);x(a),onReviewPolicy()}}):d===eM.$A.TEMPLATES?(0,n.jsx)(eM.jm,{templates:e3,onUseTemplate:e=>{let{id:t,...n}=e,a=applyBucketIdToTemplateDefinition(n.definition,s);p({...m,...n,definition:a}),onViewEditor()},templatesNote:""}):d===eM.$A.REVIEW?(0,n.jsx)(StoragePolicies_StoragePoliciesReview,{policyStatements:g,onSelectBack:onViewEditor,onSelectSave:()=>{let e=createPayloadsForAddPolicy(s,m);onSavePolicy(e)}}):(0,n.jsx)("div",{})})})},StoragePolicies_StoragePoliciesPlaceholder=()=>(0,n.jsx)(e$.Z,{title:[(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(e1.Z,{size:"small"}),(0,n.jsx)("h4",{children:"Bucket policies"})]})},"storagePlaceholder")],children:(0,n.jsx)("div",{className:"p-4 px-6",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Create a bucket first to start writing policies!"})})}),StoragePolicies_StoragePolicies=()=>{let{ui:e}=(0,f.oR)(),{project:t}=(0,eB.d2)(),{ref:s}=(0,a.UO)(),{data:i,isLoading:r}=(0,eQ.K)({projectRef:s}),o=null!=i?i:[],[c,u]=(0,h.useState)({}),[m,p]=(0,h.useState)({}),[g,x]=(0,h.useState)({}),{data:y,refetch:j,isLoading:v}=(0,eW.r)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,schema:"storage"}),b=null!=y?y:[],{mutateAsync:w}=(0,eH.f)({onError:()=>{}}),{mutateAsync:N}=(0,eV.k)(),{mutate:S}=(0,eG.l)({onSuccess:async()=>{await j(),W.ZP.success("Successfully deleted policy!"),p({})}}),C=d()(c)&&!d()(g)&&l()(g,["bucket"],"").length>0,k=!d()(g)&&!C,_=eU()(b,{table:"objects"}),E=formatPoliciesForStorage(o,_),P=l()(eo()(E,{name:"Ungrouped"}),["policies"],[]),I=eU()(b,{table:"buckets"}),onSelectPolicyAdd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u({}),x({bucket:e,table:t})},onSelectPolicyEdit=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";x({bucket:t,table:s}),u(e)},onCancelPolicyEdit=()=>{x({})},onSelectPolicyDelete=e=>p(e),onSavePolicySuccess=async()=>{e.setNotification({category:"success",message:"Successfully saved policy!"}),await j(),onCancelPolicyEdit()},onCreatePolicies=async e=>t?await Promise.all(e.map(async e=>{try{return await w({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,payload:e}),!1}catch(e){return W.ZP.error("Error adding policy: ".concat(e.message)),!0}})):(console.error("Project is required"),!0),onCreatePolicy=async e=>{if(!t)return console.error("Project is required"),!0;try{return await w({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,payload:e}),!1}catch(e){return W.ZP.error("Error adding policy: ".concat(e.message)),!0}},onUpdatePolicy=async e=>{if(!t)return console.error("Project is required"),!0;try{return await N({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:e.id,payload:e}),!1}catch(e){return W.ZP.error("Error updating policy: ".concat(e.message)),!0}},onDeletePolicy=async()=>{if(!t)return console.error("Project is required");S({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:m.id})};return(0,n.jsxs)("div",{className:"flex min-h-full w-full flex-col",children:[(0,n.jsx)("h3",{className:"text-xl",children:"Storage policies"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-foreground-light",children:"Safeguard your files with policies that define the operations allowed for your users at the bucket level."}),r||v?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(eu.Z,{className:"animate-spin",size:16})}):(0,n.jsxs)("div",{className:"mt-4 space-y-4",children:[0===o.length&&(0,n.jsx)(StoragePolicies_StoragePoliciesPlaceholder,{}),o.map(e=>{let t=l()(eo()(E,{name:e.name}),["policies"],[]);return(0,n.jsx)(StoragePolicies_StoragePoliciesBucketRow,{table:"objects",label:e.name,bucket:e,policies:t,onSelectPolicyAdd:onSelectPolicyAdd,onSelectPolicyEdit:onSelectPolicyEdit,onSelectPolicyDelete:onSelectPolicyDelete},e.name)}),(0,n.jsx)("div",{className:"!mb-4 w-full border-b border-gray-600"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You may also write policies for the tables under the storage schema directly for greater control"}),(0,n.jsx)(StoragePolicies_StoragePoliciesBucketRow,{table:"objects",label:"Other policies under storage.objects",policies:P,onSelectPolicyAdd:onSelectPolicyAdd,onSelectPolicyEdit:onSelectPolicyEdit,onSelectPolicyDelete:onSelectPolicyDelete}),(0,n.jsx)(StoragePolicies_StoragePoliciesBucketRow,{table:"buckets",label:"Policies under storage.buckets",policies:I,onSelectPolicyAdd:onSelectPolicyAdd,onSelectPolicyEdit:onSelectPolicyEdit,onSelectPolicyDelete:onSelectPolicyDelete})]}),(0,n.jsx)(StoragePolicies_StoragePoliciesEditPolicyModal,{visible:C,bucketName:g.bucket,onSelectCancel:onCancelPolicyEdit,onCreatePolicies:onCreatePolicies,onSaveSuccess:onSavePolicySuccess}),(0,n.jsx)(eM.yV,{visible:k,schema:"storage",table:g.table,selectedPolicyToEdit:c,onSelectCancel:onCancelPolicyEdit,onCreatePolicy:onCreatePolicy,onUpdatePolicy:onUpdatePolicy,onSaveSuccess:onSavePolicySuccess}),(0,n.jsx)(eq.Z,{danger:!0,visible:!d()(m),title:"Confirm to delete policy",description:'This is permanent! Are you sure you want to delete the policy "'.concat(m.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:()=>p({}),onSelectConfirm:onDeletePolicy})]})},te=s(44607),tt=s(93444),ts=s(3051),tn=s(55830),ta=s(62350),ti=s(3218),tr=s(58970);async function updateProjectStorageConfigUpdate(e){let{projectRef:t,fileSizeLimit:s}=e,n=await (0,ti.r$)("".concat(y.T5,"/projects/").concat(t,"/config/storage"),{fileSizeLimit:s});if(n.error)throw n.error;return n}let useProjectStorageConfigUpdateUpdateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,tn.NL)();return(0,ta.D)(e=>updateProjectStorageConfigUpdate(e),{async onSuccess(t,s,a){let{projectRef:i}=s;await n.invalidateQueries(tr.U.storage(i)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?W.ZP.error("Failed to update storage settings: ".concat(e.message)):t(e,s,n)},...s})};var to=s(74246),tl=s(14385);let StorageConfig=e=>{let{config:t,projectRef:s,organizationSlug:a}=e,{fileSizeLimit:i,isFreeTier:r}=t,{value:o,unit:l}=(0,tl.K)(i),{ui:c}=(0,f.oR)(),[d,u]=(0,h.useState)(l),m={fileSizeLimit:o,unformattedFileSizeLimit:i},p=(0,f.Xo)(D.KA.STORAGE_ADMIN_WRITE,"*"),{mutate:g,isLoading:x}=useProjectStorageConfigUpdateUpdateMutation({onSuccess:e=>{let t=(0,tl.K)(e.fileSizeLimit);m={fileSizeLimit:t.value,unformattedFileSizeLimit:e.fileSizeLimit},c.setNotification({category:"success",message:"Successfully updated storage settings"})}}),y="".concat(new Intl.NumberFormat("en-US").format(to.H)," bytes"),{value:j}=(0,tl.K)(to.H,d),onValidate=e=>{let t={};return e.fileSizeLimit>j&&(t.fileSizeLimit="Maximum limit is up to ".concat(j.toLocaleString()," ").concat(d,".")),t},onSubmit=async e=>{let t=onValidate(e);if(t.fileSizeLimit)return c.setNotification({category:"error",message:"Upload file size limit must be up to 5GB (".concat(y,")")});g({projectRef:s,fileSizeLimit:(0,tl.F)(e.fileSizeLimit,d)})};return(0,n.jsx)("div",{children:(0,n.jsx)(P.Z,{validateOnBlur:!0,initialValues:m,validate:onValidate,onSubmit:onSubmit,children:e=>{let{values:t,handleReset:i}=e,o=m.unformattedFileSizeLimit!==(0,tl.F)(t.fileSizeLimit,d);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"mb-2 text-xl text-foreground",children:"Storage Settings"}),(0,n.jsx)("div",{className:"text-sm text-foreground-lighter",children:"Configure your project's storage settings"})]}),(0,n.jsx)("div",{className:"space-y-20",children:(0,n.jsxs)("div",{className:"bg-surface-100 overflow-hidden border-muted rounded-md border shadow",children:[(0,n.jsx)("div",{className:"flex flex-col gap-0 divide-y divide-border-muted",children:(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-6 px-8 py-8 lg:gap-12",children:[(0,n.jsx)("div",{className:"relative flex flex-col col-span-12 gap-6 lg:col-span-4",children:(0,n.jsx)("p",{className:"text-sm",children:"Upload file size limit"})}),(0,n.jsxs)("div",{className:"relative flex flex-col col-span-12 gap-x-6 gap-y-2 lg:col-span-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-2",children:[(0,n.jsx)("div",{className:"col-span-8",children:(0,n.jsx)(I.Z,{id:"fileSizeLimit",name:"fileSizeLimit",type:"number",disabled:r||!p,step:1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()}})}),(0,n.jsx)("div",{className:"col-span-4",children:(0,n.jsx)(L.Z,{disabled:r,value:d,onChange:u,children:Object.values(to.b).map(e=>(0,n.jsx)(L.Z.Option,{disabled:r,label:e,value:e,children:(0,n.jsx)("div",{children:e})},e))})})]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:[d!==to.b.BYTES&&"Equivalent to ".concat((0,tl.F)(t.fileSizeLimit,d).toLocaleString()," bytes. "),"Maximum size in bytes of a file that can be uploaded is 5 GB (",y,")."]})]})]})}),r&&(0,n.jsx)("div",{className:"px-6 pb-6",children:(0,n.jsx)(tt.Z,{icon:(0,n.jsx)(te.Z,{size:"large"}),organizationSlug:a,primaryText:"Free Plan has a fixed upload file size limit of 50 MB.",projectRef:s,secondaryText:"Upgrade to the Pro plan for a configurable upload file size limit of up to 5 GB."})}),(0,n.jsx)("div",{className:"border-t border-overlay"}),(0,n.jsx)("div",{className:"flex justify-between px-8 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[p?(0,n.jsx)("div",{}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You need additional permissions to update storage settings"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(C.z,{type:"default",htmlType:"reset",onClick:()=>i(),disabled:x||!o&&void 0!==o,children:"Cancel"}),(0,n.jsx)(C.z,{type:"primary",htmlType:"submit",loading:x,disabled:!p||x||!o&&void 0!==o,children:"Save"})]})]})})]})})]})}})})};var StorageSettings_StorageSettings=e=>{let{projectRef:t,organizationSlug:s}=e,{data:a,error:i}=(0,ts.k)({projectRef:t},{enabled:y.Qy});return i||(null==a?void 0:a.error)?(0,n.jsx)("div",{className:"p-6 mx-auto text-center sm:w-full md:w-3/4",children:(0,n.jsx)("p",{className:"text-sm",children:"Error loading storage settings"})}):a?(0,n.jsx)(StorageConfig,{config:a,projectRef:t,organizationSlug:s}):(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(et.A,{})})},tc=s(5632),td=s(7765),tu=s(36179);async function deleteBucket(e){let{projectRef:t,id:s}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let n=await (0,ti.v_)("".concat(y.T5,"/storage/").concat(t,"/buckets/").concat(s,"/empty"),{});if(n.error)throw n.error;let a=await (0,ti.$v)("".concat(y.T5,"/storage/").concat(t,"/buckets/").concat(s));if(a.error)throw a.error;return a}let useBucketDeleteMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,tn.NL)();return(0,ta.D)(e=>deleteBucket(e),{async onSuccess(t,s,a){let{projectRef:i}=s;await n.invalidateQueries(tu.m.buckets(i)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?W.Am.error("Failed to delete bucket: ".concat(e.message)):t(e,s,n)},...s})};var Storage_DeleteBucketModal=e=>{var t;let{visible:s=!1,bucket:i,onClose:r}=e,o=(0,tc.useRouter)(),{ref:c}=(0,a.UO)(),{project:d}=(0,eB.d2)(),{data:u}=(0,eQ.K)({projectRef:c}),{data:m}=(0,eW.r)({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString,schema:"storage"}),{mutateAsync:p}=(0,eG.l)(),{mutate:h,isLoading:g}=useBucketDeleteMutation({onSuccess:async()=>{if(!d)return console.error("Project is required");let e=(null!=m?m:[]).filter(e=>"objects"===e.table),t=formatPoliciesForStorage(x,e),s=l()(eo()(t,{name:i.name}),["policies"],[]);await Promise.all(s.map(e=>p({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString,id:e.id}))),W.ZP.success("Successfully deleted bucket ".concat(i.name)),o.push("/project/".concat(c,"/storage/buckets")),r()}}),x=null!=u?u:[],onDeleteBucket=async()=>c?i?void h({projectRef:c,id:i.id}):console.error("No bucket is selected"):console.error("Project ref is required");return(0,n.jsx)(td.Z,{visible:s,title:"Confirm deletion of ".concat(null==i?void 0:i.name),confirmPlaceholder:"Type in name of bucket",onConfirm:onDeleteBucket,onCancel:r,confirmString:null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"",loading:g,text:(0,n.jsxs)(n.Fragment,{children:["Your bucket ",(0,n.jsx)("span",{className:"font-bold",children:null==i?void 0:i.name})," and all its contents will be permanently deleted."]}),alert:"You cannot recover this bucket once it is deleted.",confirmLabel:"Delete bucket ".concat(null==i?void 0:i.name)})}},44171:function(e,t,s){var n=s(52322);function Table(e){let{body:t,head:s,className:a,containerClassName:i,borderless:r,headTrClasses:o,bodyClassName:l,style:c}=e,d=["table-container"];i&&d.push(i),r&&d.push("table-container--borderless");let u=["table"];return a&&u.push(a),(0,n.jsx)("div",{className:d.join(" "),children:(0,n.jsxs)("table",{className:u.join(" "),style:c,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:o,children:s})}),(0,n.jsx)("tbody",{className:l,children:t})]})})}Table.th=e=>{let{children:t,className:s,style:a}=e,i=["p-3 px-4 text-left"];return s&&i.push(s),(0,n.jsx)("th",{className:i.join(" "),style:a,children:t})},Table.td=e=>{let{children:t,colSpan:s,className:a,style:i,...r}=e;return(0,n.jsx)("td",{className:a,colSpan:s,style:i,...r,children:t})},Table.tr=e=>{let{children:t,className:s,onClick:a,style:i,hoverable:r}=e,o=[s];return(a||r)&&o.push("tr--link"),(0,n.jsx)("tr",{className:o.join(" "),onClick:a,style:i,children:t})},t.Z=Table},22404:function(e,t,s){var n=s(52322),a=s(64439),i=s(94580),r=s(47742);t.Z=e=>{let{section:t}=e,s=(0,a.WZ)();return(0,n.jsx)(i.z,{size:"tiny",type:"default",onClick:()=>{t&&s.setActiveDocsSection(t),s.setShowProjectApiDocs(!0)},icon:(0,n.jsx)(r.Z,{size:14,strokeWidth:2}),children:"API Docs"})}},98050:function(e,t,s){var n=s(52322),a=s(2784),i=s(1681),r=s(94580);t.Z=e=>{let{visible:t=!1,loading:s=!1,danger:o=!1,header:l="",description:c="",size:d="small",buttonLabel:u="",buttonLoadingLabel:m="",buttonDisabled:p=!1,onSelectCancel:h=()=>{},onSelectConfirm:g=()=>{},children:x}=e;(0,a.useEffect)(()=>{t&&y(!1)},[t]),(0,a.useEffect)(()=>{y(s)},[s]);let[f,y]=(0,a.useState)(!1);return(0,n.jsx)(i.C,{layout:"vertical",visible:t,header:l,description:c,size:d,onCancel:h,customFooter:(0,n.jsxs)("div",{className:"flex justify-end w-full items-center space-x-3",children:[(0,n.jsx)(r.z,{type:"default",disabled:f,onClick:h,children:"Cancel"}),(0,n.jsx)(r.z,{type:o?"danger":"primary",loading:f,disabled:f||p,onClick:e=>{e.preventDefault(),e.stopPropagation(),y(!0),g()},children:f?m:u})]}),children:x})}},54554:function(e,t,s){var n=s(52322),a=s(2784),i=s(36631),r=s(50166),o=s(6738),l=s(11628),c=s(71813),d=s(20775);let u=(0,i.Z)((e,t)=>({items:e,...t})),m=(0,a.memo)(e=>{let{data:t,index:s,style:a}=e,{items:i,itemProps:r,ItemComponent:o}=t,l=s<i.length?i[s]:void 0;return l?(0,n.jsx)("div",{style:a,children:(0,n.jsx)(o,{index:s,item:l,...r})}):(0,n.jsxs)("div",{className:"space-y-1 my-1",style:a,children:[(0,n.jsx)(d.Z,{}),(0,n.jsx)(d.Z,{}),(0,n.jsx)(d.Z,{})]})},r.wy);t.Z=(0,a.memo)(function(e){let{items:t=[],itemProps:s={},hasNextPage:a=!1,isLoadingNextPage:i=!1,getItemSize:c=()=>40,onLoadNextPage:d=()=>{},ItemComponent:p=()=>null}=e,h=i?()=>{}:d,isItemLoaded=e=>!a||e<t.length,g=a?t.length+1:t.length,x=u(t,{itemProps:s,ItemComponent:p});return(0,n.jsxs)("div",{className:"relative flex flex-col flex-grow",children:[(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)(o.ZP,{children:e=>{let{height:t,width:s}=e;return(0,n.jsx)(l.Z,{itemCount:g,isItemLoaded:isItemLoaded,loadMoreItems:h,children:e=>{let{onItemsRendered:a,ref:i}=e;return(0,n.jsx)(r.S_,{ref:i,height:null!=t?t:0,width:null!=s?s:0,itemCount:g,itemData:x,itemSize:c,onItemsRendered:a,children:m})}})}})}),(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,pointerEvents:"none"}})]})},c.t0)},7765:function(e,t,s){var n=s(52322),a=s(1681),i=s(57463),r=s(73205),o=s(31915),l=s(94580);t.Z=e=>{let{title:t,size:s="small",onConfirm:c,visible:d,onCancel:u,loading:m,confirmLabel:p,confirmPlaceholder:h,confirmString:g,alert:x,text:f,children:y}=e;return(0,n.jsx)(a.C,{hideFooter:!0,closable:!0,size:s,visible:d,header:t,onCancel:u,children:(0,n.jsx)(i.Z,{validateOnBlur:!0,initialValues:{confirmValue:""},validate:e=>{let t={};return 0===e.confirmValue.length?t.confirmValue="Enter the required value.":e.confirmValue!==g&&(t.confirmValue="Value entered does not match."),t},onSubmit:c,children:()=>(0,n.jsx)("div",{className:"w-full py-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.C.Content,{children:y}),(0,n.jsx)(a.C.Separator,{})]}),x&&(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(r.b,{variant:"warning",withIcon:!0,title:x})}),void 0!==f&&(0,n.jsx)(a.C.Content,{children:(0,n.jsx)("p",{className:"mb-2 block text-sm break-all",children:f})}),(0,n.jsx)(a.C.Separator,{}),(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(o.Z,{id:"confirmValue",label:(0,n.jsxs)("span",{children:["Type ",(0,n.jsx)("span",{className:"text-foreground break-all",children:g})," to confirm."]}),placeholder:h})}),(0,n.jsx)(a.C.Separator,{}),(0,n.jsx)(a.C.Content,{children:(0,n.jsx)(l.z,{block:!0,type:"danger",size:"medium",htmlType:"submit",loading:m,disabled:m,children:p})})]})})})})}},97131:function(e,t,s){var n=s(52322),a=s(39195);t.Z=e=>{let{resourceText:t,isFullPage:s=!1}=e,NoPermissionMessage=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(a.Z,{size:"large"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or adminstrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(NoPermissionMessage,{})})}):(0,n.jsx)(NoPermissionMessage,{})}},12744:function(e,t,s){var n=s(52322),a=s(1794);function Panel(e){let t=[];t=e.hideHeaderStyling?["bg-surface-100"]:["bg-surface-100 border-b border-overlay"];let s=(0,n.jsxs)("div",{className:"\n        ".concat(e.noHideOverflow?"":"overflow-hidden"," rounded-md border\n        border-overlay shadow-sm ").concat(e.noMargin?"":"mb-8"," ").concat(e.className),children:[e.title&&(0,n.jsx)("div",{className:t.join(" "),children:(0,n.jsx)("div",{className:"flex items-center px-6 py-4",children:e.title})}),(0,n.jsx)("div",{className:"bg-surface-100 ".concat(e.bodyClassName||""),children:e.children}),e.footer&&(0,n.jsx)("div",{className:"bg-surface-100 border-t border-overlay",children:(0,n.jsx)("div",{className:"flex h-12 items-center px-6",children:e.footer})})]});return!1===e.wrapWithLoading?s:(0,n.jsx)(a.Z,{active:!!e.loading,children:s})}Panel.Content=function(e){let{children:t,className:s}=e,a=["px-6 py-4"];return s&&a.push(s),(0,n.jsx)("div",{className:a.join(" "),children:t})},t.Z=Panel},53504:function(e,t,s){var n=s(52322),a=s(39097),i=s.n(a),r=s(22754),o=s(94580);t.Z=e=>{let{name:t="",isActive:s,isExternal:a,icon:l,url:c="",target:d="_self",onClick:u,textClassName:m="",hoverText:p="",label:h}=e,g=(0,n.jsx)(r.ZP.Item,{icon:l,rounded:!0,active:s,onClick:u,children:(0,n.jsx)("div",{className:"flex w-full items-center justify-between gap-1",children:(0,n.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+m,children:[(0,n.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==h&&(0,n.jsx)("span",{className:"text-orange-800 text-xs font-normal truncate",children:h})]})})});return c?a?(0,n.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:l,children:(0,n.jsx)(i(),{href:c,target:"_blank",rel:"noreferrer",children:t})}):(0,n.jsx)(i(),{href:c,className:"block",target:d,children:g}):g}},79552:function(e,t,s){s.d(t,{Z:function(){return ui_ProductMenu}});var n=s(52322),a=s(22754),i=s(84959),r=s(53504),ui_ProductMenu=e=>{let{page:t,menu:s}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,n.jsx)(a.ZP,{type:"pills",children:s.map((e,o)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(a.ZP.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(i.Z,{color:"amber",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>(0,n.jsx)(r.Z,{url:e.url,name:e.name,icon:e.icon,isActive:t===e.key,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key))})]})}),o!==s.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-overlay"})]},e.title||e.key))})})}},81437:function(e,t,s){s.d(t,{D:function(){return ProjectSettings_DisplayApiSettings},m:function(){return ProjectSettings_DisplayConfigSettings}});var n=s(52322),a=s(59491),i=s(63059),r=s(94580),o=s(78796),l=s(39195),c=s(13781),d=s(31915),u=s(73872),m=s(12744),p=s(67197),h=s(96029),g=s(89465),x=s(46732),ProjectSettings_DisplayApiSettings=()=>{var e,t;let{ref:s}=(0,u.UO)(),{data:f,isError:y,isLoading:j}=(0,h.o)({projectRef:s}),{data:v,isError:b,isLoading:w}=(0,p.t)({projectRef:s}),N=null==v?void 0:v.jwtSecretUpdateStatus,S=(0,g.Xo)(a.KA.READ,"service_api_keys"),C=void 0===N||N===i.JwtSecretUpdateStatus.Updated,k=(null!==(e=null==f?void 0:f.services)&&void 0!==e?e:[]).find(e=>e.app.id==x.pG),_=null!==(t=null==k?void 0:k.service_api_keys)&&void 0!==t?t:[],E=0===_.length;return(0,n.jsx)(m.Z,{title:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h5",{className:"text-base",children:"Project API keys"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,n.jsx)("br",{}),"You can use the keys below in the Supabase client libraries.",(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://supabase.com/docs#client-libraries",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(r.z,{icon:(0,n.jsx)(o.Z,{}),type:"default",className:"mt-4",children:"Client Docs"})})]})]}),children:y||b?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(l.Z,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:y?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):E||j||w?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(c.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:j||E?"Retrieving API keys":"JWT secret is being updated"})]}):_.map((e,t)=>{var s;return(0,n.jsx)(m.Z.Content,{className:t>=1&&"border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:(0,n.jsx)(d.Z,{readOnly:!0,disabled:!0,layout:"horizontal",className:"input-mono",label:(0,n.jsxs)(n.Fragment,{children:[null===(s=e.tags)||void 0===s?void 0:s.split(",").map((e,t)=>(0,n.jsx)("code",{className:"text-xs text-code",children:e},"".concat(e).concat(t))),"service_role"===e.tags&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("code",{className:"bg-red-900 text-xs text-white",children:"secret"})}),"anon"===e.tags&&(0,n.jsx)("code",{className:"text-xs text-code",children:"public"})]}),copy:S&&C,reveal:"anon"!==e.tags&&S&&C,value:S?N===i.JwtSecretUpdateStatus.Failed?"JWT secret update failed, new API key may have issues":N===i.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":e.api_key:"You need additional permissions to view API keys",onChange:()=>{},descriptionText:"service_role"===e.tags?"This key has the ability to bypass Row Level Security. Never share it publicly.":"This key is safe to use in a browser if you have enabled Row Level Security for your tables and configured policies."})},e.api_key)})})},f=s(60674),ProjectSettings_DisplayConfigSettings=()=>{var e,t,s,a,r;let{ref:o}=(0,f.UO)(),{data:u,isLoading:g,isError:y}=(0,h.o)({projectRef:o}),{data:j,isError:v,isLoading:b}=(0,p.t)({projectRef:o}),w=null==j?void 0:j.jwtSecretUpdateStatus,N=void 0===w||w===i.JwtSecretUpdateStatus.Updated,S=null!==(t=null==u?void 0:null===(e=u.project)||void 0===e?void 0:e.jwt_secret)&&void 0!==t?t:"",C=(null!==(s=null==u?void 0:u.services)&&void 0!==s?s:[]).find(e=>e.app.id==x.pG),k=null==C?void 0:C.app_config,_="".concat(null!==(a=null==k?void 0:k.protocol)&&void 0!==a?a:"https","://").concat(null!==(r=null==k?void 0:k.endpoint)&&void 0!==r?r:"-");return(0,n.jsx)(ConfigContentWrapper,{children:y||v?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(l.Z,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:y?"Failed to retrieve configuration":"Failed to update JWT secret"})]}):g||b?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(c.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:g?"Retrieving API keys":"JWT secret is being updated"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z.Content,{children:(0,n.jsx)(d.Z,{label:"URL",readOnly:!0,copy:!0,disabled:!0,className:"input-mono",value:_,descriptionText:"A RESTful endpoint for querying and managing your database.",layout:"horizontal"})}),(0,n.jsx)(m.Z.Content,{className:"border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:(0,n.jsx)(d.Z,{label:"JWT Secret",readOnly:!0,copy:N,reveal:N,disabled:!0,value:w===i.JwtSecretUpdateStatus.Failed?"JWT secret update failed":w===i.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":S,className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"})})]})})};let ConfigContentWrapper=e=>{let{children:t}=e;return(0,n.jsx)(m.Z,{title:(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsx)("h5",{className:"text-base",children:"Project Configuration"})}),children:t})}},50932:function(e,t,s){var n=s(52322),a=s(2784),i=s(94580),r=s(13781),o=s(50074),l=s(56469),c=s(47742),d=s(50671),u=s(50138),m=s(55216),p=s(88058),h=s(2755),g=s(12752);t.Z=e=>{let{className:t,disabled:s=!1,size:x="tiny",showError:f=!0,selectedSchemaName:y,supportSelectAll:j=!1,onSelectSchema:v,onSelectCreateSchema:b}=e,[w,N]=(0,a.useState)(!1),{project:S}=(0,h.d2)(),{data:C,isLoading:k,isSuccess:_,isError:E,error:P,refetch:I}=(0,g.Q1)({projectRef:null==S?void 0:S.ref,connectionString:null==S?void 0:S.connectionString}),L=(null!=C?C:[]).sort((e,t)=>e.name>t.name?0:-1);return(0,n.jsxs)("div",{className:t,children:[k&&(0,n.jsx)(i.z,{type:"outline",className:"w-full [&>span]:w-full ".concat("small"===x?"py-1.5":""),size:x,icon:(0,n.jsx)(r.Z,{className:"animate-spin",size:12}),disabled:!!s,children:(0,n.jsx)("div",{className:"w-full flex space-x-3 py-0.5",children:(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"Loading schemas..."})})}),f&&E&&(0,n.jsxs)(o.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(o.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(o.X,{className:"text-xs mb-2",children:["Error: ",null==P?void 0:P.message]}),(0,n.jsx)(i.z,{type:"default",size:"tiny",onClick:()=>I(),children:"Reload schemas"})]}),_&&(0,n.jsxs)(l.J2,{open:w,onOpenChange:N,modal:!1,children:[(0,n.jsx)(l.xo,{asChild:!0,children:(0,n.jsx)(i.z,{size:x,disabled:s,type:"outline",className:"w-full [&>span]:w-full ".concat("small"===x?"py-1.5":""),iconRight:(0,n.jsx)(c.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),children:(0,n.jsxs)("div",{className:"w-full flex space-x-3 py-0.5",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"schema"}),(0,n.jsx)("p",{className:"text-xs",children:"*"===y?"All schemas":y})]})})}),(0,n.jsx)(l.yk,{className:"p-0 w-64",side:"bottom",align:"start",children:(0,n.jsxs)(d.mY,{children:[(0,n.jsx)(d.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(d.e8,{children:[(0,n.jsx)(d.rb,{children:"No schemas found"}),(0,n.jsx)(d.fu,{children:(0,n.jsxs)(u.x,{className:(L||[]).length>7?"h-[210px]":"",children:[j&&(0,n.jsxs)(d.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{v("*"),N(!1)},onClick:()=>{v("*"),N(!1)},children:[(0,n.jsx)("span",{children:"All schemas"}),"*"===y&&(0,n.jsx)(m.Z,{className:"text-brand",strokeWidth:2})]},"select-all"),null==L?void 0:L.map(e=>(0,n.jsxs)(d.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{v(e.name),N(!1)},onClick:()=>{v(e.name),N(!1)},children:[(0,n.jsx)("span",{children:e.name}),y===e.name&&(0,n.jsx)(m.Z,{className:"text-brand",strokeWidth:2})]},e.id))]})}),void 0!==b&&(0,n.jsx)(d.fu,{className:"border-t",children:(0,n.jsxs)(d.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{b(),N(!1)},onClick:()=>{b(),N(!1)},children:[(0,n.jsx)(p.Z,{}),"Create a new schema"]})})]})]})})]})]})}},90411:function(e,t,s){var n=s(52322),a=s(79534),i=s(34291),r=s.n(i),o=s(2784),l=s(89465);t.Z=e=>{let{queryId:t,language:s="pgsql",defaultValue:i="",readOnly:c=!1,contextmenu:d=!0,onInputChange:u=r()}=e,m=(0,a.useMonaco)(),{meta:p}=(0,l.oR)(),h=(0,o.useRef)();async function formatPgsql(e){try{let t=await p.formatQuery(e);if(t.error)throw t.error;return t}catch(t){return console.error("formatPgsql error:",t),e}}return(0,o.useEffect)(()=>{if(m){let e=m.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),s=await formatPgsql(t);return[{range:e.getFullModelRange(),text:s}]}});return()=>{e.dispose()}}},[m]),(0,o.useEffect)(()=>{if(h.current){var e;null===(e=h.current)||void 0===e||e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})}},[t]),(0,n.jsx)(a.default,{className:"monaco-editor",theme:"vs-dark",defaultLanguage:s,defaultValue:i,path:t,loading:(0,n.jsx)(()=>(0,n.jsx)("h4",{className:"text-lg",children:"Loading"}),{}),options:{readOnly:c,tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:d},onMount:(e,t)=>{h.current=e,e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})},onChange:u})}},17277:function(e,t,s){var n=s(52322),a=s(6277);t.Z=e=>{let{options:t,width:s=50,activeOption:i,onClickOption:r,borderOverride:o="border-stronger"}=e,buttonStyle=e=>"absolute top-0 z-1 text-xs inline-flex h-full items-center justify-center font-medium\n    ".concat(e?"hover:text-foreground-light hover:text-foreground":"hover:text-foreground"," hover:text-foreground focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue\n    transition ease-in-out duration-150");return(0,n.jsxs)("div",{className:"relative border ".concat(o," rounded-md h-7"),style:{padding:1,width:(s+1)*2},children:[(0,n.jsx)("span",{style:{width:s,translate:i===t[1]?"0px":"".concat(s-2,"px")},"aria-hidden":"true",className:(0,a.default)("z-0 inline-block rounded h-full bg-overlay-hover shadow transform","transition-all ease-in-out border border-strong")}),t.map((e,t)=>(0,n.jsx)("span",{style:{width:s+1},className:"\n              ".concat(i===e?"text-foreground":"text-foreground-light","\n              ").concat(0===t?"right-0":"left-0","\n              ").concat(buttonStyle(i===e),"\n              cursor-pointer\n            "),onClick:()=>r(e),children:(0,n.jsx)("span",{className:(0,a.default)("capitalize hover:text-foreground",i===e?"text-foreground":"text-foreground-light"),children:e})},"toggle_".concat(t)))]})}},93444:function(e,t,s){var n=s(52322),a=s(24990),i=s(59491),r=s(39097),o=s.n(r),l=s(94580),c=s(89465),d=s(21511);t.Z=e=>{var t;let{icon:s,primaryText:r,projectRef:u,organizationSlug:m,secondaryText:p,addon:h,buttonText:g}=e,{data:x}=(0,d.G)({orgSlug:m}),f=null==x?void 0:null===(t=x.plan)||void 0===t?void 0:t.id,y=(0,c.Xo)(i.KA.BILLING_WRITE,"stripe.subscriptions"),j=(0,c.P5)("disableProjectCreationAndUpdate");return(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[s&&(0,n.jsx)("div",{className:"mt-1",children:s}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between space-x-32",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm",children:r}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:p})})]}),(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{asChild:!0,children:(0,n.jsx)(l.z,{type:"primary",disabled:!y||j,asChild:!0,children:(0,n.jsx)(o(),{href:"free"===f?"/org/".concat(m,"/billing?panel=subscriptionPlan"):"/project/".concat(u,"/settings/addons?panel=").concat(h),children:g||("free"===f?"Upgrade to Pro":"Enable Addon")})})}),!y||j&&(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"border border-background text-center rounded bg-alternative py-1 px-2 leading-none shadow",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:j?(0,n.jsxs)(n.Fragment,{children:["Subscription changes are currently disabled.",(0,n.jsx)("br",{}),"Our engineers are working on a fix."]}):y?"":"You need additional permissions to amend subscriptions"})})]})})]})]})]})})}},3152:function(e,t,s){s.d(t,{g:function(){return useSqlTitleGenerateMutation}});var n=s(62350),a=s(62202),i=s(3218),r=s(46732);async function generateSqlTitle(e){let{sql:t}=e,s=await (0,i.v_)(r.GW+"/api/ai/sql/title",{sql:t});if(!(0,i.d8)(s))throw s.error;return s}let useSqlTitleGenerateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>generateSqlTitle(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.ZP.error("Failed to generate title: ".concat(e.message)):t(e,s,n)},...s})}},4481:function(e,t,s){s.d(t,{J:function(){return useBranchCreateMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(27786),l=s(31604);async function createBranch(e){let{projectRef:t,branchName:s,gitBranch:n,region:a}=e,{data:i,error:o}=await (0,r.v_)("/v1/projects/{ref}/branches",{params:{path:{ref:t}},body:{branch_name:s,git_branch:n,region:a}});if(o)throw o;return i}let useBranchCreateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>createBranch(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(o.x.list(a)),await r.invalidateQueries(l.i.detail(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to create branch: ".concat(e.message)):t(e,s,n)},...s})}},67197:function(e,t,s){s.d(t,{t:function(){return useJwtSecretUpdatingStatusQuery}});var n=s(63059),a=s(55830),i=s(58943),r=s(3218),o=s(46732),l=s(58970);async function getJwtSecretUpdatingStatus(e,t){var s;let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let a=await (0,r.U2)("".concat(o.T5,"/props/project/").concat(n,"/jwt-secret-update-status"),{signal:t});if(a.error)throw a.error;let i=null==a?void 0:null===(s=a.jwtSecretUpdateStatus)||void 0===s?void 0:s.meta;return{changeTrackingId:null==i?void 0:i.change_tracking_id,jwtSecretUpdateError:null==i?void 0:i.error,jwtSecretUpdateProgress:null==i?void 0:i.progress,jwtSecretUpdateStatus:null==i?void 0:i.status}}let useJwtSecretUpdatingStatusQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,a.NL)();return(0,i.a)(l.U.jwtSecretUpdatingStatus(t),e=>{let{signal:s}=e;return getJwtSecretUpdatingStatus({projectRef:t},s)},{enabled:s&&void 0!==t,refetchInterval(e){if(!e)return!1;let{jwtSecretUpdateStatus:t}=e,s=t===n.JwtSecretUpdateStatus.Updating&&1e3;return s},onSuccess(){o.invalidateQueries(l.U.postgrest(t))},...r})}},96029:function(e,t,s){s.d(t,{o:function(){return useProjectSettingsQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(58970);async function getProjectSettings(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(i.T5,"/props/project/").concat(s,"/settings"),{signal:t});if(n.error)throw n.error;return n}let useProjectSettingsQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.settings(t),e=>{let{signal:s}=e;return getProjectSettings({projectRef:t},s)},{enabled:s&&void 0!==t,refetchInterval(e,t){var s,n;let a=(null!==(s=null==e?void 0:e.services)&&void 0!==s?s:[]).find(e=>e.app.id==i.pG),r=null!==(n=null==a?void 0:a.service_api_keys)&&void 0!==n?n:[],o=0===r.length?2e3:0;return o},...a})}},3051:function(e,t,s){s.d(t,{k:function(){return useProjectStorageConfigQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(58970);async function getProjectStorageConfig(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(i.T5,"/projects/").concat(s,"/config/storage"),{signal:t});if(n.error)throw n.error;return n}let useProjectStorageConfigQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.storage(t),e=>{let{signal:s}=e;return getProjectStorageConfig({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},50226:function(e,t,s){s.d(t,{D:function(){return useProjectUpgradeEligibilityQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(58970);async function getProjectUpgradeEligibility(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(i.Q2,"/projects/").concat(s,"/upgrade/eligibility"),{signal:t});if(n.error)throw n.error;return n}let useProjectUpgradeEligibilityQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.upgradeEligibility(t),e=>{let{signal:s}=e;return getProjectUpgradeEligibility({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},52857:function(e,t,s){s.d(t,{h:function(){return useProjectUpgradingStatusQuery}});var n=s(55830),a=s(58943),i=s(63059),r=s(3218),o=s(46732),l=s(58970);async function getProjectUpgradingStatus(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,r.U2)("".concat(o.Q2,"/projects/").concat(s,"/upgrade/status"),{signal:t});if(n.error)throw n.error;return n}let useProjectUpgradingStatusQuery=function(e){let{projectRef:t,projectStatus:s}=e,{enabled:r=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,n.NL)();return(0,a.a)(l.U.upgradeStatus(t),e=>{let{signal:s}=e;return getProjectUpgradingStatus({projectRef:t},s)},{enabled:r&&void 0!==t,refetchInterval(e){var t,n;if(!e)return!1;let a=(s===o.S.UPGRADING&&(null===(t=e.databaseUpgradeStatus)||void 0===t?void 0:t.status)!==i.h.Upgrading||(null===(n=e.databaseUpgradeStatus)||void 0===n?void 0:n.status)===i.h.Upgrading)&&5e3;return a},onSuccess(e){var s;(null===(s=e.databaseUpgradeStatus)||void 0===s?void 0:s.status)===i.h.Upgraded&&d.invalidateQueries(l.U.upgradeEligibility(t))},...c})}},81029:function(e,t,s){s.d(t,{I1:function(){return useContentQuery}});var n=s(58943),a=s(3218),i=s(46732);s(2784);var r=s(13080);async function getContent(e,t){if(void 0===e)throw Error("projectRef is required for getContent");let s=await (0,a.U2)("".concat(i.T5,"/projects/").concat(e,"/content"),{signal:t});if(s.error)throw s.error;if(!s)throw Error("Content not found");return{content:s.data}}let useContentQuery=function(e){let{enabled:t=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.$.list(e),t=>{let{signal:s}=t;return getContent(e,s)},{enabled:t&&void 0!==e,...s})}},13813:function(e,t,s){s.d(t,{z:function(){return useCustomDomainsQuery}});var n=s(58943),a=s(9402),i=s(46732),r=s(50913);async function getCustomDomains(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:i}=await (0,a.U2)("/v1/projects/{ref}/custom-hostname",{params:{path:{ref:s}},signal:t});if(i){var r,o;let e=null===(r=i.message)||void 0===r?void 0:r.includes("not allowed to set up custom domain");if(e)return{customDomain:null,status:"0_not_allowed"};let t=null===(o=i.message)||void 0===o?void 0:o.includes("custom hostname configuration");if(t)return{customDomain:null,status:"0_no_hostname_configured"};throw i}return{customDomain:n.data.result,status:n.status}}let useCustomDomainsQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.A.list(t),e=>{let{signal:s}=e;return getCustomDomains({projectRef:t},s)},{enabled:s&&i.Qy&&void 0!==t,...a})}},50913:function(e,t,s){s.d(t,{A:function(){return n}});let n={list:e=>["projects",e,"custom-domains"]}},72397:function(e,t,s){s.d(t,{H:function(){return useDatabaseExtensionsQuery}});var n=s(58943),a=s(9402),i=s(22531);async function getDatabaseExtensions(e,t){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let i=new Headers;n&&i.set("x-connection-encrypted",n);let{data:r,error:o}=await (0,a.U2)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":n},path:{ref:s}},headers:i,signal:t});if(o)throw o;return r}let useDatabaseExtensionsQuery=function(e){let{projectRef:t,connectionString:s}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.o.list(t),e=>{let{signal:n}=e;return getDatabaseExtensions({projectRef:t,connectionString:s},n)},{enabled:a&&void 0!==t,...r})}},22531:function(e,t,s){s.d(t,{o:function(){return n}});let n={list:e=>["projects",e,"database-extensions"]}},97632:function(e,t,s){s.d(t,{r:function(){return useDatabasePoliciesQuery}});var n=s(58943),a=s(9402),i=s(35629);async function getDatabasePolicies(e,t){let{projectRef:s,connectionString:n,schema:i}=e;if(!s)throw Error("projectRef is required");let r=new Headers;n&&r.set("x-connection-encrypted",n);let{data:o,error:l}=await (0,a.U2)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":n},path:{ref:s},query:{included_schemas:i||"",excluded_schemas:""}},headers:r,signal:t});if(l)throw l;return o}let useDatabasePoliciesQuery=function(e){let{projectRef:t,connectionString:s,schema:a}=e,{enabled:r=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.R.list(t,a),e=>{let{signal:n}=e;return getDatabasePolicies({projectRef:t,connectionString:s,schema:a},n)},{enabled:r&&void 0!==t,...o})}},94161:function(e,t,s){s.d(t,{f:function(){return useDatabasePolicyCreateMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(35629);async function createDatabasePolicy(e){let{projectRef:t,connectionString:s,payload:n}=e,a=new Headers;s&&a.set("x-connection-encrypted",s);let{data:i,error:o}=await (0,r.v_)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":s},path:{ref:t}},body:n,headers:a});if(o)throw o;return i}let useDatabasePolicyCreateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>createDatabasePolicy(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(o.R.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to create database policy: ".concat(e.message)):t(e,s,n)},...s})}},80823:function(e,t,s){s.d(t,{l:function(){return useDatabasePolicyDeleteMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(35629);async function deleteDatabasePolicy(e){let{projectRef:t,connectionString:s,id:n}=e,a=new Headers;s&&a.set("x-connection-encrypted",s);let{data:i,error:o}=await (0,r.IV)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},headers:a});if(o)throw o;return i}let useDatabasePolicyDeleteMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>deleteDatabasePolicy(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(o.R.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to delete database policy: ".concat(e.message)):t(e,s,n)},...s})}},67673:function(e,t,s){s.d(t,{k:function(){return useDatabasePolicyUpdateMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(35629);async function updateDatabasePolicy(e){let{projectRef:t,connectionString:s,id:n,payload:a}=e,i=new Headers;s&&i.set("x-connection-encrypted",s);let{data:o,error:l}=await (0,r.r$)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},body:a,headers:i});if(l)throw l;return o}let useDatabasePolicyUpdateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>updateDatabasePolicy(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(o.R.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to update database policy: ".concat(e.message)):t(e,s,n)},...s})}},35629:function(e,t,s){s.d(t,{R:function(){return n}});let n={list:(e,t)=>["projects",e,"database-policies",t]}},67149:function(e,t,s){s.d(t,{x:function(){return useDatabaseRolesQuery}});var n=s(58943),a=s(9402),i=s(95345);async function getDatabaseRoles(e,t){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let i=new Headers;n&&i.set("x-connection-encrypted",n);let{data:r,error:o}=await (0,a.U2)("/platform/pg-meta/{ref}/roles",{params:{header:{"x-connection-encrypted":n},path:{ref:s}},headers:i,signal:t});if(o)throw o;return r}let useDatabaseRolesQuery=function(e){let{projectRef:t,connectionString:s}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.i.list(t),e=>{let{signal:n}=e;return getDatabaseRoles({projectRef:t,connectionString:s},n)},{enabled:a&&void 0!==t,...r})}},95345:function(e,t,s){s.d(t,{i:function(){return n}});let n={list:e=>["projects",e,"database-roles"]}},11781:function(e,t,s){s.d(t,{X:function(){return useForeignKeyConstraintsQuery}});var n=s(70481);let getForeignKeyConstraintsQuery=e=>{let{schema:t}=e,s="\nSELECT \n  con.oid as id, \n  con.conname as constraint_name, \n  con.confdeltype as deletion_action,\n  con.confupdtype as update_action,\n  rel.oid as source_id,\n  nsp.nspname as source_schema, \n  rel.relname as source_table, \n  (\n    SELECT \n      array_agg(\n        att.attname \n        ORDER BY \n          un.ord\n      ) \n    FROM \n      unnest(con.conkey) WITH ORDINALITY un (attnum, ord) \n      INNER JOIN pg_attribute att ON att.attnum = un.attnum \n    WHERE \n      att.attrelid = rel.oid\n  ) source_columns, \n  frel.oid as target_id,\n  fnsp.nspname as target_schema, \n  frel.relname as target_table, \n  (\n    SELECT \n      array_agg(\n        att.attname \n        ORDER BY \n          un.ord\n      ) \n    FROM \n      unnest(con.confkey) WITH ORDINALITY un (attnum, ord) \n      INNER JOIN pg_attribute att ON att.attnum = un.attnum \n    WHERE \n      att.attrelid = frel.oid\n  ) target_columns \nFROM \n  pg_constraint con \n  INNER JOIN pg_class rel ON rel.oid = con.conrelid \n  INNER JOIN pg_namespace nsp ON nsp.oid = rel.relnamespace \n  INNER JOIN pg_class frel ON frel.oid = con.confrelid \n  INNER JOIN pg_namespace fnsp ON fnsp.oid = frel.relnamespace \nWHERE \n  con.contype = 'f'\n  ".concat(void 0!==t?"AND nsp.nspname = '".concat(t,"'"):"",";\n").trim();return s},useForeignKeyConstraintsQuery=function(e){let{projectRef:t,connectionString:s,schema:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.cp)({projectRef:t,connectionString:s,sql:getForeignKeyConstraintsQuery({schema:a}),queryKey:["foreign-key-constraints"]},{select(e){var t;return(null!==(t=null==e?void 0:e.result)&&void 0!==t?t:[]).map(e=>({...e,source_columns:e.source_columns.replace("{","").replace("}","").split(","),target_columns:e.target_columns.replace("{","").replace("}","").split(",")}))},...i})}},41867:function(e,t,s){s.d(t,{A:function(){return n}});let n={schemaList:e=>["projects",e,"schemas"],postgresTypes:e=>["projects",e,"types"],backups:e=>[e,"database","backups"],poolingConfiguration:e=>[e,"database","pooling-configuration"]}},12752:function(e,t,s){s.d(t,{Q1:function(){return useSchemasQuery},XL:function(){return invalidateSchemasQuery}});var n=s(58943),a=s(9402),i=s(41867);async function getSchemas(e,t){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let i=new Headers;n&&i.set("x-connection-encrypted",n);let{data:r,error:o}=await (0,a.U2)("/platform/pg-meta/{ref}/schemas",{params:{header:{"x-connection-encrypted":n},path:{ref:s}},headers:Object.fromEntries(i),signal:t});if(o)throw o;return r}let useSchemasQuery=function(e){let{projectRef:t,connectionString:s}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.A.schemaList(t),e=>{let{signal:n}=e;return getSchemas({projectRef:t,connectionString:s},n)},{enabled:a&&void 0!==t,...r})};function invalidateSchemasQuery(e,t){return e.invalidateQueries(i.A.schemaList(t))}},53530:function(e,t,s){s.d(t,{a:function(){return useProjectJsonSchemaQuery}});var n=s(58943),a=s(3218),i=s(46732);async function getProjectJsonSchema(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n="".concat(i.T5,"/projects/").concat(s,"/api/rest"),r=await (0,a.U2)(n,{signal:t});if(r.error)throw r.error;return r}let useProjectJsonSchemaQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(["projects",t,"docs"],e=>{let{signal:s}=e;return getProjectJsonSchema({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},62046:function(e,t,s){s.d(t,{I:function(){return useEdgeFunctionsQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(74645);async function getEdgeFunctions(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(i.Q2,"/projects/").concat(s,"/functions"),{signal:t});if(n.error)throw n.error;return n}let useEdgeFunctionsQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.f.list(t),e=>{let{signal:s}=e;return getEdgeFunctions({projectRef:t},s)},{enabled:i.Qy&&s&&void 0!==t,...a})}},74645:function(e,t,s){s.d(t,{f:function(){return n}});let n={list:e=>["projects",e,"edge-functions"],detail:(e,t)=>["projects",e,"edge-function",t]}},5835:function(e,t,s){var n,a;s.d(t,{l:function(){return n}}),(a=n||(n={})).TABLE="r",a.VIEW="v",a.MATERIALIZED_VIEW="m",a.FOREIGN_TABLE="f",a.PARTITIONED_TABLE="p"},24435:function(e,t,s){s.d(t,{H:function(){return useEntityTypesQuery}});var n=s(58586),a=s(70481),i=s(27924);async function getEntityTypes(e,t){let{projectRef:s,connectionString:n,schema:i="public",search:r,limit:o=100,page:l=0,sort:c="alphabetical"}=e,d="\n    with records as (\n      select\n        c.oid::int8 as \"id\",\n        nc.nspname as \"schema\",\n        c.relname as \"name\",\n        c.relkind as \"type\",\n        case c.relkind\n          when 'r' then 1\n          when 'v' then 2\n          when 'm' then 3\n          when 'f' then 4\n          when 'p' then 5\n        end as \"type_sort\",\n        obj_description(c.oid) as \"comment\",\n        count(*) over() as \"count\"\n      from\n        pg_namespace nc\n        join pg_class c on nc.oid = c.relnamespace\n      where\n        c.relkind in ('r', 'v', 'm', 'f', 'p')\n        and not pg_is_other_temp_schema(nc.oid)\n        and (\n          pg_has_role(c.relowner, 'USAGE')\n          or has_table_privilege(\n            c.oid,\n            'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n          )\n          or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n        )\n        and nc.nspname = '".concat(i,"'\n        ").concat(r?"and c.relname ilike '%".concat(r,"%'"):"","\n      order by ").concat("alphabetical"===c?"c.relname asc":'"type_sort" asc, c.relname asc',"\n      limit ").concat(o,"\n      offset ").concat(l*o,"\n    )\n    select\n      jsonb_build_object(\n        'entities', coalesce(jsonb_agg(\n          jsonb_build_object(\n            'id', r.id,\n            'schema', r.schema,\n            'name', r.name,\n            'type', r.type,\n            'comment', r.comment\n          )\n          order by ").concat("alphabetical"===c?"r.name asc":"r.type_sort asc, r.name asc","\n        ), '[]'::jsonb),\n        'count', coalesce(min(r.count), 0)\n      ) \"data\"\n    from records r;\n  "),{result:u}=await (0,a.Rj)({projectRef:s,connectionString:n,sql:d,queryKey:["public","entity-types"]},t);return u[0]}let useEntityTypesQuery=function(e){let{projectRef:t,connectionString:s,schema:a="public",search:r,limit:o=100,sort:l}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.N)(i.C.list(t,{schema:a,search:r,sort:l,limit:o}),e=>{let{signal:n,pageParam:i}=e;return getEntityTypes({projectRef:t,connectionString:s,schema:a,search:r,limit:o,page:i,sort:l},n)},{enabled:c&&void 0!==t,getNextPageParam(e,t){let s=t.length,n=s*o,a=e.data.count;if(!(n>=a))return s},...d})}},27924:function(e,t,s){s.d(t,{C:function(){return n}});let n={list:(e,t)=>["projects",e,"entity-types",...t?[t]:[]]}},79725:function(e,t,s){s.d(t,{s:function(){return useCheckGithubBranchValidity}});var n=s(62350),a=s(62202),i=s(9402);async function checkGithubBranchValidity(e,t){let{organizationIntegrationId:s,repoOwner:n,repoName:a,branchName:r}=e;if(!s)throw Error("Organization integration ID is required");let{data:o,error:l}=await (0,i.U2)("/platform/integrations/github/branches/{organization_integration_id}/{repo_owner}/{repo_name}/{branch_name}",{params:{path:{organization_integration_id:s,repo_owner:n,repo_name:a,branch_name:r}},signal:t});if(l)throw l;return o}let useCheckGithubBranchValidity=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>checkGithubBranchValidity(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to check Github branch: ".concat(e.message)):t(e,s,n)},...s})}},35944:function(e,t,s){s.d(t,{A:function(){return useIntegrationsGitHubInstalledConnectionDeleteMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(97184);async function deleteConnection(e,t){let{connectionId:s}=e,{data:n,error:a}=await (0,r.IV)("/platform/integrations/github/connections/{connection_id}",{params:{path:{connection_id:s}}});if(a)throw a;return n}let useIntegrationsGitHubInstalledConnectionDeleteMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>deleteConnection(e),{async onSuccess(t,s,n){await Promise.all([r.invalidateQueries(o.F.integrationsList()),r.invalidateQueries(o.F.integrationsListWithOrg(s.orgSlug)),r.invalidateQueries(o.F.githubRepoList(s.integrationId)),r.invalidateQueries(o.F.githubConnectionsList(s.integrationId))]),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to delete Github connection: ".concat(e.message)):t(e,s,n)},...s})}},6056:function(e,t,s){s.d(t,{s:function(){return useIntegrationGitHubConnectionsCreateMutation}});var n=s(55830),a=s(62350),i=s(62202),r=s(9402),o=s(97184);async function createIntegrationGitHubConnections(e){let{organizationIntegrationId:t,connection:s}=e,{data:n,error:a}=await (0,r.v_)("/platform/integrations/github/connections",{body:{organization_integration_id:t,connection:s}});if(a)throw a;return n}let useIntegrationGitHubConnectionsCreateMutation=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>createIntegrationGitHubConnections(e),{async onSuccess(t,s,n){await Promise.all([r.invalidateQueries(o.F.integrationsList()),r.invalidateQueries(o.F.integrationsListWithOrg(s.orgSlug)),r.invalidateQueries(o.F.githubRepoList(s.organizationIntegrationId)),r.invalidateQueries(o.F.githubConnectionsList(s.organizationIntegrationId))]),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to create Github connection: ".concat(e.message)):t(e,s,n)},...s})}},68082:function(e,t,s){s.d(t,{q:function(){return useGitHubReposQuery}});var n=s(58943),a=s(9402),i=s(97184);async function getGitHubRepos(e,t){let{integrationId:s}=e;if(!s)throw Error("integrationId is required");let n=[],a=1;for(;;){let e=await getSingleGithubReposPage(s,100,a,t);if(n.push(...e),a+=1,e.length<100||a>10)break}return n}async function getSingleGithubReposPage(e,t,s,n){let{data:i,error:r}=await (0,a.U2)("/platform/integrations/github/repos/{organization_integration_id}",{params:{path:{organization_integration_id:e},query:{per_page:t,page:s}},signal:n});if(r)throw r;return i}let useGitHubReposQuery=function(e){let{integrationId:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.F.githubRepoList(t),e=>{let{signal:s}=e;return getGitHubRepos({integrationId:t},s)},{enabled:s&&void 0!==t,...a})}},73566:function(e,t,s){s.d(t,{u:function(){return useFreeProjectLimitCheckQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(50866);async function getFreeProjectLimitCheck(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let n=await (0,a.U2)("".concat(i.T5,"/organizations/").concat(s,"/members/reached-free-project-limit"),{signal:t});if(n.error)throw n.error;return n}let useFreeProjectLimitCheckQuery=function(e){let{slug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.O.freeProjectLimitCheck(t),e=>{let{signal:s}=e;return getFreeProjectLimitCheck({slug:t},s)},{enabled:s&&void 0!==t,...a})}},46166:function(e,t,s){s.d(t,{J:function(){return generateTypes}});var n=s(9402);async function generateTypes(e,t){let{ref:s}=e;if(!s)throw Error("Project ref is required");let{data:a,error:i}=await (0,n.U2)("/v1/projects/{ref}/types/typescript",{params:{path:{ref:s}},signal:t});if(i)throw i;return a}s(31604)},30984:function(e,t,s){s.d(t,{K:function(){return useBucketsQuery}});var n=s(58943),a=s(9402),i=s(36179);async function getBuckets(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:i}=await (0,a.U2)("/platform/storage/{ref}/buckets",{params:{path:{ref:s}},signal:t});if(i)throw i;return n}let useBucketsQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.m.buckets(t),e=>{let{signal:s}=e;return getBuckets({projectRef:t},s)},{enabled:s&&void 0!==t,...a,retry:(e,t)=>!("object"==typeof t&&null!==t&&t.message.startsWith("Tenant config")&&t.message.endsWith("not found"))&&e<3})}},36179:function(e,t,s){s.d(t,{m:function(){return n}});let n={buckets:e=>["projects",e,"buckets"]}},58010:function(e,t,s){s.d(t,{F:function(){return useProjectAddonsQuery}});var n=s(58943),a=s(3218),i=s(46732),r=s(28055);async function getProjectAddons(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(i.T5,"/projects/").concat(s,"/billing/addons"),{signal:t});if(n.error)throw n.error;return n}let useProjectAddonsQuery=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.addons(t),e=>{let{signal:s}=e;return getProjectAddons({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},48256:function(e,t,s){s.d(t,{wF:function(){return fetchAllTableRows},KK:function(){return useTableRowsQuery}});var n=s(90507),a=s(74915),i=s(11033),r=s(70481),o=s(77565),l=s(60674);let fetchAllTableRows=async e=>{var t;let{projectRef:s,connectionString:a,table:i,filters:c=[],sorts:d=[]}=e;if(l.Qy&&!a)return console.error("Connection string is required"),[];let u=[],m=new n.AE,p=m.from(i.name,null!==(t=i.schema)&&void 0!==t?t:void 0).select();c.filter(e=>e.value&&""!==e.value).forEach(e=>{let t=(0,o.q)(i,e);p=p.filter(e.column,e.operator,t)}),d.forEach(e=>{p=p.order(e.column,e.ascending,e.nullsFirst)});let h=-1,g=0,x=0,f=[];return await (async()=>{do{h+=1,g=500*h,x=(h+1)*500-1;let e=p.range(g,x).toSql();try{let{result:t}=await (0,r.Rj)({projectRef:s,connectionString:a,sql:e});u.push(...t),f=t}catch(e){return{data:{rows:[]}}}}while(500===f.length)})(),u},getTableRowsSqlQuery=e=>{var t,s;let{table:a,filters:i=[],sorts:r=[],page:l,limit:c}=e,d=new n.AE;if(!a)return"";let u=a.columns.filter(e=>{var t;return(null!==(t=null==e?void 0:e.enum)&&void 0!==t?t:[]).length>0&&"array"===e.dataType.toLowerCase()}).map(e=>e.name),m=u.length>0?d.from(a.name,null!==(t=a.schema)&&void 0!==t?t:void 0).select("*,".concat(u.map(e=>'"'.concat(e,'"::text[]')).join(","))):d.from(a.name,null!==(s=a.schema)&&void 0!==s?s:void 0).select();i.filter(e=>e.value&&""!=e.value).forEach(e=>{let t=(0,o.q)(a,e);m=m.filter(e.column,e.operator,t)}),r.forEach(e=>{m=m.order(e.column,e.ascending,e.nullsFirst)});let{from:p,to:h}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=e?e*t:0;return{from:s,to:e?s+t-1:t-1}}((null!=l?l:1)-1,c),g=m.range(p,h).toSql();return g},useTableRowsQuery=function(e){let{projectRef:t,connectionString:s,queryKey:n,table:o,impersonatedRole:l,...c}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=(0,i.Zp)();return(0,r.cp)({projectRef:t,connectionString:s,sql:(0,a.Jh)(getTableRowsSqlQuery({table:o,...c}),{projectRef:null!=t?t:"ref",role:l}),queryKey:[...null!=n?n:[],{table:{name:null==o?void 0:o.name,schema:null==o?void 0:o.schema},impersonatedRole:l,...c}],isRoleImpersonationEnabled:u},{select(e){let t=e.result.map((e,t)=>({idx:t,...e}));return{rows:t}},enabled:void 0!==t&&void 0!==o,...d})}},77565:function(e,t,s){s.d(t,{h:function(){return getPrimaryKeys},q:function(){return formatFilterValue}});var n=s(25076),a=s(74386);function formatFilterValue(e,t){let s=e.columns.find(e=>e.name==t.column);if(s&&(0,a.v3)(s.format)){let e=Number(t.value);if(!Number.isNaN(e)&&!(e>Number.MAX_SAFE_INTEGER))return Number(t.value)}return t.value}function getPrimaryKeys(e){let{table:t}=e,s=t.primary_keys;return s&&0!=s.length?{primaryKeys:s.map(e=>e.name)}:{error:{message:n.jg}}}},88535:function(e,t,s){s.d(t,{Z:function(){return n}});let n={usage:e=>["projects",e,"usage"],orgUsage:(e,t,s,n)=>["organizations",e,"usage",t,s,n],resourceWarnings:()=>["projects","resource-warnings"]}},17653:function(e,t,s){s.d(t,{v:function(){return useOrgUsageQuery}});var n=s(58943),a=s(9402),i=s(88535);async function getOrgUsage(e,t){let{orgSlug:s,projectRef:n,start:i,end:r}=e;if(!s)throw Error("orgSlug is required");let{data:o,error:l}=await (0,a.U2)("/platform/organizations/{slug}/usage",{params:{path:{slug:s},query:{project_ref:n,start:null==i?void 0:i.toISOString(),end:null==r?void 0:r.toISOString()}},signal:t});if(l)throw l;return o}let useOrgUsageQuery=function(e){let{orgSlug:t,projectRef:s,start:a,end:r}=e,{enabled:o=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.Z.orgUsage(t,s,null==a?void 0:a.toISOString(),null==r?void 0:r.toISOString()),e=>{let{signal:n}=e;return getOrgUsage({orgSlug:t,projectRef:s,start:a,end:r},n)},{enabled:o&&void 0!==t,...l})}},99484:function(e,t,s){s.d(t,{q:function(){return useResourceWarningsQuery}});var n=s(58943),a=s(9402),i=s(88535),r=s(60674);async function getResourceWarnings(e){let{data:t,error:s}=await (0,a.U2)("/platform/projects-resource-warnings",{signal:e});if(s)throw s;return t}let useResourceWarningsQuery=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.a)(i.Z.resourceWarnings(),e=>{let{signal:t}=e;return getResourceWarnings(t)},{enabled:r.Qy&&e,staleTime:18e5,...t})}},56424:function(e,t,s){s.d(t,{V:function(){return isError}});function isError(e){return!!e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message}},16323:function(e,t,s){s.d(t,{Z:function(){return misc_useEntityType}});var n=s(55830),a=s(2755),i=s(70481);let entityTypeSqlQuery=e=>{let{id:t}=e;return"\n    select\n      c.oid::int8 as \"id\",\n      nc.nspname as \"schema\",\n      c.relname as \"name\",\n      c.relkind as \"type\",\n      obj_description(c.oid) as \"comment\",\n      count(*) over() as \"count\"\n    from\n      pg_namespace nc\n      join pg_class c on nc.oid = c.relnamespace\n    where\n      c.relkind in ('r', 'v', 'm', 'f', 'p')\n      and not pg_is_other_temp_schema(nc.oid)\n      and (\n        pg_has_role(c.relowner, 'USAGE')\n        or has_table_privilege(\n          c.oid,\n          'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n        )\n        or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n      )\n      and c.oid = '".concat(t,"'\n    limit 1;\n  ")},useEntityTypeQuery=function(e){let{projectRef:t,connectionString:s,id:n,...a}=e,{enabled:r,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.cp)({projectRef:t,connectionString:s,sql:entityTypeSqlQuery({id:n,...a}),queryKey:["entity-type",n]},{select(e){var t;return null!==(t=e.result[0])&&void 0!==t?t:null},enabled:r&&void 0!==t&&void 0!==n&&!isNaN(n),...o})};var r=s(27924),o=s(2784),misc_useEntityType=function(e,t){let s=(0,n.NL)(),{project:i}=(0,a.d2)(),l=(0,o.useMemo)(()=>{var t,n,a,o;return null===(a=null===(o=s.getQueryCache().find(r.C.list(null==i?void 0:i.ref)))||void 0===o?void 0:o.state.data)||void 0===a?void 0:null===(n=a.pages)||void 0===n?void 0:null===(t=n.flatMap(e=>e.data.entities))||void 0===t?void 0:t.find(t=>t.id===e)},[null==i?void 0:i.ref,e]),{data:c}=useEntityTypeQuery({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString,id:e},{enabled:!l,onSettled(s){s||void 0===e||null==t||t(e)}});return null!=l?l:c}},99033:function(e,t,s){s.d(t,{F:function(){return n},U:function(){return a}});let n=["auth","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public"],a=n.filter(e=>"extensions"!==e)},62711:function(e,t,s){s.d(t,{H:function(){return getIntegrationConfigurationUrl},n:function(){return getInitialMigrationSQLFromGitHubRepo}});var n=s(3218);async function fetchGitHub(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=await fetch(e);if(!s.ok)return{error:{code:s.status,message:s.statusText,requestId:""}};try{return t?await s.json():await s.text()}catch(e){return{error:{message:e.message,code:500,requestId:""}}}}async function getInitialMigrationSQLFromGitHubRepo(e){var t,s;if(!e)return null;let[,,,a,i,,r,...o]=null!==(s=null==e?void 0:e.split("/"))&&void 0!==s?s:[],l=o.join("/"),c="https://api.github.com/repos/".concat(a,"/").concat(i,"/contents/").concat(l),d="".concat(c,"/supabase?ref=").concat(r),u="".concat(c,"/").concat("supabase/migrations").concat(r?"?ref=".concat(r):""),[m,p]=await Promise.all([fetchGitHub(d),fetchGitHub(u)]);if(!(0,n.d8)(m))return console.warn("Failed to fetch supabase files from GitHub: ".concat(m.error)),null;if(!(0,n.d8)(p))return console.warn("Failed to fetch migration files from GitHub: ".concat(p.error)),null;let h=null===(t=m.find(e=>"seed.sql"===e.name))||void 0===t?void 0:t.download_url,g=p.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),x=g.map(e=>fetchGitHub(e.download_url,!1)),[f,...y]=await Promise.all([h?fetchGitHub(h,!1):Promise.resolve(""),...x]),j=y.filter(e=>(0,n.d8)(e)).join(";"),v=(0,n.d8)(f)?f:"",b="\n    create schema if not exists supabase_migrations;\n    create table if not exists supabase_migrations.schema_migrations (\n      version text not null primary key,\n      statements text[],\n      name text\n    );\n    ".concat(g.map((e,t)=>{let s=y[t];if(!(0,n.d8)(s))return"";let a=e.name.split("_")[0],i=JSON.stringify(s.split(";").map(e=>e.trim()).filter(Boolean));return"\n        insert into supabase_migrations.schema_migrations (version, statements, name)\n        select '".concat(a,"', array_agg(jsonb_statements)::text[], '").concat(e.name,"'\n        from jsonb_array_elements_text($statements$").concat(i,"$statements$::jsonb) as jsonb_statements;\n      ")}),"\n  ");return"".concat(j,";").concat(b,";").concat(v)}function getIntegrationConfigurationUrl(e){var t,s,n,a,i,r;return"Vercel"===e.integration.name?"https://vercel.com/dashboard/".concat((null===(t=e.metadata)||void 0===t?void 0:t.account.type)==="Team"?"".concat(null===(s=e.metadata)||void 0===s?void 0:s.account.team_slug,"/"):"","integrations/").concat(null===(n=e.metadata)||void 0===n?void 0:n.configuration_id):"GitHub"===e.integration.name?"https://github.com/".concat((null===(a=e.metadata)||void 0===a?void 0:a.account.type)==="Organization"?"organizations/".concat(null===(i=e.metadata)||void 0===i?void 0:i.account.name,"/"):"","settings/installations/").concat(null===(r=e.metadata)||void 0===r?void 0:r.installation_id):""}},20069:function(e,t,s){s.d(t,{HN:function(){return useStorageStore}});var n=s(87612),a=s(70536),i=s(62419),r=s(93586),o=s.n(r),l=s(60417),c=s.n(l),d=s(55281),u=s.n(d),m=s(12982),p=s.n(m),h=s(93352),g=s.n(h),x=s(18149),f=s.n(x),y=s(51525),j=s.n(y),v=s(75652),b=s.n(v),w=s(84636),N=s.n(w),S=s(80075),C=s(2784),k=s(62202),_=s(19191),E=s(89465),P=s(3218),I=s(46732),L=s(34406);let A=new URL(L.env.SUPABASE_PUBLIC_URL||"http://localhost:8000");L.env.LOGFLARE_URL,A.origin,A.host;let T=A.protocol.replace(":","");L.env.DEFAULT_PROJECT_NAME;let R=null;function useStorageStore(){return null===R&&(R=new StorageExplorerStore(null)),R}(0,C.createContext)(null);let D=".emptyFolderPlaceholder",z="Please do not close the browser until it's completed";let StorageExplorerStore=class StorageExplorerStore{initStore(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T;this.projectRef=e,this.endpoint="".concat(I.T5,"/storage/").concat(e),void 0!==s&&this.initializeSupabaseClient(s,t,n)}get currentBucketName(){return this.selectedBucket.name}constructor(e){var t=this;(0,n._)(this,"projectRef",""),(0,n._)(this,"loaded",!1),(0,n._)(this,"view",_.De.COLUMNS),(0,n._)(this,"sortBy",_.Ye.NAME),(0,n._)(this,"sortByOrder","asc"),(0,n._)(this,"buckets",[]),(0,n._)(this,"selectedBucket",{}),(0,n._)(this,"columns",[]),(0,n._)(this,"openedFolders",[]),(0,n._)(this,"selectedItems",[]),(0,n._)(this,"selectedItemsToDelete",[]),(0,n._)(this,"selectedItemsToMove",[]),(0,n._)(this,"selectedFilePreview",{}),(0,n._)(this,"selectedFileCustomExpiry",void 0),(0,n._)(this,"DEFAULT_OPTIONS",{limit:200,offset:0,sortBy:{column:this.sortBy,order:this.sortByOrder}}),(0,n._)(this,"ui",null),(0,n._)(this,"supabaseClient",null),(0,n._)(this,"endpoint",""),(0,n._)(this,"filePreviewCache",[]),(0,n._)(this,"uploadProgress",0),(0,n._)(this,"abortController",null),(0,n._)(this,"initializeSupabaseClient",(e,t,s)=>{this.supabaseClient=(0,a.eI)("".concat(I.Qy?"https":s,"://").concat(t),e,{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:e=>{},setItem:(e,t)=>{},removeItem:e=>{}}}})}),(0,n._)(this,"updateFileInPreviewCache",e=>{let t=this.filePreviewCache.map(t=>t.id===e.id?e:t);this.filePreviewCache=t}),(0,n._)(this,"addFileToPreviewCache",e=>{let t=this.filePreviewCache.concat([e]);this.filePreviewCache=t}),(0,n._)(this,"clearFilePreviewCache",()=>{this.filePreviewCache=[]}),(0,n._)(this,"getLocalStorageKey",()=>"supabase-storage-".concat(this.projectRef)),(0,n._)(this,"getLatestColumnIndex",()=>this.columns.length-1),(0,n._)(this,"getCurrentlySelectedBucket",()=>this.columns.length>1?this.columns[1]:null),(0,n._)(this,"getPathAlongOpenedFolders",function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?t.openedFolders.length>0?"".concat(t.selectedBucket.name,"/").concat(t.openedFolders.map(e=>e.name).join("/")):t.selectedBucket.name:t.openedFolders.map(e=>e.name).join("/")}),(0,n._)(this,"abortApiCalls",()=>{this.abortController.abort(),this.abortController=new AbortController}),(0,n._)(this,"setLoaded",e=>{this.loaded=e}),(0,n._)(this,"setSelectedBucket",e=>{this.selectedBucket=e,this.clearOpenedFolders(),this.closeFilePreview(),this.clearSelectedItems()}),(0,n._)(this,"setView",e=>{this.view=e,this.closeFilePreview(),this.updateExplorerPreferences()}),(0,n._)(this,"setSortBy",async e=>{this.sortBy=e,this.closeFilePreview(),this.updateExplorerPreferences(),await this.refetchAllOpenedFolders()}),(0,n._)(this,"setSortByOrder",async e=>{this.sortByOrder=e,this.closeFilePreview(),this.updateExplorerPreferences(),await this.refetchAllOpenedFolders()}),(0,n._)(this,"clearColumns",()=>{this.columns=[]}),(0,n._)(this,"pushColumnAtIndex",(e,t)=>{this.columns=this.columns.slice(0,t+1).concat([e])}),(0,n._)(this,"popColumn",()=>{this.abortApiCalls(),this.columns=this.columns.slice(0,this.getLatestColumnIndex())}),(0,n._)(this,"popColumnAtIndex",e=>{this.columns=this.columns.slice(0,e+1)}),(0,n._)(this,"setColumnIsLoadingMore",function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];t.columns=t.columns.map((t,n)=>n===e?{...t,isLoadingMoreItems:s}:t)}),(0,n._)(this,"pushOpenedFolderAtIndex",(e,t)=>{this.openedFolders=this.openedFolders.slice(0,t).concat(e)}),(0,n._)(this,"popOpenedFolders",()=>{this.openedFolders=this.openedFolders.slice(0,this.openedFolders.length-1)}),(0,n._)(this,"popOpenedFoldersAtIndex",e=>{this.openedFolders=this.openedFolders.slice(0,e+1)}),(0,n._)(this,"clearOpenedFolders",()=>{this.openedFolders=[]}),(0,n._)(this,"setSelectedItems",e=>{this.selectedItems=e}),(0,n._)(this,"clearSelectedItems",e=>{void 0!==e?this.selectedItems=this.selectedItems.filter(t=>t.columnIndex!==e):this.selectedItems=[]}),(0,n._)(this,"setSelectedItemsToDelete",e=>{this.selectedItemsToDelete=e}),(0,n._)(this,"clearSelectedItemsToDelete",()=>{this.selectedItemsToDelete=[]}),(0,n._)(this,"setSelectedItemsToMove",e=>{this.selectedItemsToMove=e}),(0,n._)(this,"clearSelectedItemsToMove",()=>{this.selectedItemsToMove=[]}),(0,n._)(this,"setSelectedFileCustomExpiry",e=>{this.selectedFileCustomExpiry=e}),(0,n._)(this,"addNewFolderPlaceholder",e=>{let t=_.fh.FOLDER,s=-1===e?this.getLatestColumnIndex():e;this.addTempRow(t,"Untitled folder",_.R9.EDITING,s,{},!0)}),(0,n._)(this,"addNewFolder",async(e,t)=>{let s=this.sanitizeNameForDuplicateInColumn(e,!1,t);if(null===s)return;if(!/^[a-zA-Z0-9_-\s]*$/.test(s))return this.ui.setNotification({message:"Folder name contains invalid special characters",category:"error",duration:8e3});if(s.includes("/")||s.includes("\\"))return this.ui.setNotification({message:"Folder names should not have forward or back slashes.",category:"error",duration:8e3});if(0===s.length)return this.removeTempRows(t);this.updateFolderAfterEdit(s,t);let n="".concat(s,"/").concat(D),a=this.openedFolders.slice(0,t).map(e=>e.name).join("/"),i=a.length>0?"".concat(a,"/").concat(n):n;await this.supabaseClient.storage.from(this.selectedBucket.name).upload(i,new File([],D)),a.length>0&&await (0,P.$v)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.id,"/objects"),{paths:["".concat(a,"/").concat(D)]})}),(0,n._)(this,"setFilePreview",async e=>{var t,s,n,a;let i=null===(t=e.metadata)||void 0===t?void 0:t.size,r=null===(s=e.metadata)||void 0===s?void 0:s.mimetype;if(r&&i){if(i>1e7){this.selectedFilePreview={...e,previewUrl:"skipped"};return}this.selectedFilePreview={...e,previewUrl:"loading"};let t=u()(this.filePreviewCache,{id:e.id}),s=null!==(n=null==t?void 0:t.fetchedAt)&&void 0!==n?n:null,r=null!==(a=null==t?void 0:t.expiresIn)&&void 0!==a?a:null,o=null!==s&&null!==r,l=!o||s+1e3*r<Date.now();if(l){let t=await this.fetchFilePreview(e.name),s=this.selectedBucket.public?"".concat(t,"?t=").concat(new Date().toISOString()):t;this.selectedFilePreview={...e,previewUrl:s};let n={id:e.id,url:t,expiresIn:31536e4,fetchedAt:Date.now()};o?this.updateFileInPreviewCache(n):this.addFileToPreviewCache(n)}else this.selectedFilePreview={...e,previewUrl:t.url}}else this.selectedFilePreview={...e,previewUrl:null}}),(0,n._)(this,"closeFilePreview",()=>{this.selectedFilePreview={}}),(0,n._)(this,"getFileUrl",async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=u()(t.filePreviewCache,{id:e.id});if(void 0!==n&&0===s)return n.url;{let n=await t.fetchFilePreview(e.name,s);try{let s=new URL(n);s.searchParams.set("t",new Date().toISOString());let a=s.toString(),i={id:e.id,url:a,expiresIn:31536e4,fetchedAt:Date.now()};return t.addFileToPreviewCache(i),a}catch(e){return console.error("Failed to get file URL",e),""}}}),(0,n._)(this,"openBucket",async e=>{let{id:t,name:s}=e;f()(this.selectedBucket,e)||(this.setSelectedBucket(e),await this.fetchFolderContents(t,s,-1))}),(0,n._)(this,"getFile",async e=>{try{return await new Promise((t,s)=>e.file(t,s))}catch(e){console.error("getFile error:",e);return}}),(0,n._)(this,"getFilesDataTransferItems",async e=>{let t=this.ui.setNotification({category:"loading",message:"Retrieving items to upload..."}),s=[],n=[];for(let t of e)n.push(t.webkitGetAsEntry());for(;n.length>0;){let e=n.shift()||{};if(e.isFile){let t=await this.getFile(e);void 0!==t&&(t.path=e.fullPath.slice(1),s.push(t))}else e.isDirectory&&n.push(...await this.readAllDirectoryEntries(e.createReader()))}return k.ZP.dismiss(t),s}),(0,n._)(this,"readAllDirectoryEntries",async e=>{let t=[],s=await this.readEntriesPromise(e);for(;s.length>0;)t.push(...s),s=await this.readEntriesPromise(e);return t}),(0,n._)(this,"readEntriesPromise",async e=>{try{return await new Promise((t,s)=>{e.readEntries(t,s)})}catch(e){console.error("readEntriesPromise error:",e)}}),(0,n._)(this,"uploadFiles",async function(e,s){var n,a,i;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=new Date,c=r?(await t.getFilesDataTransferItems(e)).filter(e=>!e.path.includes("#/")):Array.from(e),d=-1===s?t.getLatestColumnIndex():s,u=(null!==(i=null===(a=t.columns)||void 0===a?void 0:null===(n=a[d])||void 0===n?void 0:n.items)&&void 0!==i?i:[]).filter(e=>!e.id).map(e=>e.name),m=c.map(e=>{if(!e.path)return e;let n=e.path.split("/"),a=n.length>1?n[0]:null;if(u.includes(a)){let i=t.sanitizeNameForDuplicateInColumn(a,!0,s);n[0]=i,e.path=n.join("/")}return e});t.uploadProgress=0;let p=[],h=m.length,x=0,f=0,y=t.openedFolders.slice(0,d).map(e=>e.name).join("/"),j=t.ui.setNotification({category:"loading",message:"Uploading ".concat(m.length," file").concat(m.length>1?"s":"","..."),description:z,progress:0}),v=m.map(e=>{var s;let n={cacheControl:"3600"},a={mimetype:e.type,size:e.size},i=(null!==(s=null==e?void 0:e.path)&&void 0!==s?s:"").split("/").length>1,r=i?e.name:t.sanitizeNameForDuplicateInColumn(e.name,!0),o=g()(e,["path"])&&i?e.path:r,l=y.length>0?"".concat(y,"/").concat(o):o;if(i){let s=e.path.split("/")[0];p.includes(s)||(t.addTempRow(_.fh.FOLDER,s,_.R9.LOADING,d,a),p.push(s))}else t.addTempRow(_.fh.FILE,r,_.R9.LOADING,d,a);return()=>new Promise(async s=>{let{error:a}=await t.supabaseClient.storage.from(t.selectedBucket.name).upload(l,e,n);t.uploadProgress=t.uploadProgress+1/m.length,a?(f+=1,t.ui.setNotification({message:"Failed to upload ".concat(e.name,": ").concat(a.message),category:"error"})):x+=1,s()})}),b=o()(v,10);try{await b.reduce(async(e,s)=>{await e,await Promise.allSettled(s.map(e=>e())),t.ui.setNotification({id:j,category:"loading",message:"Uploading ".concat(m.length," file").concat(m.length>1?"s":"","..."),description:z,progress:100*t.uploadProgress})},Promise.resolve()),x>0&&await (0,P.$v)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects"),{paths:["".concat(y,"/").concat(D)]}),await t.refetchAllOpenedFolders(),0===h?k.ZP.dismiss(j):f===h?t.ui.setNotification({id:j,category:"error",message:"Failed to upload ".concat(h," file").concat(h>1?"s":"","!")}):x===h?t.ui.setNotification({id:j,category:"success",message:"Successfully uploaded ".concat(h," file").concat(h>1?"s":"","!")}):t.ui.setNotification({id:j,category:"success",message:"Successfully uploaded ".concat(x," out of ").concat(h," file").concat(h>1?"s":"","!")})}catch(e){t.ui.setNotification({id:j,error:e,message:"Failed to upload files",category:"error"})}let w=new Date;console.log("Total time taken for ".concat(m.length," files: ").concat((w-l)/1e3," seconds"))}),(0,n._)(this,"moveFiles",async e=>{let t=c()(e.split("/")),s=t.join("/"),n=0;this.clearSelectedItems();let a=(0,k.ZP)("Please do not close the browser until the move is completed",{duration:1/0});await Promise.all(this.selectedItemsToMove.map(async t=>{let a=this.openedFolders.slice(0,t.columnIndex).map(e=>e.name).join("/"),i=a.length>0?"".concat(a,"/").concat(t.name):t.name,r=e.length>0?"".concat(s,"/").concat(t.name):t.name,o=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.id,"/objects/move"),{from:i,to:r});o.error&&(n+=1,this.ui.setNotification({category:"error",message:o.error.message}))})),n===this.selectedItemsToMove.length?this.ui.setNotification({message:"Failed to move files",category:"error"}):this.ui.setNotification({message:"Successfully moved ".concat(this.selectedItemsToMove.length-n," to ").concat(s),category:"success"}),k.ZP.dismiss(a);let i=this.selectedItemsToMove.map(e=>e.id),r=this.filePreviewCache.filter(e=>!i.includes(e.id));this.filePreviewCache=r,await this.refetchAllOpenedFolders(),this.clearSelectedItemsToMove()}),(0,n._)(this,"fetchFilePreview",async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getPathAlongOpenedFolders(!1),a=n.length>0?"".concat(n,"/").concat(e):e;if(t.selectedBucket.public){let e=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/public-url"),{path:a});if(!e.error)return e.publicUrl;t.ui.setNotification({category:"error",message:"Failed to fetch public file preview: ".concat(e.error.message)})}else{let e=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/sign"),{path:a,expiresIn:s||31536e4});if(!e.error)return e.signedUrl;t.ui.setNotification({category:"error",message:"Failed to fetch signed url preview: ".concat(e.error.message)})}return null}),(0,n._)(this,"deleteFiles",async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.closeFilePreview();let n=0,a=j()(e,"prefix")?e.map(e=>"".concat(e.prefix,"/").concat(e.name)):e.map(e=>{let{name:s,columnIndex:n}=e,a=t.openedFolders.slice(0,n).map(e=>e.name).join("/");return t.updateRowStatus(s,_.R9.LOADING,n),a.length>0?"".concat(a,"/").concat(s):s});t.clearSelectedItems();let i=t.ui.setNotification({category:"loading",message:"Deleting ".concat(a.length," file(s)..."),description:z,progress:0}),r=o()(a,2).map(e=>()=>(n+=e.length/a.length,(0,P.$v)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.name,"/objects"),{paths:e})));await o()(r,2).reduce(async(e,s)=>{await e,await Promise.all(s.map(e=>e())),t.ui.setNotification({id:i,category:"loading",message:"Deleting ".concat(a.length," file(s)..."),description:z,progress:100*n})},Promise.resolve());let l=e.map(e=>e.id),c=t.filePreviewCache.filter(e=>!l.includes(e.id));if(t.filePreviewCache=c,s)k.ZP.dismiss(i);else{let e=b()(a.map(e=>{let t=e.split("/");return t.slice(0,t.length-1).join("/")}));await Promise.all(e.map(e=>t.validateParentFolderEmpty(e))),t.ui.setNotification({id:i,category:"success",message:"Successfully deleted ".concat(a.length," file(s)")}),await t.refetchAllOpenedFolders(),t.clearSelectedItemsToDelete()}}),(0,n._)(this,"downloadFolder",async e=>{let t=0,s=this.ui.setNotification({category:"loading",message:"Retrieving files from folder..."}),n=await this.getAllItemsAlongFolder(e);this.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(n.length," files..."),description:z,progress:0});let a=n.map(e=>{var s,a;let i=null!==(a=null===(s=e.metadata)||void 0===s?void 0:s.mimetype)&&void 0!==a?a:null;return()=>new Promise(async s=>{let a=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.id,"/objects/download"),{path:"".concat(e.prefix,"/").concat(e.name)});if(t+=1/n.length,a.error)console.error("Failed to download file","".concat(e.prefix,"/").concat(e.name)),s(!1);else{let t=await a.blob();s({name:e.name,prefix:e.prefix,blob:new Blob([t],{type:i})})}})}),r=o()(a,10),l=await r.reduce(async(e,a)=>{let i=await e,r=await Promise.allSettled(a.map(e=>e()));return this.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(n.length," file").concat(n.length>1?"s":"","..."),description:z,progress:100*t}),(null!=i?i:[]).concat(r.map(e=>e.value).filter(Boolean))},Promise.resolve()),c=new i.U5("application/zip"),d=new i._Q(c,{bufferedWrite:!0});if(0===l.length)return this.ui.setNotification({id:s,category:"error",message:'Failed to download files from "'.concat(e.name,'"')});l.forEach(e=>{e.blob&&d.add("".concat(e.prefix,"/").concat(e.name),new i.Nt(e.blob))});let u=URL.createObjectURL(await d.close()),m=document.createElement("a");m.href=u,m.setAttribute("download","".concat(e.name,".zip")),document.body.appendChild(m),m.click(),m.parentNode.removeChild(m),this.ui.setNotification({id:s,category:"success",message:l.length===n.length?'Successfully downloaded folder "'.concat(e.name,'"'):'Downloaded folder "'.concat(e.name,'". However, ').concat(n.length-l.length," files did not download successfully.")})}),(0,n._)(this,"downloadSelectedFiles",async e=>{let t=Math.min(...e.map(e=>e.columnIndex)),s=e.map(e=>{let{name:s,columnIndex:n}=e,a=this.openedFolders.slice(t,n).map(e=>e.name).join("/"),i=a.length>0?"".concat(a,"/").concat(s):s;return{...e,formattedPathToFile:i}}),n=0,a=this.ui.setNotification({category:"loading",message:"Downloading ".concat(e.length," files...")}),r=s.map(e=>()=>new Promise(async t=>{let a=await this.downloadFile(e,!1,!0);n+=1/s.length,t({...a,name:e.formattedPathToFile})})),l=o()(r,10),c=await l.reduce(async(t,s)=>{let i=await t,r=await Promise.allSettled(s.map(e=>e()));return this.ui.setNotification({id:a,category:"loading",message:"Downloading ".concat(e.length," file").concat(e.length>1?"s":"","..."),description:z,progress:100*n}),(null!=i?i:[]).concat(r.map(e=>e.value).filter(Boolean))},Promise.resolve()),d=new i.U5("application/zip"),u=new i._Q(d,{bufferedWrite:!0});c.forEach(e=>{u.add(e.name,new i.Nt(e.blob))});let m=URL.createObjectURL(await u.close()),p=document.createElement("a");p.href=m,p.setAttribute("download","supabase-files.zip"),document.body.appendChild(p),p.click(),p.parentNode.removeChild(p),this.ui.setNotification({id:a,category:"success",message:"Successfully downloaded ".concat(c.length," files")})}),(0,n._)(this,"downloadFile",async function(e){var s,n;let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.name,o=null!==(n=null==e?void 0:null===(s=e.metadata)||void 0===s?void 0:s.mimetype)&&void 0!==n?n:null,l=a?t.ui.setNotification({category:"loading",message:"Retrieving ".concat(r,"...")}):void 0,c=t.openedFolders.slice(0,e.columnIndex).map(e=>e.name).join("/"),d=c.length>0?"".concat(c,"/").concat(r):r,u=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/download"),{path:d});if(u.error)return l&&t.ui.setNotification({error:u.error,id:l,category:"error",message:"Failed to download ".concat(r)}),!1;{let e=await u.blob(),s=new Blob([e],{type:o});if(i)return{name:r,blob:s};let n=window.URL.createObjectURL(s),a=document.createElement("a");return a.href=n,a.setAttribute("download","".concat(r)),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a),window.URL.revokeObjectURL(e),l&&t.ui.setNotification({id:l,category:"success",message:"Downloading ".concat(r)}),!0}}),(0,n._)(this,"renameFile",async(e,t,s)=>{let n=e.name;if(n===t||0===t.length)this.updateRowStatus(n,_.R9.READY,s);else{this.updateRowStatus(n,_.R9.LOADING,s,t);let a=this.getPathAlongOpenedFolders(!1),i=a.length>0?"".concat(a,"/").concat(n):n,r=a.length>0?"".concat(a,"/").concat(t):t,o=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.id,"/objects/move"),{from:i,to:r});if(o.error)this.ui.setNotification({category:"error",message:"Failed to rename file: ".concat(o.error.message)});else{this.ui.setNotification({category:"success",message:'Successfully renamed "'.concat(n,'" to "').concat(t,'"')});let s=this.filePreviewCache.filter(t=>t.id!==e.id);if(this.filePreviewCache=s,this.selectedFilePreview.name===n){let{previewUrl:s,...n}=e;this.setFilePreview({...n,name:t})}await this.refetchAllOpenedFolders()}}}),(0,n._)(this,"fetchFolderContents",async function(e,s,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(void 0===t.selectedBucket.id)return;t.abortApiCalls(),t.updateRowStatus(s,_.R9.LOADING,n),t.pushColumnAtIndex({id:e,name:s,status:_.R9.LOADING,items:[]},n);let i=t.openedFolders.slice(0,n+1).map(e=>e.name).join("/"),r={limit:200,offset:0,search:a,sortBy:{column:t.sortBy,order:t.sortByOrder}},o=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/list"),{path:i,options:r},{abortSignal:t.abortController.signal});if(t.updateRowStatus(s,_.R9.READY,n),o.error)o.error.message.includes("aborted")||t.ui.setNotification({error:o.error,category:"error",message:'Failed to retrieve folder contents from "'.concat(s,'": ').concat(o.error.message)});else{let a=t.formatFolderItems(o);t.pushColumnAtIndex({id:e||s,name:s,items:a,hasMoreItems:200===a.length,isLoadingMoreItems:!1},n)}}),(0,n._)(this,"fetchMoreFolderContents",async function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.setColumnIsLoadingMore(e);let a=t.openedFolders.map(e=>e.name).join("/"),i={limit:200,offset:s.items.length,search:n,sortBy:{column:t.sortBy,order:t.sortByOrder}},r=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/list"),{path:a,options:i},{abortSignal:t.abortController.signal});if(r.error)r.error.message.includes("aborted")||t.ui.setNotification({error:r.error,category:"error",message:'Failed to retrieve folder contents from "'.concat(folderName,'": ').concat(r.error.message)});else{let s=t.formatFolderItems(r);t.columns=t.columns.map((t,n)=>n===e?{...t,items:t.items.concat(s),isLoadingMoreItems:!1,hasMoreItems:200===r.length}:t)}}),(0,n._)(this,"refetchAllOpenedFolders",async()=>{let e=this.openedFolders.map(e=>e.name);await this.fetchFoldersByPath(e)}),(0,n._)(this,"fetchFoldersByPath",async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===t.selectedBucket.id)return;let a=[""].concat(e);n&&(t.columns=[t.selectedBucket.name].concat(e).map(e=>({id:e,name:e,status:_.R9.LOADING,items:[]})));let i=await Promise.all(a.map(async(n,a)=>{let i=e.slice(0,a).join("/"),r={limit:200,offset:0,search:s,sortBy:{column:t.sortBy,order:t.sortByOrder}},o=await (0,P.v_)("".concat(t.endpoint,"/buckets/").concat(t.selectedBucket.id,"/objects/list"),{path:i,options:r});return o.error?(t.ui.setNotification({error:o.error,category:"error",message:"Failed to fetch folders: ".concat(o.error.message)}),[]):o})),r=i.map((e,s)=>{let n=t.formatFolderItems(e);return{id:null,name:0===s?t.selectedBucket.name:a[s],items:n,hasMoreItems:200===n.length,isLoadingMoreItems:!1}});t.columns=r;let o=e.map((e,t)=>{let s=u()(r[t].items,{name:e});return s||{id:null,name:e,type:_.fh.FOLDER,status:_.R9.READY}});t.openedFolders=o}),(0,n._)(this,"validateParentFolderEmpty",async e=>{let t=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.id,"/objects/list"),{path:e,options:this.DEFAULT_OPTIONS});if(!t.error&&0===t.length){let t="".concat(e,"/").concat(D);await this.supabaseClient.storage.from(this.selectedBucket.name).upload(t,new File([],D))}}),(0,n._)(this,"deleteFolder",async e=>{var t;let s=await this.getAllItemsAlongFolder(e);await this.deleteFiles(s,!0);let n=(null===(t=this.openedFolders[this.openedFolders.length-1])||void 0===t?void 0:t.name)===e.name;n&&(this.popColumnAtIndex(e.columnIndex),this.popOpenedFoldersAtIndex(e.columnIndex-1));let a=this.openedFolders.map(e=>e.name).join("/");a.length>0&&await this.validateParentFolderEmpty(a),await this.refetchAllOpenedFolders(),this.clearSelectedItemsToDelete(),this.ui.setNotification({category:"success",message:"Successfully deleted ".concat(e.name)})}),(0,n._)(this,"renameFolder",async(e,t,s)=>{let n=e.name;if(n===t)return this.updateRowStatus(n,_.R9.READY,s);let a=this.ui.setNotification({category:"loading",message:"Renaming folder to ".concat(t),description:z,progress:0});if(t.includes("/")||t.includes("\\"))return this.ui.setNotification({message:"Folder name cannot contain forward or back slashes.",type:"error"});this.updateRowStatus(n,_.R9.LOADING,s,t);let i=await this.getAllItemsAlongFolder(e),r=0,l=!1,c=i.map(e=>{let n="".concat(e.prefix,"/").concat(e.name),a=n.split("/"),o=a.slice(0,s).concat(t).concat(a.slice(s+1)).join("/");return()=>new Promise(async e=>{r+=1/i.length;let t=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.name,"/objects/move"),{from:n,to:o});t.error&&(l=!0,this.ui.setNotification({category:"error",message:"Failed to move ".concat(n," to the new folder")})),e()})}),d=o()(c,2);try{await d.reduce(async(e,s)=>{await e,await Promise.all(s.map(e=>e())),this.ui.setNotification({id:a,category:"loading",message:"Renaming folder to ".concat(t),description:z,progress:100*r})},Promise.resolve()),l?this.ui.setNotification({id:a,message:"Renamed folder to ".concat(t," with some errors"),category:"error"}):this.ui.setNotification({id:a,message:"Successfully renamed folder to ".concat(t),category:"success"}),await this.refetchAllOpenedFolders();let e=i.map(e=>e.id),s=this.filePreviewCache.filter(t=>!e.includes(t.id));this.filePreviewCache=s}catch(e){this.ui.setNotification({id:a,message:"Failed to rename folder to ".concat(t),category:"error"})}}),(0,n._)(this,"getAllItemsAlongFolder",async e=>{var t,s;let n=[],a="",{name:i,columnIndex:r,prefix:o}=e;if(void 0===o){let e=this.openedFolders.slice(0,r).map(e=>e.name).join("/");a=e.length>0?"".concat(e,"/").concat(i):i}else a="".concat(o,"/").concat(i);let l={limit:1e4,offset:0,sortBy:{column:this.sortBy,order:this.sortByOrder}},c=[];for(;;){let e=await (0,P.v_)("".concat(this.endpoint,"/buckets/").concat(this.selectedBucket.name,"/objects/list"),{path:a,options:l});if(c=c.concat(e),l.offset+=l.limit,(e||[]).length<l.limit)break}let d=null!==(t=null==c?void 0:c.filter(e=>null===e.id))&&void 0!==t?t:[],u=null!==(s=null==c?void 0:c.filter(e=>null!==e.id))&&void 0!==s?s:[];u.forEach(e=>n.push({...e,prefix:a}));let m=await Promise.all(d.map(e=>this.getAllItemsAlongFolder({...e,prefix:a})));return m.map(e=>{e.map(e=>n.push(e))}),n}),(0,n._)(this,"sanitizeNameForDuplicateInColumn",function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getLatestColumnIndex(),a=t.columns[n],i=a.items.filter(e=>e.status!==_.R9.EDITING),r=i.filter(t=>t.name===e).length>0;if(r){if(!s)return t.ui.setNotification({message:"The name ".concat(e," already exists in the current directory. Please use a different name."),category:"error",duration:4e3}),null;{let[t,s]=e.split("."),n=new RegExp("".concat(t," \\([-0-9]+\\)").concat(s?"."+s:"","$")),a=i.filter(e=>e.name.match(n)),r=t+" (".concat(a.length+1,")");return s?"".concat(r,".").concat(s):r}}return e}),(0,n._)(this,"formatFolderItems",function(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=null!==(t=null===(e=null!=s?s:[])||void 0===e?void 0:e.filter(e=>e.name!==D).map(e=>{let t=e.id?_.fh.FILE:_.fh.FOLDER,s=Number(new Date)-Number(new Date(e.created_at)),n=t===_.fh.FILE&&!e.metadata&&s>=9e5,a=t===_.fh.FILE&&!e.metadata&&s<=9e5?_.R9.LOADING:_.R9.READY,i={...e,type:t,status:a,isCorrupted:n};return i}))&&void 0!==t?t:[];return n}),(0,n._)(this,"addTempRow",function(e,s,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.columns.map((t,o)=>{if(o===a){let a={type:e,name:s,status:n,metadata:i},o=r?[a].concat(t.items):t.items.concat([a]);return{...t,items:o}}return t});t.columns=o}),(0,n._)(this,"removeTempRows",e=>{let t=this.columns.map((t,s)=>{if(s===e){let e=t.items.filter(e=>g()(e,"id"));return{...t,items:e}}return t});this.columns=t}),(0,n._)(this,"setSelectedItemToRename",e=>{this.updateRowStatus(e.name,_.R9.EDITING,e.columnIndex)}),(0,n._)(this,"updateRowStatus",function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getLatestColumnIndex(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.columns.map((t,i)=>{if(i===n){let n=t.items.map(t=>t.name===e?{...t,status:s,...a&&{name:a}}:t);return{...t,items:n}}return t});t.columns=i}),(0,n._)(this,"updateFolderAfterEdit",function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLatestColumnIndex(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.R9.READY,a=t.columns.map((t,a)=>{if(a===s){let s=t.items.map(t=>{if(t.status===_.R9.EDITING){let s=new Date().toISOString();return{...t,status:n,name:e,createdAt:s,lastAccessedAt:s,updatedAt:s,metadata:null,id:null}}return t});return{...t,items:s}}return t});t.columns=a}),(0,n._)(this,"updateExplorerPreferences",()=>{let e=this.getLocalStorageKey(),t={view:this.view,sortBy:this.sortBy,sortByOrder:this.sortByOrder};return localStorage.setItem(e,JSON.stringify(t)),t}),(0,n._)(this,"loadExplorerPreferences",()=>{var e,t;let s=this.getLocalStorageKey(),n=null!==(t=null===(e=localStorage)||void 0===e?void 0:e.getItem(s))&&void 0!==t?t:void 0;if(void 0!==n){let{view:e,sortBy:t,sortByOrder:s}=JSON.parse(n);this.view=e,this.sortBy=t,this.sortByOrder=s}else{let{view:e,sortBy:t,sortByOrder:s}=this.updateExplorerPreferences();this.view=e,this.sortBy=t,this.sortByOrder=s}}),(0,n._)(this,"selectRangeItems",(e,t)=>{let s=this.columns[e].items,n=s[t],a=this.selectedItems.map(e=>e.id),i=a[a.length-1],r=p()(s,{id:i}),o=s.slice(Math.min(t,r),Math.max(t,r)+1).map(t=>({...t,columnIndex:e}));if(t<r&&o.reverse(),a.includes(n.id)){let e=o.map(e=>e.id);this.setSelectedItems(this.selectedItems.filter(t=>t.id===n.id||!e.includes(t.id)))}else this.setSelectedItems(N()(this.selectedItems.concat(o),"id"))}),(0,S.ky)(this,{supabaseClient:!1}),this.projectRef=e,this.ui=(0,E.oR)().ui,this.abortController=new AbortController}}},94235:function(e,t,s){s.d(t,{x5:function(){return useSidePanelsStateSnapshot}});var n=s(9162),a=s(4741);let i=(0,n.sj)({vercelConnectionsOpen:!1,setVercelConnectionsOpen:e=>{i.vercelConnectionsOpen=e},vercelConnectionsIntegrationId:void 0,setVercelConnectionsIntegrationId:e=>{i.vercelConnectionsIntegrationId=e},githubConnectionsOpen:!1,setGithubConnectionsOpen:e=>{i.githubConnectionsOpen=e},githubConnectionsIntegrationId:void 0,setGithubConnectionsIntegrationId:e=>{i.githubConnectionsIntegrationId=e}}),useSidePanelsStateSnapshot=e=>(0,a.R)(i,e)},82089:function(e,t,s){s.d(t,{Rw:function(){return d},vc:function(){return l.Z},RB:function(){return c},UW:function(){return o}});var n,a,i,r,o=[{text:"Working with @supabase has been one of the best dev experiences I've had lately. Incredibly easy to set up, great documentation, and so many fewer hoops to jump through than the competition. I definitely plan to use it on any and all future projects.",url:"https://twitter.com/thatguy_tex/status/1497602628410388480",handle:"thatguy_tex",img_url:"/images/twitter-profiles/09HouOSt_400x400.jpg"},{text:"@supabase is just \uD83E\uDD2F Now I see why a lot of people love using it as a backend for their applications. I am really impressed with how easy it is to set up an Auth and then just code it together for the frontend. @IngoKpp now I see your joy with Supabase #coding #fullstackwebdev",url:"https://twitter.com/IxoyeDesign/status/1497473731777728512",handle:"IxoyeDesign",img_url:"/images/twitter-profiles/C8opIL-g_400x400.jpg"},{text:"I've been using @supabase for two personal projects and it has been amazing being able to use the power of Postgres and don't have to worry about the backend",url:"https://twitter.com/varlenneto/status/1496595780475535366",handle:"varlenneto",img_url:"/images/twitter-profiles/wkXN0t_F_400x400.jpg"},{text:"Y'all @supabase + @nextjs is amazing! \uD83D\uDE4C Barely an hour into a proof-of-concept and already have most of the functionality in place. \uD83E\uDD2F\uD83E\uDD2F\uD83E\uDD2F",url:"https://twitter.com/justinjunodev/status/1500264302749622273",handle:"justinjunodev",img_url:"/images/twitter-profiles/9k_ZB9OO_400x400.jpg"},{text:"And thanks to @supabase, I was able to go from idea to launched feature in a matter of hours. Absolutely amazing!",url:"https://twitter.com/BraydonCoyer/status/1511071369731137537",handle:"BraydonCoyer",img_url:"/images/twitter-profiles/8YxkpW8f_400x400.jpg"},{text:"Contributing to open-source projects and seeing merged PRs gives enormous happiness! Special thanks to @supabase, for giving this opportunity by staying open-source and being junior-friendly\uD83C\uDFFC",url:"https://twitter.com/damlakoksal/status/1511436907984662539",handle:"damlakoksal",img_url:"/images/twitter-profiles/N8EfTFs7_400x400.jpg"},{text:"Holy crap. @supabase is absolutely incredible. Most elegant backend as a service I've ever used. This is a dream.",url:"https://twitter.com/kentherogers/status/1512609587110719488",handle:"KenTheRogers",img_url:"/images/twitter-profiles/9l9Td-Fz_400x400.jpg"},{text:"Over the course of a few weeks, we migrated 125.000 users (email/pw, Gmail, Facebook, Apple logins) from Auth0 to @supabase and have now completed the migration. I'm just glad the migration is done \uD83D\uDE05 Went well, besides a few edge cases (duplicate emails/linked accounts)",url:"https://twitter.com/kevcodez/status/1518548401587204096",handle:"kevcodez",img_url:"/images/twitter-profiles/t6lpcRcn_400x400.jpg"},{text:"Using @supabase I'm really pleased on the power of postgres (and sql in general). Despite being a bit dubious about the whole backend as a service thing I have to say I really don't miss anything. The whole experience feel very robust and secure.",url:"https://twitter.com/paoloricciuti/status/1497691838597066752",handle:"PaoloRicciuti",img_url:"/images/twitter-profiles/OCDKFUOp_400x400.jpg"},{text:"@supabase is lit. It took me less than 10 minutes to setup, the DX is just amazing.",url:"https://twitter.com/saxxone/status/1500812171063828486",handle:"saxxone",img_url:"/images/twitter-profiles/BXi6z1M7_400x400.jpg"},{text:"Im not sure what magic @supabase is using but weve migrated @happyteamsdotio database to @supabase from @heroku and its much much faster at half the cost.",url:"https://twitter.com/michaelcdever/status/1524753565599690754",handle:"michaelcdever",img_url:"/images/twitter-profiles/rWX8Jzp5_400x400.jpg"},{text:"There are a lot of indie hackers building in public, but its rare to see a startup shipping as consistently and transparently as Supabase. Their upcoming March releases look to be \uD83D\uDD25 Def worth a follow! also opened my eyes as to how to value add in open source.",url:"https://twitter.com/swyx/status/1366685025047994373",handle:"swyx",img_url:"/images/twitter-profiles/qhvO9V6x_400x400.jpg"},{text:"This weekend I made a personal record \uD83E\uDD47 on the less time spent creating an application with social login / permissions, database, cdn, infinite scaling, git push to deploy and for free. Thanks to @supabase and @vercel",url:"https://twitter.com/jperelli/status/1366195769657720834",handle:"jperelli",img_url:"/images/twitter-profiles/_ki30kYo_400x400.jpg"},{text:"Badass! Supabase is amazing. literally saves our small team a whole engineers worth of work constantly. The founders and everyone Ive chatted with at supabase are just awesome people as well :)",url:"https://twitter.com/KennethCassel/status/1524359528619384834",handle:"KennethCassel",img_url:"/images/twitter-profiles/pmQj3TX-_400x400.jpg"},{text:"Working with Supabase is just fun. It makes working with a DB so much easier.",url:"https://twitter.com/the_BrianB/status/1524716498442276864",handle:"the_BrianB",img_url:"/images/twitter-profiles/7NITI8Z3_400x400.jpg"},{text:"This community is STRONG and will continue to be the reason why developers flock to @supabase over an alternative. Keep up the good work! ",url:"https://twitter.com/_wilhelm__/status/1524074865107488769",handle:"_wilhelm__",img_url:"/images/twitter-profiles/CvqDy6YF_400x400.jpg"},{text:"Working on my next SaaS app and I want this to be my whole job because I'm just straight out vibing putting it together. @supabase and chill, if you will",url:"https://twitter.com/drewclemcr8/status/1523843155484942340",handle:"drewclemcr8",img_url:"/images/twitter-profiles/bJlKtSxz_400x400.jpg"},{text:"@supabase Putting a ton of well-explained example API queries in a self-building documentation is just a classy move all around. I also love having GraphQL-style nested queries with traditional SQL filtering. This is pure DX delight. A+++. #backend",url:"https://twitter.com/CodiferousCoder/status/1522233113207836675",handle:"CodiferousCoder",img_url:"/images/twitter-profiles/t37cVLwy_400x400.jpg"},{text:"Me using @supabase for the first time right now \uD83E\uDD2F",url:"https://twitter.com/nasiscoe/status/1365140856035024902",handle:"nasiscoe",img_url:"/images/twitter-profiles/nc2Ms5hH_400x400.jpg"},{text:"I'm trying @supabase, Firebase alternative that uses PostgreSQL (and you can use GraphQL too) in the cloud. It's incredible \uD83D\uDE0D",url:"https://twitter.com/JP__Gallegos/status/1365699468109242374",handle:"JP__Gallegos",img_url:"/images/twitter-profiles/1PH2mt6v_400x400.jpg"},{text:"Check out this amazing product @supabase. A must give try #newidea #opportunity",url:"https://twitter.com/digitaldaswani/status/1364447219642814464",handle:"digitaldaswani",img_url:"/images/twitter-profiles/w8HLdlC7_400x400.jpg"},{text:"I gave @supabase a try this weekend and I was able to create a quick dashboard to visualize the data from the PostgreSQL instance. It's super easy to use Supabase's API or the direct DB connection. Check out the tutorial \uD83D\uDCD6",url:"https://twitter.com/razvanilin/status/1363770020581412867",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Tried @supabase for the first time yesterday. Amazing tool! I was able to get my Posgres DB up in no time and their documentation on operating on the DB is super easy! \uD83D\uDC4F Can't wait for Cloud functions to arrive! It's gonna be a great Firebase alternative!",url:"https://twitter.com/chinchang457/status/1363347740793524227",handle:"chinchang457",img_url:"/images/twitter-profiles/LTw5OCnv_400x400.jpg"},{text:"10/100 All day i was migrating my project from firebase to @supabase Because it is perfect and simple!!! I like design and API for understandable. There are in BETA now. Just try!\uD83E\uDDEA",url:"https://twitter.com/roomahhka/status/1363155396391763971",handle:"roomahhka",img_url:"/images/twitter-profiles/e_2eQt6C_400x400.jpg"},{text:"I gave @supabase a try today and I was positively impressed! Very quick setup to get a working remote database with API access and documentation generated automatically for you \uD83D\uDC4C 10/10 will play more",url:"https://twitter.com/razvanilin/status/1363002398738800640",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Wait. Is it so easy to write queries for @supabase ? It's like simple SQL stuff!",url:"https://twitter.com/T0ny_Boy/status/1362911838908911617",handle:"T0ny_Boy",img_url:"/images/twitter-profiles/UCBhUBZl_400x400.jpg"},{text:"Jeez, and @supabase have native support for magic link login?! I was going to use http://magic.link for this But if I can get my whole DB + auth + magic link support in one... Awesome",url:"https://twitter.com/louisbarclay/status/1362016666868154371",handle:"louisbarclay",img_url:"/images/twitter-profiles/6f1O8ZOW_400x400.jpg"},{text:"Where has @supabase been all my life? \uD83D\uDE0D",url:"https://twitter.com/Elsolo244/status/1360257201911320579",handle:"Elsolo244",img_url:"/images/twitter-profiles/v6citnk33y2wpeyzrq05_400x400.jpeg"},{text:"Honestly Supabase is such a killer Firebase alternative.",url:"https://twitter.com/XPCheese/status/1360229397735895043",handle:"XPCheese",img_url:"/images/twitter-profiles/eYP6YXr7_400x400.jpg"},{text:"I think you'll love @supabase :-) Open-source, PostgreSQL-based & zero magic.",url:"https://twitter.com/zippoxer/status/1360021315852328961",handle:"zippoxer",img_url:"/images/twitter-profiles/6rd3xub9_400x400.png"},{text:"@supabase is insane.",url:"https://twitter.com/codewithbhargav/status/1357647840911126528",handle:"codewithbhargav",img_url:"/images/twitter-profiles/LQYfHXBp_400x400.jpg"},{text:"Its fun, feels lightweight, and really quick to spin up user auth and a few tables. Almost too easy! Highly recommend.",url:"https://twitter.com/nerdburn/status/1356857261495214085",handle:"nerdburn",img_url:"/images/twitter-profiles/66VSV9Mm_400x400.png"},{text:"Now things are starting to get interesting! Firebase has long been the obvious choice for many #flutter devs for the ease of use. But their databases are NoSQL, which has its downsides... Seems like @supabase is working on something interesting here!",url:"https://twitter.com/RobertBrunhage/status/1356973695865085953",handle:"RobertBrunhage",img_url:"/images/twitter-profiles/5LMWEACf_400x400.jpg"},{text:"Honestly, I really love what @supabase is doing, you don't need to own a complete backend, just write your logic within your app and you'll get a powerful Postgresql at your disposal.",url:"https://twitter.com/NavicsteinR/status/1356927229217959941",handle:"NavicsteinR",img_url:"/images/twitter-profiles/w_zNZAs7_400x400.jpg"},{text:"I've really enjoyed the DX! Extremely fun to use, which is odd to say about a database at least for me.",url:"https://twitter.com/Soham_Asmi/status/1373086068132745217",handle:"Soham_Asmi",img_url:"/images/twitter-profiles/Os4nhKIr_400x400.jpg"},{text:"Supabase team is doing some awesome stuff #supabase #facts @supabase",url:"https://twitter.com/_strawbird/status/1372607500499841025",handle:"_strawbird",img_url:"/images/twitter-profiles/iMBvvQdn_400x400.jpg"},{text:"Did a website with @supabase last week with no prior experience with it. Up and running in 20 minutes. It's awesome to use. Thumbs up",url:"https://twitter.com/michael_webdev/status/1352885366928404481?s=20",handle:"michael_webdev",img_url:"/images/twitter-profiles/SvAyLaWV_400x400.jpg"},{text:"I just learned about @supabase and im in love \uD83D\uDE0D Supabase is an open source Firebase alternative! EarListen (& react) to database changes \uD83D\uDC81 Manage users & permissions \uD83D\uDD27 Simple UI for database interaction",url:"https://twitter.com/0xBanana/status/1373677301905362948",handle:"0xBanana",img_url:"/images/twitter-profiles/pgHIGqZ0_400x400.jpg"}],l=s(85377);s(87187),s(49394),(n=i||(i={})).DATABASE="Database",n.AUTHENTICATION="Authentication",n.STORAGE="Storage",n.FUNCTIONS="Edge Functions",n.REALTIME="Realtime",n.VECTOR="Vector",(a=r||(r={})).DATABASE="database",a.AUTHENTICATION="authentication",a.STORAGE="storage",a.FUNCTIONS="functions",a.REALTIME="realtime",a.VECTOR="vector";let c={database:{name:"Database",icon:{16:"M3.502 6h8.996v4H3.502V6ZM3 10.002h10v4H3v-4ZM3 2h10v4H3V2Z",18:"M3.00829 6.33225H15.1778V11.6648H3.00829V6.33225Z M2 13.0839C2 12.3016 2.63418 11.6674 3.41647 11.6674H14.7483C15.5306 11.6674 16.1648 12.3016 16.1648 13.0839V15.5835C16.1648 16.3658 15.5306 17 14.7483 17H3.41647C2.63418 17 2 16.3658 2 15.5835V13.0839Z M2 2.41647C2 1.63418 2.63418 1 3.41647 1H14.7483C15.5306 1 16.1648 1.63418 16.1648 2.41647V4.9161C16.1648 5.6984 15.5306 6.33257 14.7483 6.33257H3.41647C2.63418 6.33257 2 5.6984 2 4.9161V2.41647Z",24:"M5.18625 8.66531H19.5035V15.331H5.18625V8.66531Z M4 17.0007C4 16.0804 4.7461 15.3343 5.66645 15.3343H18.9984C19.9187 15.3343 20.6648 16.0804 20.6648 17.0007V20.3335C20.6648 21.2539 19.9187 22 18.9984 22H5.66646C4.7461 22 4 21.2539 4 20.3335V17.0007Z M4 3.66646C4 2.7461 4.7461 2 5.66645 2H18.9984C19.9187 2 20.6648 2.7461 20.6648 3.66645V6.99926C20.6648 7.91962 19.9187 8.66572 18.9984 8.66572H5.66646C4.7461 8.66572 4 7.91962 4 6.99926V3.66646Z"}},authentication:{name:"Authentication",icon:{16:"M3.49414 9.97461H8.49414M3.49414 9.97461V11.9746H8.49414V9.97461M3.49414 9.97461V7.97461H8.49414V9.97461M10 5V3C10 1.89543 9.10457 1 8 1C6.89543 1 6 1.89543 6 3V5M3.47266 7L3.47266 12C3.47266 13.1046 4.36809 14 5.47266 14H10.4727C11.5772 14 12.4727 13.1046 12.4727 12V7C12.4727 5.89543 11.5772 5 10.4727 5L5.47266 5C4.36809 5 3.47266 5.89543 3.47266 7Z",18:"M3.02644 12.0457H9.18048M3.02644 12.0457V14.5072H9.18048V12.0457M3.02644 12.0457V9.58414H9.18048V12.0457M11.0339 5.92308V3.46154C11.0339 2.10207 9.93179 1 8.57228 1C7.21277 1 6.11067 2.10207 6.11067 3.46154V5.92308M3 8.38465L3 14.5384C3 15.8979 4.10208 17 5.46157 17H11.6157C12.9752 17 14.0773 15.8979 14.0773 14.5384V8.38465C14.0773 7.02516 12.9752 5.92308 11.6157 5.92308L5.46158 5.92308C4.10209 5.92308 3 7.02516 3 8.38465Z",24:"M5.03305 15.8071H12.7252M5.03305 15.8071V18.884H12.7252V15.8071M5.03305 15.8071V12.7302H12.7252V15.8071M15.0419 8.15385V5.07692C15.0419 3.37759 13.6643 2 11.965 2C10.2657 2 8.88814 3.37759 8.88814 5.07692V8.15385M5 11.2307L5 18.9231C5 20.6224 6.37757 22 8.07689 22H15.769C17.4683 22 18.8459 20.6224 18.8459 18.9231V11.2307C18.8459 9.53142 17.4683 8.15385 15.769 8.15385L8.07689 8.15385C6.37757 8.15385 5 9.53142 5 11.2307Z"}},storage:{name:"Storage",icon:{16:"M12.9997 7.50869V5.60119L9.38151 2.00024H3.99967C3.44739 2.00024 2.99967 2.44796 2.99967 3.00024V5.99976M12.9645 5.58447L9.38004 2L9.38004 4.58447C9.38004 5.13676 9.82776 5.58447 10.38 5.58447L12.9645 5.58447ZM4.44135 5.99976H2.97363C2.42135 5.99976 1.97363 6.44747 1.97363 6.99976V11.9998C1.97363 13.1043 2.86906 13.9998 3.97363 13.9998H11.9736C13.0782 13.9998 13.9736 13.1043 13.9736 11.9998V8.50869C13.9736 7.95641 13.5259 7.50869 12.9736 7.50869H6.79396C6.53157 7.50869 6.27968 7.40556 6.09263 7.22153L5.14268 6.28692C4.95563 6.10289 4.70375 5.99976 4.44135 5.99976Z",18:"M15.7014 8.34507V5.80169L10.8772 1.00033H3.7014C2.96501 1.00033 2.36805 1.59728 2.36805 2.33367V6.33312M15.6545 5.77939L10.8752 1L10.8752 4.44605C10.8752 5.18243 11.4722 5.77939 12.2086 5.77939L15.6545 5.77939ZM4.29028 6.33312H2.33335C1.59696 6.33312 1 6.93008 1 7.66647V14.3333C1 15.8061 2.19392 17 3.66669 17H14.3333C15.8061 17 17 15.8061 17 14.3333V9.67842C17 8.94203 16.403 8.34507 15.6667 8.34507H7.42712C7.07725 8.34507 6.7414 8.20755 6.492 7.96218L5.2254 6.71601C4.976 6.47063 4.64015 6.33312 4.29028 6.33312Z",24:"M20.4997 12.1386V9.15811L14.8463 3.53163H6.43717C5.57423 3.53163 4.87467 4.23119 4.87467 5.09413V9.78087M20.4447 9.13199L14.844 3.53125L14.844 7.56949C14.844 8.43243 15.5436 9.13199 16.4065 9.13199L20.4447 9.13199ZM7.12729 9.78087H4.83398C3.97104 9.78087 3.27148 10.4804 3.27148 11.3434V19.1559C3.27148 20.8818 4.67059 22.2809 6.39648 22.2809H18.8965C20.6224 22.2809 22.0215 20.8818 22.0215 19.1559V13.7011C22.0215 12.8381 21.3219 12.1386 20.459 12.1386H10.8032C10.3933 12.1386 9.99969 11.9774 9.70743 11.6899L8.22312 10.2296C7.93086 9.94202 7.53729 9.78087 7.12729 9.78087Z"}},functions:{name:"Edge Functions",icon:{16:"M1.857 11.36a7 7 0 0 1 9.41-9.551M4.774 14.212a7 7 0 0 0 9.41-9.497m-8.812 7.845a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm9.296-9.13a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM12.5 8a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z",18:"M5.31216 16.101C6.41582 16.6754 7.67021 17 9.00043 17C13.419 17 17.0009 13.4183 17.0009 9C17.0009 7.66622 16.6744 6.40868 16.0971 5.30289M12.7352 1.92336C11.6203 1.33382 10.3494 1 9.00043 1C4.58192 1 1 4.58172 1 9C1 10.3615 1.34015 11.6436 1.94012 12.766M1.94012 12.766C1.61762 13.16 1.42413 13.6637 1.42413 14.2126C1.42413 15.475 2.44753 16.4983 3.70997 16.4983C4.9724 16.4983 5.99581 15.475 5.99581 14.2126C5.99581 12.9502 4.9724 11.9269 3.70997 11.9269C2.99646 11.9269 2.35931 12.2538 1.94012 12.766ZM16.6199 3.7793C16.6199 5.04166 15.5965 6.06501 14.3341 6.06501C13.0716 6.06501 12.0482 5.04166 12.0482 3.7793C12.0482 2.51693 13.0716 1.49358 14.3341 1.49358C15.5965 1.49358 16.6199 2.51693 16.6199 3.7793ZM14.1436 9C14.1436 11.8403 11.8409 14.1429 9.00043 14.1429C6.15996 14.1429 3.8573 11.8403 3.8573 9C3.8573 6.15968 6.15996 3.85714 9.00043 3.85714C11.8409 3.85714 14.1436 6.15968 14.1436 9Z",24:"M6.6594 21.8201C8.10788 22.5739 9.75418 23 11.5 23C17.299 23 22 18.299 22 12.5C22 10.7494 21.5716 9.09889 20.8139 7.64754M16.4016 3.21191C14.9384 2.43814 13.2704 2 11.5 2C5.70101 2 1 6.70101 1 12.5C1 14.287 1.44643 15.9698 2.23384 17.4428M2.23384 17.4428C1.81058 17.96 1.55664 18.6211 1.55664 19.3416C1.55664 20.9984 2.89979 22.3416 4.55664 22.3416C6.21349 22.3416 7.55664 20.9984 7.55664 19.3416C7.55664 17.6847 6.21349 16.3416 4.55664 16.3416C3.62021 16.3416 2.78399 16.7706 2.23384 17.4428ZM21.5 5.64783C21.5 7.30468 20.1569 8.64783 18.5 8.64783C16.8432 8.64783 15.5 7.30468 15.5 5.64783C15.5 3.99097 16.8432 2.64783 18.5 2.64783C20.1569 2.64783 21.5 3.99097 21.5 5.64783ZM18.25 12.5C18.25 16.2279 15.2279 19.25 11.5 19.25C7.77208 19.25 4.75 16.2279 4.75 12.5C4.75 8.77208 7.77208 5.75 11.5 5.75C15.2279 5.75 18.25 8.77208 18.25 12.5Z"}},realtime:{name:"Realtime",icon:{16:"M5.362.984v2.35m-1.866.144L1.365 1.282m2.052 3.92H1.052m8.023 9.653L4.557 4.523 15 9.115l-4.748 1.182-1.177 4.558Z",18:"M5.94415 1V3.85995M3.80348 3.85995L1.35903 1.34096M3.80348 5.83876H1M11.5534 11.6817L15.3703 10.7317C15.901 10.5996 15.9633 9.87023 15.4626 9.6501L6.36613 5.65053C5.8879 5.44026 5.40048 5.92671 5.60979 6.40536L9.53793 15.3879C9.75628 15.8872 10.4825 15.8291 10.6187 15.3015L11.5534 11.6817Z",24:"M9.15928 1.94531V5.84117M6.24345 5.84117L2.91385 2.40977M6.24345 8.53673H2.4248M16.7998 16.496L21.9988 15.2019C22.7217 15.022 22.8065 14.0285 22.1246 13.7286L9.73411 8.28034C9.08269 7.99391 8.41873 8.65652 8.70383 9.30851L14.0544 21.5445C14.3518 22.2247 15.341 22.1456 15.5266 21.4269L16.7998 16.496Z"}},vector:{name:"Vector",icon:{16:"M7.99886 7.63216V14.4892M7.99886 7.63216L14.0488 4.11804M7.99886 7.63216L1.94922 4.11819M1.94922 4.11819V8.32332M1.94922 4.11819V4.08217L5.57319 1.97717M14.049 8.36007V4.08217L10.4251 1.97717M11.8165 12.4072L7.99913 14.6245L4.18177 12.4072",18:"M8.61033 8.15404V16.8287M8.61033 8.15404L16.264 3.70838M8.61033 8.15404L0.957031 3.70858M0.957031 3.70858V9.02842M0.957031 3.70858V3.66301L5.54166 1M16.2643 9.07491V3.66301L11.6797 1M13.44 14.1949L8.61068 17L3.7814 14.1949",24:"M11.9983 11.4482V21.7337M11.9983 11.4482L21.0732 6.17699M11.9983 11.4482L2.92383 6.17723M2.92383 6.17723V12.4849M2.92383 6.17723V6.1232L8.35978 2.9657M21.0736 12.54V6.1232L15.6376 2.9657M17.7247 18.6107L11.9987 21.9367L6.27265 18.6107"}}};var d=JSON.parse('[{"name":"address_standardizer","comment":"Used to parse an address into constituent elements. Generally used to support geocoding address normalization step.","tags":["Utility"],"link":"https://postgis.net/docs/manual-2.5/Address_Standardizer.html"},{"name":"address_standardizer_data_us","comment":"Address Standardizer US dataset example","tags":["Dataset"],"link":"https://postgis.net/docs/manual-2.5/Address_Standardizer.html"},{"name":"amcheck","comment":"functions for verifying relation integrity","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/amcheck.html"},{"name":"autoinc","comment":"functions for autoincrementing fields","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/contrib-spi.html#id-1.11.7.50.6"},{"name":"bloom","comment":"bloom access method - signature file based index","tags":["Index"],"link":"https://www.postgresql.org/docs/current/bloom.html"},{"name":"btree_gin","comment":"support for indexing common datatypes in GIN","tags":["Index"],"link":"https://www.postgresql.org/docs/current/btree-gin.html"},{"name":"btree_gist","comment":"support for indexing common datatypes in GiST","tags":["Index"],"link":"https://www.postgresql.org/docs/current/btree-gist.html"},{"name":"citext","comment":"data type for case-insensitive character strings","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/citext.html"},{"name":"cube","comment":"data type for multidimensional cubes","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/cube.html"},{"name":"dblink","comment":"connect to other PostgreSQL databases from within a database","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/contrib-dblink-function.html"},{"name":"dict_int","comment":"text search dictionary template for integers","tags":["Search"],"link":"https://www.postgresql.org/docs/current/dict-int.html"},{"name":"dict_xsyn","comment":"text search dictionary template for extended synonym processing","tags":["Search"],"link":"https://www.postgresql.org/docs/current/dict-xsyn.html"},{"name":"earthdistance","comment":"calculate great-circle distances on the surface of the Earth","tags":["Geo","Utility"],"link":"https://www.postgresql.org/docs/current/earthdistance.html"},{"name":"fuzzystrmatch","comment":"determine similarities and distance between strings","tags":["Search"],"link":"https://www.postgresql.org/docs/current/fuzzystrmatch.html"},{"name":"hstore","comment":"data type for storing sets of (key, value) pairs","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/hstore.html"},{"name":"hypopg","comment":"Hypothetical indexes for PostgreSQL","tags":["Admin","Index"],"link":"/guides/database/extensions/hypopg"},{"name":"http","comment":"HTTP client for PostgreSQL, allows web page retrieval inside the database.","tags":["Utility"],"link":"/guides/database/extensions/http"},{"name":"insert_username","comment":"functions for tracking who changed a table","tags":["Audit","Utility"],"link":"https://www.postgresql.org/docs/current/contrib-spi.html#id-1.11.7.50.7"},{"name":"old_snapshot","comment":"utilities in support of old_snapshot_threshold","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/oldsnapshot.html"},{"name":"index_advisor","comment":"optimize query performance with automatic index recommendation","tags":["Utility"],"link":"/guides/database/extensions/index_advisor"},{"name":"intarray","comment":"functions, operators, and index support for 1-D arrays of integers","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/intarray.html"},{"name":"isn","comment":"data types for international product numbering standards","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/isn.html"},{"name":"lo","comment":"Large Object maintenance","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/lo.html"},{"name":"ltree","comment":"data type for hierarchical tree-like structures","tags":["Data Type"],"link":"https://www.postgresql.org/docs/current/ltree.html"},{"name":"moddatetime","comment":"functions for tracking last modification time","tags":["Audit","Utility"],"link":"https://www.postgresql.org/docs/current/contrib-spi.html#id-1.11.7.50.8"},{"name":"pg_cron","comment":"Job scheduler for PostgreSQL","tags":["Utility"],"link":"/guides/database/extensions/pg_cron"},{"name":"pg_freespacemap","comment":"examine the free space map (FSM)","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgfreespacemap.html"},{"name":"pg_graphql","comment":"pg_graphql: GraphQL support","tags":["Utility"],"link":"/guides/database/extensions/pg_graphql"},{"name":"pg_hashids","comment":"pg_hashids","tags":["Utility"],"link":"/guides/database/extensions/pg_hashids"},{"name":"pg_jsonschema","comment":"pg_jsonschema","tags":["Utility"],"link":"/guides/database/extensions/pg_jsonschema"},{"name":"pg_net","comment":"Async HTTP","tags":["Utility","Notifications"],"link":"/guides/database/extensions/pg_net"},{"name":"pg_prewarm","comment":"prewarm relation data","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgprewarm.html"},{"name":"pg_stat_monitor","comment":"The pg_stat_monitor is a PostgreSQL Query Performance Monitoring tool, based on PostgreSQL contrib module pg_stat_statements. pg_stat_monitor provides aggregated statistics, client information, plan details including plan, and histogram information.","tags":["Utility"],"link":"/guides/database/extensions/pg_stat_monitor"},{"name":"pg_stat_statements","comment":"track execution statistics of all SQL statements executed","tags":["Admin","Utility"],"link":"/guides/database/extensions/pg_stat_statements"},{"name":"pg_surgery","comment":"extension to perform surgery on a damaged relation","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgsurgery.html"},{"name":"pg_trgm","comment":"text similarity measurement and index searching based on trigrams","tags":["Search"],"link":"https://www.postgresql.org/docs/current/pgtrgm.html"},{"name":"pgaudit","comment":"provides auditing functionality","tags":["Audit","Utility"],"link":"/guides/database/extensions/pgaudit"},{"name":"pg_walinspect","comment":"functions to inspect contents of PostgreSQL Write-Ahead Log","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgwalinspect.html"},{"name":"pgcrypto","comment":"cryptographic functions","tags":["Utility","Cryptography"],"link":"https://www.postgresql.org/docs/current/pgcrypto.html"},{"name":"pgjwt","comment":"JSON Web Token API for Postgresql","tags":["Utility","Cryptography"],"link":"/guides/database/extensions/pgjwt"},{"name":"pgroonga","comment":"Super fast and all languages supported full text search index based on Groonga","tags":["Search"],"link":"/guides/database/extensions/pgroonga"},{"name":"pgroonga_database","comment":"PGroonga database management module","tags":["Admin"],"link":"https://pgroonga.github.io/reference/modules/pgroonga-database.html"},{"name":"pgrouting","comment":"pgRouting Extension","tags":["Geo","Utility"],"link":"/guides/database/extensions/pgrouting"},{"name":"pgrowlocks","comment":"show row-level locking information","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgrowlocks.html"},{"name":"pgsodium","comment":"Postgres extension for libsodium functions","tags":["Utility","Cryptography"],"link":"/guides/database/extensions/pgsodium"},{"name":"pgstattuple","comment":"show tuple-level statistics","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/pgstattuple.html"},{"name":"pgtap","comment":"Unit testing for PostgreSQL","tags":["Utility","Testing"],"link":"/guides/database/extensions/pgtap"},{"name":"plcoffee","comment":"PL/CoffeeScript (v8) trusted procedural language","tags":["Language"],"link":"https://github.com/plv8/plv8/blob/master/doc/plv8.md#coffeescript-extension"},{"name":"pljava","comment":"PL/Java procedural language (https://tada.github.io/pljava/)","tags":["Language"],"link":"https://tada.github.io/pljava/"},{"name":"plls","comment":"PL/LiveScript (v8) trusted procedural language","tags":["Language"],"link":"https://github.com/plv8/plv8/blob/master/doc/plv8.md#livescript-extension"},{"name":"plpgsql","comment":"PL/pgSQL procedural language","tags":["Language"],"link":"https://www.postgresql.org/docs/current/plpgsql.html"},{"name":"plpgsql_check","comment":"extended check for plpgsql functions","tags":["Utility","Testing"],"link":"/guides/database/extensions/plpgsql_check"},{"name":"plv8","comment":"PL/JavaScript (v8) trusted procedural language","tags":["Language"],"link":"/guides/database/extensions/plv8"},{"name":"postgis","comment":"PostGIS geometry and geography spatial types and functions","tags":["Geo"],"link":"/guides/database/extensions/postgis"},{"name":"postgres_fdw","comment":"foreign-data wrapper for remote PostgreSQL servers","tags":["Admin"],"link":"https://www.postgresql.org/docs/current/postgres-fdw.html"},{"name":"refint","comment":"functions for implementing referential integrity (obsolete)","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/contrib-spi.html#id-1.11.7.50.5"},{"name":"rum","comment":"GIN-like index for text search","tags":["Index","Search"],"link":"/guides/database/extensions/rum"},{"name":"seg","comment":"data type for representing line segments or floating-point intervals","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/seg.html"},{"name":"sslinfo","comment":"information about SSL certificates","tags":["Admin","Utility"],"link":"https://www.postgresql.org/docs/current/sslinfo.html"},{"name":"supautils","comment":"Supabase standard library","tags":["Utility"],"link":"https://supabase.github.io/supautils/"},{"name":"tablefunc","comment":"functions that manipulate whole tables, including crosstab","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/tablefunc.html"},{"name":"tcn","comment":"Triggered change notifications","tags":["Utility","Notifications"],"link":"https://www.postgresql.org/docs/current/tcn.html"},{"name":"timescaledb","comment":"Enables scalable inserts and complex queries for time-series data","tags":["Time Series","Data Type","Utility"],"link":"/guides/database/extensions/timescaledb"},{"name":"tsm_system_rows","comment":"TABLESAMPLE method which accepts number of rows as a limit","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/tsm-system-rows.html"},{"name":"tsm_system_time","comment":"TABLESAMPLE method which accepts time in milliseconds as a limit","tags":["Utility"],"link":"https://www.postgresql.org/docs/current/tsm-system-time.html"},{"name":"unaccent","comment":"text search dictionary that removes accents","tags":["Search"],"link":"https://www.postgresql.org/docs/current/unaccent.html"},{"name":"uuid-ossp","comment":"generate universally unique identifiers (UUIDs)","tags":["Utility","Data Type"],"link":"/guides/database/extensions/uuid-ossp"},{"name":"pgvector","comment":"vector data type with similarity search","tags":["AI","Data Type","Search"],"link":"/guides/database/extensions/pgvector"},{"name":"wrappers","comment":"Foreign data wrappers developed by Supabase","tags":["Admin","Utility"],"link":"/guides/database/extensions/wrappers/overview"}]')},85377:function(e,t){t.Z={schemas:[{name:"API Edge",reference:"edge_logs",fields:[{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"event_message",type:"string"},{path:"metadata.request.cf.asOrganization",type:"string"},{path:"metadata.request.cf.asn",type:"number"},{path:"metadata.request.cf.botManagement.corporateProxy",type:"boolean"},{path:"metadata.request.cf.botManagement.detectionIds",type:"number[]"},{path:"metadata.request.cf.botManagement.ja3Hash",type:"string"},{path:"metadata.request.cf.botManagement.score",type:"number"},{path:"metadata.request.cf.botManagement.staticResource",type:"boolean"},{path:"metadata.request.cf.botManagement.verifiedBot",type:"boolean"},{path:"metadata.request.cf.city",type:"string"},{path:"metadata.request.cf.clientTcpRtt",type:"number"},{path:"metadata.request.cf.clientTrustScore",type:"number"},{path:"metadata.request.cf.colo",type:"string"},{path:"metadata.request.cf.continent",type:"string"},{path:"metadata.request.cf.country",type:"string"},{path:"metadata.request.cf.edgeRequestKeepAliveStatus",type:"number"},{path:"metadata.request.cf.httpProtocol",type:"string"},{path:"metadata.request.cf.latitude",type:"string"},{path:"metadata.request.cf.longitude",type:"string"},{path:"metadata.request.cf.metroCode",type:"string"},{path:"metadata.request.cf.postalCode",type:"string"},{path:"metadata.request.cf.region",type:"string"},{path:"metadata.request.cf.timezone",type:"string"},{path:"metadata.request.cf.tlsCipher",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certPresented",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certRevoked",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certVerified",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.clientFinished",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.clientHandshake",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.serverFinished",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.serverHandshake",type:"string"},{path:"metadata.request.cf.tlsVersion",type:"string"},{path:"metadata.request.headers.cf_connecting_ip",type:"string"},{path:"metadata.request.headers.cf_ipcountry",type:"string"},{path:"metadata.request.headers.cf_ray",type:"string"},{path:"metadata.request.headers.host",type:"string"},{path:"metadata.request.headers.referer",type:"string"},{path:"metadata.request.headers.x_client_info",type:"string"},{path:"metadata.request.headers.x_forwarded_proto",type:"string"},{path:"metadata.request.headers.x_real_ip",type:"string"},{path:"metadata.request.host",type:"string"},{path:"metadata.request.method",type:"string"},{path:"metadata.request.path",type:"string"},{path:"metadata.request.protocol",type:"string"},{path:"metadata.request.search",type:"string"},{path:"metadata.request.url",type:"string"},{path:"metadata.response.headers.cf_cache_status",type:"string"},{path:"metadata.response.headers.cf_ray",type:"string"},{path:"metadata.response.headers.content_location",type:"string"},{path:"metadata.response.headers.content_range",type:"string"},{path:"metadata.response.headers.content_type",type:"string"},{path:"metadata.response.headers.date",type:"string"},{path:"metadata.response.headers.sb_gateway_version",type:"string"},{path:"metadata.response.headers.transfer_encoding",type:"string"},{path:"metadata.response.headers.x_kong_proxy_latency",type:"string"},{path:"metadata.response.origin_time",type:"number"},{path:"metadata.response.status_code",type:"number"}]},{name:"Auth",reference:"auth_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.auth_event.action",type:"string"},{path:"metadata.auth_event.actor_id",type:"string"},{path:"metadata.auth_event.actor_username",type:"string"},{path:"metadata.auth_event.log_type",type:"string"},{path:"metadata.auth_event.traits.provider",type:"string"},{path:"metadata.auth_event.traits.user_email",type:"string"},{path:"metadata.auth_event.traits.user_id",type:"string"},{path:"metadata.auth_event.traits.user_phone",type:"string"},{path:"metadata.component",type:"string"},{path:"metadata.duration",type:"number"},{path:"metadata.host",type:"string"},{path:"metadata.level",type:"string"},{path:"metadata.method",type:"string"},{path:"metadata.msg",type:"string"},{path:"metadata.path",type:"string"},{path:"metadata.referer",type:"string"},{path:"metadata.remote_addr",type:"string"},{path:"metadata.status",type:"number"},{path:"metadata.timestamp",type:"string"}]},{name:"Storage",reference:"storage_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.context.host",type:"string"},{path:"metadata.context.pid",type:"number"},{path:"metadata.level",type:"string"},{path:"metadata.project",type:"string"},{path:"metadata.req.headers.accept",type:"string"},{path:"metadata.req.headers.cf_connecting_ip",type:"string"},{path:"metadata.req.headers.cf_ray",type:"string"},{path:"metadata.req.headers.content_length",type:"string"},{path:"metadata.req.headers.content_type",type:"string"},{path:"metadata.req.headers.host",type:"string"},{path:"metadata.req.headers.referer",type:"string"},{path:"metadata.req.headers.user_agent",type:"string"},{path:"metadata.req.headers.x_client_info",type:"string"},{path:"metadata.req.headers.x_forwarded_proto",type:"string"},{path:"metadata.req.hostname",type:"string"},{path:"metadata.req.method",type:"string"},{path:"metadata.req.remoteAddress",type:"string"},{path:"metadata.req.remotePort",type:"number"},{path:"metadata.req.url",type:"string"},{path:"metadata.reqId",type:"string"},{path:"metadata.res.statusCode",type:"number"},{path:"metadata.res.headers.content_length",type:"number"},{path:"metadata.res.headers.content_type",type:"string"},{path:"metadata.responseTime",type:"number"},{path:"metadata.tenantId",type:"string"},{path:"metadata.rawError",type:"string"}]},{name:"Function Edge",reference:"function_edge_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.deployment_id",type:"string"},{path:"metadata.execution_time_ms",type:"number"},{path:"metadata.function_id",type:"string"},{path:"metadata.project_ref",type:"string"},{path:"metadata.request.headers.accept",type:"string"},{path:"metadata.request.headers.content_length",type:"string"},{path:"metadata.request.headers.host",type:"string"},{path:"metadata.request.headers.user_agent",type:"string"},{path:"metadata.request.host",type:"string"},{path:"metadata.request.method",type:"string"},{path:"metadata.request.pathname",type:"string"},{path:"metadata.request.protocol",type:"string"},{path:"metadata.request.url",type:"string"},{path:"metadata.response.headers.content_length",type:"string"},{path:"metadata.response.headers.content_type",type:"string"},{path:"metadata.response.headers.date",type:"string"},{path:"metadata.response.headers.server",type:"string"},{path:"metadata.response.headers.vary",type:"string"},{path:"metadata.response.status_code",type:"number"},{path:"metadata.version",type:"string"}]},{name:"Function Runtime",reference:"function_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.deployment_id",type:"string"},{path:"metadata.event_type",type:"string"},{path:"metadata.execution_id",type:"string"},{path:"metadata.function_id",type:"string"},{path:"metadata.level",type:"string"},{path:"metadata.project_ref",type:"string"},{path:"metadata.region",type:"string"},{path:"metadata.timestamp",type:"string"},{path:"metadata.version",type:"string"}]},{name:"Postgres",reference:"postgres_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"},{path:"metadata.parsed.backend_type",type:"string"},{path:"metadata.parsed.command_tag",type:"string"},{path:"metadata.parsed.connection_from",type:"string"},{path:"metadata.parsed.database_name",type:"string"},{path:"metadata.parsed.error_severity",type:"string"},{path:"metadata.parsed.process_id",type:"number"},{path:"metadata.parsed.query_id",type:"number"},{path:"metadata.parsed.session_id",type:"string"},{path:"metadata.parsed.session_line_num",type:"number"},{path:"metadata.parsed.session_start_time",type:"string"},{path:"metadata.parsed.sql_state_code",type:"string"},{path:"metadata.parsed.timestamp",type:"string"},{path:"metadata.parsed.transaction_id",type:"number"},{path:"metadata.parsed.user_name",type:"string"},{path:"metadata.parsed.virtual_transaction_id",type:"string"}]},{name:"Realtime",reference:"realtime_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.level",type:"string"},{path:"metadata.measurements.connected",type:"number"},{path:"metadata.measurements.connected_cluster",type:"number"},{path:"metadata.measurements.limit",type:"number"},{path:"metadata.measurements.sum",type:"number"},{path:"metadata.external_id",type:"string"}]},{name:"PostgREST",reference:"postgrest_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"}]},{name:"PgBouncer",reference:"pgbouncer_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"}]}]}},87187:function(e,t,s){s.d(t,{z:function(){return n}});let n=[{id:"tier_free",name:"Free",nameBadge:"",costUnit:"/ month / org",href:"https://supabase.com/dashboard/new?plan=free",priceLabel:"",priceMonthly:0,warning:"Limit of 2 free organizations",description:"Perfect for passion projects & simple websites.",preface:"Get started with:",features:["Unlimited API requests","Social OAuth providers","Up to 500MB database space","Up to 1GB file storage","Up to 5GB bandwidth","Up to 50MB file uploads","Up to 50,000 monthly active users","Up to 500K Edge Function invocations","Up to 200 concurrent Realtime connections","Up to 2 million Realtime messages","1-day log retention","Community support"],footer:"Free projects are paused after 1 week of inactivity.",cta:"Get Started"},{id:"tier_pro",name:"Pro",nameBadge:"",costUnit:"/ month / org",href:"https://supabase.com/dashboard/new?plan=pro",priceLabel:"From",warning:"Usage-based plan",priceMonthly:25,description:"For production applications with the option to scale.",features:["No project pausing","Daily backups stored for 7 days","8GB database space included","100GB file storage included","250GB bandwidth included","5GB file uploads included","100,000 monthly active users included","2M Edge Function invocations included","500 concurrent Realtime connections included","5 million Realtime messages included","7-day log retention","Email support"],footer:"Your cost control settings determine if you allow over-usage.",preface:"Everything in the Free plan, plus:",cta:"Get Started"},{id:"tier_team",name:"Team",nameBadge:"New",costUnit:"/ month / org",href:"https://supabase.com/dashboard/new?plan=team",priceLabel:"From",warning:"Usage-based plan",priceMonthly:599,description:"Collaborate with different permissions and access patterns.",features:["Additional Organization member roles","Daily backups stored for 14 days","Standardised Security Questionnaire","SOC2","HIPAA available as paid add-on","SSO for Supabase Dashboard","Priority email support & SLAs","28-day log retention"],footer:"Additional fees apply for usage beyond included usage.",preface:"Everything in the Pro plan, plus:",cta:"Get Started"},{id:"tier_enterprise",name:"Enterprise",href:"https://forms.supabase.com/enterprise",description:"For large-scale applications managing serious workloads.",features:["Designated Support manager & SLAs","SSO/SAML","On-premise support","24\xd77\xd7365 premium enterprise support","Custom Security Questionnaires","Private Slack channel"],priceLabel:"",priceMonthly:"Contact us",preface:"",footer:"",cta:"Contact Us"}]},49394:function(e,t,s){s.d(t,{D:function(){return n}});let n={database:{title:"Database",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Dedicated Postgres Database",tooltips:{main:"A Postgres database with no restrictions? You get it. No pseudo limited users, you are the postgres root user.  No caveats."},plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Unlimited API requests",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Database size",tooltips:{main:"Billing is based on the average daily database size in GB throughout the billing period."},plans:{free:"500 MB included",pro:"8 GB included, then $0.125 per GB",team:"8 GB included, then $0.125 per GB",enterprise:"Custom"},usage_based:!0},{title:"Automatic backups",tooltips:{main:"Backups are entire copies of your database that can be restored in the future.",pro:"7 days of backup (if > 1TB, contact for Enterprise pricing)",team:"14 days of backup (if > 1TB, contact for Enterprise pricing)"},plans:{free:!1,pro:"7 days",team:"14 days",enterprise:"Custom"},usage_based:!1},{title:"Point in time recovery",tooltips:{main:"PITR cannot be applied retroactively, projects can only be rolled back to the point from which PITR has been applied."},plans:{free:!1,pro:"$100 per 7 days",team:"$100 per 7 days",enterprise:"$100 per 7 days, >28 days available"},usage_based:!1},{title:"Pausing",tooltips:{main:"Projects that have no activity or API requests will be paused. They can be reactivated via the dashboard"},plans:{free:"After 1 inactive week",pro:"Never",team:"Never",enterprise:"Never"},usage_based:!1},{title:"Bandwidth",tooltips:{main:"Billing is based on the total sum of outgoing traffic (includes Database, Storage, Realtime, Auth) in GB throughout your billing period."},plans:{free:"5GB included",pro:"250 GB included, then $0.09 per GB",team:"250 GB included, then $0.09 per GB",enterprise:"Custom"},usage_based:!0}]},auth:{title:"Auth",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Total Users",tooltips:{main:"The maximum number of users your project can have"},plans:{free:"Unlimited",pro:"Unlimited",team:"Unlimited",enterprise:"Unlimited"},usage_based:!1},{title:"MAUs",tooltips:{main:"Users who log in or refresh their token count towards MAU.\nBilling is based on the sum of distinct users requesting your API throughout the billing period. Resets every billing cycle."},plans:{free:"50,000 included",pro:"100,000 included, then $0.00325 per MAU",team:"100,000 included, then $0.00325 per MAU",enterprise:"Custom"},usage_based:!0},{title:"Social OAuth providers",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Custom SMTP server",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Remove Supabase branding from emails",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Audit trails",plans:{free:"1 hour",pro:"7 days",team:"28 days",enterprise:!0},usage_based:!1},{title:"Single Sign-On (SAML 2.0)",plans:{free:!1,pro:"50 included, then $0.015 per MAU",team:"50 included, then $0.015 per MAU",enterprise:"Contact Us"},usage_based:!1},{title:"Leaked password protection",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Single session per user",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Session timeouts",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Auth Hooks",plans:{free:"Custom Access Token (JWT)",pro:"Custom Access Token (JWT)",team:"All",enterprise:"All"},usage_based:!1},{title:"Advanced security features",plans:{free:!1,pro:!1,team:!1,enterprise:"Contact Us"},usage_based:!1}]},storage:{title:"Storage",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Storage",tooltips:{main:"The sum of all objects' size in your storage buckets.\nBilling is based on the average daily size in GB throughout your billing period."},plans:{free:"1 GB included",pro:"100 GB included, then $0.021 per GB",team:"100 GB included, then $0.021 per GB",enterprise:"Custom"},usage_based:!0},{title:"Custom access controls",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Max file upload size",tooltips:{main:"You can change the upload size in the dashboard"},plans:{free:"50MB",pro:"5GB",team:"5GB",enterprise:"Custom"},usage_based:!1},{title:"Image Transformations",tooltips:{main:"We count all images that were transformed in the billing period, ignoring any transformations.\nUsage example: You transform one image with four different size transformations and another image with just a single transformation. It counts as two, as only two images were transformed.\nBilling is based on the count of (origin) images that used transformations throughout the billing period. Resets every billing cycle."},plans:{free:!1,pro:"100 origin images, then $5 per 1000 origin images",team:"100 origin images, then $5 per 1000 origin images",enterprise:"Custom"},usage_based:!0},{title:"Bring your own storage provider",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1}]},edge_functions:{title:"Edge Functions",icon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",features:[{title:"Invocations",tooltips:{main:"Billing is based on the sum of all invocations, independent of response status, throughout your billing period."},plans:{free:"500K/month included",pro:"2 Million included, then $2 per 1 Million",team:"2 Million included, then $2 per 1 Million",enterprise:"Custom"},usage_based:!0},{title:"Script size",plans:{free:"10 MB",pro:"10 MB",team:"10 MB",enterprise:"Custom"},usage_based:!1},{title:"Number of functions",tooltips:{main:"Billing is based on the maximum amount of functions at any point in time throughout your billing period."},plans:{free:"10 included",pro:"100 included, then $10 per additional 100",team:"100 included, then $10 per additional 100",enterprise:"Custom"},usage_based:!0}]},realtime:{title:"Realtime",icon:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59",features:[{title:"Postgres Changes",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Concurrent Peak Connections",tooltips:{main:"Total number of successful connections. Connections attempts are not counted towards usage.\nBilling is based on the maximum amount of concurrent peak connections throughout your billing period."},plans:{free:"200 included",pro:"500 included, then $10 per 1000",team:"500 included, then $10 per 1000",enterprise:"Custom concurrent connections and volume discount"},usage_based:!0},{title:"Messages Per Month",tooltips:{main:"Count of messages going through Realtime.\nUsage example: If you do a database change and 5 clients listen to that change via Realtime, that's 5 messages. If you broadcast a message and 4 clients listen to that, that's 5 messages (1 message sent, 4 received).\nBilling is based on the total amount of messages throughout your billing period."},plans:{free:"2 Million included",pro:"5 Million included, then $2.50 per Million",team:"5 Million included, then $2.50 per Million",enterprise:"Volume discounts on messages"},usage_based:!0},{title:"Max Message Size",plans:{free:"250 KB",pro:"3 MB",team:"3 MB",enterprise:"Custom"},usage_based:!1}]},dashboard:{title:"Dashboard",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",features:[{title:"Team members",plans:{free:"Unlimited",pro:"Unlimited",team:"Unlimited",enterprise:"Unlimited"},usage_based:!1},{title:"Access controls",plans:{free:"Coming soon",pro:"Coming soon",team:!0,enterprise:!0},usage_based:!1},{title:"Audit trails",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1}]},security:{title:"Platform Security and Compliance",icon:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",features:[{title:"On Premises / BYO cloud",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Log retention (API & Database)",plans:{free:"1 day",pro:"7 days",team:"28 days",enterprise:"90 days"},usage_based:!1},{title:"Log drain",plans:{free:!1,pro:!1,team:"Coming soon",enterprise:"Coming soon"},usage_based:!1},{title:"Metrics endpoint",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"SOC2",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1},{title:"HIPAA",plans:{free:!1,pro:!1,team:"Available as paid add-on",enterprise:"Available as paid add-on"},tooltips:{main:"Available as a paid add-on on Team plan and above."},usage_based:!1},{title:"SSO",plans:{free:!1,pro:!1,team:"Contact Us",enterprise:"Contact Us"},usage_based:!1},{title:"99.9% SLA",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Access Roles",plans:{free:"Owner, Developer",pro:"Owner, Developer",team:"Additional owner(s), admin, read-only, billing admin, custom",enterprise:"Additional owner(s), admin, read-only, billing admin, custom"},usage_based:!1},{title:"Vanity URLs",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Custom Domains",tooltips:{enterprise:"Volume discounts available."},plans:{free:!1,pro:"$10 per domain per month per project add on",team:"$10 per domain per month per project add on",enterprise:"1, additional $10/domain/month"},usage_based:!1},{title:"Bring your own cloud deployment options",tooltips:{main:"On-Premises, single tenant, and managed dedicated cloud provider instance options"},plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1}]},support:{title:"Support",icon:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z",features:[{title:"Community Support",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Email Support",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Email Support SLA",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1},{title:"Designated support",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"On Boarding Support",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Designated Customer Success Team",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Security Questionnaire Help",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1}]}}},25618:function(e,t,s){var n=s(52322),a=s(69557);s(2784);var i=s(53009);let Collapsible=e=>{let{open:t,children:s,className:i,...r}=e;return(0,n.jsx)(a.fC,{asChild:r.asChild,defaultOpen:r.defaultOpen,open:t,onOpenChange:r.onOpenChange,disabled:r.disabled,className:i,children:s})};Collapsible.Trigger=function(e){let{children:t,asChild:s}=e;return(0,n.jsx)(a.xz,{asChild:s,children:t})},Collapsible.Content=function(e){let{asChild:t,children:s,className:r}=e,o=(0,i.Z)("collapsible");return(0,n.jsx)(a.VY,{asChild:t,className:[o.content,r].join(" "),children:s})},t.ZP=Collapsible},2195:function(e,t,s){var n=s(52322);s(2784);var a=s(62206),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},56770:function(e,t,s){var n=s(52322);s(2784);var a=s(21079),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},60087:function(e,t,s){var n=s(52322);s(2784);var a=s(92438),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},6225:function(e,t,s){var n=s(52322);s(2784);var a=s(95157),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},84444:function(e,t,s){var n=s(52322);s(2784);var a=s(29),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},44607:function(e,t,s){var n=s(52322);s(2784);var a=s(10341),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},91992:function(e,t,s){var n=s(52322);s(2784);var a=s(85680),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},46469:function(e,t,s){var n=s(52322);s(2784);var a=s(15736),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},22354:function(e,t,s){var n=s(52322);s(2784);var a=s(49670),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},1191:function(e,t,s){var n=s(52322);s(2784);var a=s(70177),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},11205:function(e,t,s){var n=s(52322);s(2784);var a=s(19804),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},8809:function(e,t,s){var n=s(52322);s(2784);var a=s(72227),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},96143:function(e,t,s){var n=s(52322);s(2784);var a=s(5152),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},49764:function(e,t,s){var n=s(52322);s(2784);var a=s(94570),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},53830:function(e,t,s){var n=s(52322);s(2784);var a=s(88715),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},72275:function(e,t,s){var n=s(52322);s(2784);var a=s(88951),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},37431:function(e,t,s){var n=s(52322);s(2784);var a=s(67270),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},77105:function(e,t,s){var n=s(52322);s(2784);var a=s(40506),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},5099:function(e,t,s){var n=s(52322);s(2784);var a=s(59461),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},26700:function(e,t,s){var n=s(52322);s(2784);var a=s(92795),i=s(97265);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},68706:function(e,t,s){var n=s(52322),a=s(2784),i=s(41375),r=s(59208),o=s(4120),l=s(93224),c=s(53009);t.Z=function(e){let{defaultValue:t,descriptionText:s,error:d,icon:u,inputRef:m,label:p,afterLabel:h,beforeLabel:g,labelOptional:x,layout:f,value:y,actions:j,size:v="medium",validation:b,id:w="",name:N="",...S}=e,C=(0,c.Z)("inputNumber"),{formContextOnChange:k,values:_,errors:E,handleBlur:P,touched:I,fieldLevelValidation:L}=(0,l.G)();_&&!y&&(y=_[w||N]),d||(E&&!d&&(d=E[w||N]),d=I&&I[w||N]?d:void 0),(0,a.useEffect)(()=>{b&&L(w,b(y))},[]);let A=[C.base];return d&&A.push(C.variants.error),d||A.push(C.variants.standard),u&&A.push(C.with_icon),v&&A.push(C.size[v]),S.disabled&&A.push(C.disabled),(0,n.jsx)("div",{className:S.className,children:(0,n.jsx)(i.l,{label:p,afterLabel:h,beforeLabel:g,labelOptional:x,layout:f,id:w,error:d,descriptionText:s,style:S.style,size:v,children:(0,n.jsxs)("div",{className:C.container,children:[(0,n.jsx)("input",{id:w,name:N,onChange:function(e){S.onChange&&S.onChange(e),k&&k(e),b&&L(w,b(e.target.value))},onBlur:function(e){P&&P(e),S.onBlur&&S.onBlur(e)},type:"number",ref:m,value:y,className:A.join(" "),...S}),u&&(0,n.jsx)(o.Z,{icon:u}),d||j?(0,n.jsxs)("div",{className:C.actions_container,children:[d&&(0,n.jsx)(r.Z,{size:v}),j&&j]}):null]})})})}},1794:function(e,t,s){s.d(t,{Z:function(){return Loading}});var n=s(52322);s(2784);var a=s(53009),i=s(13781);function Loading(e){let{children:t,active:s}=e,r=(0,a.Z)("loading"),o=[r.base],l=[r.content.base];s&&l.push(r.content.active);let c=[r.spinner];return(0,n.jsxs)("div",{className:o.join(" "),children:[(0,n.jsx)("div",{className:l.join(" "),children:t}),s&&(0,n.jsx)(i.Z,{size:"xlarge",className:c})]})}},22754:function(e,t,s){s.d(t,{ZP:function(){return l}});var n=s(52322),a=s(2784);function Typography(e){let{children:t,className:s,tag:a="div",style:i}=e,r="".concat(a);return(0,n.jsx)(r,{style:i,children:t})}Typography.Title=function(e){let{className:t,level:s=1,children:a,style:i}=e,r="h".concat(s);return(0,n.jsx)(r,{style:i,children:a})},Typography.Text=function(e){let{className:t,children:s,style:a,type:i,disabled:r,mark:o,code:l,keyboard:c,underline:d,strikethrough:u,strong:m,small:p}=e;return l?(0,n.jsx)("code",{style:a,children:s}):o?(0,n.jsx)("mark",{style:a,children:s}):c?(0,n.jsx)("kbd",{style:a,children:s}):m?(0,n.jsx)("strong",{style:a,children:s}):(0,n.jsx)("span",{style:a,children:s})},Typography.Link=function(e){let{children:t,target:s="_blank",href:a,className:i,onClick:r,style:o}=e;return(0,n.jsx)("a",{onClick:r,href:a,target:s,rel:"noopener noreferrer",style:o,children:t})};let i=(0,a.createContext)({type:"text"}),MenuContextProvider=e=>{let{type:t}=e;return(0,n.jsx)(i.Provider,{value:{type:t},children:e.children})},useMenuContext=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};var r=s(53009),o=s(4220);function Menu(e){let{children:t,className:s,ulClassName:a,style:i,type:r="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:i,children:(0,n.jsx)(MenuContextProvider,{type:r,children:(0,n.jsx)("ul",{className:a,children:t})})})}Menu.Item=function(e){let{children:t,icon:s,active:a,rounded:i,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}=e,m=(0,r.Z)("menu"),{type:p}=useMenuContext(),h=[m.item.base];h.push(m.item.variants[p].base),a?h.push(m.item.variants[p].active):h.push(m.item.variants[p].normal);let g=[m.item.content.base];a?g.push(m.item.content.active):g.push(m.item.content.normal);let x=[m.item.icon.base];return a?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,o.cn)("outline-none",h),style:u,onClick:l,"aria-current":a?"page":void 0,children:[s&&(0,n.jsx)("div",{className:"".concat(x.join(" ")," min-w-fit"),children:s}),(0,n.jsx)("span",{className:g.join(" "),children:t})]})},Menu.Group=function(e){let{children:t,icon:s,title:a}=e,i=(0,r.Z)("menu"),{type:o}=useMenuContext();return(0,n.jsxs)("div",{className:[i.group.base,i.group.variants[o]].join(" "),children:[s&&(0,n.jsx)("span",{className:i.group.icon,children:s}),(0,n.jsx)("span",{className:i.group.content,children:a}),t]})},Menu.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(Typography.Text,{children:(0,n.jsx)("span",{children:t})})})};var l=Menu},39599:function(e,t,s){s.d(t,{Z:function(){return c}});var n=s(52322),a=s(2784),i=s(41375);let r=(0,a.createContext)({parentCallback:e=>{},type:"",name:"",activeId:"",parentSize:""});var o=s(93224),l=s(53009);function Radio(e){let{id:t=function(){let e=("00000"+(46656*Math.random()|0).toString(36)).slice(-3),t=("00000"+(46656*Math.random()|0).toString(36)).slice(-3);return e+t}(),disabled:s,value:a,label:i,afterLabel:c,beforeLabel:d,description:u,name:m,checked:p,className:h,onChange:g,onBlur:x,hidden:f=!1,size:y="medium",align:j="vertical",optionalLabel:v,addOnBefore:b,children:w}=e,N=(0,l.Z)("radio"),{handleBlur:S}=(0,o.G)();function handleBlurEvent(e){S&&S(e),x&&x(e)}return(0,n.jsx)(r.Consumer,{children:e=>{let{parentCallback:r,type:o,name:l,activeId:x,parentSize:S}=e;y=S||y;let C=x===t||!!p||!1!==p&&void 0,k=[h,N.variants[o].container.base,"list"===o&&!f&&N.variants[o].container.size[y]];return k.push(N.variants[o].base),k.push(N.variants[o].size[y]),C?k.push(N.variants[o].active):k.push(N.variants[o].inactive),s&&k.push(N.disabled),"list"!==o&&(f=!0),(0,n.jsxs)("label",{htmlFor:t,className:k.join(" "),children:[(0,n.jsx)("input",{id:t,name:l||m,type:"radio",className:[N.base,N.size[y],f&&N.hidden,N.variants[o].radio_offset,""].join(" "),checked:C,disabled:s,value:a||t,onChange:e=>{r&&r(e),g&&g(e)},onBlur:handleBlurEvent}),b,w||(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:[N.label.base,N.label[y],N.variants[o].container.align[j]].join(" "),children:[d&&(0,n.jsx)("div",{className:[N.label_before.base,N.label_before[y]].join(" "),children:d}),(0,n.jsx)("div",{children:i}),c&&(0,n.jsx)("div",{className:[N.label_after.base,N.label_after[y]].join(" "),children:c}),u&&(0,n.jsx)("div",{className:[N.description.base,N.description[y]].join(" "),children:u})]}),v&&(0,n.jsx)("div",{className:[N.optionalLabel.base,N.optionalLabel[y]].join(" "),children:v})]})]})}})}Radio.Group=function(e){let{id:t,layout:s,error:c,descriptionText:d,label:u,afterLabel:m,beforeLabel:p,labelOptional:h,children:g,className:x,type:f="list",options:y,value:j,name:v,onChange:b,size:w="medium",validation:N,groupClassName:S,labelsLayout:C="vertical"}=e,[k,_]=(0,a.useState)(""),E=(0,l.Z)("radio"),{formContextOnChange:P,values:I,errors:L,touched:A,fieldLevelValidation:T}=(0,o.G)();return I&&!j&&(j=I[t||v]),c||(L&&!c&&(c=L[t||v]),c=A&&A[t||v]?c:void 0),(0,a.useEffect)(()=>{N&&T(t,N(j))},[]),(0,a.useEffect)(()=>{_(j)},[j]),(0,n.jsx)("fieldset",{name:v,className:x,children:(0,n.jsx)(i.l,{nonBoxInput:!0,label:u,afterLabel:m,beforeLabel:p,labelOptional:h,layout:s,id:t,error:c,descriptionText:d,size:w,labelLayout:C,children:(0,n.jsx)("div",{className:S||E.variants[f].group,children:(0,n.jsx)(r.Provider,{value:{parentCallback:function(e){b&&b(e),P&&P(e),N&&T(t,N(e.target.value)),_(e.target.id)},type:f,name:v,activeId:k,parentSize:w},children:y?y.map(e=>(0,n.jsx)(Radio,{id:e.id,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,value:e.value,description:e.description})):g})})})})};var c=Radio},39381:function(e,t,s){var n=s(52322),a=s(2784),i=s(41375),r=s(59208),o=s(4120),l=s(93224),c=s(53009);function Select(e){let{autoComplete:t,autofocus:s,children:d,className:u,descriptionText:m,disabled:p,error:h,icon:g,id:x="",inputRef:f,label:y,afterLabel:j,beforeLabel:v,labelOptional:b,layout:w,name:N="",onChange:S,onBlur:C,placeholder:k,required:_,value:E,defaultValue:P,style:I,size:L="medium",borderless:A=!1,validation:T,...R}=e,{formContextOnChange:D,values:z,errors:Z,handleBlur:F,touched:O,fieldLevelValidation:U}=(0,l.G)();z&&!E&&(E=z[x]),h||(Z&&!h&&(h=Z[x||N]),h=O&&O[x||N]?h:void 0),(0,a.useEffect)(()=>{T&&U(x,T(E))},[]);let M=(0,c.Z)("select"),B=[M.container];u&&B.push(u);let q=[M.base];return h&&q.push(M.variants.error),h||q.push(M.variants.standard),g&&q.push(M.with_icon),L&&q.push(M.size[L]),p&&q.push(M.disabled),(0,n.jsx)(i.l,{label:y,afterLabel:j,beforeLabel:v,labelOptional:b,layout:w,id:x,error:h,descriptionText:m,className:u,style:I,size:L,children:(0,n.jsxs)("div",{className:M.container,children:[(0,n.jsx)("select",{id:x,name:N,defaultValue:P,autoComplete:t,autoFocus:s,className:q.join(" "),onChange:function(e){S&&S(e),D&&D(e),T&&U(x,T(e.target.value))},onBlur:function(e){F&&F(e),C&&C(e)},ref:f,value:E,disabled:p,required:_,placeholder:k,...R,children:d}),g&&(0,n.jsx)(o.Z,{icon:g}),h&&(0,n.jsx)("div",{className:M.actions_container,children:h&&(0,n.jsx)(r.Z,{size:L})}),(0,n.jsx)("span",{className:M.chevron_container,children:(0,n.jsx)("svg",{className:M.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}Select.Option=function(e){let{value:t,children:s,selected:a}=e;return(0,n.jsx)("option",{value:t,selected:a,children:s})},Select.OptGroup=function(e){let{label:t,children:s}=e;return(0,n.jsx)("optgroup",{label:t,children:s})},t.ZP=Select},66768:function(e,t,s){var n=s(52322),a=s(70241),i=s(24990);s(2784);var r=s(94580),o=s(53009);let SidePanel=e=>{let{id:t,disabled:s,className:l,children:c,header:d,visible:u,open:m,size:p="medium",loading:h,align:g="right",hideFooter:x=!1,customFooter:f,onConfirm:y,onCancel:j,confirmText:v="Confirm",cancelText:b="Cancel",triggerElement:w,defaultOpen:N,tooltip:S,...C}=e,k=(0,o.Z)("sidepanel"),_=f||(0,n.jsxs)("div",{className:k.footer,children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.z,{disabled:h,type:"default",onClick:()=>j?j():null,children:b})}),void 0!==y&&(0,n.jsxs)(i.fC,{delayDuration:0,children:[(0,n.jsx)(i.xz,{asChild:!0,children:(0,n.jsx)("div",{children:(0,n.jsx)(r.z,{htmlType:"submit",disabled:s||h,loading:h,onClick:()=>y?y():null,children:v})})}),void 0!==S&&(0,n.jsx)(i.h_,{children:(0,n.jsxs)(i.VY,{side:"bottom",children:[(0,n.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:S})})]})})]})]});return m=m||u,(0,n.jsxs)(a.fC,{open:m,onOpenChange:function(e){void 0!==u&&!e&&j&&j()},defaultOpen:N,children:[w&&(0,n.jsx)(a.xz,{className:k.trigger,children:w}),(0,n.jsxs)(a.h_,{children:[(0,n.jsx)(a.aV,{className:k.overlay}),(0,n.jsxs)(a.VY,{className:[k.base,k.size[p],k.align[g],l&&l].join(" "),onOpenAutoFocus:C.onOpenAutoFocus,onCloseAutoFocus:C.onCloseAutoFocus,onEscapeKeyDown:C.onEscapeKeyDown,onPointerDownOutside:C.onPointerDownOutside,onInteractOutside:e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.closest("#toast");s&&e.preventDefault(),C.onInteractOutside&&C.onInteractOutside(e)},children:[d&&(0,n.jsx)("header",{className:k.header,children:d}),(0,n.jsx)("div",{className:k.contents,children:c}),!x&&_]})]})]})};SidePanel.Content=function(e){let{children:t,className:s}=e,a=(0,o.Z)("sidepanel");return(0,n.jsx)("div",{className:[a.content,s].join(" ").trim(),children:t})},SidePanel.Separator=function(){let e=(0,o.Z)("sidepanel");return(0,n.jsx)("div",{className:e.separator})},t.ZP=SidePanel},69218:function(e,t,s){s.d(t,{NI:function(){return h},Wi:function(){return FormField},l0:function(){return c},lX:function(){return p},pf:function(){return g},xJ:function(){return m},zG:function(){return x}});var n=s(52322),a=s(2784),i=s(49815),r=s(63955),o=s(4220),l=s(22938);let c=r.RV,d=a.createContext({}),FormField=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(r.Qr,{...t})})},useFormField=()=>{let e=a.useContext(d),t=a.useContext(u),{getFieldState:s,formState:n}=(0,r.Gc)(),i=s(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},u=a.createContext({}),m=a.forwardRef((e,t)=>{let{className:s,...i}=e,r=a.useId();return(0,n.jsx)(u.Provider,{value:{id:r},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",s),...i})})});m.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e,{error:i,formItemId:r}=useFormField();return(0,n.jsx)(l._,{ref:t,className:(0,o.cn)(i&&"text-destructive",s,"leading-normal"),htmlFor:r,...a})});p.displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:r,formDescriptionId:o,formMessageId:l}=useFormField();return(0,n.jsx)(i.g7,{ref:t,id:r,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...s})});h.displayName="FormControl";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:i}=useFormField();return(0,n.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm text-foreground-light",s),...a})});g.displayName="FormDescription";let x=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e,{error:r,formMessageId:l}=useFormField(),c=r?String(null==r?void 0:r.message):a;return c?(0,n.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm text-destructive",s),...i,children:c}):null});x.displayName="FormMessage"},84283:function(e,t,s){s.d(t,{I:function(){return o}});var n=s(52322),a=s(2784),i=s(4220);let r=["bg-control"],o=a.forwardRef((e,t)=>{let{className:s,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-control bg-control px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50",...r,s),ref:t,...o})});o.displayName="Input"},22938:function(e,t,s){s.d(t,{_:function(){return c}});var n=s(52322),a=s(2784),i=s(23707),r=s(10929),o=s(4220);let l=(0,r.j)("text-sm text leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,o.cn)(l(),s),...a})});c.displayName=i.f.displayName}}]);