(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9578],{93759:function(e,t,n){var r=n(13324),i=n(82857),a=n(17297);e.exports=function(e,t,n){for(var s=-1,o=t.length,l={};++s<o;){var c=t[s],d=r(e,c);n(d,c)&&i(l,a(c,e),d)}return l}},82857:function(e,t,n){var r=n(60091),i=n(17297),a=n(39045),s=n(29259),o=n(33812);e.exports=function(e,t,n,l){if(!s(e))return e;t=i(t,e);for(var c=-1,d=t.length,u=d-1,p=e;null!=p&&++c<d;){var m=o(t[c]),f=n;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(c!=u){var x=p[m];void 0===(f=l?l(x,m,p):void 0)&&(f=s(x)?x:a(t[c+1])?[]:{})}r(p,m,f),p=p[m]}return e}},76939:function(e,t,n){var r=n(1897),i=n(12680),a=n(18582);e.exports=function(e){return r(e,a,i)}},12680:function(e,t,n){var r=n(65067),i=n(47353),a=n(80633),s=n(30981),o=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:s;e.exports=o},11570:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},99686:function(e,t,n){var r=n(68286),i=n(11570),a=n(42208);e.exports=function(e,t){return a(e,i(r(t)))}},42208:function(e,t,n){var r=n(50343),i=n(68286),a=n(93759),s=n(76939);e.exports=function(e,t){if(null==e)return{};var n=r(s(e),function(e){return[e]});return t=i(t),a(e,n,function(e,n){return t(e,n[0])})}},99354:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(56626);let i=(0,r.Z)("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]])},87541:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor",function(){return n(11757)}])},11539:function(e,t,n){"use strict";var r=n(52322),i=n(34291),a=n.n(i),s=n(2784),o=n(94580);t.Z=e=>{let{loading:t=!1,disableApply:n=!1,hideApply:i=!1,children:l,applyButtonLabel:c="Apply",backButtonLabel:d="Back",applyFunction:u,closePanel:p=a(),formId:m}=e,[f,x]=(0,s.useState)(!1),applyCallback=()=>new Promise(e=>u(e)),onSelectApply=async()=>{x(!0),await applyCallback(),x(!1)};return(0,r.jsxs)("div",{className:"flex w-full justify-end space-x-3 border-t border-default px-3 py-4",children:[(0,r.jsx)(o.z,{size:"small",type:"default",htmlType:"button",onClick:p,disabled:f||t,children:d}),l,void 0!==u?(0,r.jsx)(o.z,{size:"small",onClick:onSelectApply,disabled:n||f||t,loading:f||t,children:c}):i?(0,r.jsx)("div",{}):(0,r.jsx)(o.z,{size:"small",disabled:t||n,loading:t,htmlType:"submit",form:m,children:c})]})}},40127:function(e,t,n){"use strict";n.d(t,{Z:function(){return ColumnEditor_ColumnType}});var r=n(52322),i=n(34291),a=n.n(i),s=n(39097),o=n.n(s),l=n(31915),c=n(29245),d=n(27087);n(2784);var u=n(26445),p=n(97265),IconType_IconType=function(e){return(0,r.jsx)(p.Z,{icon:u.Z,...e})},m=n(99311),IconToggleRight_IconToggleRight=function(e){return(0,r.jsx)(p.Z,{icon:m.Z,...e})},f=n(60240),x=n(73205),h=n(94580),y=n(63157),v=n(75685),b=n(34876),ColumnEditor_ColumnType=e=>{let{value:t,enumTypes:n=[],className:i,size:s="medium",layout:u,error:p,disabled:m=!1,showLabel:g=!0,description:j,showRecommendation:w=!1,onOptionSelect:N=a()}=e,_=v.DL.concat(n.map(e=>e.name)),z=!t||_.includes(t),O=v.VP[t];if(!z)return(0,r.jsx)(l.Z,{readOnly:!0,disabled:!0,label:g?"Type":"",layout:g?"horizontal":void 0,className:"md:gap-x-0",size:"small",value:t,descriptionText:g?"Custom non-native psql data types cannot currently be changed to a different data type via Supabase Studio":""});let inferIcon=e=>{switch(e){case"number":return(0,r.jsx)(c.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"time":return(0,r.jsx)(d.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"text":return(0,r.jsx)(IconType_IconType,{size:16,className:"text-foreground",strokeWidth:1.5});case"json":return(0,r.jsx)("div",{className:"text-foreground",style:{padding:"0px 1px"},children:"{ }"});case"bool":return(0,r.jsx)(IconToggleRight_IconToggleRight,{size:16,className:"text-foreground",strokeWidth:1.5});default:return(0,r.jsx)("div",{})}};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(f.Z,{label:g?"Type":"",layout:u||(g?"horizontal":"vertical"),value:t,size:s,error:p,disabled:m,descriptionText:j,className:"".concat(i," ").concat(m?"column-type-disabled":""," rounded-md"),onChange:e=>N(e),optionsWidth:480,children:[(0,r.jsx)(f.Z.Option,{value:"",label:"---",children:"---"},"empty"),n.length>0?(0,r.jsx)(f.Z.Option,{disabled:!0,value:"header-1",label:"header-1",children:"Other Data Types"},"header-1"):(0,r.jsx)(r.Fragment,{}),n.length>0?n.map(e=>(0,r.jsx)(f.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>(0,r.jsx)(b.Z,{size:16,className:"text-foreground",strokeWidth:1.5}),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("p",{className:"text-foreground",children:e.name}),void 0!==e.comment&&(0,r.jsx)("p",{className:"text-foreground-lighter",children:e.comment})]})},e.name)):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(f.Z.Option,{disabled:!0,value:"header-2",label:"header-2",children:"PostgreSQL Data Types"}),v.N0.map(e=>(0,r.jsx)(f.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>inferIcon(e.type),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-foreground",children:e.name}),(0,r.jsx)("span",{className:"text-foreground-lighter",children:e.description})]})},e.name))]}),w&&void 0!==O&&(0,r.jsxs)(x.b,{withIcon:!0,variant:"warning",title:(0,r.jsxs)(r.Fragment,{children:["It is recommended to use ",(0,r.jsx)("code",{className:"text-xs",children:O.alternative})," ","instead"]}),children:[(0,r.jsxs)("p",{children:["Postgres recommends against using the data type ",(0,r.jsx)("code",{className:"text-xs",children:t})," ","unless you have a very specific use case."]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,r.jsx)(h.z,{asChild:!0,type:"default",icon:(0,r.jsx)(y.Z,{}),children:(0,r.jsx)(o(),{href:O.reference,target:"_blank",rel:"noreferrer",children:"Read more"})}),(0,r.jsxs)(h.z,{type:"primary",onClick:()=>N(O.alternative),children:["Use ",O.alternative]})]})]})]})}},75685:function(e,t,n){"use strict";n.d(t,{BB:function(){return l},DL:function(){return m},Ks:function(){return c},N0:function(){return x},VP:function(){return f},XO:function(){return u},YF:function(){return o},lb:function(){return d},nA:function(){return p}});var r=n(829),i=n.n(r),a=n(22487),s=n.n(a);let o=["json","jsonb"],l=["text","varchar"],c=["timestamp","timestamptz"],d=["date"],u=["time","timetz"],p=s()(c,d,u),m=i()(s()(["int2","int4","int8","float4","float8","numeric","double precision"],o,l,p,["uuid","bool","vector"])),f={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},x=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"}]},26861:function(e,t,n){"use strict";n.d(t,{iN:function(){return FormActions},ph:function(){return FormHeader},by:function(){return FormPanel},hj:function(){return FormSection},B4:function(){return FormSectionContent},S0:function(){return FormSectionLabel},ld:function(){return FormsContainer}});var r=n(52322);function FormsContainer(e){return(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-5 pt-12 pb-20",children:[e.header&&(0,r.jsx)("h1",{className:"text-foreground mb-8 text-3xl",children:e.header}),(0,r.jsx)("div",{className:"space-y-20",children:e.children})]})}var i=n(39097),a=n.n(i),s=n(29071),o=n(94580),l=n(63157);let FormHeader=e=>{let{title:t,description:n,docsUrl:i}=e;return(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl",children:(0,r.jsx)(s.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t})}),n&&(0,r.jsx)("div",{className:"text-foreground-lighter text-sm",children:(0,r.jsx)(s.D,{children:n})})]}),void 0!==i&&(0,r.jsx)(o.z,{asChild:!0,type:"default",icon:(0,r.jsx)(l.Z,{}),children:(0,r.jsx)(a(),{href:i,target:"_blank",rel:"noreferrer",children:"Documentation"})})]})};var c=n(2784);let FormSection=e=>{let{children:t,id:n,header:i,disabled:a,className:s}=e;return(0,r.jsxs)("div",{id:n,className:["grid grid-cols-12 gap-6 px-8 py-8","".concat(a?" opacity-30":" opacity-100"),"".concat(s)].join(" "),children:[i,t]})},FormSectionLabel=e=>{let{children:t,className:n="",description:i}=e;return void 0!==i?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(n),children:[(0,r.jsx)("label",{className:"text-foreground text-sm",children:t}),i]}):(0,r.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(n),children:t})},Shimmer=()=>(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,r.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,r.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,r.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),FormSectionContent=e=>{let{children:t,loading:n=!0,fullWidth:i,className:a}=e;return(0,r.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(i&&"!col-span-12","\n        ").concat(a,"\n      "),children:n?c.Children.map(t,()=>(0,r.jsx)(Shimmer,{})):t})},FormPanel=e=>{let{children:t,header:n,footer:i}=e;return(0,r.jsxs)("div",{className:" bg-surface-100 border-default overflow-hidden  rounded-md border shadow",children:[n&&(0,r.jsx)("div",{className:"border-default border-b px-8 py-4",children:n}),(0,r.jsx)("div",{className:"divide-border flex flex-col gap-0 divide-y",children:t}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"border-default border-t"}),i]})]})},FormActions=e=>{let{form:t,hasChanges:n,handleReset:i,helper:a,disabled:s=!1,isSubmitting:l,submitText:c="Save"}=e,d=l||s||!n&&void 0!==n;return(0,r.jsxs)("div",{className:["flex w-full items-center gap-2",a?"justify-between":"justify-end"].join(" "),children:[a&&(0,r.jsx)("span",{className:"text-sm text-foreground-lighter",children:a}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.z,{disabled:d,type:"default",htmlType:"reset",onClick:()=>i(),children:"Cancel"}),(0,r.jsx)(o.z,{form:t,type:"primary",htmlType:"submit",disabled:d,loading:l,children:c})]})]})}},86323:function(e,t,n){"use strict";n.d(t,{z:function(){return useDatabasePublicationsQuery}});var r=n(58943),i=n(9402),a=n(37248);async function getDatabasePublications(e,t){let{projectRef:n,connectionString:r}=e;if(!n)throw Error("projectRef is required");let a=new Headers;r&&a.set("x-connection-encrypted",r);let{data:s,error:o}=await (0,i.U2)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":r},path:{ref:n}},headers:a,signal:t});if(o)throw o;return s}let useDatabasePublicationsQuery=function(e){let{projectRef:t,connectionString:n}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(a.z.list(t),e=>{let{signal:r}=e;return getDatabasePublications({projectRef:t,connectionString:n},r)},{enabled:i&&void 0!==t,...s})}},59600:function(e,t,n){"use strict";n.d(t,{u:function(){return useDatabasePublicationUpdateMutation}});var r=n(55830),i=n(62350),a=n(62202),s=n(9402),o=n(37248);async function updateDatabasePublication(e){let{projectRef:t,connectionString:n,id:r,tables:i,publish_insert:a,publish_update:o,publish_delete:l,publish_truncate:c}=e,d=new Headers;n&&d.set("x-connection-encrypted",n);let u={id:r};void 0!==i&&(u.tables=i),void 0!==a&&(u.publish_insert=a),void 0!==o&&(u.publish_update=o),void 0!==l&&(u.publish_delete=l),void 0!==c&&(u.publish_truncate=c);let{data:p,error:m}=await (0,s.r$)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":n},path:{ref:t},query:{id:r}},body:u,headers:d});if(m)throw m;return p}let useDatabasePublicationUpdateMutation=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.NL)();return(0,i.D)(e=>updateDatabasePublication(e),{async onSuccess(t,n,r){let{projectRef:i}=n;await s.invalidateQueries(o.z.list(i)),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?a.Am.error("Failed to update database publication: ".concat(e.message)):t(e,n,r)},...n})}},37248:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});let r={list:e=>["projects",e,"database-publications"]}},666:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});let r={list:e=>["projects",e,"views"],listBySchema:(e,t)=>[...r.list(e),t],view:(e,t)=>[...r.list(e),t]}},11757:function(e,t,n){"use strict";n.r(t);var r=n(52322),i=n(5632),a=n(60674),s=n(48271),o=n(51373),l=n(2755);let TableEditorPage=()=>{let{ref:e}=(0,a.UO)(),t=(0,i.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.ub,{}),(0,r.jsx)(s.l5,{onTableCreated:n=>{t.push("/project/".concat(e,"/editor/").concat(n.id))}})]})};TableEditorPage.getLayout=e=>(0,r.jsx)(l.C,{children:(0,r.jsx)(o.lz,{children:e})}),t.default=TableEditorPage},27087:function(e,t,n){"use strict";var r=n(52322);n(2784);var i=n(78046),a=n(97265);t.Z=function(e){return(0,r.jsx)(a.Z,{icon:i.Z,...e})}},59343:function(e,t,n){"use strict";var r=n(52322);n(2784);var i=n(48869),a=n(97265);t.Z=function(e){return(0,r.jsx)(a.Z,{icon:i.Z,...e})}},29245:function(e,t,n){"use strict";var r=n(52322);n(2784);var i=n(83178),a=n(97265);t.Z=function(e){return(0,r.jsx)(a.Z,{icon:i.Z,...e})}},50468:function(e,t,n){"use strict";var r=n(2784),i=n(13980),a=n.n(i);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=(0,r.forwardRef)(function(e,t){var n=e.color,i=e.size,a=void 0===i?24:i,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["color","size"]);return r.createElement("svg",_extends({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),r.createElement("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),r.createElement("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.createElement("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.createElement("line",{x1:"17",y1:"18",x2:"3",y2:"18"}))});s.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},s.displayName="AlignLeft",t.Z=s},78046:function(e,t,n){"use strict";var r=n(2784),i=n(13980),a=n.n(i);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=(0,r.forwardRef)(function(e,t){var n=e.color,i=e.size,a=void 0===i?24:i,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["color","size"]);return r.createElement("svg",_extends({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),r.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))});s.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},s.displayName="Calendar",t.Z=s}},function(e){e.O(0,[6139,1715,1187,6653,3844,8421,9362,4796,806,2591,4019,1971,3614,6782,1915,4079,4964,8211,452,8108,8271,9774,2888,179],function(){return e(e.s=87541)}),_N_E=e.O()}]);